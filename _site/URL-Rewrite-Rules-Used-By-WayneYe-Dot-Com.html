<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.3 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>URL Rewrite Rules used by WayneYe.com - Wayneâ€™s Geek Life</title>
<meta name="description" content="I&#39;ve successfully transferred my website to winhost, now the architecture is IIS 7.5 + ASP.NET 4.0 + SQL Server 2008 R2 + HTML5, this blog post is a summary about&nbsp;URL Rewrite Rules used by WayneYe.com.RESTful URL for blogsBlog posts are absolutely the soul of a blog website, comparing with blog URL format: &quot;/yyyy/MM/{Blog_Title}&quot;, I actually prefer &quot;/Blog/{Blog_Title}&quot;, more simpler/shorter, in additional and more important, generally speacking,valuable content is valuable no matter when it was posted, for example, a developer is searching C# covariance &amp; contravariance articles, two articles separately posted on 3/28/2010 and 1/25/2011 won&#39;t make ANY difference for this developer.Now that all my blogs take URI format like: &quot;http://WayneYe.com/Blog/{Blog_Title}&quot;, it is so called &quot;Permalink&quot;, I must ensure there is no duplicate blog titles (not case sensetive even if I can enable URL case sensitive through IIS manager, it would be quite confuse to the end user), so actually in my backend blog post page I did a DB check for existing blog titiles:)Here is the Blog URL rewrite config XML stored in my Web.config: &lt;rule name=&quot;BlogPermalinkRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Blog/([A-Za-z0-9-_()^%]{1,})$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;ViewBlog.aspx?Permalink={R:1}&quot; /&gt; &lt;/rule&gt;Navigate LinksThat&#39;s so simply, rewrite to an ASPX page under a matched directory: &lt;rule name=&quot;NaviAlbum&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;Album&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;Album/Index.aspx&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;NaviVideo&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;Video&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;Video/Index.aspx&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;NaviTags&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;Tags&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;Tags/Index.aspx&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;NaviVisitRecord&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;VisitRecord&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;VisitRecord/Index.aspx&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;NaviAboutMe&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;AboutMe&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;AboutMe/Index.aspx&quot; /&gt; &lt;/rule&gt;Category/Archive/TagThese three type of URLs are similar, but makes a log of sense to a website comforming REST. &lt;rule name=&quot;CategoryRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Category/([A-Za-z0-9-_/]{1,})$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;ShowBlogs.aspx?Condition=Category&amp;amp;Cat={R:1}&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;BlogTagRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Tag/(.*)$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;SearchTag.aspx?t={R:1}&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;ArchiveYearRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Archive/(\d{4})$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;ShowBlogs.aspx?Condition=Time&amp;amp;Year={R:1}&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;ArchiveYearMonthRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Archive/(\d{4})/(\d{2})$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;ShowBlogs.aspx?Condition=Time&amp;amp;Year={R:1}&amp;amp;Month={R:2}&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;ArchiveYearMonthDayRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Archive/(\d{4})/(\d{2})/(\d{1,2})$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;ShowBlogs.aspx?Condition=Time&amp;amp;Year={R:1}&amp;amp;Month={R:2}&amp;amp;Day={R:3}&quot; /&gt; &lt;/rule&gt;Define Atom/RSS feeds MIME typeWayneYe.com programmatically generates Atom/RSS feeds in plain XML format, the two XML file exists phisically under Feeds/Atom/Atom.xml and Feeds/RSS/RSS.xml, other then rewrite URL for both, one more important thing to do is override the &quot;text/xml&quot; MIME type&nbsp;to follow the standard:Atom feeds MIME type should be &quot;application/atom+xml&quot;RSS feeds MIME type should be &quot;application/rss+xml&quot;.To achieve this needs a little bit more work: intercepting response stream and overriding server variable, this requires adding an &quot;Allowed Server Variables&quot;: this is done by the following steps:Open IIS Manager, go to my web application.Go to &quot;URL Rewrite&quot;In the Actions panel, select &quot;View Server Variables&quot;.Add a new Server Variable: &quot;RESPONSE_CONTENT_TYPE&quot;.Here is the config XML for rewriting the request: &lt;rule name=&quot;AtomFeedRewrite&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;Feeds/Atom&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;Feeds/Atom/Atom.xml&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;RSSFeedRewrite&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;Feeds/RSS&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;Feeds/RSS/RSS.xml&quot; /&gt; &lt;/rule&gt;And below is for overriding the &quot;text/xml&quot; MIME type config XML: &lt;outboundRules&gt; &nbsp;&nbsp;&nbsp; &lt;preConditions&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;preCondition name=&quot;Match Atom Feeds&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add input=&quot;{REQUEST_URI}&quot; pattern=&quot;Feeds/Atom&quot; /&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/preCondition&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;preCondition name=&quot;Match RSS Feeds&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add input=&quot;{REQUEST_URI}&quot; pattern=&quot;Feeds/RSS&quot; /&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/preCondition&gt; &nbsp;&nbsp;&nbsp; &lt;/preConditions&gt; &nbsp;&nbsp;&nbsp; &lt;rule name=&quot;AtomFeedsIMEType&quot; preCondition=&quot;Match Atom Feeds&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;match serverVariable=&quot;RESPONSE_CONTENT_TYPE&quot; pattern=&quot;(.*)&quot; negate=&quot;false&quot; /&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; value=&quot;application/atom+xml&quot; replace=&quot;true&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;/rule&gt; &nbsp;&nbsp;&nbsp; &lt;rule name=&quot;RSSFeedsIMEType&quot; preCondition=&quot;Match RSS Feeds&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;match serverVariable=&quot;RESPONSE_CONTENT_TYPE&quot; pattern=&quot;(.*)&quot; negate=&quot;false&quot; /&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; value=&quot;application/rss+xml&quot; replace=&quot;true&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;/rule&gt; &lt;/outboundRules&gt;Result:&nbsp;Customize HTTP Response HeadersI added a customized (non-standard) &quot;Auther&quot; HTTP response Header for all the requests, just for fun^_^The config code is below: &lt;outboundRules&gt; &nbsp;&nbsp;&nbsp; &lt;rule name=&quot;WayneHttpHeader&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;match serverVariable=&quot;RESPONSE_Author&quot; pattern=&quot;^$&quot; /&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; value=&quot;Wayne Ye (Admin@WayneYe.com)&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;/rule&gt; &lt;/outboundRules&gt;Screenshot for an example of &quot;Auther&quot; header appears when requesting to http://WayneYe.com/AboutMe.Canonical domain URLCanonical domain URL is a crucial fact for a website which want to make good SEO, URL Rewrite module already provides a template to help you do this by simply giving it your preferred domain. I did and the result is showing below:ConclusionIIS URL Rewrite Module is the most powerful rewriting tool in the world, simple, easy to learn and use, highly customization and extention supports, I love it! In fact before I transferred my blog from to winhost, to achieve few parts of the rewrite functions listed above, I wrote mroe than 100 hundred lines of code in HttpModule, and got seriously compromised results, let me record the&nbsp;miserable history below.I defined an WayneBlogModule which inherits from IHttpModule, it add extra URL examination to HttpApplication.BeginRequest, checking whether the requested URI matches conditions defined by myself, based on concrete requested URI, the WayneBlogModule&nbsp;invoke HttpContext.RewritePath to achieve the goal, however, it has an inextricable issue: the requested resource &quot;MUST exist&quot;, otherwise IIS will return 404 to the client, the module has no chance to get executed, although there are some tricky ways (or I&#39;d say, odd ways) to solve this issue such as &quot;let redirects all 404 response to a specified file&quot; then checks the requested URI, I didn&#39;t adopt that because I think it is odd and obay the original technical base.IIS URL Rewrite module perfectly solves my problem, sincerely thanks!&nbsp;Screenshot for completely list of rewrite rule used by WayneYe.com (click to enlarge):Further ReadingIIS URL Rewrite moduleDownload URL Rewrite Module 2.0">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Wayne's Geek Life">
<meta property="og:title" content="URL Rewrite Rules used by WayneYe.com">
<meta property="og:url" content="http://localhost:4000/URL-Rewrite-Rules-Used-By-WayneYe-Dot-Com">


  <meta property="og:description" content="I&#39;ve successfully transferred my website to winhost, now the architecture is IIS 7.5 + ASP.NET 4.0 + SQL Server 2008 R2 + HTML5, this blog post is a summary about&nbsp;URL Rewrite Rules used by WayneYe.com.RESTful URL for blogsBlog posts are absolutely the soul of a blog website, comparing with blog URL format: &quot;/yyyy/MM/{Blog_Title}&quot;, I actually prefer &quot;/Blog/{Blog_Title}&quot;, more simpler/shorter, in additional and more important, generally speacking,valuable content is valuable no matter when it was posted, for example, a developer is searching C# covariance &amp; contravariance articles, two articles separately posted on 3/28/2010 and 1/25/2011 won&#39;t make ANY difference for this developer.Now that all my blogs take URI format like: &quot;http://WayneYe.com/Blog/{Blog_Title}&quot;, it is so called &quot;Permalink&quot;, I must ensure there is no duplicate blog titles (not case sensetive even if I can enable URL case sensitive through IIS manager, it would be quite confuse to the end user), so actually in my backend blog post page I did a DB check for existing blog titiles:)Here is the Blog URL rewrite config XML stored in my Web.config: &lt;rule name=&quot;BlogPermalinkRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Blog/([A-Za-z0-9-_()^%]{1,})$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;ViewBlog.aspx?Permalink={R:1}&quot; /&gt; &lt;/rule&gt;Navigate LinksThat&#39;s so simply, rewrite to an ASPX page under a matched directory: &lt;rule name=&quot;NaviAlbum&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;Album&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;Album/Index.aspx&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;NaviVideo&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;Video&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;Video/Index.aspx&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;NaviTags&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;Tags&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;Tags/Index.aspx&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;NaviVisitRecord&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;VisitRecord&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;VisitRecord/Index.aspx&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;NaviAboutMe&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;AboutMe&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;AboutMe/Index.aspx&quot; /&gt; &lt;/rule&gt;Category/Archive/TagThese three type of URLs are similar, but makes a log of sense to a website comforming REST. &lt;rule name=&quot;CategoryRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Category/([A-Za-z0-9-_/]{1,})$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;ShowBlogs.aspx?Condition=Category&amp;amp;Cat={R:1}&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;BlogTagRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Tag/(.*)$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;SearchTag.aspx?t={R:1}&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;ArchiveYearRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Archive/(\d{4})$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;ShowBlogs.aspx?Condition=Time&amp;amp;Year={R:1}&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;ArchiveYearMonthRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Archive/(\d{4})/(\d{2})$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;ShowBlogs.aspx?Condition=Time&amp;amp;Year={R:1}&amp;amp;Month={R:2}&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;ArchiveYearMonthDayRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Archive/(\d{4})/(\d{2})/(\d{1,2})$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;ShowBlogs.aspx?Condition=Time&amp;amp;Year={R:1}&amp;amp;Month={R:2}&amp;amp;Day={R:3}&quot; /&gt; &lt;/rule&gt;Define Atom/RSS feeds MIME typeWayneYe.com programmatically generates Atom/RSS feeds in plain XML format, the two XML file exists phisically under Feeds/Atom/Atom.xml and Feeds/RSS/RSS.xml, other then rewrite URL for both, one more important thing to do is override the &quot;text/xml&quot; MIME type&nbsp;to follow the standard:Atom feeds MIME type should be &quot;application/atom+xml&quot;RSS feeds MIME type should be &quot;application/rss+xml&quot;.To achieve this needs a little bit more work: intercepting response stream and overriding server variable, this requires adding an &quot;Allowed Server Variables&quot;: this is done by the following steps:Open IIS Manager, go to my web application.Go to &quot;URL Rewrite&quot;In the Actions panel, select &quot;View Server Variables&quot;.Add a new Server Variable: &quot;RESPONSE_CONTENT_TYPE&quot;.Here is the config XML for rewriting the request: &lt;rule name=&quot;AtomFeedRewrite&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;Feeds/Atom&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;Feeds/Atom/Atom.xml&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;RSSFeedRewrite&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;Feeds/RSS&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;Feeds/RSS/RSS.xml&quot; /&gt; &lt;/rule&gt;And below is for overriding the &quot;text/xml&quot; MIME type config XML: &lt;outboundRules&gt; &nbsp;&nbsp;&nbsp; &lt;preConditions&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;preCondition name=&quot;Match Atom Feeds&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add input=&quot;{REQUEST_URI}&quot; pattern=&quot;Feeds/Atom&quot; /&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/preCondition&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;preCondition name=&quot;Match RSS Feeds&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add input=&quot;{REQUEST_URI}&quot; pattern=&quot;Feeds/RSS&quot; /&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/preCondition&gt; &nbsp;&nbsp;&nbsp; &lt;/preConditions&gt; &nbsp;&nbsp;&nbsp; &lt;rule name=&quot;AtomFeedsIMEType&quot; preCondition=&quot;Match Atom Feeds&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;match serverVariable=&quot;RESPONSE_CONTENT_TYPE&quot; pattern=&quot;(.*)&quot; negate=&quot;false&quot; /&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; value=&quot;application/atom+xml&quot; replace=&quot;true&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;/rule&gt; &nbsp;&nbsp;&nbsp; &lt;rule name=&quot;RSSFeedsIMEType&quot; preCondition=&quot;Match RSS Feeds&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;match serverVariable=&quot;RESPONSE_CONTENT_TYPE&quot; pattern=&quot;(.*)&quot; negate=&quot;false&quot; /&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; value=&quot;application/rss+xml&quot; replace=&quot;true&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;/rule&gt; &lt;/outboundRules&gt;Result:&nbsp;Customize HTTP Response HeadersI added a customized (non-standard) &quot;Auther&quot; HTTP response Header for all the requests, just for fun^_^The config code is below: &lt;outboundRules&gt; &nbsp;&nbsp;&nbsp; &lt;rule name=&quot;WayneHttpHeader&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;match serverVariable=&quot;RESPONSE_Author&quot; pattern=&quot;^$&quot; /&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; value=&quot;Wayne Ye (Admin@WayneYe.com)&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;/rule&gt; &lt;/outboundRules&gt;Screenshot for an example of &quot;Auther&quot; header appears when requesting to http://WayneYe.com/AboutMe.Canonical domain URLCanonical domain URL is a crucial fact for a website which want to make good SEO, URL Rewrite module already provides a template to help you do this by simply giving it your preferred domain. I did and the result is showing below:ConclusionIIS URL Rewrite Module is the most powerful rewriting tool in the world, simple, easy to learn and use, highly customization and extention supports, I love it! In fact before I transferred my blog from to winhost, to achieve few parts of the rewrite functions listed above, I wrote mroe than 100 hundred lines of code in HttpModule, and got seriously compromised results, let me record the&nbsp;miserable history below.I defined an WayneBlogModule which inherits from IHttpModule, it add extra URL examination to HttpApplication.BeginRequest, checking whether the requested URI matches conditions defined by myself, based on concrete requested URI, the WayneBlogModule&nbsp;invoke HttpContext.RewritePath to achieve the goal, however, it has an inextricable issue: the requested resource &quot;MUST exist&quot;, otherwise IIS will return 404 to the client, the module has no chance to get executed, although there are some tricky ways (or I&#39;d say, odd ways) to solve this issue such as &quot;let redirects all 404 response to a specified file&quot; then checks the requested URI, I didn&#39;t adopt that because I think it is odd and obay the original technical base.IIS URL Rewrite module perfectly solves my problem, sincerely thanks!&nbsp;Screenshot for completely list of rewrite rule used by WayneYe.com (click to enlarge):Further ReadingIIS URL Rewrite moduleDownload URL Rewrite Module 2.0">







  <meta property="article:published_time" content="2011-10-16T00:00:00-07:00">





  

  
    <meta property="fb:app_id" content="374223339969060">
  


<link rel="canonical" href="http://localhost:4000/URL-Rewrite-Rules-Used-By-WayneYe-Dot-Com">













<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Wayne's Geek Life Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">Wayne's Geek Life</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/categories/" >Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/" >Tags</a>
            </li><li class="masthead__menu-item">
              <a href="/search/" >Search</a>
            </li><li class="masthead__menu-item">
              <a href="/album/" >Album</a>
            </li><li class="masthead__menu-item">
              <a href="/about" >About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/me.jpg" alt="Wayne Ye" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Wayne Ye</h3>
    
    
      <p class="author__bio" itemprop="description">
        Whatever is worth doing is worth doing well!
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">San Francisco</span>
        </li>
      

      
        
          
            <li><a href="mailto:me@wayneye.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
          
        
          
            <li><a href="https://wayneye.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Website</a></li>
          
        
          
            <li><a href="https://twitter.com/wayneye" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
          
        
          
            <li><a href="https://facebook.com/WayneYeDotCom" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
          
        
          
            <li><a href="https://github.com/WayneYe/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="URL Rewrite Rules used by WayneYe.com">
    <meta itemprop="description" content="I&#39;ve successfully transferred my website to winhost, now the architecture is IIS 7.5 + ASP.NET 4.0 + SQL Server 2008 R2 + HTML5, this blog post is a summary about&nbsp;URL Rewrite Rules used by WayneYe.com.RESTful URL for blogsBlog posts are absolutely the soul of a blog website, comparing with blog URL format: &quot;/yyyy/MM/{Blog_Title}&quot;, I actually prefer &quot;/Blog/{Blog_Title}&quot;, more simpler/shorter, in additional and more important, generally speacking,valuable content is valuable no matter when it was posted, for example, a developer is searching C# covariance &amp; contravariance articles, two articles separately posted on 3/28/2010 and 1/25/2011 won&#39;t make ANY difference for this developer.Now that all my blogs take URI format like: &quot;http://WayneYe.com/Blog/{Blog_Title}&quot;, it is so called &quot;Permalink&quot;, I must ensure there is no duplicate blog titles (not case sensetive even if I can enable URL case sensitive through IIS manager, it would be quite confuse to the end user), so actually in my backend blog post page I did a DB check for existing blog titiles:)Here is the Blog URL rewrite config XML stored in my Web.config: &lt;rule name=&quot;BlogPermalinkRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Blog/([A-Za-z0-9-_()^%]{1,})$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;ViewBlog.aspx?Permalink={R:1}&quot; /&gt; &lt;/rule&gt;Navigate LinksThat&#39;s so simply, rewrite to an ASPX page under a matched directory: &lt;rule name=&quot;NaviAlbum&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;Album&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;Album/Index.aspx&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;NaviVideo&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;Video&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;Video/Index.aspx&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;NaviTags&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;Tags&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;Tags/Index.aspx&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;NaviVisitRecord&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;VisitRecord&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;VisitRecord/Index.aspx&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;NaviAboutMe&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;AboutMe&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;AboutMe/Index.aspx&quot; /&gt; &lt;/rule&gt;Category/Archive/TagThese three type of URLs are similar, but makes a log of sense to a website comforming REST. &lt;rule name=&quot;CategoryRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Category/([A-Za-z0-9-_/]{1,})$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;ShowBlogs.aspx?Condition=Category&amp;amp;Cat={R:1}&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;BlogTagRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Tag/(.*)$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;SearchTag.aspx?t={R:1}&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;ArchiveYearRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Archive/(\d{4})$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;ShowBlogs.aspx?Condition=Time&amp;amp;Year={R:1}&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;ArchiveYearMonthRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Archive/(\d{4})/(\d{2})$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;ShowBlogs.aspx?Condition=Time&amp;amp;Year={R:1}&amp;amp;Month={R:2}&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;ArchiveYearMonthDayRewrite&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;^Archive/(\d{4})/(\d{2})/(\d{1,2})$&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;ShowBlogs.aspx?Condition=Time&amp;amp;Year={R:1}&amp;amp;Month={R:2}&amp;amp;Day={R:3}&quot; /&gt; &lt;/rule&gt;Define Atom/RSS feeds MIME typeWayneYe.com programmatically generates Atom/RSS feeds in plain XML format, the two XML file exists phisically under Feeds/Atom/Atom.xml and Feeds/RSS/RSS.xml, other then rewrite URL for both, one more important thing to do is override the &quot;text/xml&quot; MIME type&nbsp;to follow the standard:Atom feeds MIME type should be &quot;application/atom+xml&quot;RSS feeds MIME type should be &quot;application/rss+xml&quot;.To achieve this needs a little bit more work: intercepting response stream and overriding server variable, this requires adding an &quot;Allowed Server Variables&quot;: this is done by the following steps:Open IIS Manager, go to my web application.Go to &quot;URL Rewrite&quot;In the Actions panel, select &quot;View Server Variables&quot;.Add a new Server Variable: &quot;RESPONSE_CONTENT_TYPE&quot;.Here is the config XML for rewriting the request: &lt;rule name=&quot;AtomFeedRewrite&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;Feeds/Atom&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;Feeds/Atom/Atom.xml&quot; /&gt; &lt;/rule&gt; &lt;rule name=&quot;RSSFeedRewrite&quot; patternSyntax=&quot;ExactMatch&quot;&gt; &nbsp;&nbsp;&nbsp; &lt;match url=&quot;Feeds/RSS&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; url=&quot;Feeds/RSS/RSS.xml&quot; /&gt; &lt;/rule&gt;And below is for overriding the &quot;text/xml&quot; MIME type config XML: &lt;outboundRules&gt; &nbsp;&nbsp;&nbsp; &lt;preConditions&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;preCondition name=&quot;Match Atom Feeds&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add input=&quot;{REQUEST_URI}&quot; pattern=&quot;Feeds/Atom&quot; /&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/preCondition&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;preCondition name=&quot;Match RSS Feeds&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;add input=&quot;{REQUEST_URI}&quot; pattern=&quot;Feeds/RSS&quot; /&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/preCondition&gt; &nbsp;&nbsp;&nbsp; &lt;/preConditions&gt; &nbsp;&nbsp;&nbsp; &lt;rule name=&quot;AtomFeedsIMEType&quot; preCondition=&quot;Match Atom Feeds&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;match serverVariable=&quot;RESPONSE_CONTENT_TYPE&quot; pattern=&quot;(.*)&quot; negate=&quot;false&quot; /&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; value=&quot;application/atom+xml&quot; replace=&quot;true&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;/rule&gt; &nbsp;&nbsp;&nbsp; &lt;rule name=&quot;RSSFeedsIMEType&quot; preCondition=&quot;Match RSS Feeds&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;match serverVariable=&quot;RESPONSE_CONTENT_TYPE&quot; pattern=&quot;(.*)&quot; negate=&quot;false&quot; /&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; value=&quot;application/rss+xml&quot; replace=&quot;true&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;/rule&gt; &lt;/outboundRules&gt;Result:&nbsp;Customize HTTP Response HeadersI added a customized (non-standard) &quot;Auther&quot; HTTP response Header for all the requests, just for fun^_^The config code is below: &lt;outboundRules&gt; &nbsp;&nbsp;&nbsp; &lt;rule name=&quot;WayneHttpHeader&quot;&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;match serverVariable=&quot;RESPONSE_Author&quot; pattern=&quot;^$&quot; /&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action type=&quot;Rewrite&quot; value=&quot;Wayne Ye (Admin@WayneYe.com)&quot; /&gt; &nbsp;&nbsp;&nbsp; &lt;/rule&gt; &lt;/outboundRules&gt;Screenshot for an example of &quot;Auther&quot; header appears when requesting to http://WayneYe.com/AboutMe.Canonical domain URLCanonical domain URL is a crucial fact for a website which want to make good SEO, URL Rewrite module already provides a template to help you do this by simply giving it your preferred domain. I did and the result is showing below:ConclusionIIS URL Rewrite Module is the most powerful rewriting tool in the world, simple, easy to learn and use, highly customization and extention supports, I love it! In fact before I transferred my blog from to winhost, to achieve few parts of the rewrite functions listed above, I wrote mroe than 100 hundred lines of code in HttpModule, and got seriously compromised results, let me record the&nbsp;miserable history below.I defined an WayneBlogModule which inherits from IHttpModule, it add extra URL examination to HttpApplication.BeginRequest, checking whether the requested URI matches conditions defined by myself, based on concrete requested URI, the WayneBlogModule&nbsp;invoke HttpContext.RewritePath to achieve the goal, however, it has an inextricable issue: the requested resource &quot;MUST exist&quot;, otherwise IIS will return 404 to the client, the module has no chance to get executed, although there are some tricky ways (or I&#39;d say, odd ways) to solve this issue such as &quot;let redirects all 404 response to a specified file&quot; then checks the requested URI, I didn&#39;t adopt that because I think it is odd and obay the original technical base.IIS URL Rewrite module perfectly solves my problem, sincerely thanks!&nbsp;Screenshot for completely list of rewrite rule used by WayneYe.com (click to enlarge):Further ReadingIIS URL Rewrite moduleDownload URL Rewrite Module 2.0">
    <meta itemprop="datePublished" content="October 16, 2011">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">URL Rewrite Rules used by WayneYe.com
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-cog"></i> On this page</h4></header>
              <ul class="toc__menu">
  <li><a href="#">RESTful URL for blogs</a></li>
  <li><a href="#">Navigate Links</a></li>
  <li><a href="#">Category/Archive/Tag</a></li>
  <li><a href="#">Define Atom/RSS feeds MIME type</a></li>
  <li><a href="#">Customize HTTP Response Headers</a></li>
  <li><a href="#">Canonical domain URL</a></li>
  <li><a href="#">Conclusion</a></li>
  <li><a href="#">Further Reading</a></li>
</ul>
            </nav>
          </aside>
        
        <p>I've successfully transferred my website to winhost, now the architecture is <strong>IIS 7.5 + ASP.NET 4.0 + SQL Server 2008 R2 + HTML5</strong>, this blog post is a summary about&nbsp;URL Rewrite Rules used by WayneYe.com.</p>
<h3>RESTful URL for blogs</h3>
<p>Blog posts are absolutely the soul of a blog website, comparing with blog URL format: "/yyyy/MM/{Blog_Title}", I actually prefer "<strong>/Blog/{Blog_Title}</strong>", more simpler/shorter, in additional and more important, generally speacking,valuable content is valuable no matter when it was posted, for example, a developer is searching C# covariance &amp; contravariance articles, two articles separately posted on 3/28/2010 and 1/25/2011 won't make ANY difference for this developer.</p>
<p>Now that all my blogs take URI format like: "http://WayneYe.com/Blog/{Blog_Title}", it is so called "<a href="http://en.wikipedia.org/wiki/Permalink" target="_blank">Permalink</a>", I must ensure there is no duplicate blog titles (not case sensetive even if I can enable URL case sensitive through IIS manager, it would be quite confuse to the end user), so actually in my backend blog post page I did a DB check for existing blog titiles:)</p>
<p>Here is the Blog URL rewrite config XML stored in my Web.config:</p>
<pre class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;"> <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"BlogPermalinkRewrite"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"^Blog/([A-Za-z0-9-_()^%]{1,})$"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"ViewBlog.aspx?Permalink={R:1}"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/rule&gt;</span></pre>
<h3>Navigate Links</h3>
<p>That's so simply, rewrite to an ASPX page under a matched directory:</p>
<pre class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;"> <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"NaviAlbum"</span> <span style="color: #cae682;">patternSyntax=</span><span style="color: #95e454; font-style: italic;">"ExactMatch"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"Album"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"Album/Index.aspx"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/rule&gt;</span><br /> <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"NaviVideo"</span> <span style="color: #cae682;">patternSyntax=</span><span style="color: #95e454; font-style: italic;">"ExactMatch"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"Video"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"Video/Index.aspx"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/rule&gt;</span><br /> <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"NaviTags"</span> <span style="color: #cae682;">patternSyntax=</span><span style="color: #95e454; font-style: italic;">"ExactMatch"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"Tags"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"Tags/Index.aspx"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/rule&gt;</span><br /> <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"NaviVisitRecord"</span> <span style="color: #cae682;">patternSyntax=</span><span style="color: #95e454; font-style: italic;">"ExactMatch"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"VisitRecord"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"VisitRecord/Index.aspx"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/rule&gt;</span><br /> <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"NaviAboutMe"</span> <span style="color: #cae682;">patternSyntax=</span><span style="color: #95e454; font-style: italic;">"ExactMatch"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"AboutMe"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"AboutMe/Index.aspx"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/rule&gt;</span></pre>
<h3>Category/Archive/Tag</h3>
<p>These three type of URLs are similar, but makes a log of sense to a website comforming REST.</p>
<pre class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;"> <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"CategoryRewrite"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"^Category/([A-Za-z0-9-_/]{1,})$"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"ShowBlogs.aspx?Condition=Category&amp;amp;Cat={R:1}"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/rule&gt;</span><br /> <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"BlogTagRewrite"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"^Tag/(.*)$"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"SearchTag.aspx?t={R:1}"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/rule&gt;</span><br /> <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"ArchiveYearRewrite"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"^Archive/(\d{4})$"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"ShowBlogs.aspx?Condition=Time&amp;amp;Year={R:1}"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/rule&gt;</span><br /> <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"ArchiveYearMonthRewrite"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"^Archive/(\d{4})/(\d{2})$"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"ShowBlogs.aspx?Condition=Time&amp;amp;Year={R:1}&amp;amp;Month={R:2}"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/rule&gt;</span><br /> <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"ArchiveYearMonthDayRewrite"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"^Archive/(\d{4})/(\d{2})/(\d{1,2})$"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"ShowBlogs.aspx?Condition=Time&amp;amp;Year={R:1}&amp;amp;Month={R:2}&amp;amp;Day={R:3}"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/rule&gt;</span></pre>
<h3>Define Atom/RSS feeds MIME type</h3>
<p>WayneYe.com programmatically generates Atom/RSS feeds in plain XML format, the two XML file exists phisically under <a href="http://wayneye.com/Feeds/Atom/Atom.xml" target="_blank">Feeds/Atom/Atom.xml</a> and <a href="http://wayneye.com/Feeds/RSS/RSS.xml" target="_blank">Feeds/RSS/RSS.xml</a>, other then rewrite URL for both, one more important thing to do is override the "text/xml" <a href="http://en.wikipedia.org/wiki/Internet_media_type" target="_blank">MIME type</a>&nbsp;to follow the standard:</p>
<ol>
<li>Atom feeds MIME type should be "<strong><a href="http://tools.ietf.org/html/rfc4287" target="_blank">application/atom+xml</a></strong>"</li>
<li>RSS feeds MIME type should be "<strong><a href="http://www.rssboard.org/rss-mime-type-application.txt" target="_blank">application/rss+xml</a></strong>".</li>
</ol>
<p>To achieve this needs a little bit more work: intercepting response stream and overriding server variable, this requires adding an "Allowed Server Variables": this is done by the following steps:</p><!--more-->
<ol>
<li>Open IIS Manager, go to my web application.</li>
<li>Go to "URL Rewrite"</li>
<li>In the Actions panel, select "View Server Variables".</li>
<li>Add a new Server Variable: "RESPONSE_CONTENT_TYPE".</li>
</ol>
<p>Here is the config XML for rewriting the request:</p>
<pre class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;"> <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"AtomFeedRewrite"</span> <span style="color: #cae682;">patternSyntax=</span><span style="color: #95e454; font-style: italic;">"ExactMatch"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"Feeds/Atom"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"Feeds/Atom/Atom.xml"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/rule&gt;</span><br /> <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"RSSFeedRewrite"</span> <span style="color: #cae682;">patternSyntax=</span><span style="color: #95e454; font-style: italic;">"ExactMatch"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"Feeds/RSS"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">url=</span><span style="color: #95e454; font-style: italic;">"Feeds/RSS/RSS.xml"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/rule&gt;</span></pre>
<p>And below is for overriding the "text/xml" MIME type config XML:</p>
<pre class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;"> <span style="color: #8ac6f2;">&lt;outboundRules&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;preConditions&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;preCondition</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"Match Atom Feeds"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;add</span> <span style="color: #cae682;">input=</span><span style="color: #95e454; font-style: italic;">"{REQUEST_URI}"</span> <span style="color: #cae682;">pattern=</span><span style="color: #95e454; font-style: italic;">"Feeds/Atom"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;/preCondition&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;preCondition</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"Match RSS Feeds"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;add</span> <span style="color: #cae682;">input=</span><span style="color: #95e454; font-style: italic;">"{REQUEST_URI}"</span> <span style="color: #cae682;">pattern=</span><span style="color: #95e454; font-style: italic;">"Feeds/RSS"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;/preCondition&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;/preConditions&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"AtomFeedsIMEType"</span> <span style="color: #cae682;">preCondition=</span><span style="color: #95e454; font-style: italic;">"Match Atom Feeds"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">serverVariable=</span><span style="color: #95e454; font-style: italic;">"RESPONSE_CONTENT_TYPE"</span> <span style="color: #cae682;">pattern=</span><span style="color: #95e454; font-style: italic;">"(.*)"</span> <span style="color: #cae682;">negate=</span><span style="color: #95e454; font-style: italic;">"false"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">value=</span><span style="color: #95e454; font-style: italic;">"application/atom+xml"</span> <span style="color: #cae682;">replace=</span><span style="color: #95e454; font-style: italic;">"true"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;/rule&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"RSSFeedsIMEType"</span> <span style="color: #cae682;">preCondition=</span><span style="color: #95e454; font-style: italic;">"Match RSS Feeds"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">serverVariable=</span><span style="color: #95e454; font-style: italic;">"RESPONSE_CONTENT_TYPE"</span> <span style="color: #cae682;">pattern=</span><span style="color: #95e454; font-style: italic;">"(.*)"</span> <span style="color: #cae682;">negate=</span><span style="color: #95e454; font-style: italic;">"false"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">value=</span><span style="color: #95e454; font-style: italic;">"application/rss+xml"</span> <span style="color: #cae682;">replace=</span><span style="color: #95e454; font-style: italic;">"true"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;/rule&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/outboundRules&gt;</span></pre>
<p>Result:<br /><img title="Define Atom Feeds IME Type" src="https://byfiles.storage.live.com/y1p4SuOwoPucu45uROxElaUOnGfYIQpQDxmEOktVqDl3HyJaS-mUnElTZXcpcTeY8J0adqizgHKjvk/AtomIME.png?psid=1" alt="Define Atom Feeds IME Type" width="501" height="233" /></p>
<p>&nbsp;</p>
<h3>Customize HTTP Response Headers</h3>
<p>I added a customized (non-standard) "<strong>Auther</strong>" HTTP response Header for all the requests, just for fun^_^</p>
<p>The config code is below:</p>
<pre class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;"> <span style="color: #8ac6f2;">&lt;outboundRules&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;rule</span> <span style="color: #cae682;">name=</span><span style="color: #95e454; font-style: italic;">"WayneHttpHeader"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;match</span> <span style="color: #cae682;">serverVariable=</span><span style="color: #95e454; font-style: italic;">"RESPONSE_Author"</span> <span style="color: #cae682;">pattern=</span><span style="color: #95e454; font-style: italic;">"^$"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;action</span> <span style="color: #cae682;">type=</span><span style="color: #95e454; font-style: italic;">"Rewrite"</span> <span style="color: #cae682;">value=</span><span style="color: #95e454; font-style: italic;">"Wayne Ye (Admin@WayneYe.com)"</span> <span style="color: #8ac6f2;">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;/rule&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/outboundRules&gt;</span></pre>
<p>Screenshot for an example of "Auther" header appears when requesting to <a href="http://WayneYe.com/AboutMe" target="_blank">http://WayneYe.com/AboutMe</a>.</p>
<p><img title="Customized &quot;Auther&quot; Header" src="https://byfiles.storage.live.com/y1pfvmJjttBiBsPxk2jrEmyICqQC82ef-uP7Aeuqedbma15H7_U-uUORIBKOFyOwQoKp_QWw6XMjMs/Auther.png?psid=1" alt="Customized &quot;Auther&quot; Header" width="487" height="343" /></p>
<h3>Canonical domain URL</h3>
<p>Canonical domain URL is a crucial fact for a website which want to make good SEO, URL Rewrite module already provides a template to help you do this by simply giving it your preferred domain. I did and the result is showing below:</p>
<p><img title="Conanical URL" src="https://byfiles.storage.live.com/y1pSAJuwFnr6ZIuDMnxl4WBELOTafbGNAn6E_29GVi2xvPz64HSLpP8GNsVv3V341pwhMEACoUgkDs/Canonical%20URL.png?psid=1" alt="Conanical URL" width="661" height="59" /></p>
<h3>Conclusion</h3>
<p>IIS URL Rewrite Module is the most powerful rewriting tool in the world, simple, easy to learn and use, highly customization and extention supports, I love it! In fact before I transferred my blog from to winhost, to achieve few parts of the rewrite functions listed above, I wrote mroe than 100 hundred lines of code in HttpModule, and got seriously compromised results, let me record the&nbsp;<strong>miserable history</strong> below.</p>
<p>I defined an <code>WayneBlogModule</code> which inherits from <a href="http://msdn.microsoft.com/en-us/library/system.web.ihttpmodule.aspx" target="_blank">IHttpModule</a>, it add extra URL examination to <a href="http://msdn.microsoft.com/en-us/library/system.web.httpapplication.beginrequest.aspx" target="_parent">HttpApplication.BeginRequest</a>, checking whether the requested URI matches conditions defined by myself, based on concrete requested URI, the <code>WayneBlogModule</code>&nbsp;invoke <a href="http://msdn.microsoft.com/en-us/library/system.web.httpcontext.rewritepath.aspx" target="_blank">HttpContext.RewritePath</a> to achieve the goal, however, it has an inextricable issue: the requested resource "<strong>MUST exist</strong>", otherwise IIS will return 404 to the client, the module has <strong>no chance to get executed</strong>, although there are some tricky ways (or I'd say, odd ways) to solve this issue such as "let redirects all 404 response to a specified file" then checks the requested URI, I didn't adopt that because I think it is odd and obay the original technical base.</p>
<p><strong>IIS URL Rewrite module perfectly solves my problem, sincerely thanks!</strong>&nbsp;</p>
<p><strong>Screenshot for completely list of rewrite rule used by WayneYe.com</strong> (click to enlarge):</p>
<p><a href="https://byfiles.storage.live.com/y1pSAJuwFnr6ZL4UeUTeduC016ZlF1JywpxFN051upGzFGeDSVPCo-jbPU9lt2avpEU7CftK-dcOnQ/URL%20Rewrite.png?psid=1" target="_blank"><img title="Completely rule list" src="https://byfiles.storage.live.com/y1pSAJuwFnr6ZL4UeUTeduC016ZlF1JywpxFN051upGzFGeDSVPCo-jbPU9lt2avpEU7CftK-dcOnQ/URL%20Rewrite.png?psid=1" alt="Completely rule list" width="600" height="340" /></a></p>
<h3>Further Reading</h3>
<p><a href="http://learn.iis.net/page.aspx/734/url-rewrite-module/" target="_blank">IIS URL Rewrite module</a></p>
<p><a href="http://www.iis.net/download/urlrewrite" target="_blank">Download URL Rewrite Module 2.0</a></p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#hack" class="page__taxonomy-item" rel="tag">Hack</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#hack" class="page__taxonomy-item" rel="tag">Hack</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2011-10-16T00:00:00-07:00">October 16, 2011</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=URL+Rewrite+Rules+used+by+WayneYe.com%20http%3A%2F%2Flocalhost%3A4000%2FURL-Rewrite-Rules-Used-By-WayneYe-Dot-Com" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2FURL-Rewrite-Rules-Used-By-WayneYe-Dot-Com" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2FURL-Rewrite-Rules-Used-By-WayneYe-Dot-Com" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/WayneYe-Dot-Com-Transferred-To-US-Server" class="pagination--pager" title="WayneYe.comæˆåŠŸæ¬è‡³ç±³å›½æœåŠ¡å™¨
">Previous</a>
    
    
      <a href="/2011-October-The-Seventeenth-The-Day-Of-Infamy" class="pagination--pager" title="2011å¹´10æœˆ17æ—¥ - åº”è¯¥è¢«å®šä¸ºå›½è€»æ—¥
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/Master-AWS-Development-Video-Published" rel="permalink">Master AWS Development Video Published
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Publishing information

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/Passing-AWS-Certified-Solutions-Architect" rel="permalink">Passing AWS Certified Solutions Architect
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">
3 years of AWS hands on experience, two months of preparation, 30 hours of course learning, 300+ exam practices, this was the work I've done to pass the&nbs...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/self-improvement/passing-aws-certified-solutions-architect/" rel="permalink">Passing AWS Certified Solutions Architect
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/geek/Storage-Media-Home-Server-Less-Than-300/" rel="permalink">Storage+Media home server for less than $300
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Background
I have been researched and watched many NAS options to setup a home storage+media server during the past year, and so far there was no perfect ans...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="mailto:admin@wayneye.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
        
      
        
          <li><a href="https://wayneye.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Website</a></li>
        
      
        
          <li><a href="https://twitter.com/wayneye" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://facebook.com/WayneYeDotCom" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
        
      
        
          <li><a href="https://github.com/WayneYe/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 Wayne Ye. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js" integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ" crossorigin="anonymous"></script>







    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=374223339969060";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
  





  </body>
</html>
