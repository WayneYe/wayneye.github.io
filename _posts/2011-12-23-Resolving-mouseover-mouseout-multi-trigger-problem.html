---
title: Resolving mouseover/mouseout multi-trigger problem
categories:
  - Hack
tags:
  - Hack
permalink: Resolving-mouseover-mouseout-Multi-Trigger-Problem
---

<h3>Background</h3>
<p>While I was developing my blog's comments function, I hope reader can write down their Gravatar&nbsp;email address, and my preferable UI was an "hint icon" dispolayed desides the Email textbox, so that while reader mouse overs it an overlay box will show the reason why Email is required, in additional, I want to add a little bit fancier animation:</p>
<ul>
<li>When user's mouse hovers on the icon, show the div box from small to large, once reaches predefined size, fades in the hint sentente.</li>
<li>When mouse out the icon, fades out the hint sentence and then hides the div from large to small.</li>
</ul>
<p>My requirement seems easy, however, I did spend two whole days in making it perfect, so I write down my investigation path here.&nbsp;</p>
<h3>The problems I faced</h3>
<p>My first thoughts was definitely simple, subscribe the onmouseover/onmouseout event for the hint icon, and setinterval the size animation, once finished, fades in the texts.</p>
<p>That's fine! But I soon encountered one problem which is easy to trigger: mouse keeps on overing/outing the icon quickly (as long as the interval is shorter than the sizing animation), it will cause the two event handlers (mouseover/mouseout) multi-triggered so that a infinite loop could be easily caused.</p>
<blockquote>
<p>The multi-trigger problem I faced is not the one related with DOM event bubbling, which is well described in <a href="http://api.jquery.com/mouseover/" target="_blank">jQuery mouseover API</a>.</p>
<p>Majority functions on my simple blog didn't use any third party JS library including jQuery, instead, I was trying to be a "rambo", just for improving my coding skills - by implementing various kinds of features and resolving various kinds of problems.</p>
</blockquote>
<p>Overcoming this issue cost me one whole day:) I tried strategies listed below:</p>
<ol>
<li>Put global variables indicating the showing/hiding process - isShowing &amp; isHiding.</li>
<li>Clearing oppositeinterval handle as soon as over/out event was triggered.</li>
<li>Inspired by #2, unsubscribing oppotite event handler as soon as mouseover/mouseout was captured.</li>
</ol>
<p>#1 does not solve the problem, I tried while multi-triggered, the interval cannot be cleared (not very sure the reason), #2 absolutely not work because it will stop unfinished animation. Finally I resolved the problem using #3, which I think it is the best one.&nbsp;</p>
<h3>Implementation</h3>
<h4>The HTML</h4>
<pre class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;"> <span style="color: #8ac6f2;">&lt;div</span> <span style="color: #cae682;">id=</span><span style="color: #95e454; font-style: italic;">"hintContainer"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;div</span> <span style="color: #cae682;">id=</span><span style="color: #95e454; font-style: italic;">"hintIcon"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;img</span> <span style="color: #cae682;">src=</span><span style="color: #95e454; font-style: italic;">"../Images/Hint.gif"</span> <span style="color: #cae682;">alt=</span><span style="color: #95e454; font-style: italic;">"Email Hint"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;/div&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;div</span> <span style="color: #cae682;">id=</span><span style="color: #95e454; font-style: italic;">"CommentHint"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;div</span> <span style="color: #cae682;">id=</span><span style="color: #95e454; font-style: italic;">"hintText"</span><span style="color: #8ac6f2;">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Required (not shown), used only for displaying <span style="color: #8ac6f2;">&lt;strong&gt;</span>Gravatar<span style="color: #8ac6f2;">&lt;/strong&gt;</span> and receiving<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; future notification when new comment(s) posted on this blog.<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;/div&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">&lt;/div&gt;</span><br /> <span style="color: #8ac6f2;">&lt;/div&gt;</span></pre>
<h4>The CSS</h4>
<pre class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;"> <span style="color: #f6f3e8;">&lt;</span><span style="color: #8ac6f2;">style</span> <span style="color: #8ac6f2;">type</span><span style="color: #f6f3e8;">=</span><span style="color: #95e454; font-style: italic;">"text/css"</span><span style="color: #f6f3e8;">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #cae682;">#hintContainer</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">width</span><span style="color: #f6f3e8;">:</span> <span style="color: #e5786d;">184px</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">height</span><span style="color: #f6f3e8;">:</span> <span style="color: #e5786d;">80px</span>;<br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">}</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #cae682;">#hintIcon</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">width</span><span style="color: #f6f3e8;">:</span> <span style="color: #e5786d;">16px</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">height</span><span style="color: #f6f3e8;">:</span> <span style="color: #e5786d;">16px</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">float</span><span style="color: #f6f3e8;">:</span> <span style="color: #8ac6f2;">left</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">cursor</span><span style="color: #f6f3e8;">:</span> <span style="color: #8ac6f2;">pointer</span>;<br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">}</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #cae682;">#CommentHint</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">position</span><span style="color: #f6f3e8;">:</span><span style="color: #8ac6f2;">absolute</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">color</span><span style="color: #f6f3e8;">:</span> <span style="color: #e5786d;">#fff</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">width</span><span style="color: #f6f3e8;">:</span> <span style="color: #e5786d;">0</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">height</span><span style="color: #f6f3e8;">:</span> <span style="color: #e5786d;">0</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">background-color</span><span style="color: #f6f3e8;">:</span> <span style="color: #f6f3e8;">black</span>; <span style="color: #99968b; font-style: italic;">/*#adc7ed*/</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">border</span><span style="color: #f6f3e8;">:</span> <span style="color: #e5786d;">1px</span> <span style="color: #8ac6f2;">dotted</span> <span style="color: #e5786d;">#666</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">padding</span><span style="color: #f6f3e8;">:</span> <span style="color: #e5786d;">2px</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">display</span><span style="color: #f6f3e8;">:</span> <span style="color: #8ac6f2;">none</span>;<br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">}</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #cae682;">#hintText</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">opacity</span><span style="color: #f6f3e8;">:</span> <span style="color: #e5786d;">0</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">filter</span><span style="color: #f6f3e8;">:</span> <span style="color: #f6f3e8;">Alpha</span>(<span style="color: #8ac6f2;">opacity</span><span style="color: #f6f3e8;">=</span><span style="color: #e5786d;">0</span>);<br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">}</span><br /> <span style="color: #f6f3e8;">&lt;/</span><span style="color: #8ac6f2;">style</span><span style="color: #f6f3e8;">&gt;</span></pre>
<h4>The JavaScript</h4>
<p>Foundation methods in my "rambo" library:</p>
<pre class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;"> <span style="color: #8ac6f2;">var</span> <span style="color: #f6f3e8;">$id</span> <span style="color: #f6f3e8;">=</span> <span style="color: #8ac6f2;">function</span> (<span style="color: #f6f3e8;">id</span>) <span style="color: #f6f3e8;">{</span> <span style="color: #8ac6f2;">return</span> <span style="color: #f6f3e8;">document</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">getElementById</span>(<span style="color: #f6f3e8;">id</span>); <span style="color: #f6f3e8;">}</span><br /> <span style="color: #8ac6f2;">function</span> <span style="color: #f6f3e8;">bindEvent</span>(<span style="color: #f6f3e8;">domObj</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">eventName</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">evtHandler</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">useCapture</span>) <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">if</span> (<span style="color: #f6f3e8;">domObj</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">addEventListener</span>) <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">domObj</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">addEventListener</span>(<span style="color: #f6f3e8;">eventName</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">evtHandler</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">useCapture</span> <span style="color: #f6f3e8;">?</span> <span style="color: #f6f3e8;">useCapture</span> <span style="color: #f6f3e8;">:</span> <span style="color: #8ac6f2;">false</span>);<br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">}</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">else</span> <span style="color: #8ac6f2;">if</span> (<span style="color: #f6f3e8;">domObj</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">attachEvent</span>) <span style="color: #f6f3e8;">{</span> <span style="color: #99968b; font-style: italic;">// IE 8 and below</span> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">evtHandler</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">wrapper</span> <span style="color: #f6f3e8;">=</span> <span style="color: #8ac6f2;">function</span> () <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">evtHandler</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">call</span>(<span style="color: #f6f3e8;">domObj</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">};</span><br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">domObj</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">attachEvent</span>(<span style="color: #95e454; font-style: italic;">"on"</span> <span style="color: #f6f3e8;">+</span> <span style="color: #f6f3e8;">eventName</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">evtHandler</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">wrapper</span>);<br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">}</span><br /> <span style="color: #f6f3e8;">}</span><br /> <span style="color: #8ac6f2;">function</span> <span style="color: #f6f3e8;">setSize</span>(<span style="color: #f6f3e8;">ele</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">width</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">height</span>) <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">ele</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">style</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">width</span> <span style="color: #f6f3e8;">=</span> <span style="color: #f6f3e8;">width</span> <span style="color: #f6f3e8;">+</span> <span style="color: #95e454; font-style: italic;">'px'</span>;<br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">ele</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">style</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">height</span> <span style="color: #f6f3e8;">=</span> <span style="color: #f6f3e8;">height</span> <span style="color: #f6f3e8;">+</span> <span style="color: #95e454; font-style: italic;">'px'</span>;<br /> <span style="color: #f6f3e8;">}</span><br /> <span style="color: #8ac6f2;">function</span> <span style="color: #f6f3e8;">setPosition</span>(<span style="color: #f6f3e8;">ele</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">left</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">top</span>) <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">ele</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">style</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">left</span> <span style="color: #f6f3e8;">=</span> <span style="color: #f6f3e8;">left</span> <span style="color: #f6f3e8;">+</span> <span style="color: #95e454; font-style: italic;">'px'</span>;<br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">ele</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">style</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">top</span> <span style="color: #f6f3e8;">=</span> <span style="color: #f6f3e8;">top</span> <span style="color: #f6f3e8;">+</span> <span style="color: #95e454; font-style: italic;">'px'</span>;<br /> <span style="color: #f6f3e8;">}</span></pre>
<p>Animation methods:</p>
<pre class="source" style="font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;"> <span style="color: #8ac6f2;">var</span> <span style="color: #f6f3e8;">hintIcon</span> <span style="color: #f6f3e8;">=</span> <span style="color: #f6f3e8;">$id</span>(<span style="color: #95e454; font-style: italic;">'hintIcon'</span><span style="color: #f6f3e8;">),</span> <span style="color: #f6f3e8;">commentHint</span> <span style="color: #f6f3e8;">=</span> <span style="color: #f6f3e8;">$id</span>(<span style="color: #95e454; font-style: italic;">'CommentHint'</span><span style="color: #f6f3e8;">),</span> <span style="color: #f6f3e8;">hintText</span> <span style="color: #f6f3e8;">=</span> <span style="color: #f6f3e8;">$id</span>(<span style="color: #95e454; font-style: italic;">'hintText'</span>);<br /> <span style="color: #f6f3e8;">bindEvent</span>(<span style="color: #f6f3e8;">hintIcon</span><span style="color: #f6f3e8;">,</span> <span style="color: #95e454; font-style: italic;">"mouseover"</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">showHint</span>);<br /> <br /> <span style="color: #8ac6f2;">var</span> <span style="color: #f6f3e8;">totalFrames</span> <span style="color: #f6f3e8;">=</span> <span style="color: #e5786d;">20</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">curFrame</span> <span style="color: #f6f3e8;">=</span> <span style="color: #e5786d;">0</span>;<br /> <span style="color: #8ac6f2;">var</span> <span style="color: #f6f3e8;">sliceWidth</span> <span style="color: #f6f3e8;">=</span> <span style="color: #e5786d;">180</span> <span style="color: #f6f3e8;">/</span> <span style="color: #f6f3e8;">totalFrames</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">sliceHeight</span> <span style="color: #f6f3e8;">=</span> <span style="color: #e5786d;">80</span> <span style="color: #f6f3e8;">/</span> <span style="color: #f6f3e8;">totalFrames</span>;<br /> <span style="color: #8ac6f2;">var</span> <span style="color: #f6f3e8;">showHinthandler</span> <span style="color: #f6f3e8;">=</span> <span style="color: #f6f3e8;">hideHinthandler</span> <span style="color: #f6f3e8;">=</span> <span style="color: #8ac6f2;">undefined</span>;<br /> <span style="color: #8ac6f2;">var</span> <span style="color: #f6f3e8;">offset</span> <span style="color: #f6f3e8;">=</span> <span style="color: #e5786d;">10</span>;<br /> <br /> <span style="color: #8ac6f2;">function</span> <span style="color: #f6f3e8;">showHint</span>(<span style="color: #f6f3e8;">evt</span>) <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">if</span> (<span style="color: #f6f3e8;">!</span><span style="color: #f6f3e8;">evt</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">evt</span> <span style="color: #f6f3e8;">=</span> <span style="color: #f6f3e8;">window</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">event</span>;<br /> <br /> &nbsp;&nbsp;&nbsp; <span style="color: #99968b; font-style: italic;">// Unbind mouseover immediately to prevent multi-trigger</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">unbindEvent</span>(<span style="color: #8ac6f2;">this</span><span style="color: #f6f3e8;">,</span> <span style="color: #95e454; font-style: italic;">"mouseover"</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">showHint</span>);<br /> <br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">setPosition</span>(<span style="color: #f6f3e8;">commentHint</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">evt</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">clientX</span> <span style="color: #f6f3e8;">+</span> <span style="color: #f6f3e8;">offset</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">evt</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">clientY</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">showElement</span>(<span style="color: #f6f3e8;">commentHint</span>);<br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">showElement</span>(<span style="color: #f6f3e8;">hintText</span>);<br /> <br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">showHinthandler</span> <span style="color: #f6f3e8;">=</span> <span style="color: #f6f3e8;">setInterval</span>(<span style="color: #8ac6f2;">function</span> () <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #99968b; font-style: italic;">//console.log("show: " + curFrame);</span><br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">if</span> (<span style="color: #f6f3e8;">++</span><span style="color: #f6f3e8;">curFrame</span> <span style="color: #f6f3e8;">&lt;=</span> <span style="color: #f6f3e8;">totalFrames</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">setSize</span>(<span style="color: #f6f3e8;">commentHint</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">sliceWidth</span> <span style="color: #f6f3e8;">*</span> <span style="color: #f6f3e8;">curFrame</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">sliceHeight</span> <span style="color: #f6f3e8;">*</span> <span style="color: #f6f3e8;">curFrame</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">else</span> <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">clearInterval</span>(<span style="color: #f6f3e8;">showHinthandler</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">curFrame</span> <span style="color: #f6f3e8;">=</span> <span style="color: #f6f3e8;">totalFrames</span>;<br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #99968b; font-style: italic;">// Fade in hint text</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">divFadeIn</span>(<span style="color: #f6f3e8;">hintText</span><span style="color: #f6f3e8;">,</span> <span style="color: #e5786d;">2</span><span style="color: #f6f3e8;">,</span> <span style="color: #e5786d;">10</span>);<br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #99968b; font-style: italic;">// Bind mouseout event back to the icon UNTIL finished showing</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">bindEvent</span>(<span style="color: #f6f3e8;">hintIcon</span><span style="color: #f6f3e8;">,</span> <span style="color: #95e454; font-style: italic;">"mouseout"</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">hideHint</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">}</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">},</span> <span style="color: #e5786d;">10</span>);<br /> <span style="color: #f6f3e8;">}</span><br /> <span style="color: #8ac6f2;">function</span> <span style="color: #f6f3e8;">hideHint</span>(<span style="color: #f6f3e8;">evt</span>) <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">if</span> (<span style="color: #f6f3e8;">!</span><span style="color: #f6f3e8;">evt</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">evt</span> <span style="color: #f6f3e8;">=</span> <span style="color: #f6f3e8;">window</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">event</span>;<br /> <br /> &nbsp;&nbsp;&nbsp; <span style="color: #99968b; font-style: italic;">// Unbind mouseover immediately to prevent multi-trigger</span><br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">unbindEvent</span>(<span style="color: #8ac6f2;">this</span><span style="color: #f6f3e8;">,</span> <span style="color: #95e454; font-style: italic;">"mouseout"</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">hideHint</span>);<br /> <br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">divFadeOut</span>(<span style="color: #f6f3e8;">hintText</span><span style="color: #f6f3e8;">,</span> <span style="color: #e5786d;">2</span><span style="color: #f6f3e8;">,</span> <span style="color: #e5786d;">10</span>);<br /> <br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">setTimeout</span>(<span style="color: #8ac6f2;">function</span> () <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">hideHinthandler</span> <span style="color: #f6f3e8;">=</span> <span style="color: #f6f3e8;">setInterval</span>(<span style="color: #8ac6f2;">function</span> () <span style="color: #f6f3e8;">{</span><br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">hideElement</span>(<span style="color: #f6f3e8;">hintText</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">console</span><span style="color: #f6f3e8;">.</span><span style="color: #f6f3e8;">log</span>(<span style="color: #95e454; font-style: italic;">"hide: "</span> <span style="color: #f6f3e8;">+</span> <span style="color: #f6f3e8;">curFrame</span>);<br /> <br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">if</span> (<span style="color: #f6f3e8;">--</span><span style="color: #f6f3e8;">curFrame</span> <span style="color: #f6f3e8;">&gt;=</span> <span style="color: #e5786d;">0</span>) <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">setSize</span>(<span style="color: #f6f3e8;">commentHint</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">sliceWidth</span> <span style="color: #f6f3e8;">*</span> <span style="color: #f6f3e8;">curFrame</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">sliceHeight</span> <span style="color: #f6f3e8;">*</span> <span style="color: #f6f3e8;">curFrame</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">}</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #8ac6f2;">else</span> <span style="color: #f6f3e8;">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">clearInterval</span>(<span style="color: #f6f3e8;">hideHinthandler</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">curFrame</span> <span style="color: #f6f3e8;">=</span> <span style="color: #e5786d;">0</span>;<br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">hideElement</span>(<span style="color: #f6f3e8;">commentHint</span>);<br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #99968b; font-style: italic;">// Bind mouseover event back to the icon UNTIL finished hiding</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">bindEvent</span>(<span style="color: #f6f3e8;">hintIcon</span><span style="color: #f6f3e8;">,</span> <span style="color: #95e454; font-style: italic;">"mouseover"</span><span style="color: #f6f3e8;">,</span> <span style="color: #f6f3e8;">showHint</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">}</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">},</span> <span style="color: #e5786d;">10</span>);<br /> &nbsp;&nbsp;&nbsp; <span style="color: #f6f3e8;">},</span> <span style="color: #e5786d;">800</span>);<br /> <span style="color: #f6f3e8;">}</span></pre>
<h3>Conclusion</h3>
<p>I guess this is a pretty good problem for interview, I am fool so I cannot resolve it in short period, however, I think good fronteers should solve it greatly:)</p>
