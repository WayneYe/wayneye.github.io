Blog_ID,Author,Title,Permalink,Category_ID,Content,Read_Times,Post_Date,Visibility,Record_State
1,Wayne,开张大吉：）,Blogging-Started,1,"呵呵，张罗了这么块地方，自己恭喜一下先    希望日后自己常来玩玩。。<p></p>感谢<a href=""http://www.shbiz.net/"" target=""_blank"">精英科技</a>热心而高效的服务！",2120,2008-03-12 13:01:45.000,1,A
2,Wendy,缘份-带你回家,,1,和往常一样准点下了小黑，想起了一周没给父母打电话。拿出宝贝砸“重金”买的索爱S500c，和爸妈拉起了家常。边聊边走，信号时好时坏，只得在小区内的活动广场站定。不知何时，脚边多了个小毛球，带着嘶哑的“喵喵”声，小家伙用无辜的眼神巴巴地看着我。知道它肯定是饿了，赖在我脚边不肯离去。翻翻包，实在找不出一丁点儿食物。看见地上有一小截小孩吃剩的草莓酥心卷，剥去包装纸，放在小猫嘴边。小家伙狼吞虎咽地啃了起来。不知道是那小家伙可怜的吃相，还是那发抖的小小身躯打动了我，反正草草和妈妈说了再见，挂上电话，毫不犹豫地抱起它回家。,1647,2008-03-13 13:02:01.523,1,A
5,Wendy,小白两三事,,1,"<div>
				<span>
						<p>说起我家小白，首先得解释为啥叫“小白”。因天生丽质，小白生就一身好雪肤，并且脸蛋儿白里透红。第一次见他，就对他的皮肤艳慕不已，有股想捏捏的冲动。无奈小白不是孩童，外加整天一副苦大愁深的酷样。偶也就一直没机会伸出磨爪。但是“小白”这个雅号，我是给他戴定了。</p>
						<p>我家小白有点儿大男子主义，有养家的责任和成大事的决心。最值一提的是特有绅士风度，什么都女士优先，还特看不惯那些不为女生让座的爷们，并称他们不是男人。有一次和几个同事一起出去玩，车上两男同事见有位子一股屁坐下，并稳稳当当坐了十几站直到目的地，而前面我们三个女生都在像猿猴似的伸长了手臂够着车扶栏。小白自见这情景以后，把那两男同事列为“非男人”一类，且甚少往来。</p>
						<p>小白很乖很认真，让人很窝心。周末我们都经常两天懒在家里，他打游戏我看书看碟看电视。两个人都自顾自忙着玩。有时我经常懒得动，想喝水，但却不想去倒，于是喊一句：小白，我渴了。他马上暂停游戏，把茶泡好了端来。</p>
						<p>有一阵时间，我哥找工作，由于他不会用电脑，让我帮他在网上发简历。小白很是不满说，他的理由是一个大男人得靠自已。我说他工作条件一直不好，一没时间二没机会去学。小白急了，说没时间，没机会这都是借口。你别把他宠坏了。我很能理解哥哥的困境，并一直为他辩护，同时认为小白把事情过于简单化。人很多时候是由成长环境决定了性格，又由性格和所处环境决定了现有生活。但我不得不承认，小白有服倔劲，他认定的事，会一门心思去做，并且结果都是比一般人都做的好。和小白舌战了N久后，不知小白怎么转到了另一话题，说他五年后要如何如何，并保证做到。我知道小白认真，就拿出一破本子出来说，把你的话记下来，到时候兑现不了，看我怎么糗你。小白还果真用他那鸡划的字把他说的话全写下来，并一本正经署上了大名和时间。</p>
						<p>和小白相处了半年多，细数他的优点真的不少。今儿个偷空就写这么多吧，以后再慢慢细数小白。：）</p>
				</span>
		</div>",1869,2008-03-18 13:12:34.990,1,A
9,Wayne,这几天研究Url Rewrite：）,,24,"<P>在开发这个自己用的Blog时，决定认真研究一下以前接触过的URL Rewrite，我见过类似这样的域名： xxx.com/Archive/2008/03/21/，一直不知道怎么实现的，正好借这次机会研究一下。</P><P>从前天开始就一直在努力，基本上是第一天差了大半天资料，<A href=""http://msdn2.microsoft.com/en-us/library/ms972974.aspx"" target=_blank>这篇文章</A>写得非常详细，向作者致敬！第二天终于上手做出Demo，但有Bug，第三天解决了Bug，完美运行^_^</P><P>其实简单点说，个人觉得对于ASP.NET开发者实现URL Rewrite基本有3种途径：</P><P>1. 修改IIS ISAPI扩展，例如把”.xx”交给aspnet_isapi.dll ISAPI 扩展，就成了这样：”xxx.htm?q=blah”，这样就是最简单直接的SEO，但由于我是虚拟主机所以我仅仅只在本地试了下，不知道精英科技的管理面板是否支持，我没有试。<BR>2. 修改WebConfig，添加$More$自己实现的IHttpModule，根据传入的URL来Rewrite到相应的页面，比如接受到类似” Archive/2008/03/21/”的URL，则Rewrite到Archive.aspx?Year=2008&amp;Month=3&amp;Day=21，这中间是用正则来匹配的。<BR>3. 使用第三方组件如：IIS Rewrite </P><P>由于鄙人一直都希望自己实现某些东西，只要不是太复杂，所以我决定使用第二种。那么一个比Hello World还简单的实例是这样做的： </P><HR><BR>写一个class实现IHttpModule：<BR>WayneHttpModule&nbsp; IHttpModule<BR>然后：<BR>public void Init(HttpApplication context)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; context.BeginRequest&nbsp;= new EventHandler(context_BeginRequest);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; void context_BeginRequest(object sender, EventArgs e)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HttpApplication app&nbsp; sender as HttpApplication;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; app.Context.RewritePath(""Test.aspx"");<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>然后在Web.config里添加：<BR>&lt;httpModules&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lt;add name=""WayneHttpModule"" type=""WayneBlog.Web.WayneHttpModule""/&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lt;/httpModules&gt; <HR><P></P><P>就搞定了。。。<BR>这样在当前虚拟目录下，任何以“aspx”为后缀的Url请求全部会被WayneHttpModule截获并且转向（Rwrite）到Test.aspx，需要注意的是，即使这个页面并不存在，比如IamFoo.aspx，呵呵。</P><P>那么类似这样的：” Archive/2008/03/21/”，教程作者提到必须设一个主页（比如Default.aspx），并且这个主页物理存在于” /2008/03/21/”这个目录下，如果嫌麻烦那么可以仿照.Text，截获所有的Http请求并交给aspnet_isapi.dll ISAPI 扩展。我个人觉得这样对于我来说更麻烦，我选择了去建Default.aspx，每次发表一篇新的Blog，就去生成目录并写Default.Aspx文件：）<BR></P>",2440,2008-03-21 15:21:47.917,1,A
10,Wendy,小白和多多,,1,"<P><STRONG>小猫小白斗<BR></STRONG>小白放下饭碗，轻轻的把猫放在双腿上。看着多多（小猫的名字）团团转地咬着自已的尾巴玩。小白满脸堆笑地一边骂道，笨蛋，这么费劲；一边用手拉起多多的尾巴就往多多嘴里送。小家伙不领情，张着爪子去挠小白。小白则赶紧放开手自卫的去拍猫爪。于是两个家伙就你一爪来我一拍地斗起来。</P>
<P><STRONG>小猫抽烟记</STRONG><BR>小白是个老烟民。吃完饭后一定非得抽上一支。和多多小斗一会后，摸出他甚爱的家乡烟-黄鹤楼往嘴里一叨。忽地嘴巴一抿，嘿嘿嘿地把烟儿拿下来就往多多嘴里塞。小家伙闻了闻，实在不喜欢烟草的味儿，拼命拧着脖子把头转开。无奈小白肉掌大而有力，把着多多的小脑袋不放。急得猫咪用爪子狠命抓小白。小白看它发急的样儿，收回肉掌悠悠地抽起烟来。还时不时地将烟喷到猫咪脸上，好让它也一起分享心爱的黄鹤楼。</P>
<P><STRONG>慷慨赠袜<BR></STRONG>小白有双臭脚，但他却不以为然。歪理是，男人脚不臭，那还像个男人吗？为了成全他做个男人，但又不至于让被窝臭哄哄，所以要求小白每晚睡觉前得洗脚。又到了小白洗脚的时候，脱下臭袜子，小白就放到多多的小脑袋瓜上，说来闻闻。多多举起两只小前爪抱着臭袜子，竟张开嘴巴咬起来了。这下小白可乐了，脱下另外一只袜子一起扔给多多，说你这么喜欢，我就送给你了，哈哈~~~<BR>唔，我可怜的多多！</P>",1792,2008-03-25 15:37:59.120,1,A
11,Wayne,谷歌的愚人节礼物:),,6,"今天从达人<a href=""http://www.hecaitou.net/?p=2743"" target=""_blank"">和菜头</a>那里看到谷歌“发布""了新产品:<a href=""http://www.google.cn/intl/zh-CN/renrou/index.html"" target=""_blank"">谷歌人肉搜索</a>, 呵呵：<div>眼前一亮，脑海里浮现的是某个或某些谷歌员工得意的坏笑。。。</div><div>摘抄一些：</div><h3>谷歌人肉搜索引擎有哪些特点？</h3><ul><li>规模最大：第一期工程拟招募人肉搜索志愿者2500万名，完成后将成为亚太地区最大的人肉搜索引擎。</li><li>创新最多：256项专利技术，1024篇相关论文，4096次用户调研，65536轮预览版测试。</li><li>领域最全：搜索范围涵盖娱乐、影视、体育、社会、名人、百姓、历史、地理、物种、太空等领域。</li><li>速度最快：平均查询响应时间32秒。</li><li>挖掘最深：曾在预览版测试中，用时128秒，成功定位了中国大陆生产的第一只自动冲水马桶。</li></ul><p><strong>人肉搜索志愿者管理专员</strong></p><ul><li>博士以上学历</li><li>管理学、传播学或相关专业毕业</li><li>掌握五种以上方言</li><li>有八卦主义精神和凡事不着调作风者优先</li></ul><div></div><div>NBNB。。。</div>",1790,2008-04-01 17:00:49.507,1,A
12,Wayne,百度Hi邀请入手,,1,"尊敬的用户：<div>您好！首先感谢您对百度产品的关注与兴趣，现在百度正式诚邀您第一时间使用百度Hi的体验版本，并为您的百度帐号“xiaotianpop”开通了登录权限。我们非常渴望得到您的宝贵意见，对于提供有价值反馈的用户，我们会奉上一份精美的小礼品。</div><div>1．如何使用？</div><div>请点击此链接下载百度Hi体验版安装文件：</div><div><a href=""http://im.baidu.com/download/BaiduHi_1.0_Beta1.exe"">http://im.baidu.com/download/BaiduHi_1.0_Beta1.exe</a></div><div>安装完毕后，请用您的百度帐号“xiaotianpop”登录百度Hi。</div><div>2．如何邀请好友使用百度Hi？</div><div>(1) 在您第一次登录百度Hi时，系统会自动帮您导入您的百度空间好友，并向他们发送体验邀请。</div><div>(2) 您成功登录百度Hi后，可通过好友的百度帐号或邮件地址将其加为联系人，系统会自动向您的好友发送邀请信。您的好友按照邀请信中的提示操作，即可获得百度Hi的登录权限。</div><div>(3) 成功邀请一定数量的好友使用百度Hi后，您就会获得相应的创建群权限的奖励。详情请访问：<a href=""http://im.baidu.com/help/hi_help5.html#n20"">http://im.baidu.com/help/hi_help5.html#n20</a></div><div>3．如何提交反馈？</div><div>目前，百度Hi仅是体验版本，只有收到百度邀请的用户才能使用。在体验过程中，您可能会发现百度Hi的一些问题或者缺陷，请您通过百度Hi主面板上的“主菜单-&gt;帮助-&gt;发送反馈”，或者点击如下链接，向我们提交反馈：</div><div><a href=""http://im.baidu.com/feedback/feedback.php"">http://im.baidu.com/feedback/feedback.php</a></div><div>4．什么是百度Hi？</div><div>百度Hi是百度公司推出的一款集文字消息、音视频通话、文件传输等功能的即时通讯软件，您可以通过它方便找到志同道合的朋友，并随时与好友联络感情。</div><div>百度好友：预先导入百度好友，并随时与他们对话。</div><div>兴趣搜人：不管多少种爱好，百度Hi都能找到与您志趣相投的人。</div><div>兴趣群组：轻松加入或创建兴趣群组，集合您的同趣好友。</div><div>百度空间：一键进入您的百度空间，即时提醒好友空间更新。</div><div>密友排行：可按联络频繁度对好友排序，您的“密友”一目了然。</div><div>邮箱登录：记不住用户名？常用的电子邮件地址也可以登录。</div><div>了解详情请访问<a href=""http://im.baidu.com/"">http://im.baidu.com</a></div><div>谢谢！</div><div>百度公司</div><div>2008年04月01日</div><br><br>呵呵：）<br>如果某位达人看到了本火星贴可以留下Email，鄙人定发送邀请给您：）<br><br>",1837,2008-04-01 17:35:54.710,1,A
13,Wayne,我的美国面签全过程,USA-B1-VISA-Processes,1,"<P>今天睡了个懒觉，9点多爬起来，然后乘2号线到南京西路梅陇镇广场，一去就发现好多人。。</P><P>我直接去了8楼，看到保安大哥忙得不亦乐乎，我跟他说我是办美商会商务签证的，他说让我下去到1楼2号口拿牌子，此时是12点，而我的面前预约单上写的是要在12：45之前，我赶紧告诉他这个情况，他说没有关系，一定要拿牌子，我猜可能是便于管理吧，便赶紧下去了，发现下面人更多了。。。看到有一列队是美商会的， 我就过去排了，这时有个“老大”（保安们这样称呼的）过来， 说我的包要去存，手机不能带进去，这个我之前是知道的，然后我问他：“请问在哪里存？”，他告诉我往前走10米，位置给我留着，ok，我有赶紧过去存包。呵呵，看到那边一个醒目的牌子上书着几个大字：“您办签证，我们看包”，真“体贴”，费用是10块中华大钱：）</P><P>等待5分钟后有位大哥让我们跟着他走，我是第一个，我便问他：“请问每天都是这么多人吗？”，答曰：“今天少了一半呢。。”，囧。。。</P><P>上去之后先安检，然后按指纹，然后就进入$More$了面签的环节，这是个漫长的等待过程，因为人很多，在我前面大概有20多位，我注意到签证官一般对年龄大点的叔叔阿姨们说这美式中文，比如“尼为什么妖取美国？”，对年轻人呢则是英文，e.g.&nbsp;Do you have any family in US?"",&nbsp;What's your purpose?"", etc. 此时我还是很紧张的，注意在观察，有的人大概半分钟到一分钟就OK了，有个女孩子英文很不错，大概侃了5分多钟，我突然听到里面的面官提到“reject”的字眼，人太多声音很杂没太听清，天那，希望她没问题。。我不要做倒霉鬼！！！过了段时间多开了几个窗口，进程加快了些。</P><P>终于轮到我了，我走过去先说了声：“您好！”，面官说：“Hi!”，以下是问答：</P>Officer: What's your purpose for going America?<BR>Me: My company send me there for training. <BR><BR>Officer: What does your company do?<BR>Me: XXX is a software outsourcing company in China. <BR><BR>Officer: What is it?<BR>Me: Our company helps our customers develop software product. <BR><BR>Officer: What's the relationship between Microsoft and your company?<BR>Me: XXX is the partner of MS. <BR><BR>Officer: Which platform do you program on?<BR>Me: Windows. <BR><BR>Officer: Which programming language do you use?<BR>Me: C# Dotnet. <BR><BR>Officer: Do you have any family in US?<BR>Me: No. <BR><BR>Officer: OK, have a nice trip?<BR>Me: Thank you very much! <P>呵呵，离开的时候脑子是空白的，什么想法也没有。到了大街上，暖暖的阳光，此时才觉得很开心，给爸爸和Wendy打了电话。想到之前有些担心和准备有点点多余（比如，身上只带2跟烟和一个一次性的快用完的打火机，想进去面签之前就扔掉，以防面官说烟民？Reject！^_^），主要是没有想到这么多人，面官不可能问太多问题的。</P><P> </P>",2358,2008-04-03 15:46:31.000,1,A
14,Wayne,男人加女人等于什么,,7,"<P>一位知名经济学家转发来“Aileen取自網路分享”的贴子，我演绎为“用初中代数解决人文难题”。我是工科出身，基本代数滚瓜烂熟，这里先和各位复习一下基本定律：</P><P>如果</P><P>A=B+C+D+E&nbsp;nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1)</P><P>F=B+C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(2)</P><P>将（2）式带入（1）式</P><P>A=F+D+E</P><P>移项</P><P>A-D=F+E</P><P>这样基本代数可以解决什么样人文难题呢？</P><P><B>难题（i</B><B>）：人=</B><B>？</B></P><P>&nbsp;</P><P>人=吃饭+睡觉+上班+玩&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1）</P><P>&nbsp;</P><P>猪=吃饭+睡觉&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;（2）</P><P>&nbsp;</P><P>将（2）式带入（1）式</P><P>$More$</P><P>人=猪+上班+玩</P><P>&nbsp;</P><P>移项</P><P>&nbsp;</P><P>人-玩=上班+猪</P><P>&nbsp;</P><P>结论（i）：<B>不会玩的人等于上班的猪</B></P><P>&nbsp;</P><P><B>难题（ii</B><B>）：男人=</B><B>？</B></P><P><BR>男人=吃饭+睡觉+挣钱&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;（1）</P><P>&nbsp;</P><P>猪=吃饭+睡觉&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2）</P><P><BR>将（2）式带入（1）式，得</P><P>&nbsp;</P><P>男人=猪+挣钱&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3）</P><P>&nbsp;</P><P>移项</P><P>&nbsp;</P><P>猪=男人-挣钱</P><P><BR></P><P>结论&nbsp;ii）：<B>男人不挣钱等于猪。</B></P><P>&nbsp;</P><P><B>难题（iii</B><B>）女人=</B><B>？</B></P><P>&nbsp;</P><P>女人=吃饭+睡觉+花钱&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;（4）</P><P>&nbsp;</P><P>猪=吃饭+睡觉&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5）</P><P><BR>将（4）式带入（5）式</P><P>&nbsp;</P><P>女人=猪+花钱&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6）</P><P>&nbsp;</P><P>移项</P><P>&nbsp;</P><P>猪=女人-花钱</P><P>&nbsp;</P><P>结论&nbsp;iii）：<B>女人不花钱等于猪。</B></P><P>&nbsp;</P><P><B>难题（iv</B><B>）：男人+</B><B>女人=</B><B>？</B></P><P>&nbsp;</P><P>由（3）式知，男人=猪+挣钱</P><P>&nbsp;</P><P>由（6）式知，女人=猪+花钱</P><P>&nbsp;</P><P>所以，男人+女人=猪+挣钱+猪+花钱</P><P>&nbsp;</P><P>上式中“挣钱”与“花钱”相抵，</P><P>&nbsp;</P><P>男人+女人=猪+猪</P><P>&nbsp;</P><P><B>结论（iv</B><B>）：男人+</B><B>女人=2</B><B>猪</B></P><P><BR></P><P><B>转载自</B><A href=""http://blog.sina.com.cn/s/blog_48670cb201008z8n.html"" target=_blank>翟华的Blog</A> </P>",1855,2008-04-08 12:23:05.627,1,A
15,Wayne,Monica的生日Party,Monica-Birthday-Party,1,"<P>今天去参加了好友Monica的Party，我们早就准备好了在Party中给她送上蛋糕给她提前庆祝生日:P </P><P>Monica很开心：</P><IMG class=BlogImage alt=P1020665.JPG src=""http://wayneye.com/Archive/2008/04/12/Images/P1020665.JPG""><P>&nbsp;</P><P>我们准备的生日蛋糕：</P><IMG class=BlogImage alt=P1020686.JPG src=""http://wayneye.com/Archive/2008/04/12/Images/P1020686.JPG""><P>&nbsp;</P><P>Royal也很开心</P><IMG class=BlogImage alt=P1020691.JPG src=""http://wayneye.com/Archive/2008/04/12/Images/P1020691.JPG""><P>&nbsp;</P><P>这帮家伙玩了$More$一阵子以后。。。恶作剧开始了，最先受难的当然是寿星。。。</P><IMG class=BlogImage alt=P1020693.JPG src=""http://wayneye.com/Archive/2008/04/12/Images/P1020693.JPG""><P>&nbsp;</P><P>Ati的“毒手”指向了Carrie。。。。</P><IMG class=BlogImage alt=P1020697.JPG src=""http://wayneye.com/Archive/2008/04/12/Images/P1020697.JPG""><P>&nbsp;</P><P>然后是Evelyn和Carrie互相“残杀”</P><IMG class=BlogImage alt=P1020698.JPG src=""http://wayneye.com/Archive/2008/04/12/Images/P1020698.JPG""><P>&nbsp;</P><P>不能亏待自己的秀发</P><IMG class=BlogImage alt=P1020704.JPG src=""http://wayneye.com/Archive/2008/04/12/Images/P1020704.JPG""><P>&nbsp;</P><P>连俺家“姐姐”也。。。</P><IMG class=BlogImage alt=P1020695.JPG src=""http://wayneye.com/Archive/2008/04/12/Images/P1020695.JPG""><P>&nbsp;</P><P>她们对着我叫嚷着“Sweet！！^^”，此时我还独善其身，心想，我可不能像那样子，她们应该也不会拿“摄影师”开到吧，嘿嘿</P><P>结果，我错了，我是最“惨”的。。。</P><P><IMG class=BlogImage alt=P1020710.JPG src=""http://wayneye.com/Archive/2008/04/12/Images/P1020710.JPG""></P><P><BR&NBSP;><IMG class=BlogImage alt=P1020711.JPG src=""http://wayneye.com/Archive/2008/04/12/Images/P1020711.JPG""></BR&NBSP;></P><P>&nbsp;</P><P>我的“造型师”：　我的“杰作”真棒！</P><IMG class=BlogImage alt=P1020712.JPG src=""http://wayneye.com/Archive/2008/04/12/Images/P1020712.JPG""><P>&nbsp;</P><P>所有人都不能幸免，一群“粉刷匠”在电梯里：</P><IMG class=BlogImage alt=P1020713.JPG src=""http://wayneye.com/Archive/2008/04/12/Images/P1020713.JPG""><P>&nbsp;</P><P>合影留念</P><P>1. <IMG class=BlogImage alt=P1020718.JPG src=""http://wayneye.com/Archive/2008/04/12/Images/P1020718.JPG""></P><P>2. <IMG class=BlogImage alt=P1020721.JPG src=""http://wayneye.com/Archive/2008/04/12/Images/P1020721.JPG""></P><P>3. <IMG class=BlogImage alt=P1020722.JPG src=""http://wayneye.com/Archive/2008/04/12/Images/P1020722.JPG""></P>",2351,2008-04-13 00:37:23.663,1,A
16,Wayne,人生中那些重要的第一次 - 从浦东到仁川,,1,"今天，2008年4月13日。注定是鄙人人生中最重要的一天之一，经过几个月的漫长等待之后，我将于今天搭乘大韩航空的航班经韩国首尔仁川国际机场转机飞往西雅图塔科马国际机场。首次出国，心中虽难免激动，但自认为头脑还是非常清醒的，昨晚在床上辗转了半小时：） <DIV>大概在上午10点4X和Wendy到了浦东机场，离别的惆怅藏于心中，但我没有表露出来，只是抱着她时，我立刻就想到今后的2或3个月，我们都没办法离彼此如此之近。。。</DIV><DIV>拿到登记牌以及安检都非常顺利，之前由于考虑的到毕竟是首次出去也许有很多不明白，不了解到地方，可能会花掉很多时间这种担忧显得有些多余。进入到候机室的时间大概是11点10分左右，心想这下要等2跟多小时了。。。嘿嘿！！这边好多商店</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Blogs/2008/04/13/Images/1.jpg""></DIV><BR><BR><DIV>免税商店？没听说过，免了税自然会便宜，但问题在于便宜多少，这里可是机场，再便宜又能怎么样？</DIV><DIV>就这样带着疑问进去了。。。很多小日本和高丽棒子在购物，有两位小姐都用日文跟我打招呼，我没有鸟她们，叹口气，心里骂两句，走人！</DIV><BR><BR><DIV>看见好多香烟，N多都没见过，陡然发现几个真的很便宜，8块的双喜（我不爱抽）买57块一条，400一条（有的地方更贵）的中华仅卖257，我斟酌了一番花100块买了条很酷的$More$黑色的。</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Blogs/2008/04/13/Images/2.jpg""></DIV><BR><BR><DIV>等了一会同事也到了，就这么聊着聊着很快就开始登机了。</DIV><DIV>从在飞机内看浦东机场</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Blogs/2008/04/13/Images/41.jpg""&nbsp;nbsp;></DIV><BR><BR><DIV>起飞后前方的发屏幕不断地显示着各种飞行信息，起先我们离开上海，进入中华东海上空</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Blogs/2008/04/13/Images/13.jpg""&nbsp;nbsp;></DIV><BR><BR><DIV>过段时间到了这</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Blogs/2008/04/13/Images/10.jpg""&nbsp;nbsp;></DIV><BR><BR><DIV>这个时候呢，开饭啦^_^</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Blogs/2008/04/13/Images/4.jpg""&nbsp;nbsp;></DIV><BR><BR><DIV>吃个饭，看看报纸，马上就到了</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Blogs/2008/04/13/Images/42.jpg""&nbsp;nbsp;></DIV><BR><BR><DIV>高丽地界依稀可见</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Blogs/2008/04/13/Images/34.jpg""&nbsp;nbsp;></DIV><BR><BR><DIV><IMG alt="""" src=""http://wayneye.com/Blogs/2008/04/13/Images/26.jpg""&nbsp;nbsp;></DIV><BR><BR><DIV>落地前一刹那</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Blogs/2008/04/13/Images/27.jpg""&nbsp;nbsp;></DIV><BR><BR><DIV>就这样，我到了仁川机场。</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Blogs/2008/04/13/Images/45.jpg""&nbsp;nbsp;></DIV><BR><DIV><IMG alt="""" src=""http://wayneye.com/Blogs/2008/04/13/Images/21.jpg""&nbsp;nbsp;></DIV><BR><BR><DIV align=right>Wayne</DIV><DIV align=right>写于4月13日8时左右，太平洋上空</DIV>",1803,2008-04-14 08:12:29.133,1,A
17,Wayne,人生中那些重要的第一次 - 在仁川机场,,1,"<DIV>当地时间下午4点47</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Archive/2008/04/13/Images/3.jpg"" type=""image/jpeg""></DIV><BR><BR><DIV>也有免税店</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Archive/2008/04/13/Images/6.jpg"" type=""image/jpeg""></DIV><BR><BR><DIV>看了很多家，仁川机场的商店比浦东要多很多，价格嘛。。。贵很多。。。</DIV><DIV>随手看看一件衣服，上标500多美刀，我只有乍舌的份。</DIV><DIV>数码产品的价格则厚道些，Nikon D60 大概RMB2700的样子，Sony A200&nbsp;888，我不清楚</DIV><DIV>现在国内的价格，但估计$More$应该差不太多，再怎么着比服装，手表，香水等奢侈品强多了！</DIV><BR><BR><DIV>KFC全球都有</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Archive/2008/04/13/Images/16.jpg"" type=""image/jpeg""></DIV><BR><BR><DIV>我走过去看了看，几个鸡块儿（不知是否上校鸡块或者高丽鸡块？）17000韩元，算下来好像7，80大洋了，贵贵贵！！！</DIV><BR><BR><DIV>我猜这应该是首尔这边的某旅游景点，就跟国内很多古代楼宇十分相似，中华文化的印记！</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Archive/2008/04/13/Images/7.jpg"" type=""image/jpeg""></DIV><BR><BR><DIV>打开手机看看还有信号吗？结果却出乎想象。</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Archive/2008/04/13/Images/8.jpg"" type=""image/jpeg""></DIV><BR><BR><DIV>左上角显示信号非常好，只是左边有个“R”，不懂什么意思，先不管，给姐姐打个电话看看，结果那头直接是女声电脑韩文，等到英文后我明白了，无效号码。我猜应该是我正处于联通韩国分公司管辖范围内，而我又不是全球通，所以加个86什么用都没有。</DIV><BR><BR><DIV>呵呵，留个影</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Archive/2008/04/13/Images/9.jpg"" type=""image/jpeg""></DIV><BR><BR><DIV><IMG alt="""" src=""http://wayneye.com/Archive/2008/04/13/Images/15.jpg"" type=""image/jpeg""></DIV><BR><BR><DIV>抽根烟^_^</DIV><DIV><IMG alt="""" src=""http://wayneye.com/Archive/2008/04/13/Images/12.jpg"" type=""image/jpeg""></DIV><BR><BR><DIV>然后就再次安检并登上去雷蒙德-塔科马的飞机了。。。</DIV><BR><BR><DIV align=right>Wayne</DIV><DIV align=right>写于4月13日8时左右，太平洋上空</DIV>",1695,2008-04-14 08:15:18.133,1,A
18,Wayne,关键字：奥运|达赖SB|ZD|不实报道|保卫火炬|抵制法国,,8,"鄙人坦言：在几周前首次看到国内媒体曰国外媒体恶意歪曲ZD的报道时，我是只看了标题的，因为鄙人相信他们在“领导”的影响下，都拥有完全一样的敏感神经，然而鄙人一直同样认为：""<A href=""http://www.caobian.info/?p=2376"" target=_blank>哪有那么多辱华</A>？""<DIV>但我发现，这次我是彻彻底底的错了！！！</DIV><DIV>由于这些时忙于出国，GoogleReader基本上没有时间看，今天闲的时候看了看，发现鄙人订阅到众多达人无一例外均拍案而起！</DIV><DIV>萨苏先生说：<A href=""http://blog.sina.com.cn/s/blog_476745f6010096rj.html"" target=_blank>金晶感动中国</A>， 冰大<A href=""http://www.bullogger.com/blogs/ird/archives/125846.aspx"" target=_blank>用心支持北京奥运</A>之后<A href=""http://www.bullogger.com/blogs/ird/archives/125885.aspx"" target=_blank>批评了有关衙门</A>，旅法达人翟华先生发表了多篇评论：<A href=""http://blog.sina.com.cn/s/blog_48670cb201009149.html"" target=_blank>这里</A>，<A href=""http://blog.sina.com.cn/s/blog_48670cb2010090ea.html"" target=_blank>这里</A>还有<A href=""http://blog.sina.com.cn/s/blog_48670cb2010090j5.html"" target=_blank>这里</A>,并且<A href=""http://blog.sina.com.cn/s/blog_48670cb2010091nz.html"" target=_blank>讥讽了法共</A>，徐铁人老师直言：<A href=""http://blog.sina.com.cn/s/blog_4acf0a9701009gcg.html"" target=_blank>虚伪的西方人！</A></DIV><BR><DIV>看来这么多，我自己的感想是：<B>无论是否喜欢当前的ZF，或者认为外国的月亮圆，抑或哈韩哈日。。所有人，只要你是华人（台湾人，新加坡人，ABC，JBC，XBC。。），只要你流淌着中国人的血液，是华夏儿女，那么在当前这帮洋人厌华，贬华，辱华，鄙华，歪华的情况之下。我们应该做也必须做到是：团结一致，向着五星红旗，横眉冷对达赖SB，ZD份子以及那些少数的、脑残的洋鬼子！</B></DIV><BR><DIV>公司一同事$More$今天中午去参加<A href=""http://www.chinadaily.com.cn/hqzg/2008-04/14/content_6615516.htm"" target=_blank>游行</A>了，我也打算安定下来之后，在<A href=""http://www.huaren.us/dispbbs.asp?boardid=331&amp;Id=430746&amp;page=1&amp;star=1"" target=_blank>西雅图抗议达赖SB</A>并且抵制法国货，买贵的也不买家乐福的！</DIV>",2112,2008-04-15 08:42:07.760,1,A
19,Wayne,人生中那些重要的第一次 - 仁川到西雅图塔科玛,,1,"<P>到这边以后忙着倒时差熟悉工作和联系家人了，没空写部落格里，今天稍微闲了点，爬上来继续记录人生中最重要的第一次：）</P><BR><BR><P>------------------正文-------------------</P><P>这趟9跟小时的旅途着实辛苦，虽然无论是航空公司还是我自己都做好了各种消遣的，不可谓不完善的准备。</P><BR><BR><P>我的装备^_^：<BR><IMG style=""BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=379 alt=19 src=""http://wayneye.com/Archive/2008/04/18/Images/19.jpg"" width=504 border=0></P><BR><P>PS2手柄还没照出来的，放脚下了，空间太小实在不可能放上面，</P><BR><BR><P>大韩航空公司准备了一高科技玩意，我一坐上位置就研究上了（没办法，谁叫俺没出过国呢，乡巴佬一个。。），就是这玩意：<BR><IMG style=""BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=375 alt=17 src=""http://wayneye.com/Archive/2008/04/18/Images/17.jpg"" width=500 border=0> </P><P>呵呵，玩游戏的手柄，这是背面，正面是另外的一些功能，有：电影（比较多，各种类别的，我看到有国家宝藏2算最近流行的），CD音乐（我基本上只认识Celine Dion，见下面一点；靠！再怎么着也得有Linkin Park吧?!)，航班情况（动态显示飞机在地图上的位置，跟<A href=""/ViewBlog.aspx?BlogID=16"" target=_blank>上篇</A>里的差不多），免税信息（高丽棒子赚钱用的），儿童乐园（俺是成人，不玩），等等等等，不记得了。。。飞机上一旦有广播，它就会自动$More$显示""Broadcasting is in process.""，会暂停你任何进行中的游戏，电影，音乐等，让你认真听广播，直可惜。。。高丽文一窍不通，英文吧，我离广播比较远，听不清。。但是呢，发现高丽播音员的英文很烂，“嗯”“啊”很多，停顿很多，不流利的说。<BR><P>俺在做无聊的事情，玩弹球（也忘了这东西是不是叫弹球。。），搞笑的是，玩了一会，广播开始，游戏暂停，我也就没玩它去玩本本了，结果广播完了以后发现，这傻机器不会把游戏暂停，我眼睁睁地看着那个球从我的那横杆边上掉下去了。。</P><BR><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1020779 src=""http://wayneye.com/Archive/2008/04/18/Images/P1020779.jpg"" width=504 border=0> <BR><P></P><BR><P>歌坛女神席琳迪翁<BR><IMG style=""BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=379 alt=P1020788 src=""http://wayneye.com/Archive/2008/04/18/Images/P1020788.jpg"" width=504 border=0></P><P>过了几个小时，熄灯了，估计是按照韩国当日的时间该睡觉了，我一开始没管他，继续写我的Blog：），后来又过了会，有点困了，我就关了机躺着睡。</P><P>结果呢，换了无数种睡姿，翻来覆去可能有1跟小时吧，可能只睡了10分钟，受不了了，还是起来吧，拿出手柄打实况，俺的阿德里亚诺已经无敌了，一场进了5个球。</P><BR><P>玩着玩着发现窗户外面的天色已经渐渐亮了，是的，在万米高空的朝霞一定很漂亮，我就这样看着窗外，等啊等啊，等到了<P><P><BR><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1020782 src=""http://wayneye.com/Archive/2008/04/18/Images/P1020782.jpg"" width=504 border=0><BR><BR><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1020780 src=""http://wayneye.com/Archive/2008/04/18/Images/P1020780.jpg"" width=504 border=0><BR><BR><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1020783 src=""http://wayneye.com/Archive/2008/04/18/Images/P1020783.jpg"" width=504 border=0></P><BR><BR><P>大自然之美！！！</P><P>几个小时后，窗外已是阳光无比灿烂，窗户已经不能打开了，光线太强！我这个时候已经困得不行了，打算就这样耗下去当倒时差了，飞机上开始广播前方到达""Tacoma""。。。 激动！</P><P>快到了，看到了山脉，很Cool<BR><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1020791 src=""http://wayneye.com/Archive/2008/04/18/Images/P1020791.jpg"" width=504 border=0></P><BR><P>当地时间12点左右，我们到达西雅图塔科玛机场<BR><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1020799 src=""http://wayneye.com/Archive/2008/04/18/Images/P1020799.jpg"" width=504 border=0></P><P><BR><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1020800 src=""http://wayneye.com/Archive/2008/04/18/Images/P1020800.jpg"" width=504 border=0></P><BR><BR><P>待续。。。</P><P align=right>Wayne<P align=right>写于4月17日9时左右，雷蒙德HomeStead旅馆</P>",2136,2008-04-18 12:42:04.260,1,A
20,Wayne,人生中那些重要的第一次 - 塔科玛机场见闻,,1,"<P>这个时候我已经坚持了十几个小时，人昏昏沉沉的，但是。。。要面对边境检查，还是得打起精神，这是第一次，所以没有任何经验，我心想：“别搞得折腾了半天挂在检察官手里让我回家，机票他报销。。”，呵呵。</P><P>在等待过边检的时候看到一张宣传图，上书：“Keep our doors open and nation secure.”</P><P>赞！！！</P><P>我的理解是:</P><P>我们欢迎人才！在保证国家安全的前提下！</P><P>不拘一格降人才！</P><P>在过去的一个多世纪里，美国宽松灵活的移民政策在很大程度上保证了这个国家领先于世界民族之林。</P><P>不过近几年呢，尤其是911之后，老大很受伤，变得相对谨慎。。。很多仁人志士对此颇有微词，比如<A href=""http://tech.sina.com.cn/it/2007-03-08/08101406415.shtml"" target=_blank>比尔盖茨</A>。</P><P>正思考着呢，轮到俺了。Check我的检察官是个黑人，问了些问题，现在只记得问有没有带食物，我回答没有，之前在飞机上韩国空姐给的单子上我也填的没有，我觉得我带过来的那一箱热干面应该不会伤害山姆大叔的农民伯伯吧：）我的邀请函上只有26天，我的PM让我要3个月，那么在检察官问我时间时我跟他说：请您给我3个月，因为培训已经延长了。他没说啥，就一个劲的在那里盖章，好多章要盖！大概有20分钟吧，ok了，看到同事已经在等我了，发现自己已经汗湿了，没办法，里面有点热。</P><BR><BR><P>随便拍了张</P><P><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1020802 src=""http://wayneye.com/Archive/2008/04/30/Images/P1020802.jpg"" width=504 border=0></P><BR><BR>$More$<P>这个很有意义！洋人的孩子，一个人管3个包，背一个还拖2个，前面的是他爹。心想这场景在国内我是从没见过的，什么时候可以见到呢？？</P><P><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=671 alt=P1020805 src=""http://wayneye.com/Archive/2008/04/30/Images/P1020805.jpg"" width=504 border=0></P><BR><BR><P>拿了行李后，机场工作人员指引我们上了。。。地铁？？这个我倒不意外，听爸爸说香港是做小火车的，那么这里用地铁一定是为了加快效率吧，只是不知道多远。</P><P><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1020806 src=""http://wayneye.com/Archive/2008/04/30/Images/P1020806.jpg"" width=504 border=0></P><BR><P><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1020807 src=""http://wayneye.com/Archive/2008/04/30/Images/P1020807.jpg"" width=504 border=0></P><BR><P><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1020808 src=""http://wayneye.com/Archive/2008/04/30/Images/P1020808.jpg"" width=504 border=0></P><BR><P>还好，大概5分钟就到了。</P><P>看了下手机，1点10分，上海应该是上午10点10分吧，熬了一整夜，呵呵：）</P><BR><BR><P>在去旅馆的车上，拍了张:</P><P><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1020810 src=""http://wayneye.com/Archive/2008/04/30/Images/P1020810.jpg"" width=504 border=0></P><BR><BR><P><A href=""http://www.baidu.com/s?ie=gb2312&amp;bs=%CD%C1%B1%EE%BF%B8%CC%FA%C5%A3+%D2%E2%CB%BC&amp;sr=&amp;z=&amp;cl=3&amp;f=8&amp;wd=%CD%C1%B1%EE%BF%B8%CC%FA%C5%A3+to+be+continued&amp;ct=0"" target=_blank>土鳖扛铁牛</A>^_^。。。</P>",1923,2008-04-30 13:24:15.640,1,A
21,Wayne,把Blog里的照片全部加上圆角效果吧：）,,23,"前几天在网上找到这么个酷酷的玩意，用JS给图片加上各种各样的圆角效果，官方主页：<br />

<p><a href=""http://www.netzgesta.de/corner/"" 

target=""_blank"">http://www.netzgesta.de/corner/</a></p>

<p>看后顿时觉得很酷，今天周末，有时间来搞搞这个：）</p>

<p>读了官网的说明后发现很简单，下载corner.js（<a href=""http://wayneye.cn/JS/corner.js"">本地下载

</a>），然后页面include后直接使用class=""自己挑一个喜欢的class""就ok了。</p>

<p>那么这里有个问题，如果你的Blog上线已有时日（比如鄙博）,难道要手动更新你之前所有Blog里的图片代码给它们加上

class？？</p>
<p>呵呵，这点事根本不能称之为问题：）当然是加段JS脚本给动态注册className喽，鄙播采用了Div+Css架构以及

MasterPage，所有的Blog都包含于一个名为“ContentPlaceHolder”对Div中$More$，那么好办了:</p>
<p>
<ul><li>1. 得到此Div的Dom</li><li>2. 遍历其下所有Tag为img的东西</li><li>3. 设置

className</li></ul><br />打完收工。<br /><br />完整代码如下：</p>

<p>
<pre>
// Set Corner to image
    var divBlogArtitle = document.getElementById('BlogArticle');
    
    var imgs = divBlogArtitle.getElementsByTagName('img');
    
    for (var i = 0; i< imgs.length; i++)
        imgs[i].className = 'corner iradius20 ishadow33';
</pre></p>

<p>
需要注意的是，这段代码要加在页面尾部已确保图片文件都下载完成后再设置class。
</p>",2008,2008-05-04 07:29:16.720,1,A
22,Wayne,价格上的天差地别！！！,big-car-price-differences,5,"<p>这个牢骚不能不发！收入低，东西超贵。。。</p>
<p>再过1天就来美国1个月了， 资本主义真好啊，不谈啥高深的，也没那能力，咱老百姓一个，操心的是日子怎么过（民生），怎么过上殷实的日子，收入高点，东西便宜点，可支配收入相应提高，日子就会宽裕些，举几个美帝国主义的实例吧。</p>
<p>公元2008年5月8日，创新弄了个1 Day Sale（挥泪赔本甩卖，仅限今日），20刀买个2G的Zen！<br />
<img src=""http://wayneye.com/Archive/2008/05/12/Images/Creative Buster One Day Sale.jpg"" alt=""Creative Buster One Day Sale"" width=""500"" height=""433"" /></p>
<p><br />
  Best Buy看到的CD，为啥关注这过$More$时货？？就在几个月前，我一表妹在我强烈反对下坚持要买一Sony CD学英文，花了900多中华大钱在亚马逊上买了个，估计看到这些会吐血的：<br />
<img src=""http://wayneye.com/Archive/2008/05/12/Images/Sony CD Player.JPG"" alt=""Sony CD Player"" width=""500"" height=""375"" /></p>
<p><br />
  今天在路上发现一辆尼桑350Z，TMD，超级跑车啊！<br />
<img src=""http://wayneye.com/Archive/2008/05/12/Images/350Z - 1.JPG"" alt=""350Z - 1"" width=""500"" height=""375"" /></p>
<p><br />
  瞅瞅前身<br />
<img src=""http://wayneye.com/Archive/2008/05/12/Images/350Z - 2.JPG"" alt=""350Z - 2"" width=""500"" height=""375"" /></p>
<p><br />
  突然发现里面挂着一牌子，走近一看：<br />
<img src=""http://wayneye.com/Archive/2008/05/12/Images/350Z - 3.JPG"" alt=""350Z - 3"" width=""500"" height=""375"" /></p>
<p><br />
  我靠1万8K刀，这，这。。。我貌似记着国内是几十万来着？？<br />
回来一查，汽车之家上的报价，ok，差距实在是。。。<br />
<img src=""http://wayneye.com/Archive/2008/05/12/Images/350Z In FK CN.PNG"" alt=""国内350Z报价"" width=""649"" height=""131"" /></p>
<p><br />
  就算人家是二手吧，看看Brand New的，From www.nissanusa.com：<br />
<img src=""http://wayneye.com/Archive/2008/05/12/Images/350Z Official Price.PNG"" alt=""350Z Official Price"" width=""672"" height=""204"" /><br />
</p>
<table width=""407"" border=""1"">
  <tr>
    <td width=""150""><div align=""center"">Nissan 350Z</div></td>
    <td width=""241""><div align=""center"">价格（美元） 按照<a href=""http://www.x-rates.com/d/CNY/table.html"" target=""_blank"">最新汇率</a></div></td>
  </tr>
  <tr>
    <td><div align=""center"">国内</div></td>
    <td><div align=""center"">$83,290.00</div></td>
  </tr>
  <tr>
    <td><div align=""center"">国外</div></td>
    <td><div align=""center"">$28,745.00</div></td>
  </tr>
</table>
<div style=""font-size:xx-large;color:#FF0000"">唉！！！</div></p>
<p>看看我的梦想RX-8吧：</p>
<table width=""407"" border=""1"">
  <tr>
    <td width=""150""><div align=""center"">Mazda RX-8 </div></td>
    <td width=""241""><div align=""center"">价格（美元） 按照<a href=""http://www.x-rates.com/d/CNY/table.html"" target=""_blank"">最新汇率</a></div></td>
  </tr>
  <tr>
    <td><div align=""center"">国内</div></td>
    <td><div align=""center"">$54,382</div></td>
  </tr>
  <tr>
    <td><div align=""center"">国外</div></td>
    <td><div align=""center"">$33,564</div></td>
  </tr>
</table>
<div style=""font-size:xx-large;color:#FF0000"">再唉！！！</div></p>
<p>
  还有啥好说的呢。。。有种想找个作曲家写首资本主义好的歌曲，呵呵。</p>",2305,2008-05-12 13:53:45.000,1,A
24,Wayne,来美国一个月的生活小结 （上）,,1,"<p>一个月了，基本上都习惯了，衣食住行，文化，交流，觉得适应得还行吧，零零散散的想记录一下平时的所思所感。 
<br><br><strong>食</strong>：<br>首先当然是吃饭问题，民以食为天，饭吃不好那问题可是大大的！吃的最多附近的当属汉堡了，大口大口的，呵呵。想起第一次吃汉堡是90年在北京，我们一堆小屁孩一人发一个麦当劳的牛肉汉堡，我们都实在无法忍受两块“面包”中间的那“坨”肉饼，无论是视觉还是味觉都从心理上第一时间抵制了，总之大家都扔了，只吃“面包”和薯条。<br>之后从不太厌恶变成现在的还有点喜欢，隔段时间也许还想啃上一个（比如上海的汉堡王鄙人就比较喜欢，呵呵），临走之前Monica说那个（叫什么来着的店，不记得了）有70块大洋的一个巨大汉堡，比较感兴趣的说，一直想去吃呢。。。<br>那么来美国一个月后，我对汉堡的认识是更加深刻了，每天中午去微软的食堂，对我来讲基本上只有3.5种选择：<br>1. 皮萨<br>2. 汉堡<br>3. 沙拉<br>3.5 每天变换的汤 
<p>汤由于不能解决温饱问题所以算0.5个好了，皮萨最简单了，就躺在那，铲一片走人，直接买单（2刀），也是最便宜的了。汉堡呢就有很多选择，Turkey burger($3.10)， Angus Burger($4.15)，Blah Blah Burger(最多7刀，猪鸡鱼牛都有，名字太多太复杂不记得了)，我老是吃Turkey burger，真可怜呵呵， ok，说下汉堡是怎么做成的，鄙人原来是不知道的。先跟厨师说我要什么肉（橱窗里选一个），同时他又是还会问你要什么样的“面包”（不知道翻译成什么好，呵呵，土人一个），“面包”分为两种，我之前一直不懂，直到写此部落格之前的几个小时才从美国同事那里得知答案，所以我一直都是脸红着说：“您帮我选吧：）我不介意。”然后他就把肉放在一个炉子上烤，我现在知道那炉子叫Grill，一般每种肉都会在写出价格的同时标上大概需要几分钟，只是我发现时间根本不对，说是4分钟其实每次都要等大概8分钟左右，那“坨”肉在我看来最后都是糊的。。。我每次都有点担心怕他们太忙会不会弄糊，呵呵，不过这点上老美$More$确实喜欢量化，他会拿一个我猜是测温仪的东西戳进肉里检查情况。快好的时候他会问你：“需要什么芝士？”有N（N&gt;4）种，我只能听懂一个""Swiss Cheese""，所以每次只能是Swiss Cheese，再次可怜下自己，但从美国同时那得知Swiss Cheese是不错的，他们也常吃，呵呵。OK，你也可以不要芝士，最后会问你要不要Frys（各种各样的油炸薯条，薯棒？不知咋翻译。。。），这里我闹了个笑话，后面会谈到：）。到此呢，厨师的工作也就完成了，你自己去选番茄，洋葱和腌黄瓜以及N种Source(N&gt;10)，迄今为止我尝试过5+种，都还可以，之后呢？没啦，开啃：）",1920,2008-05-15 14:31:14.317,1,A
26,Wayne,来美国一个月的生活小结 （中）,,1,"住处附近有些中餐馆，比如这个：<br><a href=""http://wayneye.com/Archive/2008/05/15/Images/P1020876.jpg""><img style=""border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px"" border=""0"" alt=""又一轩餐厅"" src=""http://wayneye.com/Blogs/2008/05/15/Images/P1020876.jpg"" width=""504"" height=""379""></a> ",1859,2008-05-15 14:36:11.860,1,A
27,Wayne,来美国一个月的生活小结 （下）,,1,"鄙人的桌子：<br><img style=""border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px"" border=""0"" alt=""P1030208"" src=""http://wayneye.com/Blogs/2008/05/15/Images/P1030208.jpg"" width=""504"" height=""379""><br>&nbsp;<br><img style=""border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px"" border=""0"" alt=""P1030210"" src=""http://wayneye.com/Blogs/2008/05/15/Images/P1030210.jpg"" width=""504"" height=""379""></p>",1979,2008-05-15 14:45:38.223,1,A
28,Wayne,LZRNM,NULL,5,"<br><img src=""http://hiphotos.baidu.com/wayneye/pic/item/452235d1c93c2b2b9b50278f.jpg"" style=""width:600px;height:430px;"" />

<br>
无语！！！。。。",249,2008-05-16 08:42:08.350,1,D
31,Wayne,汶川！汶川！牵动着整个世界,WenChuan-512-Earthquake,8,"<DIV>今天已经是第四天了，发生在祖国汶川的巨大灾情牵动着亿万人的心，第一次听到这个消息是在美国时间12号下午3点多钟（国内13号清晨6点），我们这边的周一，我那天工作比较忙所以压根就没有看任何新闻，下午3点多同事Jac在MSNBC上看到中国四川发生了地震，他问我是否知道，我答曰没有，我立即打开新浪却看见一条条触目惊心的报道，天那，天那，从这时起我的脸上就感觉发烫，体内的血液在燃烧。我昨天想，这是我这辈子第一次离地震如此之近，就发生在我的祖国！这种同胞兄弟遇难的感觉这次是如此的强烈。</DIV>
<DIV>&nbsp;</DIV>
<DIV>看到下面的文字我想每个有血有肉的中国人都会感觉震撼的！</DIV>
<DIV>&nbsp;</DIV>
<DIV>温总理：</DIV>要不断努力把他们救出来，不惜采取任何手段，不惜任何代价。 
<DIV>总理电话里大喊，我不管你们怎么样，<STRONG><FONT color=#ff0000>我只要这10万群众脱险</FONT></STRONG>，这是命令。他把电话摔了</DIV>
<DIV>我就一句话，<FONT color=#ff0000><STRONG>是人民在养你们</STRONG></FONT>，你们自己看着办。</DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV>祝先生的捐款数让NHK电视台记者颇为惊讶，这也是当时收到的第一笔百万元捐款，超过了日本某个政党的捐赠额。而祝先生$More$根本不是富豪，他开办的一家废品回收小公司刚刚起步，资金极为艰难。祝先生在NHK电视台的采访中说了一段话，被用大字字幕反复播放，他说道：“我虽然穷，但少吃一口饭，少喝一口水，也要挤出钱来救助祖�难中的同胞。”</DIV>
<DIV align=right>--转载自萨苏：《<A href=""http://blog.sina.com.cn/s/blog_476745f601009itr.html"" target=_blank>地震照亮每个人的灵魂 – 在海外面对中国震灾的反响</A>》</DIV>
<DIV align=right>&nbsp;</DIV>
<DIV align=left>今年中国实在多灾多难，先是南方五十年不遇的特大****，接下来是股灾，大盘整整跌去了一半，然后是西藏骚乱，整个西方都在谴责中国，还有人抢奥运火炬，接下来火车又出现大事故，胶济铁路两列火车相撞导致火车出轨，然后是全国数万人感染手足口病，现在则是几十年一遇的特大地震，地震达到了1976年唐山大地震的震级。五个月时间，各种天灾人祸纷纷上演，正可谓天有异象，必有其因。</DIV>
<DIV align=right>转载自月光Blog：《<A href=""http://www.williamlong.info/archives/1339.html"" target=_blank>四川汶川大地震</A>》</DIV>

<DIV align=left>&nbsp;太多了，阅读这些文字时身上一直在冒汗，只觉得整个人都在抖动。</DIV>
<DIV align=left>&nbsp;</DIV>
<DIV align=left>查了查全球各大新闻媒体的网站：</DIV>
<DIV align=left>&nbsp;</DIV>
<DIV align=left>BBC:</DIV>
<DIV align=left>中国地震死亡人数上升至五万</DIV>
<DIV align=left>中国政府担忧在这次地震中恐怕已经有五万人失去生命</DIV>
<br><IMG alt=BBC src=""/Blogs/2008/05/16/Images/BBC.PNG"">&nbsp;
<DIV align=left>&nbsp;</DIV>
<DIV align=left>CNN (在汶川的灾难之前，CNN是个敏感字，“做人不能太CNN”，但在人类共同的����灾难面前，CNN称赞了中国政府):</DIV>
<DIV align=left>标题：中国政府在这次灾难中给予外界罕见的透明度</DIV>
<DIV align=left>照片文字: 温家宝总理在绵阳市九州室内体育馆握住遇难者的手</DIV>
<DIV align=left>文章一上来就说，中国的国有媒体用精确的图表即时对死亡人数进行报道。</DIV>
<DIV align=left>紧接着说：这样直观的，迅速而广泛的视频报道之前在国内媒体上极少出现。</DIV>
<DIV align=left>CCTV，中国的国营电视台，以及一些当地电视台，已经取消了固有的电视节目而进行24小时的地震情况报道。</DIV>
<DIV align=left>下面提到了温总理，温总理对孩子说：“你的不幸就是我们的不幸。”，“只要人还活着，一切都可以重新建设！”，“灾难确实可怕，但政府正在尽一切努力（挽救生命）！”</DIV>
<DIV align=left>评论说：如此迅速而广泛的新闻传播在此前的灾难中不曾有过，。。。之后举了唐山大地震和非典的例子，打住了。。。毕竟。。。GFW还是存在的。。</DIV>
<DIV align=left>巨大地震的灾难，加上3个月后的北京奥运会，使中国成为全球的焦点。</DIV>
<DIV align=left>之后谈到了中国政府对国际救援队的态度，说中国欢迎物资和援助和营救队，紧接着跟了句：<BR>Aid groups have been on standby, ready to help as soon as the Chinese government gives the green light. Officials say that will come ""when the time is ripe.""</DIV>
<DIV align=left>国际救援队已经准备好了，只要中国开绿灯。政府说：“只要时机成熟。”</DIV>
<DIV align=left><STRONG>我已经看到新闻，韩国，俄罗斯，新加坡和日本的救援队已经到达了灾区</STRONG>。</DIV>
<br><IMG alt=CNN src=""/Archive/2008/05/16/Images/CNN.PNG"" />
<DIV align=left>&nbsp;</DIV>
<DIV align=left>&nbsp;</DIV>

<A href=""http://market.alipay.com/alipay/sichuandizhen/index.html"">
<IMG border=0 alt=捐款 src=""http://pic.yupoo.com/williamlong/7207558e36f1/medium.jpg"" /></A> ",3085,2008-05-16 11:56:49.083,1,A
32,Wayne,满脑子只想着震情，难以入睡，无法专心工作,,8,"<P>标题便是我这几天的真实情况，每当我坐在电脑前，无论是在公司还是在家里，我唯一做的事情就是不断地点击阅读着一篇又一篇的文章，焦急，沉痛，内心在泣血。 
<P>今天早上起床的时候发现外面阳光明媚，天气预报说今天西雅图会有28摄氏度，果不其然。 
<P>脑子里空空的，昨日的疲惫似乎在睡眠中稀释了，我暗想今天还是好好工作吧，灾难发生了，活着的人应该尽其所能提供帮助，或者祈祷，祈福，于此同时，更应了解在大自然的灾害面前人类依旧非常渺小，所以更应珍惜眼前的生活，过好每一天，不虚度时光！ 
<P>一边在往车站走着，一边想着，块到245车站，猛然发现公牌忘带了，没办法，只能回去拿。由于此事，我错过了定点的班车，大概是从这时起，我的心情就开始再次变得沉重起来。我步行到了40号楼，找前台小姐叫了辆Shuttle，小姐说754，8分钟，我感谢之后就坐在路边的椅子上等着。。。直到。。突然觉得不对劲，那个司机好像在问我！我一看，“哦！”754，都到了。赶紧上车，说声“Sorry！I was thinking about something:)”，司机师傅说没关系的，只是我们只能在这里等一分钟就得走，所以我看到你一个人坐那里猜是你订的车，我表示感谢并自己笑笑，唉！满脑子都是这件事！ 
<P>转几张令我泪下的照片：<BR><A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-vnSShb01ptD8K0NpX4gYnu6c3HuBop2-JaFdW8Ey7nNgQcHiabtWSMD2P9htqnl1g?PARTNER=WRITER""><IMG style=""BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" border=0 alt=7bd15499b275c21b6f068c1a src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-vzJfhIka30grZ9-ImbrkmsFXbdgC6bVSceixZ4HftsgJOP0-gaESkW4gT394LgZxY?PARTNER=WRITER"" width=504 height=336></A> <BR><A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-uZc64bqfZ0p5HynfBK2FDZjGmRnU1nP-u1wuElA_xTK4y0SES0Vxrpj_DdVdik_pA?PARTNER=WRITER""><IMG style=""BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" border=0 alt=QUAKE/ src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-sWU60-_BKYLDFDTbqJjHFjkbWc9MbZ7oXwv-vRHZJXtBjy8kLV_OwAyme8mxS7_u0?PARTNER=WRITER"" width=504 height=363></A> <BR><A href=""http://aox8pw.bay.livefilestore.com/y1pnRBPRymIJR8USYch6Xb2luU3qc4-kkyXpgOXaGiJPA5V4ClOli_3474glqT3Xm_acUTKbGqSsCUrDA2VC0sT5Q?PARTNER=WRITER"">$More$<IMG style=""BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" border=0 alt=426490f78a990831730eec42 src=""http://by1.storage.msn.com/y1pKNEY41dRZHpz8MlmsIbiPHX8RoEb9QUEIOWlnBRBa3dAv3djl3eCl8xw7_J9Bi3vno8d06te1S4OS2PwNQR1vSnLZ-XimMBq?PARTNER=WRITER"" width=504 height=338></A> <BR><A href=""http://aox8pw.bay.livefilestore.com/y1pyDYrC_wZlGeoGnYXFBwgLLZ_iKJZcF-MlVsjLJY4-gl6LR7TOCuXaAbXTtqWQluxJGlVrGQghDQ-LZKhycfdh4Bjb4LkM1u-?PARTNER=WRITER""><IMG style=""BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" border=0 alt=23a5bc5059c1494f1138c245 src=""http://by1.storage.msn.com/y1pKNEY41dRZHrUNFS0cIMFdl5KlRu8d0MbvdFbJLWD0DYETnN5W9eYz-6Ncu1HMELZ5Bnxv5HuzhmPXuf3tWqETOFN7ani3Qew?PARTNER=WRITER"" width=504 height=368></A>&nbsp;<BR><BR>下面这段采访四川省广元市长的视频，鄙人看一次哭一次。。。<BR><SPAN style=""DISPLAY: none"">&nbsp;</SPAN><SPAN style=""DISPLAY: none"">&nbsp;</SPAN><SPAN style=""DISPLAY: none"">&nbsp;</SPAN><EMBED height=415 type=application/x-shockwave-flash pluginspage=http://www.macromedia.com/go/getflashplayer width=480 src=http://6.cn/player.swf?flag=0&amp;vid=BjDK50nYjWiv/wxw17EbOg allownetworking=""internal"" allowscriptaccess=""never"" wmode=""opaque""> <BR><BR>在<A href=""http://tieba.baidu.com/f?kz=379662447&amp;bl=jrzt_p12"" target=_blank>百度地震吧</A>看到，有网友发现一位北川中学的老师在5月11日上网发了篇帖子，内容是北川中学高三年级为了缓解高考迎考压力而举行的一次文体活动，“时间在此刻定格”。。。作者祈祷：“企盼着他的下一次更新”。<BR>
<P>。。。<BR><A href=""http://www.baidu.com/search/image_08eq.html"" target=_blank>实在是太多了啊</A>！！！现在所有的汉字媒体都聚焦在这次灾难上，非汉字媒体要么在头版头条予以及时报道，要么开辟了专题进行报道，我看了很多很多，善良的人永远是多数！<BR><BR>比如：<BR><A href=""http://blog.sina.com.cn/s/blog_476745f601009joe.html"" target=_blank>近距离看前往四川灾区的日本救援队</A><BR><A href=""http://www.hecaitou.net/?p=2986"" target=_blank>中国首支自发抗震救灾队伍</A><BR><A href=""http://www.nytimes.com/2008/05/16/world/asia/16search.html?ref=asia"" target=_blank>The scale of devastation is so great that even as the government has mobilized a mammoth rescue effort, much of the manpower is focused on the most populated places, like Wenchuan and Beichuan, <STRONG>in hopes that more lives can be saved</STRONG></A>.<BR><A href=""http://www.cnn.com/2008/WORLD/asiapcf/05/16/china.map/index.html"" target=_blank>CNN的这个页面详细显示了四川各个地方的灾情，死亡人数。其中有一段“北川中学坍塌，1000名学生被困。。。”。</A><BR><A href=""http://ditu.google.com/maps/ms?hl=zh-CN&amp;ie=UTF8&amp;oe=UTF8&amp;msa=0&amp;msid=105498083399349668294.00044d0490f73e7f5c173&amp;mid=1210583203"" target=_blank>更加详细的谷歌灾情地图</A>。 
<br><P>另外看到一个：四川省副省长李云成在新闻发布会上说“直升机<STRONG>97</STRONG>架，运输机<STRONG>10</STRONG>架”。<BR>有点牢骚，国难当头之际就不发了，仅学玄德一句：“恨少！”。</P>",2101,2008-05-17 07:15:07.990,1,A
33,Wayne,大声疾呼：不要再曲解万科集团王石了！,,7,"<p>四川地震来袭，举世震惊，万科集团问悉后在震灾当天决定以总部名义向灾区人民捐献200.000000000万元巨款，金额达到了目不见经传的香港艺人成龙捐款数额的 0.20000000倍，或一套深圳100.0000000平米的房产的售价。或者是07年总利润的0.0450000000000％。至于公司职员的个人捐款，公司正在紧急组织之中，王总向记者表示，他自己的个人捐款保证一定会达到公司规定的10.0000000元的上限。 <br>　　　　听到王总的保证，记者不禁感动得泪流满面。 <br>　　　　作为一个凭着个人的聪明才智跻身与亿万富豪俱乐部并多次在富豪榜上有名的成功人士，还有这种心系灾区，与灾区人民同呼吸共患难高尚品格无不让人感到深深的震撼，谁说地产界为富不仁？王总以自己的行动给了我们响亮的回答。其实大家不是很了解王总，很多人误解王总总以为王总很有钱，在这里我可以负责任的告诉大家，王总其实没有大家现象的那样富有，今年儿子结婚，才请了290人办了30座，为了节约总共开销才400万不到，婚礼上用的车也不多，限量版奔驰迈凯伦 SLR才来了２台，大家要知道，这种汽车全球有10多台啊！这次才来了2台，面对孝顺的儿子，王总充满了内疚和自责。 <br>　　　　这次四川人民遭受建国以来最大的自然灾害，王总本着再苦不能苦灾民，在穷不能穷灾区的$More$伟大情操，从并不宽裕的资金中拿出10.000000巨款捐赠灾区人民，向灾区人民奉献上自己的一片爱心，为了拿出这笔巨款，王总必须要少喝半口酒，少抽半支烟，这对王总来说要忍受多么巨大痛苦啊。 <br>　　　　我们王总平时有登峰的爱好，经济负担很重，很不宽裕。你想想： <br>１９９９年５月,玉珠峰，海拔６１７８米，等顶, 合计花费256万. <br>２０００年４月，章子峰，海拔７１４３米，登顶,合计花费328万. <br>２００１年８月，慕士塔格峰，海拔７５４６米，登顶,合计花费365万. <br>２００２年２月，非洲乞利马扎罗山，海拔５８９５米，登顶,合计花费240万. <br>２００２年５月，北美洲麦金利峰，海拔６１９４米，登顶,合计花费235万. <br>２００３年５月，珠穆朗玛峰，海拔８８４８米，登顶,合计花费360万. <br>２００３年１２月，南极最高峰文森峰，海拔５１４０米，登顶,合计花费205万. <br>２００４年１月，南美最高峰阿空加瓜峰，海拔６９６４米，登顶,合计花费226万. <br>２００４年７月，欧洲最高峰厄尔布鲁士峰，海拔５６４２米，登顶,365万 <br>２００４年７月，澳洲最高峰科修斯科峰，海拔２２２８米，登顶,合计花费234万. <br>２００５年４月，滑雪抵达北极点,合计花费282万. <br>２００５年１２月，顺利抵达南极点,合计花费355万. <br>２００５年１２月２４日，印度尼西亚 查亚峰，海拔5,030米，登顶,合计花费233万.。 <br>在如此之大的经济负担下，还能持续的对中国这个灾难频发的国家，能够持续的捐款是多么的不容易。王总以爬遍五大州名山的资历用高瞻远瞩的高度用战略性眼光明确指出：中国是个灾害频发的国家，赈灾慈善活动是个常态，企业的捐赠活动应该可持续！ <br>&nbsp; 7.8级的地震超过了唐山大地震是常态 <br>&nbsp; 到现在为止一周不到死难者2万之众是常态 <br>&nbsp; 废墟下那些应该笑若阳光灿烂然而此刻冰冷僵硬的小小尸身是常态 <br>&nbsp; 举全国全军之力援助灾区是常态 <br>&nbsp; 解放军星夜兼程生死不顾赶赴灾区是常态 <br>&nbsp; 全国各地停止娱乐节目播出24小时滚动播出灾区情况是常态 <br>&nbsp; 全国民众踊跃捐助慷慨解囊是常态 <br>&nbsp; 港澳台三地居民纷纷相助是常态 <br>&nbsp; 日本在便利店设置募捐箱是常态 <br>&nbsp; 王永庆先生、邵逸夫先生捐资一亿是常态 <br>&nbsp; 低保户、乞讨者同样加入援助者之列是常态 <br>　　谁？还有谁！还有谁能有王总的这种山高我为峰的博大情怀？还有谁还能在这个时候有如此的淡然自定？这些都让我相形见拙，万般思绪千般感慨汇成一句话：爬遍五大洲的人就***和咱不一样！不仅如此，王总有超出常人的胸襟，就有多数老总无法企及的思想境界，对员工的爱护达到“神”一样的级别，“每次募捐，普通员工的捐款以10元为限。其意就是不要慈善成为负担”全中国给员工发工资的老板海了去了，但是能有几个能像王总这样悉心帮员工捂住钱袋子的？看到这里时，我不禁热泪盈眶，控制不住心中的激动，大声呐喊：让我也成为王总的员工吧！ <br>&nbsp; 姓名 职务 报告期内从公司领取的报酬总额(万元) <br>　　　　　　　　王石 董事会主席 691万元 <br>　　　　　　　　郁亮 董事、总裁 596万元 <br>　　　　　　　　丁福源 监事会主席 357 万元 <br>　　　　　　　　张力 监事 228 万元 <br>　　　　　　　　刘爱明 执行副总裁 399 万元 <br>　　　　　　　　丁长峰 执行副总裁 353 万元 <br>　　　　　　　　解冻 执行副总裁 283 万元 <br>　　　　　　　　张纪文 执行副总裁 366 万元 <br>　　　　　　　　莫军 执行副总 331 万元 <br>　　　　　　　　徐洪舸 执行副总裁 417 万元 <br>　　　　　　　　肖莉 董事、执行副总裁 女 339万元 <br>　　　　　　　　王文金 执行副总裁 320 万元 <br>　　　　　　　　合计 - - - 4680万元 <br>另据透露，在电视台发布了短信捐款的号码后，王总立即放下自己最喜欢喝的轩尼诗人头吗，立即拿出手机准备捐款1元，但是由于四川受灾太严重了，导致通信受阻，王总的短信发不出去，为此，王总到现在还在痛心不已。 <br>　　看着王总那布满慈祥的面孔，我久久无语，我为中国培养出了这样拥有博大心怀和充满爱心的老总而自豪，对这只求付出不求回报的伟大人格我感到自惭形秽，万科是好样的，王总更是好样的！为了回报王总和万科这样优秀的、充满了人世间最伟大的社会责任感的企业和企业家，我们除了连夜排队认购万科的精品房产才还能作什么呢，我们一定要用我们自己的行动让王总感到欣慰，让万科因为这次捐赠遭受到的巨大经济损失减小到最低！
<p>&nbsp;<a href=""http://club.news.sohu.com/r-charitable-138829-0-0-0.html"" target=""_blank"">原文出处</a></p>",1836,2008-05-22 13:05:10.337,1,A
38,Wayne,问责开始,,7,"<p><b>""为什么这次学校倒塌这么多，这里恕我暂时不能直言，但稍有常识的人想必也知道！""</b></p>
<p>应该说，鄙人愚笨，但总算还属“稍有常识”之列；鄙人不才，笨笨的认为，如果那些倒塌的小学，在当初建设时，有关衙门少吃点鱼翅，少买辆车，稍微为人民着想哪怕那么一丁点！！今天学生的死亡人数最起码，最最起码！！！几秒钟就倒塌甚至整个学校被夷为平地的数量会至少减少一半，死亡学生的会减少30%！！！！！！！！ </p>
<p>
<br>
李大眼文章正文：<a href=""http://blog.sina.com.cn/s/blog_46e7ba41010091pk.html"" target=""_blank"">北川邓家“刘汉小学”无一死亡奇迹背后的真相 </a></p>",1942,2008-05-22 15:30:20.517,1,A
39,Wayne,[转]欧洲小城赈灾华人令我感动(组图),,7,"<p><b>""最值得称赞的是待所有参加活动的人离开以后,广场上连一片纸屑都没有留下,对此我要向80后的孩子们说一声你们的确已经与从前不同!""</b>
</p>
<br>
谢谢！
<br>
<br>
徐铁人： <a href=""http://blog.sina.com.cn/s/blog_4acf0a9701009uzn.html"" target=""_blank"">欧洲小城赈灾华人令我感动(组图)</a>",1597,2008-05-22 15:32:48.230,1,A
40,Wayne,Outlet的悲喜两重天,2008-Shopping-In-Seattle-Outlet,4,"<P>今天从Outlet败家归来，本来开开心心的，给Wendy买了洗面奶和一件Nike粉色T-Shirt，然后是一个3刀的Sony耳机和8刀的收音机（给爷爷的），觉得蛮划算的。 
<P><A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-vJ-VRfbtm3TpXwrJMZYcteLLMyInAnVE1i7JTEIP4vX1bp6ngBUOk7cWLCM4k6AxQ?PARTNER=WRITER""><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1030387 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-viDJTq1I_KFO9ElEOlnBX5j8Mwjz4k1svUDdrLukn3dTX5nJiQxBdObFDFVZfX2GI?PARTNER=WRITER"" width=504 border=0></A> 
<P><A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-up7l-6poqNktY9IZylgmAoKLPBnJhRqKYb3XE5RHL2GqLE-o1StRan9qeGDYCupTg?PARTNER=WRITER""><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1030377 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-t7CAwZa6lTSoHqHAuDq9kjqa_3jUFpyGPAAYhKpILHlS-XoC9ETQv6T7wKqq3jJ-Q?PARTNER=WRITER"" width=504 border=0></A> 
<P>&nbsp;<A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-svVCnX69mUq_CaGXGxAWrh5h70EbgcedEyBI3rAfEnbzaCGKhEFLWkg0HEuGvQ1ao?PARTNER=WRITER""><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1030382 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-vL4wYG3CnHj7PMBm9F4qgirjOEOlWw2chyHpw0KzmsqUlBdFljnBglruXihuOI0C8?PARTNER=WRITER"" width=504 border=0></A> $More$
<P>&nbsp;<A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-s-Nz7gfstICtz6AJpTyetYgqqWgCyDP6JjMCdMeD1TS8Vem2XZha_s1m4WWWdm2Eo?PARTNER=WRITER""><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1030374 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-uTn_aNF7QlFVw_xwsOIcbb-QrY6zYJ3FVHmbTyMQavdDbgPblWpAXe9maL-N-NLnQ?PARTNER=WRITER"" width=504 border=0></A> 
<P>&nbsp;<A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-sq2yeBQdimOVgVk3EniGCDHIIfxuzVM8q0gPMR9jyAgplrZb6hoF0OdYUXlj9mMVQ?PARTNER=WRITER""><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1030376 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-u-uHvaKgmWl3hYMKaWk7mpBtWQrDvq2ueDDASC7uH5j9GWAu57O8n9hTZEVBOTlBg?PARTNER=WRITER"" width=504 border=0></A> 
<P>&nbsp;<A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-t7FGP4v5AT3_glGTNcqJkcSP-c6Spk81MH8lDkE67v1UOZRbosXAEMRsjm2vj3j9Q?PARTNER=WRITER""><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1030379 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-s5o-bL1Gljocn8XeTkzcP5Krh-nJMzmGYpSeXvcgKiubaj8SjrFGlqIQgADB_-S-w?PARTNER=WRITER"" width=504 border=0></A><P><A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-sXvAVX0Vh6_Gn8DqKm-2WDD57mXNzRzGk8n0PZVsqkfwQe_U6g1CDqgCTWHigEVTE?PARTNER=WRITER""><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1030381 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-utytFdYhjN3_3RC0hRHod6VTv4igPQ5J9nCleyjkYD8bfF79LYQ4a3duSFajHKOZA?PARTNER=WRITER"" width=504 border=0></A></P>
<P>Sony返厂耳机，被一个普通的盒子装着，我一看见“Refurbished”就有点来劲，俺MP3正缺耳塞呢 
<P><A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-szewKzSTYf4MTbR19WaLHtw8hEMvM-re_Rx4AqWMp6GNVe8J4ZjkBLQZkQFn2iS44?PARTNER=WRITER""><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1030388 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-snIyuVLb2eCuNWGVpZJn3y_zjQeiCXt4-2lX4RhXVpNzOiHeegbJk8CKb4GSDI990?PARTNER=WRITER"" width=504 border=0></A> 
<P>侧面： 
<P>&nbsp;<A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-uVAigotw8EuUpxoTq69h6Scfk1i2pixtyqw0PyQWlGXNMltUWoPbRI54VQm0vqm5w?PARTNER=WRITER""><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1030391 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-s0jWGk-mqQE9j83opi_Kh_xLE9vQbeQsrMaMqNW6vqCCjQvIou3BuasPD0pAmY89Y?PARTNER=WRITER"" width=504 border=0></A> 
<P>嘿嘿<A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-sWfzRWeVhJ52jDRLPN7ALfIV-mcYFvaBztkGv2ktdPR3nSG-4gA6hR54HaljLGIjA?PARTNER=WRITER""></A> 
<P>&nbsp;<A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-spg2k3V_l6BHo138PXj6hAADKf4IpsVz7zoN3mLoOnoDeteCzXL3NEtb7WYKmE9MY?PARTNER=WRITER""><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1030392 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-spQ9G3bEu9ilbjfIaDRSSPGSYq-9IFdp6qwUnh1GdQzNKicCGrcI-I7Vm4bUDSe7M?PARTNER=WRITER"" width=504 border=0></A> 
<P>Sony Walkman运动型收音机，外观很前卫，爷爷估计猜不到：）<P><A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-sWfzRWeVhJ52jDRLPN7ALfIV-mcYFvaBztkGv2ktdPR3nSG-4gA6hR54HaljLGIjA?PARTNER=WRITER""><IMG style=""BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=379 alt=P1030399 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-s_C8hsKkTY0MMu_iRyWRiWmF2g22xfjNol_vVVRNlHIe9rrlRcrZNJZ8_eTU1ysws?PARTNER=WRITER"" width=504 border=0></A> 
<P><A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-txUSovEcN6SpVcxz4YorbZh278NISb3RrNAiow3QGqsqxkbjE8gdvgXHjh2GnwxG0?PARTNER=WRITER""><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1030393 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-v-O8-S2dgZFlucQVq0zj8JindAU_2eiQNBzLRLFKqmGDUJNMjfRCIY5WgcSvl-g9E?PARTNER=WRITER"" width=504 border=0></A> 
<P>回家后想也没想就把衣服（这个星期的衣服^_^）扔洗衣机里洗了，洗之前看衣服并不多就跟新来俩同事说一起洗吧，节约能源，现在真后悔。。。 
<P>这件粉色Nike女士T-shirt，在洗衣机里洗的时候，把同事的一条裤子和衣服，原来都是白色的，全部染成了<STRONG>浅蓝色</STRONG>，我自己的一条短裤，被染成浅红色，那件T-shirt， 变成了惨不忍睹的青白色： 
<P><A href=""http://byfiles.storage.msn.com/y1p-vkys8vx4-uVHftJ_r8FS6hyrSBZTPstPLD18jVNebzje4A__4mVEru_dUwL_Blj6d_li_isaJY?PARTNER=WRITER""><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=379 alt=P1030402 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-u06VTz1O87cygbJDTyECAMO0EbD9zgO-g5m_mJmeKYxqaGAD3wlBPkGwxYcnDMTQw?PARTNER=WRITER"" width=504 border=0></A> 
<P>&nbsp; 
<P>本来败家指数很低的，2. 如果Nike不Return这件垃圾的话。。。败家指数：<STRONG>8</STRONG>！</P>",2653,2008-05-28 03:27:45.730,1,A
41,Wayne,美丽的西雅图海滩公园(Alki beach park),,1,"<P>感谢Officemate Jac先生，是他善良而耐心地一次又一次带我领略西雅图的美丽风光，上次是<A href=""http://xiaotianpop.spaces.live.com/photos/cns!734274473CC13A10!473/"" target=_blank>Snoqualmie Water Falls（卢高美瀑布）</A>，今天，则是Alki beach park（西雅图海滩公园）。 
<P>下午我们先去了中华长城销品茂(Great Wall Shopping Mall)，两人空手而归，我嘛。。。懒汉一个，里面食品居多，非食品的都不稀罕，国内比这里便宜太多了，呵呵。 
<P><IMG alt=P1030403 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-syjZrUgqQeMoAlSgMZ8VFwogcUVf-wUdZ3XOkbuFIC0ml99-lS0z83dkknOgoBSeo?PARTNER=WRITER"" border=0> 
<P>然后开车来到海滨公园，无法用语言形容，真的太美了，发达都市与自然景观的完美结合，美国的月亮不一定比中国园，但可悲的是，美国的空气一定比中国清新，天一定比中国蓝。唉！世界工厂，希望在有生之年能够看到祖国真正的强大，世界各国同胞都在埋头苦学方块字，都在抱怨去中国的签证咋就这么难并到处打听如何不被拒签，都梦想着能够去中国工作，生活。。。意淫吧。。。但一定会有那么一天的！ 
<P>OK！先抄起家伙开战！由于已经是傍晚时分，所以照片亮度不是很够,考虑再三决定还是保留原始数据吧。 
<P><IMG height=285 alt=P1030426 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-tw7XXOlAvNSzrJbb1BaohU_V6Fsr3GEyo-ViEaQur3wMPDAmeKRcH4wRbI7CznzFg?PARTNER=WRITER"" width=504 border=0>
<P><IMG height=285 alt=P1030427 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-vf6O96GK-_6sYxYm_31REF6nQAmYQITGQ4chKkzkCFpqKZauUtyJV3xacUObg6Jos?PARTNER=WRITER"" width=504 border=0><P>这张打了15倍焦距，手持拍摄，后期$More$增加了曝光和亮度，决定拿这张做为新<A href=""http://WayneYe.cn"" target=_blank>WayneYe.cn</A>的Blog Banner。 
<P><IMG height=285 alt=P1030445 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-uxurI_4Uu--_ZG380RDIX9pIOWWZOczlkiwGT2Gn4FXjnIDNqL6ez4m9Hn7P3PNOc?PARTNER=WRITER"" width=504 border=0>
<P>受资本主义食物腐蚀，已经发福。。。 
<P><IMG height=285 alt=P1030449 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-u8_FPRZmVEhXJsQe_OoUCwg7OMCW084fMgnNFwVmhvt3x-e54FVs8k1UmSa6gWcgA?PARTNER=WRITER"" width=504 border=0> 
<P>特别喜欢这张！ 
<P><IMG height=285 alt=P1030459 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-tVhYtuideWvXJnUl43UnuzDTNeOZe_5T1HI4G6NVV6H-daSPHr-WTf-1KQ-OmsKEo?PARTNER=WRITER"" width=504 border=0>
<P><IMG height=285 alt=P1030465 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-tl_fAPpb66gWgtSbZLmlKD-X2fqBN3Wb2DpDXvXX26Zj2-AfJSrbUoma5JuEZymUg?PARTNER=WRITER"" width=504 border=0>
<P>惬意的海滩 
<P><IMG height=285 alt=P1030477 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-tzIWqKdHLedFnNdR9AdDe4EBnHUF5hOEz2mbhVBdJb_Ix0DCzuTJefNEjQdQM37hM?PARTNER=WRITER"" width=504 border=0> 
<P>享受沙滩：） 
<P><IMG height=484 alt=P1030488 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-tK7CyiI_UrBzn-ZbcPmfoU5XZUQkHSlSvpVongw8AcN_J6JSaw4tRf_lwStAloB3I?PARTNER=WRITER"" width=274 border=0> 
<P>享受沙滩2：） 
<P><IMG height=285 alt=P1030490 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-uzqdQ3L4wwxyBhDdpO5HaNwOop7htgTaMpiuxtC_IXnZHsOpfRydpLJHxvhSMsDh8?PARTNER=WRITER"" width=504 border=0> 
<P>我的“恩人”，感谢您！他答应了我的请求，明天请他海吃一顿墨西哥大餐^_^ 
<P><IMG height=285 alt=P1030480 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-vR7qVgsHJYFtU_WqKJfyyGpo03vvRuCWwf7nWIjROwSJHn0_zI7gH1CWHNSX5wq4k?PARTNER=WRITER"" width=504 border=0> 
<P>可爱的孩子们 
<P><IMG height=285 alt=P1030500 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-uPcnroNXfXSkhyDA1vimjSZUY6lo7MD6hksXX5b6jDefbBzZAJuf0V2tyHCqlzoVc?PARTNER=WRITER"" width=504 border=0> 
<P>这里比较有意思，Jac说，""Hay! You can take pictures for the Fireman."" 我的第一反应是：消防队员有必要拍照吗？？结果看过去发现有好多人都在拍，形成围观之势。。。不解，问之，答曰：人们爱戴他们，因为一旦有危险，他们一般是第一时间赶到的。我也就赶紧过去，拍了几张美国的人民英雄。 
<P><IMG height=285 alt=P1030501 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-vg4bPVCZGtMddtqw-enmrDTXG-P9615mIt2nINPOJsMUk8WLLKg6Eamv4jb2f-vYc?PARTNER=WRITER"" width=504 border=0> 
<P>之后就一直跟Jac做在海边聊天，我是无比的感慨啊。对他说：“I suppose I am traveling in my dream!People live here is living in paradise!”（我觉得我是在我的梦想里旅行，这里的居民真是住在天堂里！）。是啊，一个洋房，每天早上起来就可以看到无敌海景，对面就是繁华的Down Town Seattle，不是生活在天堂里那在哪里！ 
<P>日落了，唉，鄙人摄影技巧函待提高，书到用时方恨少啊。。。Jac笑着安慰道：“明天还有机会啊：）”，呵呵。 
<P><IMG height=285 alt=P1030511 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-uIdo9_8NDhrsFpGiQFeFEBtaJmvQg5RwPlvpEEKHWPMhzah6fJSEKevvczghA4ebA?PARTNER=WRITER"" width=504 border=0> 
<P><IMG height=285 alt=P1030514 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-uCYgoK0xjzenZAxehLlqmpfM-FYWUxOPetiuyPllaM2wI5fnYvOztyQR0YXLz688A?PARTNER=WRITER"" width=504 border=0> 
<P><IMG height=285 alt=P1030524 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-voFSSCQfWF32ksQCszEm3guMUoRVPxIRljkEs_CCDGXp6_25zR-5LxT-Ns5gEC59o?PARTNER=WRITER"" width=504 border=0> 
<P>夜色渐渐降临，这对父子已经准备好了烧烤的装备和食物，准备享受夜间美景了。 
<P><IMG height=285 alt=P1030515 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-uarh8E6u8o9SvTB6SFnCQ1rkUJqCpm76C6dfE7AfpFM9aYVSeo5tJ7MXMV_Wz13vQ?PARTNER=WRITER"" width=504 border=0> 
<P>临走前去停车处时，看见对面有一个男的肩上扛着一块大木头，正不解，Jac已经开口告诉我：“这家伙准备去烧烤了。”OK，再次感慨美国人对生活乐观的态度。 
<P>拍两张梦想中的洋房，努力吧！我这辈子一定会住进去的：） 
<P><IMG height=285 alt=P1030472 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-sKkku3K8mB--2Y5WPp-ZT6gLehBrcJb4ciZwZC648FwgrdZE73vzW57XlXQNdUl88?PARTNER=WRITER"" width=504 border=0>
<P><IMG height=379 alt=P1030533 src=""http://byfiles.storage.msn.com/y1p-vkys8vx4-uDjk3NMKWdhzXfM09wRPdN0y6tJnGNQpYABoris9WWvJM3rkIYAWok6x2zJjmZ7Xw?PARTNER=WRITER"" width=504 border=0> 
<P>回来的路上细心的Jac专门绕到路边一个斜坡停下来，说：“OK, you have the chance to take picture for this hammer:)”，我当时正低头想着什么呢，抬头一看眼前这辆加长悍马，不禁被Jac的细心周到所感动（来时我看到这大家伙时想拍张照，但没来得及，只能在开过去后照了张车头，Jac当时说我们可以停下来，我谢绝了，没想到他专门在这里绕上一个坡让我拍）。由于夜幕降临光线不足所以有些发虚，无所谓了，老子有钱了也tm搞一辆，至少。。。租得起吧：）Jac告诉我这种加长车一般可能是一个班的学生在毕业前租的，4，50人都坐这辆车出去开Party，平摊租车费用。 
<P><IMG height=379 alt=P1030534 src=""http://by1.storage.msn.com/y1pKNEY41dRZHoP1kvkd-Oh8Zxe2w6YgBmODd__vuanvk6sqbKn6dDZ66gVqWpZSy5C2zbwNQ6MidklhSL-nSW0EVvQIxR0YGIh?PARTNER=WRITER"" width=504 border=0> 
<P>难以忘怀的一天！ 
<P><A href=""http://xiaotianpop.spaces.live.com/photos/cns!734274473CC13A10!605/"" target=_blank>这里</A>是相册地址，所有照片都在里面。</P>",3949,2008-05-28 03:37:58.540,1,A
42,Wayne,19刀剪个头，13刀两包烟，5毛钱看阿德里亚诺！！！,2-quaters-Adriano,1,"<p>后悔出来之前没把头发剪短，周日花19刀剪了个头，还是在Jac帮助之下找了Coupon（优惠券）之后，之前就听同事说他剪头花了25刀，恐怖啊！！！而我的头发实在是长得吓人了，呵呵，Jac说这边确实有人每次剪头都剪得很短，每年只剪两次以节省开支:)剪之前Jac担心我沟通有障碍所以观察了下发现有一个女的，他猜这女的是中国人，结果我们问她答曰不是，剪头时跟小姐聊天得知她来自夏威夷，我跟他描述我希望剪短点但要保证Cute^_^呵呵，她告诉我，我做的是MVP服务，他们这里最高端的，本来是24刀的因为那张礼券只要19刀，还有Massage（按摩），不过我拒绝了，一直不太喜欢，临结束时她问我要不要Gel，我没听过，但能猜到大概是发胶之类的东西，确认之后弄了一点，嘿嘿，精神多了！之后付了4块钱小费，共<strong>23</strong>刀，唉！</p>
<p>之后打算去超市买2包烟，可怜，一根烟都没有了。。。6月6号同事会帮我带一条，还有6天。。。唉，2包万宝路，13刀！抽不起啊！！</p>
<p>最最兴奋的事，周六巴西和加拿大在西雅图的QWEST体育场进行一场友谊赛。一开始知道这个消息是从Hot Deals Group，只知道小罗，卡卡，罗比尼奥，阿德里亚诺都会过来！有人在询问是否有便宜球票，我因为工作忙且认为球票不会便宜所以没有关注，知道周四Jac Forward给我一个Email，发现。。。MS所有员工包括我们这些Vendor，都有优惠，价格是。。。0.5元！！！5毛钱！！！天哪！！每人限购4张，Jac买了4张，他认为这毫无疑问是个Hot Deal，对于我来说，这简直就是！！！恐怕是人生中最划算的买卖！！！</p>
<p>到写下此文时还不能冷静下来，总之结果就是，我没花钱买球票，我乘坐Jac的免费车，我近距离看到了一直非常喜欢的阿德，千言万语无法形容心情的兴奋！</p>
<p>QWEST体育场，一个美式足球和足球均可的体育场。</p>
<p><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-sYRkaPo4RzbcDhtK9bGiC5qVb7KLdDlh0s1OJPv12HSl-a4UIgE_nf-9cFvF1F7NY""> </p>
<p><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-ucVb_toYzV3IoTCjd90FFB9gPN9f59o4RxG3F6E8HuM_uv3DpFPe316ffFi_na0GQ""> </p>
<p>听Jac说，这里就是亚马逊$More$的全球总部，我之前还真不知道，亚马逊总部在西雅图，他说他们从西雅图起家的。</p>
<p><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-v0zhCDKpqJfvA-vErlXfXAqqkpagsaUiQi8wHzkjtQugU_xgcsTZVwglbD4HnYgUw"">  </p>
<p>随处可见巴西队的粉丝。</p>
<p><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-uGhrgD1ObaUIFjplkdmop8gQC4QhyjexYVZvqa70L5mO73w3KDp4YpxZNAJkNaH_I""> </p>
<p>排队等候检票时无聊，拍下了如下画面：</p>
<p><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-tWylMblJjMvg2l4GvTKqsdZQmVpr70_S7KL4Qu0HQbZ6i5qGBmVTxnJVGUFTg_afs"">
<P><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-vNUOwlxQfbFhXIP7im6Efmm5d6VaUdb2dZSm1UcVI4-pC9sGdMVmZXZ0DLmbcZQUI""> </p>
<p>这幢楼面对的就是QWEST体育场，如果说美国人不喜欢足球，但美式足球可是全美第一流行，他们怎么就这么不注意影响呢？？相比之下我们伟大的政府则要“好”太多了，建议山姆大叔改进一下，学学<a href=""http://24hour.blog.sohu.com/86945246.html"" target=""_blank"">我们ZF的做法</a>。</p>
<p>打住。。。</p>
<p>对于我一个十几年的“老”球迷来说，看到如此景象，怎能不兴奋？？鄙人首次离世界巨星如此近的距离！</p>
<p><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-sf0yw4skCSalpTFOIcS7rNFCLpnDG7tHkeGn4oEpC7nrV-ICH0OBci5gBh6tCyWcE""> </p>
<p>我进去并找到位置时比赛已经开始20分钟，稍有点遗憾，此时巴西已经1：0领先的，由于我们的位置太高我打了18倍焦距也没法看清面貌，但是结合模糊的面貌加上带球，跑步动作能够猜出，10号迭戈，3号卢西奥还有国米门将朱利奥塞萨尔,别的实在看不清楚了。</p>
<p>&nbsp;<img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-sdopcmuT8IkUieaKGv3gQDwiDiIHjmYw5A5UI6kIk1oV-pZc9neD1HhGm0e4VJWho""> </p>
<p>难掩激动心情，我跟Jac说恨不得有8双眼睛4双手，4核大脑，呵呵。忙里偷闲，远处的太空针电视塔。</p>
<p>&nbsp;<img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-tZWngySmfAkaS3UrWkYLD9qZWNp_IDAmj5yDfopN46AGyjJ-PYY9jDt6bVX_Wp6so""><P><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-uur1CywgKvv7Ff5_at1B_coQbDWW6GnBdpaumIwoImNNQrXgJiOkiLwaiJHnnkLLg""></p>
<p>加拿大扳回一球：</p>
<p><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-s6yfe13dSfrb37AkKgwTtP6sAj4ZfpERA3G21QAED_9xkLekFNYNwWlaNUpfBjsZw""> </p>
<p>塞萨尔特写：</p>
<p><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-tkuk19JyaL5cYq6EohuQPv0cMIckIjYLa39W_v8AcGDvdTeT9d_OhhhcehhEv5vJI""> </p>
<p>中场休息时跟Jac说好我们去低点的地方，我非常希望能够近一点，看清楚点。</p>
<p>OK，下半场开始，我的角度非常不错，加上有18倍长焦！</p>
<p><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-sEMimYnQbboacb4zUr6d8AeUdgsSwES78X1gSv_wwEk3GJInFoQD1cLgAb8ZrAun8""><P><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-vVz5xXp4H1IyDXRwFEvnrv3t5h1L7gSUUDVSBxKaBXn70Gybq2XyRXHHbRod8T0Z0""> </p>
<p> 巴西队的热身队员也是大牌云集，阿德就在里面，只可惜小罗和卡卡看来是不会上了，除非，所以我这是希望加拿大能灌巴西队几个，让邓加着急然后派上卡卡，呵呵。</p>
<p><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-vWshe7Rr0L6if7mniUs5akoU52zdNsmBxOzhubHzlBUVBevmRTr1_kyIJuhdINq34""> </p>
<p>下半场70分钟左右，邓加终于派上了阿德，全场群情激昂，我身后的几个球迷大声高呼“Adriano!”。</p>
<p><strong>18倍长焦，真好！</strong></p>
<p><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-uNhQuADxMXT9q6d0bJKLWqdtHetBNjpPq96Rdn5xcav35wZzxdPzd6-7OUFzbb1HM""><P><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-tVhvkWUlqhfVcfOOsCgjHnV3QPsg_gbJ7ws9jrKxqlofnQwDhybLjMPz8SRRDOn7w""><P><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-uJZJ2yZciLlinqclEkNA2B0_23ZHdbFdkcKi5ye4lV6um2dwTEEuajeGJZ0YFBM9A""><P><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-saJwt8QqkfwvS-N0cXv2OEE46zMJGtvE1ywiEwqAkQ9hhF3oFnAs7rKBkJw09HPMw""> </p>
<p>终场前，索比斯换下罗比尼奥：</p>
<p><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-sRO51o-3K429f4iT7GKweEwwARjR_TMP4TT1tVJMaFwFF0I60DK0PqFCHd9-dfgUA""> </p>
<p>今晚共有47052人现场观战</p>
<p><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-sC_DLOzlT8EFxwiEedbAkEwA3KQ98Gun3w9NmjghxkTLlOlHUXBABuTx__Tg0idLU""> </p>
<p>比赛结果：</p>
<p><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-sNhYrlqh5AEQw8j_jKlJ4PNJz4tqPrKPy_CaPCkskNZ4IrqUKvPMl7wmglvneRNQo"">&nbsp;</p>
<p>开心的巴西球迷</p>
<p><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-uk1POHhX4mYFxHvYjuUaLVFIogWQAIBAk4KNfqFei_HsI_Dk2Jhf0Fem1nA8575PI""> </p>
<p>结束后一位巴西球迷身披国旗冲进场内庆祝，迅速被警察制服，呵呵，算是为今晚的比赛画上一个幽默的句号。</p>
<p>实在是幸运，Everything！</p>
<p align=""right"">Wayne<br>May 31th, 2008</p>",2918,2008-06-02 10:26:29.000,1,A
43,Wayne,My Powerful PC!!!So Excited!!!,My-Powerful-PC-From-Newegg,4,"<p>几经周折，我的超强DIY机器终于到了，这几乎就是我的梦想了，尽管连熬两夜赶项目（2天加起来睡了10个小时），周五下午已经是走路都走不稳了：），但当我抱着那个从NewEgg来的大箱子时我所有的疲劳和烦恼全都没了，6年了，我没换过台式机，实在厌烦了本本苗条的身材，平平的性能，我要Power！就像老美对70年代的肌肉车那种特殊的爱好，我对PC的审美观那就是Power！我自认为是个<a href=""http://baike.baidu.com/view/137152.htm"" target=""_blank"">Geek</a>，组装所有配件在保证性价比和够用就好的原则下，亲手打造一台主机的工作/游戏机，我乐此不疲！</p>
<p>百度百科上对Geek（极客）的解释：<br><em><strong>Geek也可能是电脑高手也可能不一定是电脑高手，不过大部分都对电脑有莫大的偏爱，他们可能会对一切新鲜玩意儿都弄来搞搞.<br>Geek是新的精英亚文化群，是一群爱好新事物的、以技术为中心的、同时对社会怀有深刻不满的地下人类.</strong></em></p>
<p>熟悉鄙人的人都知道，鄙人是个“反革命”。。。Stop。。。<a href=""http://wayneye.cn/AboutMe/"" target=""_blank"">See here</a></p>
<p>OK，正题！鄙人配置：</p>
<div align=""center"">
<table cellspacing=""0"" cellpadding=""2"" width=""600"" align=""center"" border=""0"">
<tbody>
<tr>
<td valign=""top"" width=""72"">
<p>Hardware</p></td>
<td align=""middle"" width=""470"">
<p align=""center"">Details</p></td>
<td valign=""center"" width=""56"">
<p align=""center"">Price</p></td></tr>
<tr>
<td valign=""center"" width=""72"">CPU</td>
<td align=""middle"" width=""470""><a href=""http://www.newegg.com/Product/Product.aspx?Item=N82E16819115037"">Intel Core 2 Duo E8400 Wolfdale 3.0GHz LGA 775 65W Dual-Core Processor Model BX80570E8400 - Retail</a> </td>
<td valign=""center"" width=""56"">$194.99</td></tr>
<tr>
<td valign=""center"" width=""72"">Motherboard</td>
<td align=""middle"" width=""469""><a href=""http://www.newegg.com/Product/Product.aspx?Item=N82E16813131196"">ASUS P5K-E/WIFI-AP LGA 775 Intel P35 ATX Intel Motherboard - Retail</a> </td>
<td valign=""center"" width=""56"">$149.99</td></tr>
<tr>
<td valign=""center"" width=""73"">
<p align=""center"">Memory</p></td>
<td align=""middle"" width=""469""><a href=""http://www.newegg.com/Product/Product.aspx?Item=N82E16820231122"">G.SKILL 4GB (2 x 2GB) 240-Pin DDR2 SDRAM DDR2 800 (PC2 6400) Dual Channel Kit Desktop Memory Model F2-6400CL5D-4GBPQ - Retail</a></td>
<td valign=""center"" width=""56"">$84.99</td></tr>
<tr>
<td valign=""center"" width=""73"">
<p align=""center"">Video Card</p></td>
<td align=""middle"" width=""469""><a href=""http://www.newegg.com/Product/Product.aspx?Item=N82E16814150278"">XFX PVT88PUHF4 GeForce 8800 GT 256MB 256-bit GDDR3 PCI Express 2.0 x16 HDCP Ready SLI Supported Video Card - Retail</a><a href=""http://www.newegg.com/Product/Product.aspx?Item=N82E16820231122""></a></td>
<td valign=""center"" width=""56"">$129.99 </td></tr>
<tr>
<td valign=""center"" width=""73"">Hard Drive</td>
<td align=""middle"" width=""469""><a href=""http://www.newegg.com/Product/Product.aspx?Item=N82E16822152100"">SAMSUNG Spinpoint F1 HD753LJ 750GB 7200 RPM SATA 3.0Gb/s Hard Drive - OEM</a> </td>
<td valign=""center"" width=""56"">$129.99</td></tr>
<tr>
<td valign=""center"" width=""73"">Power Supply</td>
<td align=""middle"" width=""469""><a href=""http://www.newegg.com/Product/Product.aspx?Item=N82E16817182088"">Rosewill RD600N-2DC-SL-SLV 600W ATX Form Factor 12V V2.2 / SSI standard EPS 12V Active PFC Power Supply - SLI Ready - Retail</a> </td>
<td valign=""center"" width=""56"">$69.99</td></tr>
<tr>
<td valign=""center"" width=""73"">DVD Burner</td>
<td align=""middle"" width=""469""><a href=""http://www.newegg.com/Product/Product.aspx?Item=N82E16827135156"">ASUS 20X DVD±R DVD Burner with LightScribe Black SATA Model DRW-2014L1T - Retail</a></td>
<td valign=""center"" width=""56"">$35.99</td></tr>
<tr>
<td valign=""center"" width=""73"">&nbsp;</td>
<td align=""middle"" width=""469"">&nbsp;</td>
<td valign=""center"" width=""57"">$795.93&nbsp; </td></tr></tbody></table></div>
$More$
<p>国内买的话没8000中华大钱买不下来，而且，关键是，很多配件没货。。。</p>
<p>上图！！<br>UPS送来的大箱子：<br><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-sH0cFJjtRkK6UapiIpRbHmAdlA6EvY5tKrGkfoycq--tbIAMvBoZ_YiSiag_Y-Xpg"">&nbsp; </p>
<p>开箱第一眼：<br><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-v4981y7gSJaIqL3u_HfuT6Hno6S2rQ5E4FmlglHNtyTjLfZOLspvTrZY6uNeQs_uU""> </p>
<p>所有配件Showing Off^_^：<br><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-sBPxUahlfMW36Yuc74KIZkwva3IhwSEVleBYimKbmYPUDruQvrQ_oT1K0qqnDk8Es""> </p>
<p>华硕P5k-E WiFi/AP Edition：<br><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-vxPtWz-vtd3WuiyQFwDMxZ6ACKTkrn1XADW2voywWkXkGzTBCkPoqT-SeMySqccKc""> </p>
<p>英特尔烤土豆E8400：<br><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-vpx--dFdRhAy3zuPWnoqflrqdm6BzcnfGow8vnGv7raAm8_AUREocJ3UBTeVzqsvc"">&nbsp;<br><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-u7IezGHce8YJzlvaVbiPVSngwkHkW8GcIwOAKQXbmm9UY-xYBQLLgVAlydENwPm-c""> </p>
<p>芝奇4G High Performance超频内存：<br><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-u3iLvtDynGipRbhah4Mr0OCZof0qlVcvAufeImQ0BVheFquS3UfcsYYVdi4luoBCY""> </p>
<p>Rosewill600瓦电源：<br><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-s27bn28-nYu9wSGCbBDAlTmGJMZi3c94VbtVzUZ2MzRoPjLKFnRSnnok7u5tiqEr8""> </p>
<p>讯景8800GT 256M 256位（附送使命召唤4-现代战争）：<br><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-uehxG9huVIL62DPV9QYCfg1xBl38Q5FLXSl0-bVRU6zf4t_t90zMusgNKSIPhbTfo"">&nbsp;<br>还送个这玩意：）<br><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-tlFnhxCc2-AqTGWSKiV_oHTPvdFztv_Tur72VmwBPJmhGCdJN2MOldoN7mK6aP3n4""> </p>
<p>华硕光雕王：<br><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-sW-IW5-OFGC1GaUQtZVLnhu8GK2rdE8kl2Pzexi4nyTV3RjwF9xyqD_4QyCoS4KjU""> </p>
<p>运行中：<br><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-usoSnL-BQkAPyMO96TnAe5FxX6YXmT5SuNoL7ztUvV-YTPaz_B-Q0fUDYxae-SjII""> </p>
<p>2：<br><img src=""http://byfiles.storage.live.com/y1p-vkys8vx4-seVqYO-30kr2vbbqm7l290ahd2kpcBTgQSMPmDkIpCG9bdMmTWP0roVoFdMIcu1sA""> </p>
<p>总结下配置，买8400是因为我认为它现阶段具有最好的性价比，之前在Q6600，Q9300和E8400之中徘徊过，还是决定双核而非四核，考虑到64位的普及速度，离AMD发布世界上第一颗个人电脑64位CPU三年了，到现在还不知道什么时候完全普及，这世界唯一不变的就是变化，但是看看现实吧：Vista的最大竞争对手是XP，摄影领域胶片未死，纯粹追求绝对的技术而无视市场的选择是可怕的！参见<a href=""http://googlechinablog.com/2008/03/blog-post_21.html"" target=""_blank"">帝国的余辉 - 摩托罗拉</a>：<br><strong><em>""从二战后到九十年代初，可以讲是摩托罗拉红火的年代。摩托罗拉在模拟无线通信方面有任何公司都无法比拟的技术优势，并且创造出多项世界第一。""</em></strong><br><strong><em>“我一些在摩托罗拉的朋友常常很看不上诺基亚和三星等公司的做法“他们换一个机壳或者颜色就算是一款新手机”，但是，用户还真的很买后者这种做法的帐。”<br>""本来，摩托罗拉是最有资格领导移动通信大潮的，很遗憾，它只踏上了一个浪尖就被木工厂出身的诺基亚超过了。""</em></strong></p>
<p>呵呵，扯远了。继续说配置，主板没啥好说的，P45，X38实在太贵，没搞，这块板带无线网卡，省去另买的麻烦；内存就是因为折扣多，品牌好（跟海盗船，OCZ齐名的三大品质内存）；显卡没上512M是因为我没有那么大的显示器所以不会跑很高的分辨率，而大显存主要是用于大分辨率下骤增的像素数量需要占用显存；硬盘呢是因为高丽棒子的这款采用单碟334G，在7200转硬盘里世界第一，同时一如既往的支持NCQ（没发烧，发烧的话买西数猛禽万转了^_^）；华硕光雕王没啥好说的，销量在那摆着，相信大多数消费者，当然大多数消费者不一定正确。鄙人从来就不听销售人员说的最多的一句话：“这款XX买得很好的！！”卖的好怎么了？？那是你们忽悠的好。。</p>
<p>在装机时犯了一个错误，CPU供电的插槽忘了插。我用螺丝刀猛击Power On触角时机器运转了2秒就立刻停了，搞了4，5次依然如此，乖乖地拿起说明书看，在电源的说明书上突然看到CPU供电，呵呵，想起来了，一看，哇！8-Pin？？NB啊，这世界变化快，然后看看显卡说明书发现自己还犯了个小错误，我使用4-Pin转6-Pin的电源接口，这种方式被XFX描述为：Bad Power Supply，ok，我那强悍的电源啥接口都有，咱不怕，换之，系统成功启动：）</p>
<p>现在依然还有个问题，XP默认不支持SATA，要想用只有用老的掉渣的软驱，唉。。。搜索了很多解决方案，可现在如果在BIOS里改成AHCI系统依然蓝屏，有点郁闷，把我强悍的SATA2.0，32M缓存的硬盘虚拟成IDE运行，这。。。不能",3045,2008-06-09 17:28:21.890,1,A
44,Wayne,Beijing 2008 Olympic,,1,"<br>
<img src=""http://WayneYe.com/Archive/2008/08/08/Images/baidu_logo_jr_0808_aykms.gif"" />
<br>
<img src=""http://WayneYe.com/Archive/2008/08/08/Images/olympics08_opening.gif"" />
<br>
<img src=""http://WayneYe.com/Archive/2008/08/08/Images/fway.jpg"" />",245,2008-08-08 12:40:29.117,1,D
45,Wayne,[转]百度真有才,,7,"<P><A href=""http://byfiles.storage.msn.com/y1pkYKzRcc5E2e0wYSUGYfq6cqtsUhvJuFMZorCOEI086AnvgD8ZI_ebXYiwr9_LVhY?PARTNER=WRITER""><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=116 alt=QQQ1 src=""http://byfiles.storage.msn.com/y1p5XTMGYOmvZqWlLNOy7cFADSedzP5Cfz2qgKlWesKDFB-Z20RdV_kIK3CAZ3uCmXeC1pIO5Vy-Qs?PARTNER=WRITER"" width=504 border=0></A> 
<P><A href=""http://byfiles.storage.msn.com/y1psktbweVDzaz1mhbbFqTT4hWsa5oGcOlFl4tNGKdxZt0VPsYD24rhpD_soZVcs_Gen4AbqrNoYIY?PARTNER=WRITER""><IMG style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=124 alt=QQQ2 src=""http://byfiles.storage.msn.com/y1pjPd0YSd4EoVR4laxGseYnordeibely1LcseXQQoJHhgrQ35BWyDgnPRyKdxSFNWUm-POtYmY5h8?PARTNER=WRITER"" width=379 border=0></A> 
<P>&nbsp; 
<P>原文出自和菜头的<A href=""http://www.hecaitou.net/?p=3278"" target=_blank>比特海日志</A></P>",1709,2008-08-27 14:35:56.967,1,A
46,Wayne,2008.11.2随笔,causerie-2008-11-02,1,"<P>来西雅图三周了，日子过得一般般，想家！ 
<P>工作上还算顺利，边上的人都不错，自己也算努力学习，毕竟之前这方面经验比较少，仅有理论认识，没有实践经验。通过实际观察，发现老美做事确实有些懒散，慢慢吞吞的，但我想，他们中的大部分都应该是只要做了，就要做得精，他们注重实效，不确定的东西不搞，这点国内的行业还嫩啊，老是想当然，拼死拼活的做，做出来了不见得是什么好东西，所谓没有金刚钻，不揽瓷器活，霸王硬上攻不仅是对自己身体的摧残，关键是。。能做得好吗？在做之前先扪心自问，答案是否或者有可能否的话，还是扎扎实实学习+请教，再来开工不迟。 
<P>上周去了趟快100年历史的西雅图市中心派克集市，目的就是去看看1971年全球第一家星巴克，买上杯咖啡（毕竟天天在MS里喝免费的，花几个钱算是弥补下吧:)）。 
<P>从Google上查出的公交坐法从最后结果来看是不对D，我颇费了些周折。。总之一到就看到2家星巴克，那我当然是随便进一家问问看吧。排队到我的时候我问小姐哪里是第一家，她很热情，说直走，然后右柺，然后专门强调，Logo是灰色的，还拿出个纸杯，说跟这个纸杯上的Logo一样，把这个纸杯给你吧？我表示感谢并说不用了。然后去了一家零售店-Simple Seattle，$More$买了2件T桖和2顶帽子，买单时再次向服务员阿姨确认了地址。 
<P>到了，买了杯玛琪朵： 
<P><A href=""http://aovv7g.bay.livefilestore.com/y1p5y6_Nqotj-4ZfYvVopjQ4ibWXZrmUQ086lp7bM1l6mjT7AaCYS6e2wfieiVvz7Im-QhZ-y6UgbEOZmZ9PNhQsA?PARTNER=WRITER""><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050212 border=0 alt=P1050212 src=""http://aovv7g.bay.livefilestore.com/y1peU7xljeJKC-2of97TH4mLqgALFUQcKBDSNCvKLik2iUlmREjYtKSx5xpwQRLWgmuUGRq2t8LvM4fE4oBlm_KaA?PARTNER=WRITER"" width=644 height=484></A> 
<P>然后就坐这边喝休息了，咖啡=惬意，至少我一直这么认为：） 
<P><A href=""http://aovv7g.bay.livefilestore.com/y1pNvmPRy3kIwiitwB4eFWjy8Ie3OCNy-L1MglEOhITTaXgR99TuLc3FsVhPvM2tM0sYBc_oLX_bdBdpBgJ2-2tNg?PARTNER=WRITER""><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050214 border=0 alt=P1050214 src=""http://aovv7g.bay.livefilestore.com/y1phzbaJEypWWKf8RrZI4asKgiOV9aJgv23RJPGM1cMlDdenI9vG_mQ4pwaxzt9RHFzvzJaJomemxFuCqZO9UqgYQ?PARTNER=WRITER"" width=644 height=484></A> 
<P>还买了个杯子留作纪念，听说是全球唯一的，照片懒得上了，最近懒得很。。。 
<P>还是开开心心的吧，自己老是觉得不满足于现状，其实归根结底就是嫌自己钱赚得太少，不舒服！ 我老认为：是，我是年轻，可是你们这帮老东西把事情大胆的让老子做做看看，就算不如你们，可是我会改正啊！我就信奉：<A target=_blank href='http://www.google.com/search?hl=en&amp;newwindow=1&amp;client=firefox-a&amp;rls=org.mozilla:en-US:official&amp;hs=VF&amp;q=bill+gates+""I+can+do+anything+if+I+put+my+mind+to+it""&amp;btnG=Search'>I can do anything if I put my mind to it</A>!呵呵，狂啊，可是，狂难道有错吗？老东西们当初不狂能有今天？？ 
<P>这两天好些了，老想日后能怎么样，怎么样没有实际意义，只有眼下是真实可控，该努力掌握的，还是脚踏实地，先干好手上的活在说！先把2008年的冬天猫过去…09年，高飞！！！</P>",2230,2008-11-03 10:51:33.000,1,A
47,Wayne,近期血拼购物，租车清单。。。,,1,"<p>第一次租车 - $112.08 +$21.64油钱<p>
第二次租车 - $40 +$10油钱 （Jac出了$40）<p>
第三次租车 - 后天付账，待清算。。。<p>
第四次 - 奢望免费。。。<p>

2件Seattle T-Shirt + 帽子两顶 - $32.70<p>
Sony降噪耳机 - $32.69<p>
买个Spording篮球 - $20.71<p>
给宝贝买Clinique三部曲 - $64.31<p>
在Goodwill给自己买2条二手牛仔裤 + 给宝贝买双二手凉鞋 - $19.03<p>
NeedForSpeed Under Cover - $43.55<p>
给表妹买的Nike棉袄 - $32.53<p>
帮Carrie小姐买Sony SR本本 – $660<p>
给宝贝买的神秘物品  - $288<p>
给自己买个Garmin 260W GPS - $207.09<p>
帮Gracie小姐带化妆品 – Kiehl's $30.08 + Clinique （卡已刷爆。。现金未带足，明天再去。。。）<p>
给爸妈买的Sony CyberShot相机 + Memorystick 1 G – $19.99 + $79.99 + $8.5 (Tax) = $108.48
给宝贝买顶CK帽子 - $13.01<p>

<p>&nbsp</p>
<p>血淋淋。。。<p>
极度穷ing。。。<p>
PS: Thank giving以后在我心中就是：Thank PAYING!!
",1828,2008-11-30 16:08:36.123,1,A
48,Wayne,中美油价对比,,5,"<p>美国，其实某些油站已经1.99了，我还是按大多数算：<p>$2.19 / 1 Gallon </p>↓ <p>14.9577 RMB / 1 Gallon <p>↓ <p>14.9577 RMB / 3.785011355034升 </p>
<p>3.95 RMB / 升 </p>
<p>中国：<p>5.35RMB / 升</p>
<p>此外，我们在国内还有N多其他费用，我就不说啥了。。。</p>
<p>国内也快征收汽油消费税了，以ZF一贯精明，抠门（仅对被统治阶级）的作风，我们庶民不仅不要做任何指望，反而做好准备暴风雨的来临，估计到时候又有一大批“砖家”前赴后继，以其“砖业”为政策大唱赞歌。</p>",1892,2008-12-01 14:54:28.750,1,A
49,Wayne,疯狂感恩节!!!,Crazy-Thanks-Given-Seattle-2008,1,"<P>山姆大叔得了重感冒，全球都跟着吃药。。。 
<P>这个感恩节注定不平凡，有人在血拼中<A target=_blank href=""http://news.163.com/08/1129/13/4RU1GDGJ0001121M.html"">丢了命</A>，今天开车从Outlet回来时看到路上发生了追尾车祸，这个冬天。。。很寒冷！ 
<P>这个Thank Giving，绝对是我这次美国之行最期待的节目了，我一定要Join这个大Party，所以在此之前可以说是做了整整一个月的准备，问了很多人的很多经验，这一天，终于来临啦！ 
<P>太平洋时间11月28日，我12点10分起床（估计是太兴奋所致），跟宝贝聊了会，玩了会NeedForSpeed，临晨3点半出门，出门前也算全副武装，毛衣毛裤，厚厚的大衣，还有帽子，带上森海塞尔的耳机听歌+保暖：）步行到Circuit City，呵呵，希望是Early Bird，可是一到那发现前面保守估计已经有100多号Early Birds了：<BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050662 border=0 alt=P1050662 src=""http://aovv7g.bay.livefilestore.com/y1p_EWsi3o44JHAJoF5aRasAHdH6xtexpCjDjI_jQEpTMJJTYy7hy_GW6qxL1sk4hUyXkekjpRhskp7WTx7v3dUJQ?PARTNER=WRITER"" width=644 height=484>
<P>印度人占绝大多数！我前面$More$隔着一个印度人有一位台湾来的大姐，跟她聊了会，听了听MP3，此时外面其实并不是很冷，老天也算给面子没有下雨，边上不断有人询问需要买什么，如果你说需要他会给你Coupon，我什么也不感兴趣，而且他们说的那些我看并不便宜多少也就没拿，我倒是希望他们能够给我们这些劳苦大众免费咖啡，不过。。最终是没有的，Circuit City已经申请了破产保护，能否熬过这个经济严冬还是个问题，比我们还惨呢！ 
<P>临晨5点，准时开门，人群蜂拥而入，我拍了张他们的Holiday Gift：<BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050683 border=0 alt=P1050683 src=""http://byfiles.storage.msn.com/y1pNNa1VM2KSYihlOOsRws66M6qC3Ubtqh5iqQnUslRaujFxbLczDipHwrzC39Zf7oAzac1W_Jouh7k45jgVD_jHg?PARTNER=WRITER"" width=364 height=484>&nbsp;<BR>他们居然还招人。。。倒！ 
<P>抢啊抢啊！！：<BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050672 border=0 alt=P1050672 src=""http://aovv7g.bay.livefilestore.com/y1phKj5hz57Av1cxF4-xSdye3wHuFKn8Ui9-Agt1xr1XbMiUSE3mJT6kxkzhHjHvzznSDuJOnmal5w6e3NzXD5slQ?PARTNER=WRITER"" width=644 height=484><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050673 border=0 alt=P1050673 src=""http://aovv7g.bay.livefilestore.com/y1peabSAkE3IBIK5CJa2nOFFwQ0pszNNsaWbSDJ2rbwEcvkRydQXn6_ym-qCnWKufyWeGrmEufGdeJ7WCdxXutEoQ?PARTNER=WRITER"" width=644 height=484><BR>一进门就看到那个超级无敌的三菱73寸LCD：<BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050671 border=0 alt=P1050671 src=""http://aovv7g.bay.livefilestore.com/y1p1g1ucxemeZ_toCI1dcVSbI5WCtAqLAd0C6OLDtB_H4ZokNErDVJHqcagaiJZXg7JT2lycwF71SPf7rr7m8P9zg?PARTNER=WRITER"" width=644 height=484>
<P>我靠，上礼拜还是2600刀的！！！现在居然直降300！！！这么个大玩意儿国内有没有还是未知数，即使有也是天价吧，2300刀大概就是一万六千多，也许只能买到50多寸的吧。。。可是，想有什么用呢，我不能买，除非坐在这玩意儿上它能把我飞着带回国内，貌似也只比机票贵1/3，呵呵。 
<P>
<P>相机Hot Deal：<BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050675 border=0 alt=P1050675 src=""http://aovv7g.bay.livefilestore.com/y1pycXBVgD9rd-O85lOfuGEKXtNWo6TxTLxcCZsaHXxkh9tSp7Gfuz18aKXErACz0yxsIVWoMqAmuHdtQeY6Azj1w?PARTNER=WRITER"" width=644 height=484> 
<P>清仓货：<BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050682 border=0 alt=P1050682 src=""http://aovv7g.bay.livefilestore.com/y1pcZhQkvugLmY6e4oNLKaKkcsW-OyZsZb_-5w5zToMvU_SaSba0T7dVD7SsNyOmJ-dDuZINzsW8BpvG7CqBTmfXg?PARTNER=WRITER"" width=644 height=484>
<P>游戏专用椅，30刀，保证低价！嗯！：<BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050680 border=0 alt=P1050680 src=""http://aovv7g.bay.livefilestore.com/y1pyCkFba0kubpug8crC1qP2KlkfxVe6-HDhndUREVLQG4sMf27oLvxOXN20S7KlIIKwRhPDbvYORp9ISHCMUsyVw?PARTNER=WRITER"" width=644 height=484> 
<P>在Circuit City逛了一个小时，临晨6点我步行去Sears，据查那里的衣服会疯狂打折，大部分衣服5-6折，只可惜Sears实在太大，而且，花了接近一个小时买了个神秘东东给宝贝，嘿嘿。<BR>Sears确实有些诚意,这牛仔裤便宜的。。。：<BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050696 border=0 alt=P1050696 src=""http://aovv7g.bay.livefilestore.com/y1p2Qh9Cq42i5WUZiiN54H9P2NerY2hAt74QNawugpzsoHL6ZNnLHwdnV8p2yGW57JdZlin9KgVoHidVbgRIOiETg?PARTNER=WRITER"" width=644 height=484>
<P>Lee的牛仔裤，哪位仁兄告诉我国内最便宜的Lee牛仔裤几钱？？<BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050692 border=0 alt=P1050692 src=""http://aovv7g.bay.livefilestore.com/y1pFKYkSpjSaBv3vMyBRtbFlLmdWZXrBFndCDgJhn6fuc10NLev92HAZRx-u74KWzhl01H7juH1ArnvVGeR1P1fdA?PARTNER=WRITER"" width=644 height=484>
<P>
<P>
<P>脑力训练：<BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050697 border=0 alt=P1050697 src=""http://aovv7g.bay.livefilestore.com/y1prdfJFyh5uvdIQNh32KX_beSqGM7teZqxNgnQjwQsd_HkYucFC9r3YZrKrRfCQyarzw7Kdjkpd0IlPq4JdVEIPA?PARTNER=WRITER"" width=644 height=484>
<P>这个套装性价比也很高！：<BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050698 border=0 alt=P1050698 src=""http://aovv7g.bay.livefilestore.com/y1pVWmzaukpVxU-FoVZVqA0DsHAjlQlfp5C-s1AvLfscJontPZL0pDUKepXncl6-9on2nB4Ob-f2nFYD_aGlbV3qw?PARTNER=WRITER"" width=644 height=484>
<P>中午驱车去Bellevue的Bestbuy，绕了5分钟才找到停车位，其实还好，今天下午去Outlet时我这个笨蛋生生的花了半小时才找到车位，还是从一位美国老太太那里要来的。。。<BR>Bestbuy全满的停车场：<BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050705 border=0 alt=P1050705 src=""http://aovv7g.bay.livefilestore.com/y1p-a26JTj-0gKXYXV9jBGPB_xTMT1C7r2RcYn6naY1TVUzAH7pU7kqnoSm7CnSPAMeJBjtXXn38TnV_3Esg3WwBA?PARTNER=WRITER"" width=644 height=484> 
<P>今天也许是Bestbuy全年最繁忙的一天了：<BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050706 border=0 alt=P1050706 src=""http://aovv7g.bay.livefilestore.com/y1phFn8XnrA5egf62Vq9SzUe54BACW3NdobXAX_-OoYysMS68wXhuiCYtwirH0RfjihdDzLGaD64kfS9SocWbKHXQ?PARTNER=WRITER"" width=644 height=484>
<P>
<P>
<P>
<P>我在这里花了1个半小时，就是为了解决导航问题，最终从智能手机和GPS中选择了GPS，Garmin 260W，Black Friday特价$189，上网一查，Amazon上卖300多刀，不错不错。 
<P>下午又一车开到Outlet，Nike的诚意也不错的说：<BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050641 border=0 alt=P1050641 src=""http://byfiles.storage.msn.com/y1pWiDaO6El1GMvAlfwEAySnBx-ZyC-icIcOAaFrvzn-jzaaSGqTbdjEvCKu9NkbzQnjsJh2mmWIRcmKvLE7w--Fg?PARTNER=WRITER"" width=364 height=484><BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050642 border=0 alt=P1050642 src=""http://aovv7g.bay.livefilestore.com/y1powNmq8bVks_WlEbNjZ8HqOpvwJMz9udYjmRJZPKoQPsmx7KcHIgau1i0pNM1QgHkISmPN4i1atUlLJEjyqGalw?PARTNER=WRITER"" width=644 height=484>
<P>晚上吃饭以后去Office Depot逛了逛，发现他也很疯狂。柯达的白菜相机：<BR><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=P1050684 border=0 alt=P1050684 src=""http://aovv",2357,2008-12-02 13:13:14.170,1,A
50,Wayne,笑翻天：）,,1,"<P><A href=""http://byfiles.storage.msn.com/y1p4J1O-2R48VgbKz0tXWaVDQlLv8PzNDWTCVHa4OTlU-huuwAheSHUl0SVPqYpCo4A?PARTNER=WRITER""><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=我也可以是蒙娜丽莎 border=0 alt=我也可以是蒙娜丽莎 src=""http://aovv7g.bay.livefilestore.com/y1p257xtn7HDNDA8f-q5ABMDaFSAFF0LT31nkhZ_2EGP9TIQ_5VBaqFxIDUDox2IqeRbDayl8VTJ5yN4zaqCiiuTg?PARTNER=WRITER"" width=553 height=772></A> 
<P><A href=""http://byfiles.storage.msn.com/y1pF4Jw9IP3aVwrlHgGDxMAqKhHTH7oRuDDWK8Z65Bix0U0t_88VezdQNVFavIkTHHCYOit3KGY_EVr-v92PURJGg?PARTNER=WRITER""><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=Superman border=0 alt=Superman src=""http://byfiles.storage.msn.com/y1pB6llggfMzVNd0a_S-mxVbMquSxI60nivmr_f-63VB9eACl-3cYQvunrqihL68BhQR_17mrG36ZvL2O0d9kabmg?PARTNER=WRITER"" width=534 height=484></A> 
<P>怎么搞的？？<A target=_blank href=""http://blog.sina.com.cn/s/blog_48670cb20100bl6z.html"">这里^_^</A></P>",1563,2008-12-04 16:17:35.173,1,A
51,Wayne,谈点感想，为什么美国是这个星球上最强大的国家,Thoughts-Why-USA-is-the-most-powerful-country,5,"<P>今年2次赴美的经历，可以说很大程度上改变了我的人生观，世界观，价值观，行万里路，读完本书，书我没读，但是我读了人，每个人都是一本书，尽管我的英文水平还不能跟他们进行很深入的沟通，但在这半年中我跟无数美国人交谈，我了解到了很多我感兴趣的问题，了解他们的想法，他们解决问题的思路，他们对某些事情的反映，他们的习惯，等等等等。。 
<P>我希望了解到底为什么这个国家现在全球最强大？美国人跟其他国家的人最大的差别在什么地方？答案也许不那么简单，原因有很多，欧洲移民者对既有制度的再升华（《五月花号公约》《独立宣言》等等在当时具有革命意义的制度），强调各种人权（生存权，自由权，追求幸福权），对通过自己努力获取成功的完全尊重（美国梦），对知识产权的保护（将其写入宪法），早期宽松而相对合理的移民政策（吸引人才），战争的获利者（两次世界大战），以上是我结合读的一点点可怜的书加上自己观察和思考的结论。 
<P>看看历史学家们怎么说的吧，以下文字摘自《大国崛起》：<BR>--“1862年，就在南北战争期间，美国总统林肯签署了著名的《宅地法》，法案规定：成年美国公民只需交纳10美元的登记费，就可在西部获得160英亩的土地，耕种五年后就能够拥有这片土地的产权。这项法律，点燃了美国人到西部去创造未来的巨大热情。此后，成千上万的美国人以及来自各地的移民，开始大规模地进入这片区域，开辟这里的土地。” 
<P>--“西进运动毫无疑问是美国历史上充满开拓、勇气与冒险精神的一页，很多历史学家认为，正是它，塑造了通过自我奋斗、实现个人梦想的美国精神。” 
<P>--“仅1865年至1900年，被正式批准登记的发明专利就达到了64万多种。依靠强大的科技实力，美国很快在第二次工业革命中独占鳌头。” 
<P>--“在1787年的制宪会议上，制宪代表们对事关美国政府在未来的公共政策进行了一系列激烈的辩论，然而，在通过第一条第八款时，代表们的意见$More$却空前一致，它的内容是：“为促进科学和实用技艺的普及，对作家和发明家的著作和发明，在一定期限内给予专利权的保障。”对于专利的保护，在16世纪的英国就已经开始，但是，美国人第一次把专利权写入了宪法，<STRONG>用国家的根本大法来保护发明创造</STRONG>。”“<STRONG>知识产权，是大脑的产品，是一份无尽的资源。我们对这项资源的开发利用，与我们为那些伟大的发明家们所提供的知识产权保护是息息相关的。这也是美国能够在历史上，包括在21世纪的今天，取得世界经济强国地位的关键原因。</STRONG> ” <BR>[注：可悲啊，我们国家到今天都没有真真正真的重视过这一点！下面会谈到。] 
<P>--“1894年，美国的工业总产值跃居各大国之首，成为世界第一经济强国。这一年，距离这个新国家的诞生仅仅118年，距离这片新大陆被发现也才400年。400年来，它从欧洲汲取营养，发展自己；118年来，它创造了自己的发展模式。” 
<P>上世纪的两次世界大战都没有发生在美国本土，并且美国两次作为战胜国大发战争财，这个是我从小就知道的，但是，我不能不说这只是“客观原因”，它绝非必要条件！ 
<P>鄙人愚见：最最根本是美国<STRONG>对人才，勤奋工作，科技以及知识产权的真正重视和尊重</STRONG>，如果高度归纳的话，就可以是这一点，《宅地法》鼓励人们开发西部，移民政策等等都是这一点的具体实现，对人才科技以及知识产权的尊重和保护永远激励这人们发明，创造，提高现有生产力！知识就是力量！但如果不鼓励，保护创新者，有谁愿意竹篮打水一场空？？？通过自己勤奋，合法的努力，获得应有的酬劳，追求幸福，这就是我认为的美国梦！ 
<P>每每想到我们的山寨小厂“创造”出的“SQNY”，“TOZHIBA”，“KFG”等等“品牌”，我都觉得自己作为一个中国人而感到耻辱和脸上无光，上次有美国人跟我开玩笑说，你不用买Wii，买个“WINI”就可以了，我只能笑笑：“我不会买的，那是中国垃圾，他们是中国败类！”。其实我确实很早以前就觉得，一个东西造出来，为什么不能尽量让质量好点？？为什么要坑人？？而且，我们的同胞很多直接死于产品质量问题！！<A target=_blank href=""http://jiangxi.jxnews.com.cn/system/2007/01/09/002407728.shtml"" rel=nofollow>这里</A>，<A target=_blank href=""http://www.2008red.com/member_pic_47/files/pangdong/html/article_11032_1.shtml"" rel=nofollow>这里</A>！我多次买到过产垃圾，每次都大骂商家无德，可是，如果有人想过去制定一套行之有效的法律去阻止这类事情的发生，情况应该会好很多吧！ 
<P>国内互联网业界有人说过：“<STRONG>我们不需要发明创造，只需要学习6个月前的美国就可以了</STRONG>。”，此人100%是个天才！一句话概括了中国的互联网发展史！ 
<P>除了以上种种不同，中美的最大区别无疑就是，一个“人治”，一个“法治”，在这2中截然不同的体制下，发生的事情性质可能一样，但结果却“绝对”不一样，我们的小小官员猥亵11岁女孩未遂，遭到质疑后丧心病狂的高呼：“我是交通部派来的，你们这些人算个屁！”，美国最大的公务员工作之余玩只莱温死鸡结果灰头土脸的退了下来，一声都不敢吭。。 
<P>PS:最近的毒奶粉已经导致<A target=_blank href=""http://msn.ynet.com/view.jsp?oid=46345267"" rel=nofollow>29万婴儿泌尿系统出现问题</A>，<A target=_blank href=""http://news.cctv.com/financial/20081205/100404.shtml"" rel=nofollow>中国出口奶粉骤降9成</A>！这些都是教训，血的教训！我了解到，美国历史上同样发生过让人愤怒的食品安全问题，可是<A target=_blank href=""http://www.beijingreview.com.cn/zgsy/txt/2007-07/26/content_70510.htm"" rel=nofollow>三本书的出现改变了美国食品</A>，我们的“砖家”呢？？？他们在<A target=_blank href=""http://blog.sina.com.cn/s/blog_48670cb20100b59j.html"" rel=nofollow>忙着不给有关部门添麻烦</A>！ 
<P><STRONG><FONT size=6>唉！！！</FONT></STRONG> 
<P><STRONG><FONT size=6>I Love China!But it is a fucking country because it has a fucking GOVEMMENT!!!</FONT></STRONG></P>",2411,2008-12-05 16:52:41.000,1,A
52,Wayne,5000块笔记本 - Sony VAIO SR290,5000-rmb-Sony-Laptop,4,"<p>我现在正在使用她写下这篇Blog：）</p>
<p>执行力+灵敏嗅觉，促成了这比划算的买卖，MS跟SONY的EPP砍下21%，再加上200美刀Off的coupon，最终check out时的价格是660刀，关于这个Hot Deal的讨论在“组织”里极其热门，过了好久还有人在问（后来Coupon到期了。。。），我没有错过！虽然这也许不是最划算的买卖，或者日后有更划算的买卖，但是这都不重要，重要的是我在一个正确的时刻，及时的搞到了这比买卖，足够精明^_^</p>
<p>送货的时候出了点小意外，Fedex的策略我觉得有问题（IMHO），昨天中午（周五）我track问道包裹时发现“Delivery Exception – Customer not available or blah blah”，包裹此时在Kent, WA，离Redmond有19英里，一股不详的预感笼罩着我，毕竟上次我曾经有过教训（地址搞错了一点），我决定，这次无论如何也不能让那帮SB SBLG的把我的包裹原封不动地再弄回圣迭戈！！！</p>
<p>马上查电话，GOFedex，OK。。得到的回答是，他们的员工去了我的apt，发现没人，所以回来了，明天会再次去，如果还没人，那就下周二最后一次机会，我马上说，今天周五，我在上班，家里当然没人啦，这可是常识啊！！那鸟人不管，他只说他们一直这么做的，我说你们也没有任何人给我打个电话啊！答曰，我们一般都不会打电话给客户。。那我没办法了，服了！我说，你们明天大概什么时候去？“估计中午，跟今天差不多。”我说：“那麻烦您早点可以吗？”，“不能确定，但我$More$可以帮您发一个申请。” “非常感谢！”</p>
<p>OK，今天早上终于到了，还是给我打了电话，说：“先生，我在你们楼下，但我没钥匙。。”， 我冷笑,想：“昨天你也没钥匙，你怎么上来的？”，“那我下去”， “OK”。</p>
<p>省略200字。。。</p>
<p><img src=""http://aovr7g.bay.livefilestore.com/y1p0QgE-eEuuTTU4Us6IERNmiNMnzXDiERClSFY_0zqOq4u7JXj-TO6qHM9FOhD0-tjmb-Z-9FoQp4/P1050790""> </p>
<p><img src=""http://aovr7g.bay.livefilestore.com/y1pnloY6CVi6rTpKm5uCLPRN06IB1hyOYCMu3DnZv6AEdCvlr318Um5WB8nggPgmXmMemSi55lYhYQ/P1050791""></p>
<p><img src=""http://aovr7g.bay.livefilestore.com/y1p7YjPX7GeBrAbl8EqWWlNvX0fhi0Ac6zpiYMD0_VafFj72ML9j4WWsFD6QuzQYonckWiToZbHiAU/P1050792""> </p>
<p>简单看了下原装的系统和软件，发现华而不实者。。。全都华而不实。。而且，无法忍受Vista的性能，再加上还是Home版。。</p>
<p>干掉！刻碟（集成了ICH9-M的SATA，躲过蓝屏困扰。。），分区，装驱动，搞定！</p>
<p>现在使用极其爽快！这台SR就是为女性商务人士量身定做的，足够的性能，细致的做工，华丽的粉色外衣（还有自定义签名，酷得掉渣的说），嘿嘿，在她回到女主人之前，还是我这个男主人先爽爽再说:)</p>",2816,2008-12-07 15:39:08.000,1,A
53,Wayne,DIY精神是其乐无穷的,,1,"<p>Linkin Park的CD已经刻好了，收录了我最喜欢的，共22首。</p>
<p>张学友的也刻好了，呵呵，之前在amazon上花20多大洋买的2张CD固然经典！但歌神的好歌岂能只有那么几首，我网上down的是<a href=""http://www.verycd.com/topics/133860/"" target=""_blank"">学友25周年纪念版</a>，4CD，于是两边比较，DIY出第三张，跟之前的没一首不重复，这下没遗憾了^_^</p>
<p>怎么刻的？<br>先找APE，用MP3刻想都别想。找出喜欢的转成WAV（我用的千千静听，确实方便，Foobar也行），用Nero直接将WAV刻盘。以后不寂寞了，5555～～</p>
<p>PS：台湾爱情“大”片收到诸多牛人推荐，这还不算，电影总急暂不引进，看来我非得好好看这部片子，高清晰版已找到，<a href=""http://nnv.dl1.btchina.net/download.php?s=bb60a948cfa4bff2&amp;attachmentid=1148579"" target=""_blank"">Here</a>。回去跟宝贝一起看：）</p>",1611,2008-12-08 16:09:57.893,1,A
54,Wayne,西雅图 - 我的第三故乡,Seattle-my-thrid-homeland,1,"<P>武汉-&gt;上海-&gt;西雅图。我留下过足迹。。。 
<P>西雅图被誉为美国最适合居住城市十几年，看来确实名不虚传，现在12月份了，却真不太冷；雨虽多，但至少这2个礼拜我也看出来了，现在早就处于全年中的雨季了，也就是隔三岔五的下着淅淅沥沥的小雨，可想想家家户户都有暖气，人人都有车，下点雨不算什么，尤其是永远清新的空气质量，在国内只有乡下才能吸到。。。 
<P>西雅图有100多年历史，闻名于世的星巴克咖啡，航空巨头波音的总部（已搬走，不过博物馆还在，去参观的游客络绎不绝），再就是软件巨人微软，还有太空针电视塔，雷尼尔山（Mountain Rainier），还有。。。《西雅图夜未眠》:) 
<P>我在这边生活，工作了半年，对她确实充满喜爱之情，一种发自内心的感激之情，毕竟无论日后我做什么工作，过什么样的生活，这个地方给了我一个学习，成长的机会，这段不算长的时光却必定在我人生旅程中留下深刻而重要的记忆！ 
<P>雷蒙德一角。这里是通往520浮桥的高速入口，520浮桥连接西雅图市中心和雷蒙德。蓝蓝的天，清新的空气。 <IMG title=P1050183 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=484 alt=P1050183 src=""http://aovv7g.bay.livefilestore.com/y1pbUpWse50kwaXGpmQUApC2uBgd0N_FFWmoXAihmlW6E7owycHyRKXIEhe0jcCY3xd1S3ht45pNLKnlQytzGXrCA?PARTNER=WRITER"" width=644 border=0> 
<P>乘545路公交经520浮桥上拍的华盛顿湖,水真蓝！ 
<IMG title=P1050186 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=484 alt=P1050186 src=""http://aovv7g.bay.livefilestore.com/y1pJVsyWGFVti7AwAr60jdB2XF8u5NCaGKZqQFFkECLe_2vikJ_RWl42chNtmugbEm5uKcYCtR0P8Uk5Nj6ibhKkA?PARTNER=WRITER"" width=644 border=0>&nbsp; 
<P>Downtown街景：<BR>&nbsp;<IMG title=P1050198 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=484 alt=P1050198 src=""http://aovv7g.bay.livefilestore.com/y1pAkjxVtznfYnWasc1ittmYSYQvw7zMAT0kyjUgTXafotd7TnDHUNg2P23YgB3-B_Tt5KCBY4y9dVyFEGW2XmWAw?PARTNER=WRITER"" width=644 border=0>
<P>Pike Place Market是城市兴衰的见证：$More$<BR><IMG title=P1050224 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=484 alt=P1050224 src=""http://aovv7g.bay.livefilestore.com/y1pMuwPAE-bNc8UB5t5obbhCqV2n-VXJZwWVSCCq47bjlnWguxDXuMBy586A9osI-4f5MW0J8ljNa8w7KJYNZFTcA?PARTNER=WRITER"" width=644 border=0><IMG title=P1050202 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=484 alt=P1050202 src=""http://aovv7g.bay.livefilestore.com/y1pp5AKewWzKSg-mUKAHxlLImRgC_25u_3xD7Ky5-GgnIuwMPkTSPtUZAkZjkS1VLVBOprL40aGkBdpyGKlt80W-A?PARTNER=WRITER"" width=644 border=0><IMG title=P1050219 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=484 alt=P1050219 src=""http://aovv7g.bay.livefilestore.com/y1pYtDjuM6_IKBDe7sK-CrMCXBtArBqOCrAsYFE4pqkJaKeHDsHS653KP6rFJVBqd32qa43kExhCO-W45gSh0x3DQ?PARTNER=WRITER"" width=644 border=0>
<P>这位便是粉丝^_^：<BR><IMG title=P1050211 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=484 alt=P1050211 src=""http://aovv7g.bay.livefilestore.com/y1pdKRrB-GrM1GJ5gue3n_PN3gF35tjCc1cKqx2w9YSqYLW7wD82CXC3l4sT251_Uue7LfSVLDlfzsZKwacs7Rg-Q?PARTNER=WRITER"" width=644 border=0>&nbsp; 
<P>Alki Beach Park是观赏西雅图城市2D全景图的最佳地点：<BR><IMG title=P1030442 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=364 alt=P1030442 src=""http://aovv7g.bay.livefilestore.com/y1p27PiiSl3-CQfm_eg8-CwH_kZbML1mT9qfJx-TgTEe_LaSrMKOpMsJXsgfcQmhizHpLHJDd9rBTwFwszFAGaScA?PARTNER=WRITER"" width=644 border=0>&nbsp; 
<P>Kerry Park View Points 是俯瞰全市3D的最佳观景台(右侧远处便是雷尼尔雪山)：<BR><IMG title=P1050603 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=484 alt=P1050603 src=""http://aovv7g.bay.livefilestore.com/y1pypBVZY-KOGn47yFfHJvn79hA6e6Um924G6PfLI8YShIKnq1ryyNopNr7ucZGgW_ltNzZxsJ4FQNew1UhOkRr3w?PARTNER=WRITER"" width=644 border=0>&nbsp;<IMG title=P1050216 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=484 alt=P1050216 src=""http://aovv7g.bay.livefilestore.com/y1p5Go_pLRFIbE1R4pXSm-ZQF-tVAu5PNjV3MT-rN4mo8_kZ0En03tmh_PCx54quTXlAH4KDubm9B6cmeEdviYbgQ?PARTNER=WRITER"" width=644 border=0> <IMG title=P1050771 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=484 alt=P1050771 src=""http://byfiles.storage.msn.com/y1p3xgi4vkBC566qV4Qu7a9fb6D3o_9J05-WYeyMwVd_Gf8VcovSZDw_ByVx_KG4u3eiyR0Qj_NvqOpA6WuVPHGRw?PARTNER=WRITER"" width=644 border=0> <IMG title=P1050748 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=484 alt=P1050748 src=""http://aovv7g.bay.livefilestore.com/y1pE3kc0Payjg5hNN3vRCtbUtlkqA7dzf8HKhVceIcocAZ7t7vFPlIr5H0utXgwimTsguF2tjlRQ6IRwPpF1kNRsg?PARTNER=WRITER"" width=644 border=0>
<P>从太空针上看西雅图Downtown： |<BR><IMG title=P1040096 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=484 alt=P1040096 src=""http://aovv7g.bay.livefilestore.com/y1pmUvrRPzKQGgJQSMRsQvaOT4inNls9aT-K0-J5IxUBWoFzGdG71Ze1U_yhuh2zuXAzGy0K5ckYsVRZfat3edjhQ?PARTNER=WRITER"" width=644 border=0>&nbsp; 
<P>华盛顿大学一角： <BR><IMG title=P1040240 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=484 alt=P1040240 src=""http://aovv7g.bay.livefilestore.com/y1pRNhgsy5N4FrzTVke22QFVsLwf05qmlOanvHiubz7YYKYFag1_NQ-K4aEMZ4LMfQts3uCWUaOYIMBjavfjqkK2g?PARTNER=WRITER"" width=644 border=0>&nbsp; 
<P>Lake Sammamish（音译成萨满密西湖）边上如画的景色 （位于Kirkland）: <IMG title=P1050588 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=484 alt=P1050588 src=""http://aovv7g.bay.livefilestore.com/y1pksiZKJPkVglvGq0klNYkraSVRae9ReR-nbIOc8kLKtUnKLTBzCmRjaMxTkHWBGRgNLLulfdRVxVxSJ2r_AVvQA?PARTNER=WRITER"" width=644 border=0> <IMG title=P1050594 style=""BORDER-TOP-WIDTH: 0px; DISPLAY: inline; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px"" height=484 alt=P1050594 src=""http://aovv7g.bay.livefilestore.com/y1py5nbIZCIgfWQLPyvxPuAyXoTkWNFBozLZtfg2t4fdcZCFqmU-rP4gUY-qT29ezHp6DTArAWIEB35aurCq77_mQ?PARTNER=WRITER"" width=644 border=0>
<P>外国的月亮真的圆吗？是的！客观并且从良心上这么认为，至少从绝大多数角度来看，这边的“软件”领先我们不止一星半点，20年差距！硬件？立马被上海陆家嘴和北京奥运村比趴下！！！可是，在我看来，这也只能是唯一的优势了。。。我们有数百万孩子无法接受应有的教育或者正接受完全不能称之为教育的“教育”，为什么不能少建点摩天大楼？？把老百姓的血汗钱投入到下一代（祖国的未来）的教育上？？上海少几幢楼他还是上海！！！孩子没有接受应有的教育，未来有可能给社会带来无穷于当时那点投资的损失！！！教育乃立国之本！得得。。。我是牢骚王。。。 
<P>PS: 写下这篇Blog时，我正是二次来美的第二个月，无尽的空虚与寂寞整日整夜的缠绕着我，美国再好，它不是我的祖国，我部分认可他的价值观，人权观以及文化，我也无比向往这边的生活（一间漂亮的小别墅，坐落在像上图一样的画中，有谁？哪个正常人不向往如此生活？？而在国际大都市上海，我花费等值的金钱，却只能得到一个高耸入云的“鸽子笼”，浑浊的空气，更让我难以忍受的是，我每天都无法避免被统治阶级在各个地方，无孔不入的欺负我，剥削我，GNNND！！！），但是，我毕竟是孤身一人，这种长期客居他乡，无比思想的感受，26岁的我，难以克服！</P>",2493,2008-12-09 14:02:52.000,1,A
55,Wayne,转一篇李大眼的帖子，我大笑不止：）,,7,"让所有人都精神起来 (2008-12-08 12:30:16) 

<p ALIGN=""left"">报载：<font STYLE=""FONT-FAMILY: 楷体_GB2312"">57岁新泰农民孙法武因镇上长期开采煤矿导致地面塌陷庄稼没法种，房屋也出现斑裂，经多次和镇政府交涉未果就进京上访，但于10月19日早8时许在长途汽车站被抓，送进新泰精神病院，据也因上访被宣布为精神病84岁的老时统计，这样的情况在该院还有18个，他们都称自己没有精神病，也没得到任何医疗机构鉴定，但镇政府宣布他们就是有精神病，上访就是精神病，并强行喂药打针，或被殴打。老孙母亲病世前想念儿子，请求放他出去以见最后一面，被拒，后因孙妻向干部跪下，加之老孙按要求在纸上签定了“我有精神病，以后再不上访”的保证书后才得以出去，但此时孙母已过世，未能见儿子最后一面。</FONT></P><p ALIGN=""left"">全文链接：<a HREF=""http://news.sina.com.cn/c/2008-12-08/015816800838.shtml"" TARGET=""_blank"">山东新泰多名欲进京上访者被强送精神病院</A></P><p ALIGN=""left"">&nbsp;<wbr></P><p ALIGN=""left"">我的看法是这样的：</P><p ALIGN=""left"">&nbsp;<wbr></P><p ALIGN=""left"">一、因为故事复杂、情节曲折、充满戏剧性，我在现场肯定不会有新京报记者这么高新闻敏感性，我会以为，这是某年代戏剧组在拍摄日军特高课在凌晨时分围捕我沂蒙山区地下交通员，或者城管在抓盲流，因为他们一直在叫“你还上房，还敢上房”……反正，如此和谐的社会怎么会有这么HI的情景。另，建议以后新泰市政府考虑建一大型影视拍摄基地，当地群众演员多，本色出演就可胜任角色，一般中戏、北电表演系学生还演不出旧社会人物惊悚的内心世界。</P><p ALIGN=""left"">&nbsp;<wbr></P><p ALIGN=""left"">二、看来新泰的农民兄弟日子过得挺滋，就算被抓回来政府每个月还得提供一千多元的$More$精神病医疗费用，一个镇就用了10万元的费用，怪不得我国人民的医保计划难以推行，钱都用这儿了，新泰农民要以大局为重呵，不要以为房子斑裂就睡不成觉，不要以为土地塌陷就吃不成饭了，四万亿救市计划里有9000亿是用来修房子的，等个十年二十年的房子肯定会修好，剩下的3亿1里很可能会有一家石化厂修在你们家地里，到时候一泄露，地里连草都不长了还种啥庄稼，但你直接工人，发了。</P><p ALIGN=""left"">&nbsp;<wbr></P><p ALIGN=""left"">三、从追捕者熟练“嗖”的一声形成包围圈，“刷”的一声蒙上布套，“啪”的一下推上中巴车等熟练动作看，看来美国CIA和FBI是白瞎了，要是派些新泰市干部到阿富汗山区，十个拉登也搜捕到了，世界反恐史就此改写，这么好的本事抓几个农民真可惜。还有那些在斗争中已锻炼得知道搜查病人舌头下面有没有藏药片的小护士们，真该派去洛杉矶海关当缉毒女警，老一辈的人看过《追捕》，杜丘就是没被查出舌头下还藏有药片才成功装疯最后翻案的，新泰精神病院院长吴玉柱，我崇拜你，你是全世界《越狱》粉丝中的新偶像，有你在，斯科菲尔德就跑不脱。</P><p ALIGN=""left"">&nbsp;<wbr></P><p ALIGN=""left"">四、<font STYLE=""FONT-FAMILY: 楷体_GB2312""><font STYLE=""FONT-FAMILY: 宋体"">据悉，今年3月4日新泰市委书记辛显明提出，围绕全国“两会”召开和奥运会，切实做到“五个严禁”，其中“严禁发生赴省进京丢丑滋事事件”被列为第一条</FONT>。</FONT>我深深地同意这一指示，因为我国的“上访”制度是全世界唯一的，这证明了政府的开明，继承了允许群众进京击鼓鸣冤的青天大老爷传统，但有些群众不感恩戴德还借此滋事胡闹，素质比窦娥低，比秦湘莲也低，破坏了首都的花花草草不说，还会让国际友人对我国的人道主义产生误解，幸好没在奥运会期间胡闹。不过，视中国球迷情绪需要，当时为什么不考虑让他们去中国队比赛现场找亚龙同志上个访，或可改写中国队糟糕战绩。</P><p ALIGN=""left"">&nbsp;<wbr></P><p ALIGN=""left"">五、<font STYLE=""FONT-FAMILY: 楷体_GB2312""><font STYLE=""FONT-FAMILY: 宋体"">来自新泰信访局网站的一篇“经验交流”文章写道：针对个别信访人信“访”不信“法”、信“闹”不信“理”的心态，做到“公安机关依法打击一批、精神司法鉴定治疗一批，集中办班培训‘管’掉一批”，营造“依法上访受保护、违法上访遭打击”的导向和浓厚氛围……对精神偏执的信访人也进行人文关怀，协助其进行司法鉴定，经鉴定精神异常的送医院治疗。”</FONT><font STYLE=""FONT-FAMILY: 宋体"">多么饱含着人道主义的</FONT></FONT>关于惩办“精神”的“精神”，通过打击一批、治疗一批、管掉一批，我觉得信访局的人肉搜索战术很成功，富有立体化集束式战术特点，特别是最后一句表明，如果残留一部份没来得及“精神”的，一定能让你“精神”起来，我们上访工作的核心是，让所有人都精神起来。</P><p ALIGN=""left"">&nbsp;<wbr></P><p ALIGN=""left"">六、刚知道，如果一个地方信访群众太多或者越级上访，当地一把手会受到行政处罚，新泰就曾因“越级上访不断，被省里亮了‘黄牌’”，但后来因为痛定思痛，层层签订目标责任书，把各项信访目标任务分解量化到单位和人头，实行责任追究制，全市上下共同参与，齐抓共建，新泰被授予先进称号，成为“首批‘平安山东’建设先进市”。</P><p ALIGN=""left"">&nbsp;<wbr></P><p ALIGN=""left"">终于明白，原来“平安山东”是这样建成的，精神病越多，城市就越平安，不正常的群众多了，才显得出我们官员的正常。并且顺手一举创造出一个世界医疗奇迹——精神病是宣布出来的，而不是检查出来的。新泰农民也太老土，这年头谁还在玩上访，又费鞋又费汽油在燃油税实行的情况下很不环保，到了北京谁谁都访不到，还不如在互联网上发贴子直接……不过突然明白了，怪不得前些时候专家把长时间上网定性为精神病，这就和信访局的想法保持了高度的一致，这怕大家通过互联网上访，不平安。现在大家都明白了，祖国各行各业谁武功最高，不是城管，而是信访局，因为城管只能损伤你的身体，但摧毁不了你的精神，你被打得鼻青脸肿后总还相信自己是个人吧，但信访局关你半个月，连你都相信自己其实是个精神病，人生唯一梦想就是出去后做个弹弓打路灯。不过，我还是怀疑那个记者把剧组拍摄场面当成新闻来写了，或者刚看过好莱坞《飞越疯人院》。</P><p ALIGN=""left"">&nbsp;<wbr></P><p ALIGN=""left"">其它的，我就不多说了。大家自己想。</P>
<p>&nbsp;</p>
<p><b>原文链接：<a href=""http://blog.sina.com.cn/s/blog_46e7ba410100b3ng.html"" target=""_blank"">让所有人都精神起来</a></b></p>",1600,2008-12-10 16:32:26.127,1,A
56,Wayne,2008/12/11随笔,NULL,1,"<p>今天早上7点，手机响了，我睁开眼睛，我知道这不是闹钟，因为天还没亮。接起来。。。意料之中。。。可是，没一会就结束了。。。
我不知道对方会怎么想，怎么做。但我坚信我的所作所为是合法，合理，并且正人君子的。</p>

<p>别想那么多了，赶紧再睡2小时吧，今天还要对付那个Block Issue呢。。</p>",1616,2008-12-12 03:34:13.260,1,A
57,Wayne,北京房产商贿赂原海淀区长周良洛200万获刑10年,,7,"晨报讯 (记者 颜斐)为取得海淀区西北旺镇的一处土地，北京亿城房地产开发有限公司的副总经理李平向大学同学周良洛行贿200万元。昨天，北京市二中院以行贿罪判处李平有期徒刑10年，没收个人财产1200万元。
<br>　　<p>周良洛曾就读于清华大学电机系，李平是他的大学同学和好友。2002年11月，周良洛担任海淀区区长以后，一直力推 “北部地区大开发”，他同时兼任海淀区北部地区开发建设委员会主任等能够左右土地流向的要职。
<br>
　　<p>此时，李平当上了北京亿城房地产开发有限公司的副总经理，该公司筹划开发的“竹园”项目也在“北部地区”的规划之中。2005年，李平利用与周良洛的关系，帮助亿城房地产开发公司取得“竹园”项目。据了解，当时西北旺区域楼面地价超过8000元/平方米，而亿城拿到的土地的楼面地价只有610元/平方米。
<br>

　　<p>今年3月28日，北京市二中院以受贿罪一审判处海淀区原区长周良洛死刑，缓期两年执行；其妻鲁小丹被判无期徒刑。法院认定周良洛受贿1600余万元，其中800余万元是与鲁小丹共同受贿。
<br>

　　<p>周良洛被抓后，李平也随之落网。经查明，2006年3月和4月，李平先后两次给予周良洛200万元，以感谢周良洛为公司取得“竹园”项目提供的“重大帮助”。（来源：北京晨报） 

<br><br>


<p><a href=""http://news.sina.com.cn/c/2008-12-15/003816845758.shtml"" target=""_blank"">新浪新闻原文</a>
<br><br>

<p><b>触目惊心官商勾结缔造出的高房价，最终会搬起石头砸。。。老百姓的脚 （泡沫一旦破灭，政府买单，百姓出钱出力）。。。而且。。。不是一直在砸吗？？？</b>",1753,2008-12-15 07:22:47.513,1,A
58,Wayne,白色的世界,,1,"<P>中午起床，第一件事：打开窗户，WOW！发出一声狂笑*_*，今天。。。怎么能上班呢？？呵呵。 
<BR><A href=""http://aovv7g.bay.livefilestore.com/y1pqsH-JGYVfL_LcgOhmxNtzZefoA6CrlqII5VU8QRvnpS5Mul6VtbvwQjf-X9LtYqmkoF-VxeGWrpzf3OfXB-AJQ?PARTNER=WRITER""><IMG title=DSC00062 style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=484 alt=DSC00062 src=""http://aovv7g.bay.livefilestore.com/y1pjVNvRCyDCTTrxEYmdPGjA8AUu6dH0SDwNTHMXqSVF6-WZ_1PQezk2J4SFcagtRpXrjBEzX05RnLha-2LnRLVWw?PARTNER=WRITER"" width=644 border=0></A> 
<P>（其实临晨就已经被雪子打在房子上的声音吵醒，我起初怀疑窗子没关严实，爬起来看看，非也，很大的雪！ ） 
<P>赶紧洗漱，出去逛逛喽:) 
<P>家门口成这样了：$More$<BR><A href=""http://byfiles.storage.msn.com/y1paO_i4ycJyPX9QCSTgKitjFy_iVlNwSf5R_Cx6w9AeDQkna2vhpr222oRREvP4iMRjWXzRG_D4EbXoPjpOFHnFA?PARTNER=WRITER""><IMG title=DSC00064 style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=484 alt=DSC00064 src=""http://byfiles.storage.msn.com/y1paMDS0w6r-i5a28PcDW98GEBCD150HmVCH8eMjeimPdAc0jF2PsdcoKkFRTLaBSV1t0ncIAGrcxfXt_le9Vs69w?PARTNER=WRITER"" width=364 border=0></A> 
<P>这么厚。。<BR><A href=""http://aovv7g.bay.livefilestore.com/y1pxCnhFeADwAt9dqEtGwrQfTSXrD-TJnTmpthWf9d1jvg_HEmv7hgMjh8nv2pT3I-X1daSuMVMyxqhZKC3SAynjQ?PARTNER=WRITER""><IMG title=DSC00063 style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=364 alt=DSC00063 src=""http://aovv7g.bay.livefilestore.com/y1pSRWw5ktHhUsTb5gHSG8Ffdx5PetwCQ4jRMTZndxu8u5ZLQg9UzixLUyRIJ1RlO2H9l3_t6JZ20r030MI24VFzg?PARTNER=WRITER"" width=644 border=0></A><BR>&nbsp; 
<P>走了两步后：<BR><A href=""http://aovv7g.bay.livefilestore.com/y1pPZuJ7eCns88n6QQAMwmTWq0_4fDI88i0MnJlmYl74XsoX2-53nDozNgdI0vUVvfwDxn7I_ykO74pQNoCosa3-g?PARTNER=WRITER""><IMG title=DSC00068 style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=484 alt=DSC00068 src=""http://aovv7g.bay.livefilestore.com/y1ppkf38OJ2ygWSGWqkSeJTjo9A0enim84UwVBFtYHLd7iDCH-Ygai7S170Phs6FCtT6GCCYmZpVC4OgIOAO62MMA?PARTNER=WRITER"" width=644 border=0></A> 
<P>
<P>
<P>
<P>&nbsp; 
<P>蛮搞笑。。<BR>&nbsp;<A href=""http://aovv7g.bay.livefilestore.com/y1p0U_KKEfBFCZjCK-l8FDF2URPkLC9_V04EsFtVEOLSP0GTIH0thq8yc8Og9RDZ57YWO6lgIcPlGagq5Ps3A024w?PARTNER=WRITER""><IMG title="""" style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=484 alt="""" src=""http://aovv7g.bay.livefilestore.com/y1pAGH3v4lib5SU_NAfkh1vq3Zw_jRFuJj9Gie9shJSVOmsAmLrI7vZvXdxF0kQwAtEerwOO2sM0_2fCufPVMZ-3Q?PARTNER=WRITER"" width=644 border=0></A> 
<P>
<P>白色的Central Park：<BR><A href=""http://aovv7g.bay.livefilestore.com/y1phw3SB7837_aSOzy1JcmrnAlIXf5oKdNJTdomf_uGovn1w273v4w9u0vNIhKDERL-mELitNg-jSb9xZYaTzAZ-A?PARTNER=WRITER""><IMG title=DSC00074 style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=484 alt=DSC00074 src=""http://aovv7g.bay.livefilestore.com/y1paUuEAsQujiV5xz55UFMSGvcrJzGQXiHKryMJrEkIRgsa4qz5mPHXqD7PHWOKNdz141LPgIgqvr0UHu5CL6T49A?PARTNER=WRITER"" width=644 border=0></A> 
<P><BR>156 AVE<BR><A href=""http://aovv7g.bay.livefilestore.com/y1pz1nmZAQ_zUOTjrjsPknAJ3MyMdkCtVwFq8Rs5tg-O1ZYHJ49VmTdcGoeIAnKrd9rrS1FSm9N-RU2pJ5fglhxJQ?PARTNER=WRITER""><IMG title=DSC00071 style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=484 alt=DSC00071 src=""http://aovv7g.bay.livefilestore.com/y1p_GhjepTVgoGzNiMoeIHzqghZ8nQIJNANX_UMWOJlicbgif9UiNHzFRHdUr6E8ta1MMbdEOJ5FmiwU0GtYx_XUw?PARTNER=WRITER"" width=644 border=0></A> 
<P>所有的车都贴在地上，缓慢地爬行着，小心翼翼，有行人滑倒，有的人拖着滑板，载着小孩在路上滑，我还看见一辆车卡在麦当劳门口，动弹不得，一群阿三经过，帮助推了出来，此时我正在Mac happy meal，不过加快了进食的速度，如果他们人手不够我也可以上去帮一把，不过几分钟过后他们就搞定了，开车的老人满脸通红，看上去比推车的年轻人累多了。 
<P>Iver’s<BR><A href=""http://aovv7g.bay.livefilestore.com/y1po1QupPtMuGdXlrhF8EnPTJQNlxbnXbZDhIirnqehBxoWWmtVzotIbSsgfAwAEshFnmBf86SPrNjtd40hZvgbdQ?PARTNER=WRITER""><IMG title=DSC00073 style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=484 alt=DSC00073 src=""http://aovv7g.bay.livefilestore.com/y1pN1Bgc-zRbz_4ZVvrLtRa9ha0pJESF16zoCcnRmcyY7ZrvpVKRsmRjS8DUkY_ZNvpkBxK7fMuIuY5fEqVSgK-vA?PARTNER=WRITER"" width=644 border=0></A> 
<P>随便转了转，决定回家，好冷，好冷！地上很滑，还是回家吧。。 
<P>这么厚的雪，不知明天是不是也报销了。。</P>",1673,2008-12-19 09:50:09.000,1,A
59,Wayne,暴雪自驾游^_^,,1,"<P>我真疯狂！！估计等我老了，我会佩服我自己，但。。不是现在:) 
<P>天气这么恶劣，雪这么大，但。。这就是我租车的理由:) 
<P>先介绍主角 - Nissan Sentra：<BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mclckTicKn73wNdMeRsunQKCzLtijfGa413OaVzGwkKyW6RoxgQJJm6A2c03Qg689_uy7o_Z4ympn27spYbevGKhl2is4pIATLtxqKMIwFD26mDn0b_tMU-l2ji3PbthWgiVn_AHREas/DSC00085[3].jpg"" rel=WLPP><IMG title=DSC00085 style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=484 alt=DSC00085 src=""https://a1r0ka.bay.livefilestore.com/y1mw3RtqiEVINexmUablR_9MEJN-MjsllE9Pn7FrO8Z8uvvzrWmOigUbA7Hqniys7sCqEfBOzdQ6lPqSAfGFsrihhj1jBu0ONz6IR5hWq61gTIAojaeU6XhJ2ZXH5XklBIqgn2yMfVhSZ0/DSC00085_thumb[1].jpg"" width=644 border=0></A><BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mx8mvIbdQOSpVKrbwbP7ZoO3CnOXAjVq-T-1iTdesoPy1FY3zAJtFEGSSsB-wL5Eatc2caGg95aqBBzaUqBPemS2F8avdAr8S_lH6m-zYwtrcyaDeeHAnEy2PYaH7yK1UyZzcCg0T2Co/DSC00090[3].jpg"" rel=WLPP><IMG title=DSC00090 style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=484 alt=DSC00090 src=""https://a1r0ka.bay.livefilestore.com/y1mddCgoOyUlZBu7CxJdcom-k9L_OGnVplZkThxnVUmZvvhNo5Stw5MRxFeqWS36BDMT8T2dPikT4dAZtejXvE7XJEhfHFdKpJmn4bcq_Xo5leMdwXUe-zT6gQ7BddMGCUqOWVK1U0Sgts/DSC00090_thumb[1].jpg"" width=644 border=0></A> 
<BR>
<P>厂商指导价 （参考KBB）：$16,835.00 (比我的小思贵一点，小思指导价$15,680.00，但绝对不如我的小思！！！自家孩子$More$多好！) 
<BR>
<P>孩子啊，委屈你啦：）这种鬼天气还骑你，呵呵：<BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mUxZ2JmExuSrPSE6rqCSWwr29LYwmkUUHShnCgsSi43qOCQtwik-vwcmLrSvbHD5UDn47wQnuj-ykavl36Tzye_qht82MuU6tZwAdS1xtq4T_DKUTbOIHP6UM6_4Nw7Bngo6Wb4ojads/DSC00101[4].jpg"" rel=WLPP><IMG title=DSC00101 style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=484 alt=DSC00101 src=""https://a1r0ka.bay.livefilestore.com/y1muc0ON_D7wOl4qaLSI5ahBy8JUqlq-lSWLi7gi7kGs1CD2SLOmlqO64cMP22atZtmdeXc0GpcYsQv0sNj0UNMVeAyROYGUCNDzkLdxeVo4NlybsZ89T94skn1jlSbla9OnrcGWRziRH4/DSC00101_thumb[2].jpg"" width=644 border=0></A> 
<BR>
<P>一大早起来先去加个油 (这个价格换算成国内单位是：3.35元/升。。牢骚之前已经<A href=""http://www.wayneye.cn/ViewBlog.aspx?BlogID=48"" target=_blank>发过了</A>，我就不说什么了。。)：<BR><A href=""https://a1r0ka.bay.livefilestore.com/y1m6nuwG3bT-eNkN-MbjT9HylD3J3CG3Dl38Hf56AH6oQ7UovnaMR75Hj5elxZZ49tHt5s2MoC9do5iJod4tLLNobs7MQ_rik7ObsdlozXVlXCNhj5jSobjOdzC6BRhPrc6sOS_d2K0js4/DSC00091[3].jpg"" rel=WLPP><IMG title=DSC00091 style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=484 alt=DSC00091 src=""https://a1r0ka.bay.livefilestore.com/y1mNE7Qom0Apf65ghFIpG3dpu55dfbvHbfAaGSsjnjDBbyzuZfCUqxuakPvo-foe-NX4D99Q42R76g84gcCSb45Xw_3MjjUxd1hzvfzlmAA22__XHrZPeANIyXErtK2nbC6wavYnY-wPR0/DSC00091_thumb[1].jpg"" width=644 border=0></A><BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mdRQVowSJqf_8-trB9YW_X2nfJUpBfH3BU55Dc5fiE5dKBarDVQ4jyVl-sKLuNxRseZbNjiEZ1nFN_3BYnSQWJ9c_zyr2PnRwKRPgfP1bLMBK4lj8TfUAqTdqaAQK-5Tc8JQKvCFkx-A/DSC00092[3].jpg"" rel=WLPP><IMG title=DSC00092 style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=484 alt=DSC00092 src=""https://a1r0ka.bay.livefilestore.com/y1mCireIJkpBJ4YA8qUmciFjDEVf1JK9VfUo2pLbFYHg279fUEVagcXDkRsVfaWNNG9Di_X3Zm-zUVSsKBzkUXCELHGwGueM-l7qEEy4EYUl_w2QxPnp8cGTew5ymQB4EOMRIr_5hPvy4c/DSC00092_thumb[1].jpg"" width=644 border=0></A> 
<BR>
<P>加油真是个大难题！！！这么多品牌的加油站，家家都不尽相同，之前3次，次次出问题，次次请教别人。。。这次又是什么问题？ 这次问题还大些。。我选泵号，刷卡，然后取卡，然后就跑去加，没用！回去看液晶屏，显示“In Process”，那没问题啊。。不得其解，问对面大姐，大姐说，把那个油枪底座抬起来，她说：“我也忘了:)”，她抬，我在加，还是没用！！她说你问问里面那家伙。。我就进去了，他查了下，说：“你压根没付钱。。” OKOK，我再去刷卡，重复以上操作一次，三次没用！！！又进去，说：“你是什么卡？”答曰：“Credit”，“我们这只接受Debit和Cash。。” 我晕！！我说：“大多数油站都可以用Credit的啊！怎么你们不行？？” 忘了他怎么说的了。。。反正我就只有Pay Cash了。。终于。。成功了。。花了10分钟！ 
<BR><BR>
<P>走出不到2个Block，在一红灯处停车时发现。。。。我靠！！同一品牌价格不一样！！ 这个便宜8分钱！！！<BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mGWj5PkmR9v6V-EUhUm0o_TMCxloFBEDRYH8bveVtXGiQheDGYUhXjSvGXSTL3MhpH_QM4NkMxck2nlJgHXSMeLBYf8vuYxoCS9crrzormO7CP_pXins5QzeCDwl_6iAIxudcdgTQqoc/DSC00093[3].jpg"" rel=WLPP><IMG title=DSC00093 style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=484 alt=DSC00093 src=""https://a1r0ka.bay.livefilestore.com/y1mIOSloze6x8zSGcVn5L9jtSvYp9CJegp4j6E4XgfA8SWdTJiBBHbFmqw-6bqOWs9-et2ChXHkifn_LvFMS5d-4lyiQaz1wJ83UqP1641iJ9Dehn7rwMUyzqKQBN06Afori6VW1fQBBgo/DSC00093_thumb[1].jpg"" width=644 border=0></A> 
<BR>
<P>如此景象确实有些使人望而却步：<BR><A href=""https://a1r0ka.bay.livefilestore.com/y1m_YkOwPl5pZ0jo7ugO7JMI2a29vm56VnvSY9tU64WKyN1TEjBAZI6T4VEDdaHxvatfx7YYqiUKDk8VJqFH0FJhRI30OKtF6PbDGAuS-RhJyQ97nPYUCsvmPcBftRT_10bxZtPa1elRYU/DSC00087[4].jpg"" rel=WLPP><IMG title=DSC00087 style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=772 alt=DSC00087 src=""https://a1r0ka.bay.livefilestore.com/y1mcGGQm5xlJ1zfZ2S2y6NFSlJ04wQs5rxxahTNtDWRrqyWB7jk1zJZ-y_AjraPubdO8c48nQb2gnB2ZZdqRnlGtP1fI6bDRlbvX50zgm7zI1b7N3mOp0amf884LLDZteQqT8Mqzg1F3_0/DSC00087_thumb[2].jpg"" width=580 border=0></A> 
<BR><BR>
<P>走着走着又在一红灯处停下来，看到前面已年轻人貌似准备去滑雪，拍一张吧：
<BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mJt9mdURKorEbE3TVZECsASVdGcr8bE4Aan_g3blZlO9G3WNpRFKDAN9vVZUCwNxDaFLmXRhADHY940huYEJKbuuJrd_0tFjZNvegcn5YEA6HNZzU_podY59X102P9mABenoY_hVV1qM/DSC00094%20-%20Modified[3].jpg"" rel=WLPP><IMG title="""" style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=484 alt="""" src=""https://a1r0ka.bay.livefilestore.com/y1m_sqdEt6wVg49nCvtuBQN1JAmbUoECzrliPGhF3fbclLgiaz4C_3PMifMqOtf2cwzH-Rn37G5LVkKtUcdsIfRIh6lz3tHHq8bJobFlcVtJPcJLieNpKXn2B9mukX8-gCJFcDum45mQ1c/DSC00094%20-%20Modified_thumb[1].jpg"" width=644 border=0></A> 
<BR>
<P>没想到这家伙。。居然掏出他的相机从中间那个开着的窗户对着我拍，还回过头冲我坏笑。。。我顿时大笑^_^ 
<BR>
<P>极少数人给动胎装了铁链：<BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mWFo1z0GJK5hfROeiZlKGvACca4yERnYrrEwimIW9UG_YAMcyh3QO4FBGryUJHuBKgB3YP_RMxZ8Btrg4iaVQ3hw7PwgFhfnC7QfvmmGmSRsa9OTpRQLzadJ_PDlzg8ddWFpCw_kmedM/DSC00100[3].jpg"" rel=WLPP><IMG title=DSC00100 style=""BORDER-RIGHT: 0px; BORDER-TOP: 0px; DISPLAY: inline; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px"" height=484 alt=DSC00100 src=""https://a1r0ka.bay.livefilestore.com/y1mkOXjiBY-1epKpmDRm52UPYtlk3RO2VoNjWZyhu26_kH_Pr2veZmOsDXijm-CKSV02ntpMGKE_Q4ksztp8BfJuwsKhVbOh6R9mSxYusc8rV4IoII5bUSbKQlV57lJosLh81P3NjxOfYg/DSC00100_thumb[1].jpg"" width=644 border=0></A> 
<BR>
<P>又是雷蒙德-贝尔维尤-西雅图-柯克兰-Renton，无头苍蝇似地到处转悠。但这次，却是完全与众不同的体验，我人生中第一次在大雪中驾驶，赶紧记下来吧，以后用得着： 
<OL>
<LI>车子会不太听使唤，抓地力不够绝对不仅仅是车子无法动弹或移动缓慢，而且会左右摇摆，虽然幅度不是很大，但足够危险，我遇到过好几次路面太糟糕时我的车往左或者右拐可是我的方向盘根本没动！此时赶紧先松油门并轻踩刹车并往反方向打，如果速度太快，踩刹车要一下一下的，循序渐慢:)。双手永远不要离开方向盘！ 
<LI>大多数情况下，刹车还好，可能是我一直以来的习惯都是小心翼翼不开快车，所以我没有遇到刹车的问题，但我可以想象，如果速度过快且刹车过猛，车子肯定会失去抓地力而甩向任何方向。。 
<LI>起步时一定要比平时慢很多！我见过太多人绿灯一亮就像平时一样踩油门，结果车子马上两边晃悠，而且卷起的泥水弄到了后面的车子上。。。所以，我从来都是离前面的车至少大半个车身，保险！ 
<LI>超过30度的坡不用尝试了！你一定上不去，我在Downtown由于听GPS的指挥并且路又没封，我在坡上动弹不得，轮子空转，车子要么不动，要么会往侧面拐。</LI></OL>
<BR>
<P>发生情况4时，边上一位正在过马路的黑人大叔走了过来，我摇下窗户跟他对话，",1678,2008-12-21 18:32:42.600,1,A
60,Wayne,疯狂圣诞节！波特兰之旅！现场观看NBA！！！,,1,"这个坑。。。。















我在回国的飞机上填：）",1634,2008-12-31 05:06:16.820,1,A
62,Wayne,[转]元宵节,CCAV-Lantern-Festival,7,"<p><img alt="""" src=""http://pic.yupoo.com/hecaitou/683756f3dde2/hpz0mudf.jpg"" width=""480""></p>
<br />
<p><img alt="""" src=""http://pic.yupoo.com/hecaitou/818406f3ddcd/tde4ru68.jpg"" width=""480""></p><br />
<p><img alt="""" src=""http://pic.yupoo.com/hecaitou/784296f3e1ad/pnouse2f.jpg""></p><br />$More$
<p><img alt="""" src=""http://pic.yupoo.com/hecaitou/306326f3ddcf/nsor204s.jpg""></p><br />
<p><img alt="""" src=""http://pic.yupoo.com/hecaitou/066316f3e1b7/18164b1l.jpg""></p><br />
<p><img alt="""" src=""http://pic.yupoo.com/hecaitou/473936f3e1da/ii19pjq1.jpg""></p><br />
<p><img alt="""" src=""http://pic.yupoo.com/hecaitou/089756f3e1d0/rzufulha.jpg""></p><br />
<p><img alt="""" src=""http://pic.yupoo.com/hecaitou/530506f3e1c5/333m9j2j.jpg""></p><br />
<p><img alt="""" src=""http://pic.yupoo.com/hecaitou/159056f3dddf/medium.jpg"" width=""480""></p><br />
<p><img alt="""" src=""http://pic.yupoo.com/hecaitou/154096f3dddc/custom.jpg""></p><br />
<p><img alt="""" src=""http://www.beijingupdates.com/forum/UploadFile/2009-2/20092721133096863.jpg"" width=""480""></p><br />",2991,2009-02-13 15:06:30.770,1,A
63,Wayne,常上高速的朋友必看一个高速交警的忠告,,7,"<p>怎么说呢？我觉得所有司机必读！ </p><br/>
<p><strong>常上高速的朋友必看一个高速交警的忠告</strong><br/><br/>　　(看了一篇帖子，觉得讲的很好，特意转过来，希望开车的朋友们能看看，对大家有所帮助，祝每个朋友都能一生平安)<br>　　随着道路上的私家车越来越多，作为一名高速交警，在日常的事故处理岗位上，遇到各种形形色色的交通事故，其中不乏因缺乏安全意识而造成严重事故后果的案例，下面，我将从自身几年来的工作经验出发，以一名高速公路交通事故处理民警的角度，来谈一谈高速公路行车的安全注意事项，希望能对司乘朋友的行车安全有所帮助：<br>　　一、安全带保安全<br>　　 这是一个老生常谈的问题，也是一个很多司乘朋友很不以为然的问题。诚然，在地方上开车尤其是城市道路，我个人观点安全带的作用大部分是应付交警，实际作用并不大。而在高速公路上，系与不系安全带却会在事故后果中产生天壤之别。我出现场的2007年度的事故中，我印象中最少有两起小车单方造成的死亡事故都是没有系安全带引起的，其中一起是辆帕萨特自翻，车上只有司机一人，如果他系上安全带的话，我个人认为最多是轻伤，法医鉴定为颈椎骨折致死，全是翻车时身体不受限制运动造成；第二起也是小车单方，在高速行驶时前轮爆胎造成车辆失控多次撞击道路护栏，共有司乘两人，司机系了安全带毫发无伤，而副驾驶上的乘客因为没系安全带，且在放倒的座位上斜躺着休息，结果在车辆失控打时被从后风挡玻璃处甩出车外致死。<br>　　二、爆胎时的操控处理<br>　　 刚才提到了车辆爆胎，在高速行驶时小车爆胎尤其是前轮爆胎造成的后果远比大车爆胎严重，爆胎虽然不可预料，但在我们的事故处理中常常发现一个有趣的现象：如果是左前轮爆胎造成车辆失控撞击护栏，撞的往往是右侧护栏，反之亦然。究其原因，在车辆爆胎时因胎径及摩擦系数的不同，车辆的运行轨迹将偏向爆胎的方向，爆左前轮向左偏，爆右前轮向右偏，而司机在打方向纠正时，指向性能反映在已爆胎的车辆上是有一个迟缓性的，加之因爆胎造成的慌乱，常常造成纠正过度，从而人为加剧车辆的失控，致使左前轮爆反而撞上了右边护栏，甚至连续多次撞击左右护栏的现象发生。正确的做法是在车辆爆胎时，首先要紧握方向，不管车头向哪偏，给一个固定的纠正角度（与你的实际车速有关）并用力保持，同时不要采取紧急制动，因为这时车辆的制动能力在纵线上是不平衡的，让减速行为掌握在受控制的过程中并努力保持原来的行车轨迹，切忌$More$急打方向纠正。<br>　　三、超速行驶<br>　　 超速行驶的危害大家都知道，无论是地方还是高速，都会造成不可挽回的后果。如果你驾驶一辆时速100KM的小车，假设你身高170CM，从你眼睛发现情况，到大脑做出判断，再反映在刹车制动，生理上的反应时间是1.7S左右，而这时你的车辆已经前行了47.2M。40米的距离！会包含多少无可奈何的生命！我们曾经在限速70KM/H的路段查超速（110公里我们才纪录），有辆小车竟然跑了203KM/H，看着照片，我们都说这个驾驶员迟早要报销，那是他的命，命在他的手中，别人无能为力。对于超速行为，我只有两句话：一句是“十祸九快”，一句是不要迷信“好车”，往往有些人迷信自己的车好，性能就好，但是生命面前是人人平等的，我们手里有宝马745，有保时捷卡宴，还有S80，不管日本车欧洲车，只要超速出事，该死死该伤伤，一点不耽误。我国最高等级的高速公路限高速是120KM/H，这是写在安全法里的法定最高时速，这不是没有根据的，据国外资料，如果一辆时速超过160KM的小车发生爆胎事故，不管你是否系安全带，司乘人员的死亡率是100%！记住，不是50%，也不是99%，是100%!敬告那些喜欢一上高速就把油门踩到底的司机朋友，祈祷你的轮胎安然无恙罢。<br>　　四、行车前的安全检查<br>　　 还是爆胎问题引出的题目，这是一个很偶然的因素，你说你是新车？我们手里有5000公里不到的新车爆胎，至于车型我不方便在这里说，但可以透漏是**公司十万元左右最普通的家用车；除了出行前检查轮胎，还有机油问题、润滑油问题、降温液问题，甚至雨刮和玻璃水也要仔细检查，我们曾经下班时坏了雨刮，邪门，偏偏是左雨刮，那天又正好是雨夹雪，可想而知我们那几十公里的路是怎么回的家！不堪回首啊，这是高速公路，前不着村后不着店的，幸亏我们是警车又熟悉路况，打着双闪和警灯就这样歪着脖子开车坚持下了路，要是换了别人，要么受罪，要么就容易出危险了。回到家后检查车辆，原来是雨刮连杆掉了一个螺丝，一毛钱都不到的维修成本造成了多大的麻烦和隐患！<br>　　五、高速公路的标线、标牌和警告<br>　　 相信很多经常上高速的司机朋友都会发现高速沿线不时会有这样那样的警告标语和警示灯，我以前没上高速干的时候也是没有在意这些东西，但干了这几年才深深感触，那每个“事故多发路段，请谨慎驾驶”的标语和这样那样不起眼的小黄灯、小蓝灯后面都是血淋淋的教训和残酷，相信我，这些东西的设置决不是随心和随意的，没有十几条、几十条人命和规律性的大事故发生，高速公司和我们是不会费那个周折的。当您在路上见到类似的警告标志时，一定要有意识的降低车速并保持车距，同时做好应对紧急情况的准备，毕竟，距离产生美，这点用在与老婆恩爱相处及安全行车上都很有好处。<br>　　六、尽量避免夜间行车<br>　　 在我国目前的现实里，这是一个全国普遍的规律：夜间行车的大货车数量要远远多于白天在路上跑的。在我们这里，光说大货车，白天与夜间的比例能达到1：5甚至更高，晚上巡逻时左边是一溜白灯，右边是一溜红灯，一边一串看不到头，这曾经让我们困惑过，白天视野又好，车流量又小，为什么这么多的货车要昼伏夜出？以至我们经常为处警彻夜不眠。后来通过和当事司机聊天才知道，白天要装卸货物、维修车辆、办事找人、而且最重要的是路政、超限和交警白天都在路上，晚上行车麻烦更少！这就造成晚上是各种事故的高发时段，作为小车的司乘人员，在晚上行车，流量大、密度高，跑着“不爽”还是其次，重要的是忙了一天的大车司机大部分涉嫌疲劳驾驶、更有证驾不符、违法驾驶等大比例牵涉其中给行车造成更大的安全隐患。而且大车的座位较高，高速公路的中央隔离根本挡不住对面射过来的一串车灯，大车司机几乎是在半眩目的状态下开车，你愿意一路上和这样的司机们一同驰骋吗？<br>　　七、超车时多用闪灯提醒<br>　　 高速公路速度快，噪音大，你的车喇叭前车根本听不到，超车时还是多切换远近闪灯提醒一下对方更有用；而且，当你发现行车道内有两辆以上大货车前后距离比较近时，超车时你就要提防后面的大车突然变道超车，那时如果你正好跑到他旁边，那可就真要听天由命了，相信我，那些变道超车的大货车在变道前能有一半在观后镜里看一眼的就算阿弥陀佛了，更何况你是小车，不容易被发现且车速更快。而且，晚上超车时，不要一直用远光灯，在你距离被超车辆尾部贰、叁佰米时最好切成近光灯，这样前车才能更好的判断你与他的距离从而不会误判，要知道，在路上让其他车辆更清楚地看到你，与你是否能清楚看到对方是同等的重要。说到这里，想起在市里经常有晚上不开车灯或者打着远光会车的摩托和机动车，他们自认为自己能看清路面和其他车，而别人是否能看清他们呢？那都是一些自私而且毫不体谅别人的人，我一直很鄙视这些人。<br>　　八、非紧急情况不要占用紧急停车道<br>　　 紧急停车道，顾名思义是在紧急情况下才能使用的车道。我们出现场发生堵路时最头疼的就是小车占用紧急停车道，造成我们无法及时到达现场，因为小车占道，我的最高纪录是提着勘查箱步行七公里出现场，当时的心里真是既生气又无奈：你也不想想，既然已经堵路，在交警没有到达现场前，你能插上翅膀飞过去吗？七、八十吨连车带货翻在路面，没有吊车、施救车现场路面能通行吗？你堵的虽是交警，其实堵的也是你自己！这都不算是重要问题，最重要的是这些人没有意识到前面的情况也许很危急，有些人可能正在流血、正在被困，在救援车辆没有到达现场前你却把别人的求生希望给堵的死死的！从某种意义上说，可能因为你占用紧急停车道而使救护、救援车辆不能及时到达现场、可能因为你占用紧急停车道而使救援车辆只能冒危险逆行或从中央护栏调头，徒增风险！可能因为你占用紧急停车道而间接造成他人死亡！根据我国的安全法实施条例第八十二条第四款规定，对非紧急情况下占用紧急停车道的行为处罚金200元，并处扣六分！<br>　　 如果前面出事故被困的是你的亲人，你会占用紧急停车道吗？记住：紧急停车道是一条生命通道！<br>　　九、保护现场？保证安全！<br>　　 我们大队管辖的高速路段约170公里，从前事故一直是一个点三班倒，后来随着人员的增加及为了快速出警（有时早到现场十分钟可能就能救回一条人命）我们分成了两个事故出警点各辖一段，可就是这样，在自己的辖区一圈也要两、三个小时。有时经常接到这样的事故报警：双方发生了简单的刮擦或追尾，事实无争议、无人员伤亡、财损不大、车辆能够移动，可无论我们怎么在电话里劝，双方当事人就是不肯将车移到路边！一定要我们到现场“照相”后才肯动车！七八十公里呀！最快也要四十分钟一个小时！有时为了百十块钱的损失，两个车横在路面阻塞通行致使堵路达十余公里！碰到这样的司机，我捶他的心都有！你为了自己的些微利益，不听交警的劝告一意孤行，如果你的车辆滞留路面引发二次事故怎么办？如果你的车辆滞留路面，致使后面堵路造成事故怎么办？可以肯定的是如果再发生事故，所造成的人员财产损失一定会大于你的小事故，到时，后面的事故当事人如果起诉你，虽然你可能不用承担法律责任，但你百分百要承担赔偿责任！<br>　　 在高速公路发生财产损失轻微的事故，如果无人员伤亡、双方对成因无异议，且车辆具备移动能力，一定要将车辆移动致紧急停车道内停放，现在的人们几乎都有拍照功能的手机，可以在动车前用自己的手机将原始现场拍两张照片，当然，最好能在电话里和当班民警沟通，放心，碰到这样的“移动现场”，",1676,2009-02-23 16:20:59.697,1,A
64,Wayne,作息时间自动提醒Windows Service,Personal-Schedule-Windows-Service,26,"<p>经济危机真真切切的影响到了几乎每一个人，09年过去三分之一多一点了，生活不太规律，确实太忙的说，工作换了，房子也换了，又做回了张江男，觉得自己再不好好努力会Out的。。。都奔三儿而去了。。。于是乎，为了勉励自己，做了这么个东东。</p>
<p><img title=""WSNSVC"" style=""border-top-width: 0px; display: inline; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px"" height=""475"" alt=""WSNSVC"" src=""https://a1r0ka.bay.livefilestore.com/y1mD6Kt2muV15s0gB3-mjxP7Wc4jaJsSm5xiCF75azDU1vttwkA_H9nrbJEU4LAqR_i7DvDM_QX4--f17CS2MW0JNn-Px4Ojn_wmWMyf9EameEvHi90UpQkN7vn_JzQ6lrqb_TSuRPTjrj9dnIISyGFSQ/WSNSVC_thumb[1].jpg"" width=""417"" border=""0""></p>
<p>一个Windows Service，里面跑一个Timer，每隔10秒check一下当前时间，一旦发现时间吻合，则调用Microsoft Speech Technology? 发声提醒，超级简单，不过。。。以后要么得一直戴着心爱的森海塞尔，要么只能用音箱了。。。</p>
<p><strong>服务描述：<br>Notify Wayne to follow the schedule established by himself. If this service is disabled, Wayne may waste a lot of time...</strong></p>
<p><strong>项目层级：<br></strong><img title=""SolutionHierarchy"" style=""border-top-width: 0px; display: inline; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px"" height=""366"" alt=""SolutionHierarchy"" src=""https://a1r0ka.bay.livefilestore.com/y1myARFNSs9HtPEkWNhLJtAPYbQUf3yRaNWdhWDTYz6QsW9bKfIjI8faJN_G8bGmfHxjUN5uePnITft3XyOOWkFVD9onxHYh2CsS1TZkzYNR2OiCrA5sZMW7goCQGrkHMSiXKz7l5U9ayquLzQ7CvcF5A/SolutionHierarchy_thumb[1].jpg"" width=""292"" border=""0"">&nbsp;</p>
<ul>
<li>WayneScheduleService.cs Windows Service后台代码 $More$
<li>ScheduleItemsReader.cs Linq读取ScheduleItems 
<li>SoundNotifier.cs 执行发声提醒 
<li>ServiceLogManager.cs 打Log</li></ul>
<p><strong>主要程序代码：</strong></p>
<p>调用程序发声的代码：<br>&nbsp;&nbsp;&nbsp;&nbsp; public static class SoundNotifier<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public static void Phonate(String sentence)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SpeechSynthesizer speaker = new SpeechSynthesizer();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CultureInfo cnCulture = CultureInfo.GetCultureInfo(""en-US""); </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PromptBuilder pb = new PromptBuilder(CultureInfo.CurrentCulture);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pb.StartVoice(VoiceGender.Female, VoiceAge.Adult);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pb.StartStyle(new PromptStyle(PromptVolume.ExtraLoud)); 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pb.StartSentence();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pb.AppendText(sentence, PromptEmphasis.Strong);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pb.EndSentence(); 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pb.EndStyle();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pb.EndVoice(); 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; speaker.Speak(pb);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; } 
<p>晚间作息时间弄在XML里，根据情况自行配置（搞烦了全删掉。。。）：<br>&lt;?xml version=""1.0"" encoding=""utf-8"" ?&gt;<br>&lt;WayneScheduleItems&gt;<br>&nbsp; &lt;ScheduleItem TriggerHour=""18"" TriggerMinute=""20"" Content=""Hi! Wayne! Dinner Time!"" /&gt;<br>&nbsp; &lt;ScheduleItem TriggerHour=""19"" TriggerMinute=""0"" Content=""Hi! Wayne! It is time to learn technologies and programming skills!"" /&gt;<br>&nbsp; &lt;ScheduleItem TriggerHour=""20"" TriggerMinute=""30"" Content=""Hi! Wayne! Take a rest, entertainment, gaming, exercise and wash."" /&gt;<br>&nbsp; &lt;ScheduleItem TriggerHour=""22"" TriggerMinute=""0"" Content=""Well, read/write Emails, read some news."" /&gt;<br>&nbsp; &lt;ScheduleItem TriggerHour=""23"" TriggerMinute=""0"" Content=""Wayne, go to bed, sleep! Good night!"" /&gt;<br>&lt;/WayneScheduleItems&gt;</p>
<p>使用Linq读取XML里的ScheduleItems：<br>List&lt;ScheduleItem&gt; scheduleItems = new List&lt;ScheduleItem&gt;(); </p>
<p>IEnumerable&lt;XElement&gt; scheduleItemsCollection = from scheduleItem in XElement.Load(ScheduleItemsXmlLocation).Descendants(""ScheduleItem"") select scheduleItem; 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach (XElement ele in scheduleItemsCollection)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ScheduleItem scheduleItem = new ScheduleItem();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scheduleItem.TriggerHour = ushort.Parse(ele.Attribute(""TriggerHour"").Value);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scheduleItem.TriggerMinute = ushort.Parse(ele.Attribute(""TriggerMinute"").Value);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scheduleItem.Content = ele.Attribute(""Content"").Value; </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scheduleItems.Add(scheduleItem);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return scheduleItems; 
<p>最后是Timer：<br>const double WorkInterval = 10000d;<br>m_Timer = new Timer(WorkInterval);<br>m_Timer.Enabled = true;<br>m_Timer.Elapsed += new ElapsedEventHandler(OnTimerElapse);
<p><a href=""http://cid-734274473cc13a10.skydrive.live.com/self.aspx/Public/WayneScheduleNotifier.zip"" target=""_blank""><strong>源代码下载</strong></a><br>Note: 由于使用Linq的缘故只能运行于Donet 3.5，由于使用Microsoft Speech Technology? ，仅支持XP以上操作系统（在XP中还有点问题，比如不支持女声，并且不支持中文）。 
",3329,2009-04-24 20:31:48.000,1,A
65,Wayne,令人无比失望的2009上海车展,,1,"<P>由于对2007年的上海车展一直印象深刻，并且当时就立誓下次的车展一定要参加，再加上这次又是公司提供的免费票，所以，这次是志在必得要一次看个够！不过有句话叫：“希望越大，失望越大。”，用在我对于09车展这件事情的关注与希望上，就再贴切不过了。 
<P>周五晚上睡觉之前发现早上9点半时火箭队开拓者的第三场季后赛争夺，并且是火箭主场迎来的本赛季第一场季后赛，所以决定先看看这场重头戏吧。大概到了12点多，比赛打完，火箭如愿以偿赢得胜利，我也就平添了一份好心情，于是和老婆赶紧出发直奔国际博览中心，经过2个多小时的不间断的拥挤与汗水，我们就不堪重负，逃跑了。。。 
<P>对于车子，我是个准外行，来车展就为了看看Porsche Cayman S,BMW&nbsp; M5, Nisson Skyline, Mazda RX-8, Lamborghini Murciélago, etc. 可发现他们中的大部分都没有来，而且，几乎80%的车子的们都是锁着的-不让进去瞧（07年，以上这些车都有，RX-8还可以坐进去瞧瞧）！至于参观的人数，则一定是创纪录的！！！门票价格坎了一半（07年100，09年50），主办方在参展人数上预计根本没打算进行任何限制！这些因素让人玩性$More$大减。。 
<P><STRONG>People Mountain People Sea</STRONG>….<BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mYuMQT1wNudz3T30RWM9vSW7CD6kSqGHtmrUNTfyoEOVC8pIyHUcDR_FhnJBD95LMM-rj2NR2TQ97SQsJ0Bh9PhOIpVlxzH_-ehUt1wSahSkPba6YsaeSPx9VXdDCGmr4TOWSthEouNW3A0pJn6oBDA/P1060097[6].jpg"" rel=WLPP><IMG style=""BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; DISPLAY: inline; BORDER-TOP: 0px; BORDER-RIGHT: 0px"" title=P1060097 border=0 alt=P1060097 src=""https://a1r0ka.bay.livefilestore.com/y1mXr5SYuGZXidn-v8k6QuKgM6XYzY0EAp8COzYDolt-U-6PBPT4UImUwbc0fVBPBRC1g5zxt3Lio36_vwNZNWLFD9LXfDRyjOiG3Ozxr3rGQB5y1ZH_Mj4sZwTYkAEH6kC9RU9Likf0H_duvhlow6QXg/P1060097_thumb[4].jpg"" width=544 height=409></A>&nbsp;<BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mV4ubC84tTuAFMyhdL4qQNZENt20T24OVOKPZeQATmSO8TlpeX1YSav6trWOtRkVUh9MMxa69MecqaQplHLJ1zQFy3l25ZcZrGxEQ3cAJYUvc1zOHr5IL4_emYK6P2EmWqTE9B9Iu1hpCNCcm38nRtA/P1060115[11].jpg"" rel=WLPP><IMG style=""BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; DISPLAY: inline; BORDER-TOP: 0px; BORDER-RIGHT: 0px"" title=P1060115 border=0 alt=P1060115 src=""https://a1r0ka.bay.livefilestore.com/y1m3lC1mg3XtnkbtToB5X68cRf1NFLlMmiF16VQz9JC-A4eMuceg64ns53GvNWY4ZRem6WKNQlEYLIFc35FDNAhO7I9KTXFHkUeivJLbtGqBC13nR31NO6qsQZOcmOehwE-LpwEa-juDY1Hsuecuuz52g/P1060115_thumb[9].jpg"" width=544 height=409></A>&nbsp; 
<P>人难受就不说了，万一发生拥挤发生事故怎么办？？？希望主办方能够更过地考虑安全因素，毕竟，在上海这样一个4000万常住人口的大都市，1000个人里有一个人买票进场那就是4万人，再加上专程赶过来参观的游客以及老外，如果人数不控制的话，任凭你这个事实上可能非民意的“国际博览中心”再大，再恢弘，也是不够D呀！ 
<P>回到家，发现相机里进进拍了30张，还不如上次去七宝拍的一半。。只有奇瑞“头牌”能让人心情好一点：<BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mLMc1f3nORHZw4-XnLpOkwddZHFVPIkEkrX2oVlNxP2UwPmZTCvlU9qRuM55GXnUSfaI1zQrxwE2GAlCRT0QnUxR1wgsz5DUxPRtG0oVPtmL05JYezM1zGmWtWt2oMCWcbO-fentiMTvGz3mT4NF5oA/P1060109[3].jpg"" rel=WLPP><IMG style=""BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; DISPLAY: inline; BORDER-TOP: 0px; BORDER-RIGHT: 0px"" title=P1060109 border=0 alt=P1060109 src=""https://a1r0ka.bay.livefilestore.com/y1mZ9wVDEaXXGwqeZ-PZajj71NE5SE6Ru4WFvgQA05G0YLPkDSiikavulLZPPfP0v6IoV5szStRSSbl7FyQ7gIF6e_6Z9TJCJ2UECFuGCdUoWst9ODGnSYwt43swIL7MlWzDXfi2yjo5YyrxqZQxYTtvw/P1060109_thumb[1].jpg"" width=544 height=724></A> <BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mJqcBCIx0452LkC6U09EZ76BDIfgelMCw2zwlW8O34ynQ75IIkmxpuc5w69gzPEmBx2bF78J67uwsN-HXoIMX4IDAMNEweRBeCikS_QYFupij0f_Ix4TreqfAuf7jTzEb0CYnDxwft2RgeGNyRg4mgg/P1060114[3].jpg"" rel=WLPP><IMG style=""BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; DISPLAY: inline; BORDER-TOP: 0px; BORDER-RIGHT: 0px"" title=P1060114 border=0 alt=P1060114 src=""https://a1r0ka.bay.livefilestore.com/y1mCW2-6ksxcKc44-Jy6Hm2WNIHcDT4sbVAU_nBP9zmi1pAgmMbKJ3m9wYcxju0VlABmEltxu2z-IEuHmUW35iRgcDrHm2AzP053JYIj44e6e1Ik30RSpKjKqDDlceiZ82U1uZYoIE6r5tw2Nc4uUnnaQ/P1060114_thumb[1].jpg"" width=544 height=409></A> </P>",1484,2009-04-26 14:43:58.777,1,A
66,Wayne,欺实马,,5,"<P>欺实马，草泥马和河蟹的杂交近亲，没有生育能力。传说古代钱塘今浙江<B>杭州</B>有一口古井，叫交井，相传此井下压着被草泥马排泄物封印的不知名妖孽。 
<P>当时的钱塘富贾中流行着一种风俗，每每遇到灾祸，富贾们都将家中宝物钱财投入此井，以求消灾避祸，少则几万，多则几吨。奇怪的是此井被没有因此而变浅，终年寒气逼人。当地百姓甚为恐惧。 
<P>公元2009年5月，被尘封了几千年的无名妖孽终于冲开了草泥马排泄物的封印，冲出交井，再度祸害人间。经过砖家和教授的一致认定，把此妖孽取名为欺实马。 
<P>今日因诸多此类事情<STRONG>心情很压抑</STRONG>。。</P>
<P>“房子会被强拆，女<B>儿</B>会被嫖宿，发帖会被跨省追捕，小孩会吃到<A></A><B>三聚氰胺</B>，高考成绩都会被冒用，过个马路会被飙车党撞死</P>
<P>“你在辛苦读书的时候，他们在玩玩具<BR>你在休息的时候，他们在谈恋爱<BR>你拼命考了个大学，他们不费一点力占用了你的名额<BR>你在大学苦读书学技能的时候，他们在玩游戏在开车泡吧泡妞吸粉<BR>你大学毕业的你辛苦的在找工作，他们已经被ZF机关单位“考核”录用了<BR>你守交通规则走在班马线上，他开着车违规把你送上天了！<BR>你家人辛苦$More$的的付出白费了，换来了最后他们的一点零花钱作为补偿！<BR>你的亲人一辈子在痛苦中度过，他们继续过着他们和谐的生活！！<BR>你的家人还是过着本份的日子，他们还用权钱收买着正义和公平！！<BR>不要沉默，我们不要这样的循环，到你有钱有权了也不敢欺负弱小！”</P><br />
<P><B>以上内容完全是复制粘贴，本人并不明白其意思，故本人不对以上内容负法律责任，请不要跨省追捕。要详查请自己联系原作者，谢谢！</B></P><br />
<P>有人说，如果此事有关衙门不能给“人民”（人民=贱民）们一个交代，对这个Country真的没有什么希望了，日后上街打酱油都有可能被富二代撞死。。而鄙人，是真觉得没希望了。。别人被躲猫猫，反正我这辈子不会进监狱；别人的孩子喝了三聚奶，我还没有孩子；吴保全因“诽谤ZF罪”被判处1年，不服上诉后再加一年。。。不在沉默中爆发，就在沉默中河蟹！我一个布衣，没有诺大的抱负，只是这个纸醉金迷社会中的一个低等软体动物，如之奈何？</P>",1567,2009-05-14 22:53:20.937,1,A
67,Wayne,油价涨涨涨！！！,,5,"<P>“人”不能无耻到如此地步！Wait！FGW那帮家伙能称之为“人”？？？</P>
<br />
<P>据<A href=""http://news.china.com.cn/chinanet/07news/china.cgi?docid=6051033846727917129,979898134848220034,12915537508705742967,11488920088732052888,0&amp;server=202.108.4.93&amp;port=6666"" target=_blank>十分可靠消息</A>，油价又涨了，现在上海的93号油价为：5.99RMB/升，关于中美油价，我<A href=""http://wayneye.com/ViewBlog.aspx?BlogID=48"" target=_blank>之前有过比较</A>，现在虽然国际油价涨了些（大概70美元一桶），可通过换算可知，上海的油价依然比纽约贵1块2毛1，再次强调，人家有燃油税在内，我们没有，人家High Way 95%免费，我们高速100%宰你！！！</P>
<br />
<P>我做了个简单Silverlight Page，<A href=""http://wayneye.com/GasPrice/GasPriceExchanger.htm"" target=_blank>美中油价换算</A>，朋友们可以用用，以美制加仑=3.7853升，当前美元兑人民币6.83来计算，后者可配置。</P><br />
<P>美国油价数据来自：<A title=http://gasbuddy.com/ href=""http://gasbuddy.com/"">http://gasbuddy.com/</A></P><br />
<P>中国油价数据：。。。我没有找到官方油价数据，自己Google。。。</P><br />
<P>草泥马！FGW！</P><br /><IMG src=""http://pic09.sdnews.com.cn/NewsImg/2009/6/30/Img264851762.JPG""> ",1710,2009-06-30 22:50:51.727,1,A
70,Wayne,[转自X-Beta]一中国导演想模仿《星球大战》,,7,"<P><A href=""https://a1r0ka.bay.livefilestore.com/y1m0fRQaROsNY03EZaB1NFc3ofwNYRn0ADEm4UvtY0Maw1qaLCAHMRAvKW5STZlZlNXX7XSPUnwlwoTNqHOF0n6Q7PgyC9-CrjTCmpc8bi-_3HaQkDGPevuqG1EQ5O2-5uUlHmweZAbyT73FCS_EaNqGQ/1[1][3].jpg"" rel=WLPP><IMG style=""BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; DISPLAY: inline; BORDER-TOP: 0px; BORDER-RIGHT: 0px"" title=1[1] border=0 alt=1[1] src=""https://a1r0ka.bay.livefilestore.com/y1mVubiU8WXMklKc8IWTEHFKHcgYKBPz6powhm33kDTvez-IZiEGs4fsRvR9kZaf88J4L9jmZqUMQDqK4vOWqnZfuEVRoXZRnXmf9oWWzu1-2REwYC2x1G02BwjK4w6n1PQYx03R53mlsFTleomhxzudA/1[1]_thumb[1].jpg"" width=504 height=317></A> </P>
<P>一位中国导演想模仿《<A href=""http://www.x-beta.cn/article/di-qiu-bao-wei-zhan.html"">星球大战</A>》拍一部<A href=""http://www.x-beta.cn/article/di-qiu-bao-wei-zhan.html"">科幻大片</A>《地球保卫战》，于是他写好了剧本，也找好了投资，准备开拍。当然，拍之前必须送交广电总局审查。于是他把剧本大纲寄给了广电总局。</P>
<P>大纲是这么写的：许多年以后，地球已经处于一片混乱和动荡之中。火星人趁乱进攻地球。在危难时刻，太空船长梭罗和最后的武士卢克一起组成了反抗联军，抗击火星人的进攻。在丽亚公主、机器人R2、犹达师傅的帮助下，他们用“原力”打败了火星人的“黑暗力量”，一举攻破了火星人的飞船，挽救了地球。</P>
<P>这位导演很快收到了广电总局的回复。回复中写道：既然地球已经处于一片混乱和动荡之中，那么中国的情况怎样？<BR>导演马上回复：中国也是如此。<BR>广电总局：不可能。在党的领导下，中国绝不会乱。<BR>导演哭笑不得，回复道：到了那$More$时候政党都已经不存在了。<BR>广电总局：你好大胆！竟敢诅咒XX党垮台？<BR>导演冷汗直冒，连忙回复：您误会了，这只是幻想出来的一个情况，不是真实的。<BR>广电总局：即便不是真实的，也会使观众产生不必要的联想，影响社会稳定，这个罪名你担当得起吗？</P>
<P><A href=""http://www.x-beta.cn/article/di-qiu-bao-wei-zhan.html"">导演</A>心里一阵发毛，只得修改剧本。过了几天，他提交了新修改好的剧本大纲。<BR>大纲是这么写的：许多年以后，地球已经处于一片混乱和动荡之中，但中国却是一片繁荣昌盛、欣欣向荣的景象，人民安居乐业、生活幸福。然而，火星人却突然进攻地球。在危难时刻，太空船长梭罗和最后的武士卢克一起组成了反抗联军，抗击火星人的进攻。在丽亚公主、机器人R2、犹达师傅的帮助下，他们用“原力”打败了火星人的“黑暗力量”，一举攻破了火星人的飞船，挽救了地球。</P>
<P>很快，他又收到了广电总局的回复。回复中写道：这个梭罗和卢克是什么身份？<BR>导演回复：他们是拯救地球的英雄。<BR>广电总局：难道地球就被这几个人给挽救了？我们的中国军队、公安干警在哪里？我们的党在哪里？<BR>导演：人类差不多已经被火星人打败了，最后是他们几个历经千难万险，终于打跑了火星人。<BR>广电总局：你这是宣扬个人英雄主义！蔑视组织的存在！会造成严重的社会影响。打回重写！<BR>导演没办法，只能再改。冥思苦想了好几天，终于改好了。<BR>新的大纲是这么写的：许多年以后，地球已经处于一片混乱和动荡之中，但中国却是一片繁荣昌盛、欣欣向荣的景象，人民安居乐业、生活幸福。然而，火星人却突然进攻地球。在危难时刻，我党派出了优秀党员梭罗和中国军人卢克一起组成了反抗联军，抗击火星人的进攻。在公安干警们的帮助下，他们用“原力”打败了火星人的“黑暗力量”，一举攻破了火星人的飞船，挽救了地球。<BR>很快，他收到了<A href=""http://www.x-beta.cn/article/di-qiu-bao-wei-zhan.html"">广电总局</A>的回复。广电总局说：基本满意。不过，这“原力”和“黑暗力量”是什么东西？<BR>导演解释：它们是一种用意念控制的能量，这种力量非常强大，可以做到隔空打物，它有两个面，好的光明面和坏的黑暗面……</P>
<P>广电总局立即有了回复：这怎么行？这是封建迷信！歪门邪道！不符合科学发展观！会造成严重的社会影响，不明真相的群众会信以为真，青少年会竞相模仿，会给未成年人带来严重的负面影响。打回重写！</P>
<P>导演吐了三升血，好不容易缓过劲来。没办法，还得改。<BR>经过反反复复的修改，最终通过审查的剧本大纲是这样的：<BR>许多年以后，地球已经处于一片混乱和动荡之中，但中国却是一片繁荣昌盛、欣欣向荣的景象，人民安居乐业、生活幸福。然而，火星人却突然进攻地球。在危难时刻，中国挺身而出力挽狂澜，我党派出了优秀党员梭罗和中国军人卢克一起组成了反抗联军，抗击火星人的进攻。在公安干警们的帮助下，大家齐心协力，用菜刀、棍棒、镰刀、斧头与火星人展开了激烈的搏斗，一举打败了火星人，挽救了地球。最后卢克光荣入党，梭罗也成为了人们竞相学习的英雄模范。从此地球恢复了平静，人们幸福的生活着……</P>
<P>导演兴冲冲拿着剧本去找投资方。投资方看完，沉默良久，说你只有找周星驰来拍。<BR>导演很高兴。想，我这<A href=""http://www.x-beta.cn/article/di-qiu-bao-wei-zhan.html"">剧本</A>都大牌到要请星爷来拍了。托了二爷的大妈的孙子的学校的保安的女朋友的工作单位的上级领导的老婆的关系找到了周星驰。</P>
<P>周星驰看了剧本，拿起坐着的折凳猛k了导演2个小时。打完以后说，你这不是存心整我吗，你到底是不是要耍我啊。要是换了我2年前的脾气，我一脚就把你踹到下面的马路上去，再把你挂到皇后巷广场上鞭尸啊你这个蠢货，你马上给我滚回火星去。废物，你真是废物，记住啊，你是个废物，不准你用走的，你跟我用滚的去 </P>
<br />
<P>原文地址：<A title=http://www.x-beta.cn/article/di-qiu-bao-wei-zhan.html href=""http://www.x-beta.cn/article/di-qiu-bao-wei-zhan.html"">http://www.x-beta.cn/article/di-qiu-bao-wei-zhan.html</A></P>",1816,2009-07-25 15:05:48.830,1,A
71,Wayne,有饮料的夏日是幸福的:),,1,"<img src=""https://a1r0ka.bay.livefilestore.com/y1mToLZWpbw0SDcrTnqWpGercpQZQnJh8APRxqXv27eE68AznMxikgw-2D4cGE1CwxVRg9IprUOczF8X8Fi69RRVQ5IQ0eDUk7jwenYjOiH8k21nfAiAccSd7lS_WsmHPdQO365ooBSGPo0E3mZoeHjug/SDC10057.JPG"" alt=""好多饮料^_^"" />",1859,2009-07-27 19:25:56.340,1,A
72,Wayne,A good lesson and experience,A-Good-Lesson-On-DateTime-Localization,29,"<P>I was extremely busy during the last two weeks, since our project was at bug fixing phase, my team and I worked really hard on dealing with the bugs; We fixed two to three bugs everyday by average, I am very satisfied with the efficiency myself.</P>
<P>During this process, I encountered several very interesting issues. </P>
<OL>
<LI>There was a crash bug with P1 priority, we all cannot reproduced it until one guy from US team provided a remote server that our product always crashed, after I logged onto that server and 20 minutes investigating, I was really surprised, the reason is one line of code written by myself, it is:<BR><BR>DateTime.Parse(String.Format(""{0}/{1}/{2} 00:00:00 <FONT color=#ff0000>AM</FONT>"", DateTime.Now.Month, DateTime.Now.Day, DateTime.Now.Year))<BR><BR>Does this line of code has any problem, I definitely don’t think so before, but now, I understand, it <FONT color=#ff0000>only</FONT> works under <FONT color=#ff0000>English format</FONT>, once non-English format, under some format such as Chinese, the <FONT color=#ff0000>AM </FONT>makes non sense; and… Under some formats (such as French), the code will throw FormatException and leads program crash…<BR><A href=""https://4wypkg.bay.livefilestore.com/y1m9-JLMQ_Nx7oOv1UnJ5vqTEFo1fSXyjwbjLi1KREWc0B8tRewWusKLVsf825f5rTpmBdOmVROVojm5U62gaTBXLc0jEYRgXtFsj6rd1SYOGLHHBmFsjnkRzizvwBD3Sh_FgUUmJWtupcb4wIlXRC9rA/Format.png"" rel=WLPP;url=https://4wypkg.bay.livefilestore.com/y1m9-JLMQ_Nx7oOv1UnJ5vqTEFo1fSXyjwbjLi1KREWc0B8tRewWusKLVsf825f5rTpmBdOmVROVojm5U62gaTBXLc0jEYRgXtFsj6rd1SYOGLHHBmFsjnkRzizvwBD3Sh_FgUUmJWtupcb4wIlXRC9rA/Format.png target=_blank><IMG alt="""" src=""https://4wypkg.bay.livefilestore.com/y1m9-JLMQ_Nx7oOv1UnJ5vqTEFo1fSXyjwbjLi1KREWc0B8tRewWusKLVsf825f5rTpmBdOmVROVojm5U62gaTBXLc0jEYRgXtFsj6rd1SYOGLHHBmFsjnkRzizvwBD3Sh_FgUUmJWtupcb4wIlXRC9rA/Format.png""></A><BR></LI>
<LI>Another issue is a WPF related multi-threading issue, there is a module in our product used thread pool to invoke WMI APIs to$More$ get the drives' information, once done the thread updates a Boolean flag indicate it is ready to bind data onto UI, once the flag changes, it will notify WPF main thread (two WPF pages subscribed this), but the problem is, the one of them directly starts binding data, since it will be done in the thread created by thread pool, WPF does NOT allow this, an InvalidOperationException will be thrown and leads product crash.<BR></LI>
<P>The solution is straight forward: Let main thread updates the Boolean flag, so that both two subscribing page can simply just wait for it and do the binding.</P></OL>
<P>Interesting, hum:)</P>",3463,2009-09-03 22:46:19.863,1,A
73,Wayne,史上最胖的猫 - 32斤！笑死俺了，粉可爱！,29-Pounds-Lovely-Cat,1,"<embed src=""http://player.youku.com/player.php/sid/XODQ0MDQ3MTY=/v.swf"" quality=""high"" width=""480"" height=""400"" align=""middle"" allowScriptAccess=""sameDomain"" type=""application/x-shockwave-flash""></embed> 
<p>&nbsp;</p>
<p>跟这厮比起来，我们家多多简直就是小不点。。。</p>
<p>&nbsp;</p>
<object classid=""clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"" codebase=""http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,19,0"" width=""480"" height=""400"" title=""小猫多多"">
  <param name=""movie"" value=""http://wayneye.cn/Album/CatDuoDuo/Duoduo.swf"" />
  <param name=""quality"" value=""high"" />
  <embed src=""http://wayneye.cn/Album/CatDuoDuo/Duoduo.swf"" quality=""high"" pluginspage=""http://www.macromedia.com/go/getflashplayer"" type=""application/x-shockwave-flash"" width=""598"" height=""448""></embed>
</object>",2485,2009-09-30 14:18:26.340,1,A
74,Wayne,[转]揭秘朝鲜自主操作系统：红星Red Star,North-Korea-RedStar-OS,6,"<P><STRONG>据国外资讯网站RT报道，朝鲜（North Korea）不仅拥有自主的、与基于美国的万维网相互独立的区域网络，而且还拥有自行研发的红星Red Star操作系统。</STRONG>据悉，红星OS是去年由朝鲜IT技术人员在Linux操作系统的基础上改进而来的。俄罗斯学者Mikhail利用他在金日成大学交流之际获得了这款红星OS。他花费了5美元在距离宿舍五分钟步行路程的地方购得两张安装光盘。系统共分为客户端和服务器两种版本，第三方软件可以另外花钱购买。 
<P>废话不多说，下面就让我们一睹为快： 
<P>　　1、拆包后的安装盘，上下共两张； 
<P><IMG alt="""" src=""http://image.onlinedown.net/2010/huajunpc/03/20100302ljq15.jpg""><BR>图（1） 
<P>　　2、启动Logo画面，红星OS支持硬盘或网络下载安装，整个过程约为10-25分钟。启动安装程序后，用户会发现整个过程与Windows十分相似，但更加快速、简单，而且只有朝鲜语一种语言版本； 
<P><IMG alt="""" src=""http://image.onlinedown.net/2010/huajunpc/03/20100302ljq16.jpg""><BR>图（2） 
<P>　　3、登录界面：默认为Root用户名，右侧的Lim是游客账号； 
<P><IMG alt="""" src=""http://image.onlinedown.net/2010/huajunpc/03/20100302ljq17.jpg""><BR>图（3） 
<P>　　4、Red Star桌面$More$环境 
<P><IMG alt="""" src=""http://image.onlinedown.net/2010/huajunpc/03/20100302ljq18.jpg""><BR>图（4） 
<P>　　5、文件布局 
<P><IMG alt="""" src=""http://image.onlinedown.net/2010/huajunpc/03/20100302ljq19.jpg""><BR>图（5） 
<P>　　与纯正的Linux相比，红星OS算不上最轻便的操作系统，它的最低硬件需求为奔III 800MHz处理器、256M内存、3G固态硬盘容量。 
<P>　　桌面环境布局与同类产品十分相似，提供“我的电脑”、“回收站”等图标。界面左侧下方则是开始菜单，旁边是快速启动按钮 
<P>　　6、应用程序一览 
<P><IMG alt="""" src=""http://image.onlinedown.net/2010/huajunpc/03/20100302ljq20.jpg""><BR>图（6） 
<P>　　系统集成的应用程序十分有限，诸如“My Country”浏览器（更换外壳的Firefox）、简单的Word字处理软件、PDF文档阅读器、视频播放软件、虚拟磁盘管理软件。 
<P>　　7、小游戏（象棋） 
<P><IMG alt="""" src=""http://image.onlinedown.net/2010/huajunpc/03/20100302ljq21.jpg""><BR>图（7） 
<P>　　红星OS采用独特的键盘标准，分别可用于输入英语、朝鲜语、汉语和俄语；娱乐应用中包含四款益智小游戏，分别是扫雷、中国象棋、碎石机、花图纸牌； 
<P>　　8、其他应用程序 
<P><IMG alt="""" src=""http://image.onlinedown.net/2010/huajunpc/03/20100302ljq22.jpg""><BR>图（8） 
<P>　　光盘的其他内容有与Openoffice很类似的“We”办公组件，“Pigeon”电子邮件服务、传真通信服务、“Pyongyang Fortress”防火墙和计算器/日历等； 
<P>　　9、又见Firefox的身影 
<P><IMG alt="""" src=""http://image.onlinedown.net/2010/huajunpc/03/20100302ljq23.jpg""><BR>图（9） 
<P>　　浏览器中默认的搜索引擎是Google，但无法搜索到任何有用的信息，因为朝鲜的网络是完全封闭的。 
<P>　　10、安全软件 
<P><IMG alt="""" src=""http://image.onlinedown.net/2010/huajunpc/03/20100302ljq24.jpg""><BR>图（10） 
<P>　　红星OS整合的Antivirus 2.0套装（朝鲜文，不认识）算是唯一货真价实的正品，并没有改写某款开源代码，全部代码都是自行编写，具备一定的查杀恶意程序能力。另外，Mikhail使用运行Warcraft 3等大型应用软件时，系统表现平稳； 
<P>　　11、“开始”功能菜单 
<P><IMG alt="""" src=""http://image.onlinedown.net/2010/huajunpc/03/20100302ljq25.jpg""><BR>图（11） 
<P>&nbsp; 
<P>转载自： <A title=http://www.cnbeta.com/articles/105358.htm href=""http://www.cnbeta.com/articles/105358.htm"">http://www.cnbeta.com/articles/105358.htm</A></P>",2267,2010-03-05 15:24:15.167,1,A
75,Wayne,[转]扬州疯女院,Yangzhou-Crazy-Girls,1,"<P>由于我室友是扬州女孩，我的耳朵经常接受扬州话的洗礼，一直觉得挺好听，挺带劲，也挺好玩，室友本人嘛，男孩性格，跟下面这首歌的演唱者们比较match，一个style，so，我听了以后几乎在办公室笑出声，哈哈哈。 
<P>&nbsp; 
<P>事情起因是今天早上遇到了点点不爽的事情，心里默默骂：二B险，突然想，这3个扬州“字”怎么写，这种问题问百度，结果搜到这么个玩意，于是乎。。。。 
<P><br /><EMBED height=20 type=application/x-shockwave-flash pluginspage=http://www.macromedia.com/go/getflashplayer width=240 src=http://WayneYe.com/AudioPlayer/audioplayer.swf allownetworking=""internal"" allowscriptaccess=""never"" quality=""high"" flashvars=""file=http://WayneYe.com/AudioPlayer/ErBXian.mp3&amp;repeat=true&amp;autostart=false&amp;showdigits=ture&amp;showdownload=false&amp;width=240&amp;height=20"" wmode=""opaque""> <br />&nbsp;&nbsp; 
<P>歌词：（加重的歌词我觉得不错） 
<P>哪里有压迫，哪里就有反抗， 
<P>在一个伸手不见六指的夜晚， 
<P>我们终于逃出了封建的牢笼， 
<P>破窗而逃，小白小白小白 
<P>&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 
<P>(今儿上哪里玩一下啊?) 
<P>(走撒~走撒~)(到哪里?到哪里?) 
<P>(随便.联系哎~) 
<P>一生到了星期六我们几个大活宝 
<P>只要是玩的地方我们就要到处跑 
<P>这几个女人儿碰到一块$More$不得了 
<P>你要是撑得住还真是一个大好老 
<P>陈大嘴 小dd..黑的脸 
<P>小手小腿小身子偏偏长个大嘴 
<P>随便哪个看到她还非叫她一声姐(明姐) 
<P>(别费话别费话哦~人家现在是淑女) 
<P>(哎咦喂~我的妈妈哎~) 
<P>小猴子 这向时发胖了 
<P>吃个什么减肥药还真就瘦得来 
<P>那天子跑到我这里来 
<P>(哎..你晓得啊?李宇春现在和周杰伦混来.) 
<P>(放屁哦放屁哦~怎么可能呢?听说她是个同性恋哎~) 
<P>(嚼区闹~) 
<P>(乖乖哄你,真的~网上还有报道哪,你不晓得啊?) 
<P>哎..现在社会就是这样子男女不分见鬼来 
<P>变性人类当评委了美女们跳楼六走来 
<P>超级女声唱半天最后选了个人妖出来 
<P>靓妹难道死了啦?帅哥没有目标咯? 
<P>我要为全中国的美女们抗议~~ 
<P>(哎..败差六b哦.走不走啊?) 
<P>你晓这话哪说的?(摸x皇后~过来) 
<P>对的就这货,大胸俏屁股 
<P>帅哥天天换,还个个绕到她转 
<P>(哎~不说咯,说多了全是泪哦~) 
<P>只要拍到大头贴眼睛日得像卵子子 
<P>昨天讲个笑话子还真就把我们笑死来 
<P>(告诉你们个d事哦,昨天我在厕所看到一个女的抱着拖把跳舞,还对到镜子来了句: 
<P>“明天晚上十点钟皇宫厕所见~哼!”) 
<P>我深情的对她说了声:二b险 
<P>上帝真他m开玩笑来了个乾坤大挪移 
<P>帅哥旁边站恐龙美女旁边站秃驴 
<P>(不公平,帅哥眼睛都瞎苦了) 
<P>赵经理发话来 多大事啊?安排~ 
<P>乖乖龙的冬,韭菜炒大葱 
<P>几天不见赵经理(混得妖了嘛~~) 
<P>不过跟你说好了你别第一个向上冲 
<P>还好你有个猛老公外号毛泽东之兄 
<P>(哈哈..怎么说毛泽长(毛一直长) 
<P>(把我们说得这个死行,不说你自己嘛) 
<P>不谈说说我自己也不是什么好东西 
<P>凶起来打暴你小mm乖起来迷得你像花痴 
<P>(我看你死远些哦~) 
<P>再说导你个小呆b(来撒~来撒~) 
<P>电话.... 
<P>(喂~哦好,我们在怪等你们啊..88..搞定~) 
<P>我们这个某人哦情况就是她最多 
<P>电话不到三分钟帅哥来了一大锅 
<P>小裙子套起来 小妆化起来&nbsp; 小烟烧起来 小马马飘起来 
<P><STRONG>生活本来就这样子何必那么认真呢<BR></STRONG>
<P><STRONG></STRONG>
<P><STRONG>爱来爱去不累吗公鸡怎么可能下蛋呢<BR></STRONG>
<P><STRONG></STRONG>
<P><STRONG>赖昌清人就不家来嘛严重警告发帖者不照样有弊案嘛<BR></STRONG>
<P><STRONG></STRONG>
<P><STRONG>男人照样当超女嘛女人照样当皇帝嘛<BR></STRONG>
<P><STRONG></STRONG>
<P><STRONG>世界哪来那么公平呢<BR></STRONG>
<P><STRONG></STRONG>
<P><STRONG>再伤心不也过来了吗<BR></STRONG>
<P><STRONG></STRONG>
<P><STRONG>不要那么愤怒了不要那么想不开了<BR></STRONG>
<P><STRONG></STRONG>
<P><STRONG>不得用的男人可以甩得了<BR></STRONG>
<P><STRONG></STRONG>
<P><STRONG>粘人的女人可以叫她滚蛋了<BR></STRONG>
<P><STRONG></STRONG>
<P><STRONG>什么倒头一见钟情,一网情深,一心一意都他妈骗人的<BR></STRONG>
<P><STRONG></STRONG>
<P><STRONG>马克思哲学学过带?事物不得静止带<BR></STRONG>
<P><STRONG></STRONG>
<P><STRONG>让我们大家动起来不要听人家甩啊摆<BR></STRONG>
<P>(我要自己主宰~) 
<P>真她妈冷b冒热气胆小的还给你吓死了呢 
<P>抓抓抓抓抓?还不服气哪? 
<P>出去单挑家?哪个怕哪个哎? 
<P>(车子来了,走了,败说书了~) 
<P>(不行不行,我要先去洗个头,不然甩不起来.) 
<P>(你甩洗,甩吹,结束自己找我们去.) 
<P>(滚哦..往里坐坐.挤下子撒) 
<P>(挤你魂哪?头发哦...) 
<P>(这么多人不挤啊?你不想挤坐拖拉机去..) 
<P>(nnd) 
<P>(不喊不喊.乖乖..) 
<P>(哈哈...) </P>
<P></P>
<P></P>
<P></P>
<P></P>
<P></P>
<P></P>
<P></P>
<P></P>
<P></P>
<P></P>
<P></P>
<P></P>
<P></P>
<P></P>",2397,2010-03-05 18:43:39.323,1,A
76,Wayne,Sarah Connor - Just One Last Dance,NULL,1,"<BR>
<P><SPAN style=""DISPLAY: none"">&nbsp;</SPAN><EMBED height=20 type=application/x-shockwave-flash pluginspage=http://www.macromedia.com/go/getflashplayer width=240 src=http://WayneYe.com/AudioPlayer/audioplayer.swf allownetworking=""internal"" allowscriptaccess=""never"" wmode=""opaque"" flashvars=""file=http://wayneye.com/AudioPlayer/Just%20One%20Last%20Dance.mp3&amp;repeat=true&amp;autostart=false&amp;showdigits=ture&amp;showdownload=false&amp;width=240&amp;height=20"" quality=""high""> 
<BR>
<BR>Just one last dance....oh baby...just one last dance 再来最后一舞,亲爱的,再来最后的一舞<BR>We meet in the night in the Spanish café 我们相遇到那个西班牙咖啡厅<BR>I look in your eyes just don't know what to say 我望进你眼睛忘记了言语能力<BR>It feels like I'm drowning in salty water 我犹如在盐水里溺弱<BR>A few hours left 'til the sun's gonna rise 还有几小时黎明将到<BR>tomorrow will come an it's time to realize 明天的来临终告<BR>our love has finished forever 我们的爱永远终止<BR>how I wish to come with you (wish to come with you) 我多希望能对你而去<BR>how I wish we make it through 多么希望我们能一起面对<BR>Just one last dance 再来最后的一舞<BR>before we say goodbye 在说再见之前<BR>when we sway and turn round and round and round 当我们转啊转啊转<BR>it's like the first time 如同第一次那样<BR>Just one more chance 再多一只舞<BR>hold me tight and keep me warm 抱紧我让我感受你的温暖<BR>cause the night is getting cold 因为夜开始冰凉<BR>and I don't know where I belong 而我不知道自己归于何处<BR>Just one last dance 再来最后一舞<BR>The wine and the lights and the Spanish guitar 在酒和灯与这西班牙吉它<BR>I'll never forget how romantic they are 我永远不会忘记他们是多么浪漫<BR>but I know, tomorrow I'll lose the one I love 但我知道,明天我将失去我所爱<BR>There's no way to come with you 我无法随你而去<BR>it's the only way to do 现在唯一能做的<BR>Just one last dance 再来最后的一舞<BR>before we say goodbye 在说再见之前<BR>when we sway and turn round and round and round 当我们转啊转啊转<BR>it's like the first time 如同第一次那样<BR>Just one more chance 再多一只舞<BR>hold me tight and keep me warm 抱紧我让我感受你的温暖<BR>cause the night is getting cold 因为夜开始冰凉<BR>and I don't know where I belong 而我不知道自己归于何处<BR>Just one last dance 再来最后一舞<BR>Oh,Baby<BR>Just one last dance 再来最后的一舞<BR>before we say goodbye 在说再见之前<BR>when we sway and turn round and round and round 当我们转啊转啊转<BR>it's like the first time 如同第一次那样<BR>Just one more chance 再多一只舞<BR>hold me tight and keep me warm 抱紧我让我感受你的温暖<BR>cause the night is getting cold 因为夜开始冰凉<BR>and I don't know where I belong 而我不知道自己归于何处<BR>Just one last dance 再来最后一舞<BR>before we say goodbye<BR>when we sway and turn round and round and round (When we sway turn around)<BR>it's like the first time(hold my tight oh my love)<BR>Just one more chance 再多一只舞<BR>hold me tight and keep me warm 抱紧我让我感受你的温暖<BR>cause the night is getting cold(the night is getting cold)<BR>and I don't know where I belong(don't know where I belong)<BR>Just one last dance 再来最后一舞<BR>Just one last dance 再来最后一舞<BR>Just one more chance 再多一只舞<BR>Just one last dance 再来最后一舞</P>
<P>&nbsp;</P>
<P>音乐是如此神奇，当你聆听，品味，并彻底接受它对心灵的轻触与抚摸，一切真实的情感都会随之彻底的，毫无保留的释放与宣泄-=-=-=-=-=-</P>",47,2010-03-30 13:34:30.630,1,D
77,Wayne,微软献给寂寞程序员们的礼物,Microsoft-Video-Gift-To-Developers,7,"鄙人几乎很少像男主角那样玩命coding而不管LP，但是，看过视频之后，发自内心的共鸣还是能让我激动！我不寂寞，但我是个十足的大傻瓜！
<br /><br />
<p>谢谢微软！</p>
<br /><br /><p><b>想做你的code</b><p/>
<embed src=""http://player.ku6.com/refer/qRARxNhPBYi_3ycC/v.swf"" quality=""high"" width=""480"" height=""400"" align=""middle"" allowScriptAccess=""always"" allowfullscreen=""true"" type=""application/x-shockwave-flash""></embed>
<br /><br /><p><b>让爱延长</b><p/>
<embed src=""http://player.ku6.com/refer/8Bf2fTOqBcgn9GXP/v.swf"" quality=""high"" width=""480"" height=""400"" align=""middle"" allowScriptAccess=""always"" allowfullscreen=""true"" type=""application/x-shockwave-flash""></embed>
<br />$More$<br />
<br /><br /><p><b>幸福也要敏捷</b><p/>
<embed src=""http://player.ku6.com/refer/CYueqQhv-SqoVSIl/v.swf"" quality=""high"" width=""480"" height=""400"" align=""middle"" allowScriptAccess=""always"" allowfullscreen=""true"" type=""application/x-shockwave-flash""></embed>
<br /><br />
<br /><br /><p><b>为爱Debug</b><p/>
<embed src=""http://player.ku6.com/refer/TjsyrRZqe5Q4vYst/v.swf"" quality=""high"" width=""480"" height=""400"" align=""middle"" allowScriptAccess=""always"" allowfullscreen=""true"" type=""application/x-shockwave-flash""></embed>
<br /><br />
<br /><br /><p><b>让爱编译通过</b><p/>
<embed src=""http://player.ku6.com/refer/VeLKCrZ5tj_9zAZ-/v.swf"" quality=""high"" width=""480"" height=""400"" align=""middle"" allowScriptAccess=""always"" allowfullscreen=""true"" type=""application/x-shockwave-flash""></embed>
<br /><br />",2834,2010-04-13 15:45:59.703,1,A
78,Wayne,妙语连珠,,7,"<p>Calvin Klein的女儿曾抱怨，她最扫兴的就是她跟男朋友亲热的时候，看到她爸的名字出现在内裤的边缘。</P>
<br />
<p>只有我们这种没妞可泡的宅男才研究how to make love，简称 html </p>
<br />
<p>拿沙特工资，住英国房子，用瑞典手机，戴瑞士手表，娶韩国女人，包日本二奶，做泰国按摩，开德国轿车，坐美国飞机，喝法国红酒，吃澳洲海鲜，抽古巴雪茄，穿意大利皮鞋，玩-西班牙女郎，看奥地利歌剧，买俄罗斯别墅，雇菲律宾女佣，配以色列保镖，洗土耳其桑-拿，当中国干部……老师批语：啰嗦！只需说当中国干部就行，前面皆可实现！ </p>
<br />
<p>一个真正自由的社会是：“没有任何英雄，任何一个人都可以堂堂正正的做一个废物” </p>
<br />
<p>新闻联播的牛逼之处在于就算你一直在换台，也能完整地看完一条新闻。</p>
<br />
<p>一个B，往北走是NB，往南走就是SB。。。</p>
<br />
<p>亚洲约20%人口无社保。中国13亿人，农村人口8-9亿，80%没社保，城镇4-5亿10%没社保；中国为亚洲无社保人口贡献了95%；扣除中国人口，亚洲不到3%的人没社保！ </p>
<br />
<p>30岁的男人正在学坏，抱着同一代唱着同样的爱；40岁的男人已经学坏，抱着下一代唱着迟来的爱；50岁的男人最坏，抱着第三代唱着糊涂的爱。</p>
<br />
<p>一女县长夜归，突被两男架上车，一男威胁说：老实$More$点，劫色的！女县长闻听笑骂道：你大爷的，这事呀，吓死我了，还以为是被双规了呢，原来是双飞呀！ </p>
<br />
<p>海地地震，中国救援队最快到海地。奥巴马大为火光质问国防部长，隔着太平洋他们比我们快！怎么回事？部长说：我们只参加过两次世界大战，这方面经验太少！而中国年年春运，一周时间可把三亿人从海南岛运黑龙江，政府、社会、个人非常重视，一次春运相当于组织一次世界大战！ </p>
<br />
<p>房地产之歌:铸我百姓千年苦，尽君一时盛世欢！</p> 
<br />
<p>人们总是喜欢这样：和爱的人吵架，和陌生人讲心里话。</p>
<br />
<p>中国媒体和美国媒体在一件事观点一致，他们都喜欢骂美国政府。中国人民和美国人民在一件事观点一致，他们都觉得骂美国政府是爱国。中国领导人跟美国领导人在一件事观点一致，他们的资产都在美国。 </p>
<br />
<p>用奶粉灭掉00后，考试灭掉90后，房价灭掉80后，失业灭掉70后，城管灭掉60后，下岗灭掉50后，拆迁灭掉40后，医改灭掉30后，2012 年灭掉所有后。</p> ",1787,2010-04-20 13:40:29.110,1,A
79,Wayne,不经历风雨，怎能见彩虹？,NULL,1,"<BR>周华健、成龙、黄耀明、李宗盛 演唱<BR>李宗盛 词曲
<BR><BR><SPAN style=""DISPLAY: none"">&nbsp;</SPAN><EMBED height=20 type=application/x-shockwave-flash pluginspage=http://www.macromedia.com/go/getflashplayer width=240 src=http://WayneYe.com/AudioPlayer/audioplayer.swf allownetworking=""internal"" allowscriptaccess=""never"" wmode=""opaque"" flashvars=""file=http://jwc.ysu.edu.cn/blog/UserUpLoad/User0/210/1117200942600409.mp3&amp;repeat=true&amp;autostart=false&amp;showdigits=ture&amp;showdownload=false&amp;width=240&amp;height=20"" quality=""high""><BR><BR>
<P>周:在我心中 曾经有一个梦</P><P>要用歌声让你忘了所有的痛</P><P>成:灿烂星空 谁是真的英雄</P><P>平凡的人们给我最多感动</P><P>黄:再没有恨 也没有了痛</P><P>但愿人间处处都有爱的影踪</P><P>李:用我们的歌 换你真心笑容</P><P>合:祝福你的人生从此与众不同</P><P>把握生命里的每一分钟</P><P>全力以赴我们心中的梦</P><P><FONT color=#ff0000><STRONG>不经历风雨 怎么见彩虹</STRONG></FONT></P><P><FONT color=#ff0000><STRONG>没有人能随随便便成功</STRONG></FONT></P><P>把握生命里每一次感动</P><P>和心爱的朋友热情相拥</P><P>让真心的话 和开心的泪</P><P>在你我的心里流动</P><P>周:在我心中 曾经有一个梦</P><P>要用歌声让你忘了所有的痛</P><P>成:灿烂星空 谁是真的英雄</P><P>平凡的人们给我最多感动</P><P>黄:再没有恨 也没有了痛</P><P>但愿人间处处都有爱的影踪</P><P>李:用我们的歌 换你真心笑容</P><P>合:祝福你的人生从此与众不同</P><P>把握生命里的每一分钟</P><P>全力以赴我们心中的梦</P><P>不经历风雨 怎么见彩虹</P><P>没有人能随随便便成功</P><P>把握生命里每一次感动</P><P>和心爱的朋友热情相拥</P><P>让真心的话 和开心的泪</P><P>在你我的心里流动</P><P>把握生命里的每一分钟</P><P>全力以赴我们心中的梦</P><P>不经历风雨 怎么见彩虹</P><P>没有人能随随便便成功</P><P>把握生命里每一次感动</P><P>和心爱的朋友热情相拥</P><P>让真心的话 和开心的泪</P><P>在你我的心里流动</P><P>La La La La.........</P><P>把握生命里每一次感动</P><P>和心爱的朋友热情相拥</P><P>让真心的话 和开心的泪</P><P>在你我的心里流动</P><P>让真心的话 和开心的泪</P><P>在你我的心里流动.</P></P><P><br />
<P>同一首歌，相比十二年前第一次听到，已近而立之年的我，如今的感觉是越来越深有体会。</P><BR>
<P>岁月无声，我应该做的，是<FONT color=#ff0000>认真，谨慎地对待并享受上天赐予的每一分钟，微笑面对所有的一切</FONT>^_^</P><BR>
<P><A href=""https://a1r0ka.bay.livefilestore.com/y1mRHUeVyn689jg1FHxl0G84HKnJkUg6rSpjSdKS5nEZUjut8pmv5azeSALOUwX2Jboo6TN0QQo8eoRYMShRUxiVlyQOb-8mYQ9F_ir4O_hAQCwSbQAPKA-28ZyHDw-WPSgBJPanDIRuhYDjD1_A4JXqg/laugh1[9].jpg"" rel=WLPP><IMG style=""BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; DISPLAY: inline; BORDER-TOP: 0px; BORDER-RIGHT: 0px"" title=laugh1 border=0 alt=laugh1 src=""https://a1r0ka.bay.livefilestore.com/y1m83TNW2bAgkE9Usco5pUNRKA843wcuD189FM08yPLjCzlD2EgMeAdmPaC0aBL5bZ6k2-MwoMKe0t6C47JXaeBPw7JSAUinTsOMTBRnSqnPn9sSfU6lSZ-Oy4Mkz_TAYAumOhfMvU2Dxl6Mc11_-47ng/laugh1_thumb[7].jpg"" width=644 height=484></A> </P><BR>
<P><A href=""https://a1r0ka.bay.livefilestore.com/y1mjwXt5JyA4xwvuqkzwPcB11fjMvfaVD8A49-XvECdc1NpVhb5_uZec7MoTc86xkDcqe6Cj7-UQvkVIQKMlscZSLU6Ur1xv56EVx296FVtvJUSWmBph5p0xo5LNjIpLpvRQg6EtVLfzulj3eG1OKMKtQ/laugh2[3].jpg"" rel=WLPP><IMG style=""BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; DISPLAY: inline; BORDER-TOP: 0px; BORDER-RIGHT: 0px"" title=laugh2 border=0 alt=laugh2 src=""https://a1r0ka.bay.livefilestore.com/y1mo52g6vFs1qVhIYbbSg0t6QlMr3dULPNDHgRpKqLoPbjJOzoBONa64sq-gujheO6H5u3R3c9RoNh01QCKSXwRjYniTXmjLeRg9XsJ4Xtkq_uePUIDEvEEXB-d9WCgrBQIbDs3zmIRoBTAkIhNeD5KNw/laugh2_thumb[1].jpg"" width=644 height=484></A> </P><BR>
<P><A href=""https://a1r0ka.bay.livefilestore.com/y1mAOV2Mr96SzLiEF_QsIuzsFbXIeEdKsYR8PD8vNr_97FHXay9Nld0WYbomYqQ0dIIS-rfTAF3iT-HWZHG5zD0VLlrTYVG932_UbT3H-JpYr2gjTL2QpeubbeeTtX_6CUzlwIr04eE2qw2HVTY3tl5aQ/laugh3[4].jpg"" rel=WLPP><IMG style=""BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; DISPLAY: inline; BORDER-TOP: 0px; BORDER-RIGHT: 0px"" title=laugh3 border=0 alt=laugh3 src=""https://a1r0ka.bay.livefilestore.com/y1mHTncOnx63UnyoYTei03BFbiK-RWP1I2bsbFYrqES48d-iAtt0vSxQX-bqpVjXPc2dwRdZwPruWSGizYK1fEAcTsGmad5iF2lTe8YkX9dHCL1a3nq4YiKck76AWX7duknPRyYJpJMdWsPFU9hwv0nnA/laugh3_thumb[2].jpg"" width=436 height=772></A> </P><BR>
<P><A href=""https://a1r0ka.bay.livefilestore.com/y1mI3691w_5HzYcmnn1JXl1EEkLZU2sCKNEEdaHbxdeavS9h6ooscWmnoeT4jqHb6mrKFWLaOWFWX0j9FfK0d4dCmZTPJa_P-NV3uk6T0UUeyRDwgmKSN-97KkLc90RqvDRnJui_6kZozXRRy7zvwJW7Q/laugh4[3].jpg"" rel=WLPP><IMG style=""BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; DISPLAY: inline; BORDER-TOP: 0px; BORDER-RIGHT: 0px"" title=laugh4 border=0 alt=laugh4 src=""https://a1r0ka.bay.livefilestore.com/y1muwgExgMdqAkD20Za-zTyFMaVNDP8avhY1n9eWHq8KChOzow3Mva4a26d-lJm5KetDc5jFG6SeUCdypA-BIIskumOyOehw6LIBGR0ztaYdRZLDljm768yTaxA4HnHz-bJDqX7xvn5aGKpyUxWim0pJg/laugh4_thumb[1].jpg"" width=644 height=364></A></P>",61,2010-05-04 12:15:07.980,1,D
80,Wayne,2010年5月23日 - 属于Nerazzurri的一天,Inter-Milan-Nerazzurri-Festival,1,"<P>意大利当地时间5月22日晚，国际米兰2:0击败拜仁慕尼黑获得09-10年度欧洲冠军杯，同时一举获得“三冠王”，成为意大利历史上第一支获取三冠王的球队！</P><br />
<P>这一夜，对于全世界所有的<A href=""http://en.wikipedia.org/wiki/Nerazzurri"" target=_blank>Nerazzurri</A>而言，是无比骄傲与幸福的！国际米兰经历一个漫长而艰难赛季，最终没有留下任何遗憾！电话门之后最困难的赛季，意大利杯战胜死敌罗马，欧冠半决赛淘汰上赛季六冠王巴萨！他们创造了历史！这样的球队配得上所有的赞美，国米完成一个完美的赛季！</P><br />
<P>在全场结束哨声吹响的那一刻，在萨队举起大耳朵杯的那一刻，在整个伯纳乌响彻《Pazza Inter》的那一刻，熬了一整夜有些疲惫的我，嘴角浮现出一丝微笑，眼里也有一点点幸福的泪水。我在电视机镜头里看见很多Nerazzurri留下幸福的泪水，无论男女老少，作为中国球迷我也许没有他们的感触那么深刻，但是，从96年开始，我便开始喜欢这支蓝黑色的球队，因为他对冠军的强烈渴望，因为他高贵而忧郁的气质，因为他有很多我喜欢的球星，因为他有一个慈祥善良的主席。。。更因为，他一次又一次的倒在成功的路上：球星黑洞，换帅如麻，阵容强大但发挥极不稳定，一到关键时刻就掉链子。。。联赛关键战役输给尤文（金童皮耶罗的成名之作），最后一轮输给拉齐奥（罗纳尔多的泪水），0:6惨败同城对手AC米兰，所有这些痛苦的经历，从来没有让我改变过对他的关注，欣赏和喜爱；相反，一次又一次的伤心与失望，让懵懂之年的我明白一个道理：一只球队的拥趸，不应只在球队顺风顺水时为他加油，为他鼓掌，为他感到骄傲，更应在球队困难时给予支持，给予理解，给予鼓励！</P><br />
<P>这一夜，是国米对所有Nerazzurri爱的回报，我了解到有一对意大利Nerazzurri夫妇，他们整个赛季没有错过任何一场国米的比赛，包括所有的客场比赛！他们也跟随国米与其他Nerazzurri一起赶赴西班牙马德里为国米加油，这一刻，我被他们感动，但$More$我更能想象他们内心的激动！我们的国米用一场伟大的胜利登上欧洲之巅，用一个三冠王回报所有的Nerazzurri！</P><br />
<P><STRONG><span style=""font-size:12pt"">祝福国际米兰，祝福所有的Nerazzurri，希望这是大国米时代的开启！</span></STRONG></P><br />
<P>萨队举起大耳朵杯：<BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mBTItruwqoapj8ZMWDDaxqdMvrQQSIdU7AyqA3v9i9K-1T5isy6dnm_K-JF3CE9UvRxeW3WrjCCrW0vKs0TragBW6A96OndRZe6mTHT1xmlPExlLNcWQxFPKqC44fwnBPSK3di7EyXB_tTjl7YSRmhg/ea_2010523145039[3].jpg"" rel=WLPP><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=ea_2010523145039 border=0 alt=ea_2010523145039 src=""https://a1r0ka.bay.livefilestore.com/y1mRGsAfcpsNMHyRCNsdAlTQL5FTBSXs-QmzVTUv1MYXHVBwm-hcgxq2Zy2DDds4IEHhl7JsnigM0cFTAVjOY-Z_vKEUr6qpn7Umrg51W0a5tvTPCYrJEDzhZ6j4SZ06oLMJngCTBv1IibRG4neLHgDKg/ea_2010523145039_thumb[1].jpg"" width=644 height=428></A> </P><br />
<P>国米全队合影：<BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mXP0uB1c9Arsc297X3vvsVdqsXKACfgPpQX-vW-f0E3g7_DE5iE-jF59JVV2ph8tQwAy8BoOp_RqYRxEfr0Ij0ZhrAR2nNA9o9vJ1fdTwuLLbeiYht3iWaieuC5AKk10s_4VDBbEIG2fmtx2LKHGvIg/2292_26697_100381[7].jpg"" rel=WLPP><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=2292_26697_100381 border=0 alt=2292_26697_100381 src=""https://a1r0ka.bay.livefilestore.com/y1meAPJ6tUlM8ypUTFhl6KacbzJEYeRf0ABJmmgUajXbdK-UXEQeKqHFReFmkPiSp1m87Ogl-uR8v28P-HpgU82vv46_LlOePYIX_6uiCt9p3uCVVnCojMlj2U4m39xPGPdAnfc66NIYg_pZUE0zVvt0A/2292_26697_100381_thumb[5].jpg"" width=644 height=367></A> </P><br />
<P>“The Special One” - 穆里尼奥 没有他，这一切可能仅仅只是一场美梦！<BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mF9dSanUR9yEg_V0zQ8oag8edxnwkCs4CAbZ_Uqke3npYMPchPA9665kfxNEq8haHoUSAzd_RH5Da2m62J2-ahe1XincY47VeVP93oT24f6ZVsHb-SI0jRVhRs6aBheZcvEeNc0Yh3lbh1XKulZFdVA/ea_2010523145825[3].jpg"" rel=WLPP><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=ea_2010523145825 border=0 alt=ea_2010523145825 src=""https://a1r0ka.bay.livefilestore.com/y1mTTDkOOWePCxtyP_gariG4aIbNsZn9JOAM_ba_p8LT21Uhx5i5mcsNTL1x_KHMTnmoRGMKPRoTE7SFC7saS1x5HCubz0kegL3tWIhMmCbLNh8trvH0_r0xUJUSke-jsh_JQf_tpYnbNbrAFLhK07vcQ/ea_2010523145825_thumb[1].jpg"" width=644 height=428></A><br />
<A href=""https://a1r0ka.bay.livefilestore.com/y1mYx38U1hHzcbdCCcy96Jv9b_7NhxyLok0Ei-02SzrZNFcdAiPZ1zBpl-9chkQmeG7bDbl1K93iA4igOFRUDq1qWoosEgYaFdAEfQYgrzp6KrveK7uSu3LmI8E9VRf-jNb_0M3sEJBaP1EMi8bIKB0tA/2292_26672_102302[3].jpg"" rel=WLPP><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=2292_26672_102302 border=0 alt=2292_26672_102302 src=""https://a1r0ka.bay.livefilestore.com/y1mCttlynJrg4XzmQxN4Omx7YiuENtP7rRMQg45t6HicZvyGuFAyOw-wWh1C9h8Ds4a_zIVdt2SFiybT-WRL3dm_XLGAPh3XfEhDUKa_6a87hBHDQ7fxWg3xDQiJynWVk0s3ZJ3fpBXSSfKOr5gSLjWYg/2292_26672_102302_thumb[1].jpg"" width=644 height=476></A> </P><br />
<P>15年，这位慈祥，善良的Nerazzurri为球队奉献了一切，像<A href=""http://baike.baidu.com/view/500011.htm"" target=_blank>马西莫 莫拉蒂</A>老人致敬！<BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mRk9ZsAfEX_rvsNkesJs0480pt9XyscUwDMo0qukCn0sF_yl9QEyH1z8UT6pire-k4BfnT7l3tV8gUy0gdAWaJJvNUZINhIgEtVweenMmOe2AK03FLvM3la4zDbFqIlr-ilWRjJREaOmzIRPt4Q57Ag/ea_2010523144615[3].jpg"" rel=WLPP><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=ea_2010523144615 border=0 alt=ea_2010523144615 src=""https://a1r0ka.bay.livefilestore.com/y1mobmJRiDAm1jijJLk_hSYs-TeVNxCNI_BlbS4AeUi61XHcVRi28JtLp7ABjSpnfh6JM8BmYQXufOWPMinWU-YzpJ2Q7wUBTL-HoFA0bK9CZpFZKrGgb-XGg3Qkb0H8f0_qKIIClxHFH2xedd9vGZWng/ea_2010523144615_thumb[1].jpg"" width=644 height=428></A> </P><br />
<P>永远不能忘记足球场上第12名球员，我也是其中一员:)<BR><A href=""https://a1r0ka.bay.livefilestore.com/y1mZuIIXL9TKNdwGK3Bo2A_ik-Tx_9bfWWMK9R2EDg4EBWhkWRlUTNKbaLABdHP6fpKFvKUN8ts3_CctTqKmsqPPXjZ1sh1Zc3bSugqFNonVKre8k7NkwJ-Jjw5_89KyzNMZHBbxjjj8yFJRrGsULW1sg/67D7RDO600BV0005[3].jpg"" rel=WLPP><IMG style=""BORDER-RIGHT-WIDTH: 0px; DISPLAY: inline; BORDER-TOP-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px"" title=67D7RDO600BV0005 border=0 alt=67D7RDO600BV0005 src=""https://a1r0ka.bay.livefilestore.com/y1msMT_KRD8fNCHI_OZBLfjN7_wfVKSWrv3U_rHTvIbpuKdyU3qdNO0yErq3E6fwW_6LIGtKar-X7TlTm9ywfvXENNXkwfAuaUZsRrDqQ6z4RMJTtNPwe-fjAyKEhi6zkWgGGazsbsURlmYGZ15XlUUdA/67D7RDO600BV0005_thumb[1].jpg"" width=644 height=430></A> </P><br />
<P><STRONG>国际米兰队歌 – Pazza Inter</STRONG></P>
<P><SPAN style=""DISPLAY: none"">&nbsp;</SPAN><EMBED height=20 type=application/x-shockwave-flash pluginspage=http://www.macromedia.com/go/getflashplayer width=240 src=http://WayneYe.com/AudioPlayer/audioplayer.swf allownetworking=""internal"" allowscriptaccess=""never"" quality=""high"" flashvars=""file=http://wayneye.com/AudioPlayer/Pazza%20Inter.mp3&amp;repeat=true&amp;autostart=false&amp;showdigits=ture&amp;showdownload=false&amp;width=240&amp;height=20"" wmode=""opaque""> </P>
<BR>Pazza Inter 国际米兰新队歌 <BR>Lo sai, per un gol你知道, 为了踢进一球 <BR>Io darei la vita… la mia vita我奉献出了人生 -- 我的人生! <BR>Che in fondo lo so我明了直到生命的尽头 <BR>Sara una partita infinita将有一场永不停止的竞赛 <BR>E un sogno che ho我有一个梦想 <BR>E un coro che sale a sognare有一合唱团整齐划一的朝梦想前进 <BR>Su e giu dalla Nord就在那北方! <BR>Novanta minuti per segnare为了进球的九十分钟! <BR>Nerazzurri蓝黑战士 <BR>Noi saremo qui我们在这里 <BR>Pazzi come te就像你一样疯狂 <BR>Non fateci soffrire别让我们受折磨 <BR>Ma va bene… vinceremo insieme!但没关系, 让我们一起胜利吧!! <BR>02:15.68]Amala!爱上它吧! <BR>Pazza Inter amala!疯狂的国米, 爱上它吧! <BR>E una gioia infinita是种维持人生 <BR>Che dura una vita永不停止的喜悦 <BR>Pazza Inter amala!疯狂的国米, 爱上它吧 <BR>Vivila!来体验吧! <BR>Questa storia vivila来体验这个传奇故事吧! <BR>Puo durare una vita它能维持整个人生 <BR>O una sola partita或仅是一场比赛 <BR>E continuero我的庆祝将会继续 <BR>Nel sole e nel vento la mia festa不论风吹日晒 <BR>Per sempre vivro我将永远铭记 <BR>Con questi colori nella testa这色彩生活下去 <BR>Io vi seguiro我将跟随你 <BR>Sempre li vivro我将永远与其生存 <BR>Questa mia speranza是我的希望 <BR>E l’as",2628,2010-05-24 17:43:28.337,1,A
81,Wayne,Real man don't buy girls,NULL,7,"<P>6月初，卡卡接受好莱坞明星阿什顿-库彻的邀请，参加了一项“反对卖淫”的活动。世界杯期间<A href=""http://goal.2010worldcup.163.com/player/13135.html"">卡卡</A>仍然不忘记为公益事业宣传，他在微博上贴出了举着宣传标语的照片“真正的男人不应该去嫖娼”。 
<P><IMG alt=卡卡微博声援反对卖淫:真男人就不该去嫖娼(图) src=""http://img4.cache.netease.com/sports/2010/6/30/20100630005821847a0.jpg""> 
<P>据南非毒品控制中心权威统计，开赛以来，每天比赛结束后都会有超过40000名妓女涌上街头接客。然而这个令人震惊的数字并没有获得所有人的认可，据一个非营利的教会人权组织称南非目前聚集了众多的妓女，控制她们的背后黑帮正趁着红火的世界杯大赚人肉生意，该组织估计的妓女人数为10万，远远高出<A href=""http://goal.2010worldcup.163.com/team/522.html"">南非</A>官方公布的数字。 
<P>黛米-<A href=""http://goal.2010worldcup.163.com/player/2313.html"">摩尔</A>的老公阿什顿-库彻，目前正在南非从事反饥饿（Walk the World to Fight Hunger）和改造妓女（Real Men Don't Buy Girls）的两项公益活动，他希望能借助卡卡的帮助，以扩大该次活动的影响力。 
<P>6月6日，库彻将组织一次慈善演出，他邀请卡卡也来参加。卡卡通过他的微博客做了答复，他愿意参加这次慈善演出，但条件是库彻要在6月15日的约翰内斯堡观看<A href=""http://goal.2010worldcup.163.com/team/614.html"">巴西</A>与<A href=""http://goal.2010worldcup.163.com/team/1801.html"">朝鲜</A>的比赛，卡卡说：“我希望他能在世界杯期间支持巴西队。”</P><BR>
<P>原文地址：<BR><A href=""http://2010worldcup.163.com/10/0630/01/6ACUS7TT00052E97.html"">http://2010worldcup.163.com/10/0630/01/6ACUS7TT00052E97.html</A></P>
<br />
<p>
BTW:  卡卡的Twitter地址：<a href=""http://twitter.com/RealKaka"" target=""_blank"">http://twitter.com/RealKaka</a>，Absolutely need crossing the fucking GFW...
</p>",52,2010-06-30 13:44:43.307,1,D
82,Wayne,三年前的今天,NULL,1,"<b><p>人生的拐点<p/>
<p>渴望一种痛苦的终止，没想到却导致一生刻骨铭心的痛苦。。<p/>
<p>完美而幸福的开始，并不代表会一直如此。。</p></b>

<p>
<b>
时至今日，我也不能完全想明白，搞清楚：是我个性中的哪些因素导致我承受如此多的悲剧？？我只知道我真的要很小心翼翼，很努力地去珍惜我心爱的女孩，我渴望变得成熟，渴望展现更多男人的魅力，祈祷！我能如愿，我会努力，我会谨慎！</b>
</p><br />
<p><EMBED height=20 type=application/x-shockwave-flash pluginspage=http://www.macromedia.com/go/getflashplayer width=240 src=http://WayneYe.com/AudioPlayer/audioplayer.swf allownetworking=""internal"" allowscriptaccess=""never"" quality=""high"" flashvars=""file=http://wayneye.com/AudioPlayer/Tianshi.mp3&amp;repeat=true&amp;autostart=false&amp;showdigits=ture&amp;showdownload=false&amp;width=240&amp;height=20"" wmode=""opaque""> </P>",49,2010-06-30 14:11:26.463,0,D
83,Wayne,惊为天人！,,5,"<FONT color=#da79ff><BR>Freedamn 中国特色自由<BR style=""text-indent:2em;"">Smilence 笑而不语<BR>Togayther 终成眷属<BR>Democrazy 痴心妄想<BR>shitizen 屁民<BR>Innernet 中国互联网<BR>Departyment（政府）有关部门<BR> Chinsumer&nbsp; 在国外疯狂购物的中国人<BR>Emotionormal 情绪稳定<BR>Sexretary 女秘书<BR>Halfyuan 五毛<BR>canclensor&nbsp; 审查<BR>Wall· e&nbsp; 防火墙<BR>围观&nbsp; Circusee<BR>vegeteal&nbsp; 偷菜<BR>yakshit&nbsp; 亚克西<BR>animale&nbsp; 男人天性<BR>corpspend&nbsp; 捞尸费<BR>suihide&nbsp; 躲猫猫<BR>niubility&nbsp; 牛逼<BR>antizen 蚁民<BR>gunvernment 枪杆子政权<BR>propoorty 房地产<BR>stuck market&nbsp; 股市<BR>livelihard 生活<BR>stupig 笨猪<BR>Z-turn&nbsp; 折腾<BR>Don'train&nbsp; 动车<BR>Foulsball&nbsp; 中国足球 <BR>Gambller&nbsp; 干部&nbsp; <BR>Goveruption&nbsp; 政府<BR>Harmany 河蟹<BR>Profartssor&nbsp; 叫兽</FONT>",1671,2010-07-07 18:12:43.990,1,A
84,Wayne,My wife is a little “talent”,Wife-Is-Little-Talent,1,"<P><A href=""https://a1r0ka.bay.livefilestore.com/y1mfyZk6Trnz9eLgUHbtbr9Tublm7fpuTfoEAaheUl3k0qcnNTXPQb4qqbr39UTp83NIU6WIQeS1jSoFe87OrgHziU4LyF4TegIlBQDM8bMLGX2x_uH8Ua7qFxNXtAsjEK-1KKdYAPmZjo01YXlWaKXJQ/P1070425[8].jpg?download&amp;psid=1"" rel=WLPP><IMG style=""BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; DISPLAY: inline; BORDER-TOP: 0px; BORDER-RIGHT: 0px"" title=P1070425 border=0 alt=P1070425 src=""https://a1r0ka.bay.livefilestore.com/y1mYWU-81hlDBjk7BqBbkW42y5GMpVbz_tfqmB2Bo2NEo4L4w-bWBiO8eEOVqKQbji2O-M2-PpcP6Rgpc_tHmcsIO9c9wjPTbSZcKS3R1cU2JKqxTIn-ySjOyzZTMRk8zLdy-m2bVz4jPpDu4JmDUQA8A/P1070425_thumb[5].jpg?download&amp;psid=1"" width=597 height=448></A></P>",2681,2010-07-19 22:23:52.233,1,A
86,Wayne,红军版《Beat it》和《Hey oh》 神人神作共赏析,,7,"<P>看看你的嘴巴是否会张到极限。。。</P> <BR><P>Beat it:</P>
<P><embed src=""http://www.tudou.com/v/Xf4Ta-b1luc/v.swf"" type=""application/x-shockwave-flash"" allowscriptaccess=""always"" allowfullscreen=""true"" wmode=""opaque"" width=""480"" height=""400""></embed></P><BR>
<P>
Hey oh</P>
<P>
<embed src=""http://www.tudou.com/v/Rif2QUnF9t0/v.swf"" type=""application/x-shockwave-flash"" allowscriptaccess=""always"" allowfullscreen=""true"" wmode=""opaque"" width=""480"" height=""400""></embed>
</P><BR>
<P>该作者在土豆上还精心制作了以下红军作品:<BR>
<P>《We will rock you》</P>
<P>《It's my life》$More$</P>
<P>《Lady gaga - Bad Romance》</P>
<P>《霍元甲》</P>
<P>《黄金甲》</P>
<P>《爱的初体验》</P>
<P>《光辉岁月》</P>
<BR>
<P>等等等等。。。</P>",1703,2010-08-03 14:11:14.107,1,A
87,Wayne,这个其实真不算什么噩耗,WordPress-Blocked-By-GFW,5,"<img src=""http://wayneye.com/Photos/GFWWP.png"" alt=""GFWWP.png""/>
<br /><br />

对于已经石化的我，你们这点小小的努力对我来说算不得什么，反正，anyway，你们爱怎么搞怎么搞|^<br /><br />

<br /><br />我已经十分清楚自己想要什么。<br /><br />

I insert a flag here today, and I know some day I will pull it out and leave:)",2370,2010-11-09 13:09:19.280,1,A
88,Wayne,Microsoft Desktop Player,Microsoft-Desktop-Player,14,"<br /><a href=""http://blogs.technet.com/b/technet_flash_feed/archive/2010/03/30/announcing-the-microsoft-desktop-player.aspx"" target=""_blank"">MSDN TechNet Flash</a> has announced <strong>Microsoft Desktop Player</strong>, now it is in Beta, it can be accessed through the official website which is Silverlight based:<br /><br />
<strong><a href=""http://www.microsoft.com/click/desktopplayer/"" target=""_blank"">http://www.microsoft.com/click/desktopplayer/</a></strong>

<br /><br />

I also installed the desktop version, the desktop version is not a <a href=""http://www.silverlight.net/learn/quickstarts/out-of-browser-applications/"" target=""_blank"">Silverlight OOB</a>, instead, it is a traditional Winform, see screenshot below:

<br /><a href=""http://wayneye.files.wordpress.com/2010/11/snapshot.png"" target=""_blank""><img title=""Snapshot"" src=""http://wayneye.files.wordpress.com/2010/11/snapshot.png"" width=""640"" height=""426"" alt="""" /></a><br /><br />
$More$

<br /><a href=""http://wayneye.files.wordpress.com/2010/11/disassembly.png"" target=""_blank""><img title=""Disassembly"" src=""http://wayneye.files.wordpress.com/2010/11/disassembly.png"" alt="""" /></a>


<br /><br />

<b>Microsoft ALWAYS offer developers strong and great support/guidance, this point is really respected!",3133,2010-11-18 20:23:41.450,1,A
90,Wayne,此言极是,,5,"<a href=""http://xiaotianpop.files.wordpress.com/2010/11/jishi.png"" target=""_blank""><img  title=""Jishi"" src=""http://xiaotianpop.files.wordpress.com/2010/11/jishi.png"" alt="""" /></a>

<br /><br />G的P，HeXie，Fazhi，RM Gong pu,都是笑话而已。。
<br /><br />为啥不用文本？我们都懂的！",2179,2010-11-19 18:04:04.450,1,A
91,Wayne,My new Dev box - HP Z800 Workstation,My-New-Devbox-HP-Z800,1,"<P>两个星期以前我实在无法忍受Visual Studio 2010的缓慢，即使Disable了IntelliTrace以及别的一些的优化也没有显著改善，而我很清楚这台<a href=""http://h18000.www1.hp.com/products/quickspecs/12594_na/12594_na.HTML"" target=""_blank"">HP XW9400</a>虽然也很强大很CPU主频很低：2.2G，CPU Rank 300名外。。
我向Manager申请一台新的开发机，老大欣然同意了，于是我跟部门的IT沟通说只希望CPU，内存，硬盘快些就行了，不要光驱和显卡。</P>
<br />
<p>两周后<a href=""http://h10010.www1.hp.com/wwpc/nz/en/sm/WF05a/12454-12454-296719-4270224-4270224-3718645.html"" target=""_blank"">Z800</a>到货了！！CPU按我要求的是<a href=""http://ark.intel.com/Product.aspx?id=47916"" target=""_blank""><b>Intel Xeon 5680</b></a>，6核主频3.33G，12M三级缓存，开启超线程后任务管理器里显示12个CPU！！8G内存加360GB 7200R/S硬盘（这个有点短板），没有光驱:)。
</p><br />
<p>这颗CPU在<a href=""http://www.cpubenchmark.net"" target=""_blank"">cpubenchmark.net</a>上现今排名高居第6名：<p/><br />
<p><img class=""BlogImage"" src=""http://ns5gpg.bay.livefilestore.com/y1p-1iRZxfOTlZsDeQnzMgA95a2vj_PYNmLfOh9jY_iQjSz6tWiGCOxuJTyj6qe1yHRvLKebqvYEawNOzMvqlf1ZNLtsn3IaiAT/Xeon5680.png?psid=1"" alt="""" /><p><br />
$More$
<p><img class=""BlogImage"" src=""http://ns5gpg.bay.livefilestore.com/y1pM4CZLwasmh1TCLkH1A31w4TVnApasyoQSSnEfKc5psWTvXFAj9lcnLVInedQooWW1Mra43dG3exqrhUYZxgGAuSgz2o6pwX0/12Core.png?psid=1"" alt="""" /><p/><br />
<br />
<P>Well,这下心满意足的，一边玩着机器一边啧啧称赞加坏笑ing:)</P><br />
<P>周二带上新烧的Nike D7000去公司拍了几张，Showing below:</P><br />
<p><img class=""BlogImage"" src=""http://ns5gpg.bay.livefilestore.com/y1pTUjD572TVGl76vAtbivdfOvenQkyS8zkA3vfyh7woM6_wpToLjQMoP5uMQBvqKdrbH1QvcN6Zi6st9EQbWm5K9hTm7Ts7jQp/DSC_6415%20copy.jpg?psid=1"" alt="""" /><p/><br />
<p><img class=""BlogImage"" src=""http://ns5gpg.bay.livefilestore.com/y1pAfcyolZ3ryCsqwK5mD8d6s2D21Bu_zjknKt_SQW6zQkKezo-unBRLuwsHBOERehWTHREytgCdF_lng0aooV0LJ08YvHAZs6b/DSC_6416%20copy.jpg?psid=1"" alt="""" /><p/><br />
<p><img class=""BlogImage"" src=""http://ns5gpg.bay.livefilestore.com/y1pVHkX6IFG8SBbO_64mGIHKARmBZzs_FWt8xSe15GORuIrZxYKYH4Squ7gqb0gcr4vfi7ZZwiRhJhwWPu2jb6qUvXGw6iqjHKg/DSC_6423%20copy.jpg?psid=1"" alt="""" /><p/><br />
<p><img class=""BlogImage"" src=""http://ns5gpg.bay.livefilestore.com/y1peXsMLzmm9OhMC3yO1HTtvxz6dT0dxGZggn2dwEPZYk-CnULCjfS2-UepY_mYTL-fZkQgJTExOiw2cPhALdW8Ci6UEoZX5VEQ/DSC_6424%20copy.jpg?psid=1"" alt="""" /><p/><br />
<p><img class=""BlogImage"" src=""http://ns5gpg.bay.livefilestore.com/y1pFyTLtEqOinDlYU7MWk_LBbu7R6Qrm5I2qQekDqmu8B0AUj1W65z3Og_mToCP4xjKWE82YfYUt_fi6GJ_EJ3T3_k6c9moaj0P/DSC_6431%20copy.jpg?psid=1"" alt="""" /><p/><br />

<p>显卡仅支持HDMI输出，这下俺的HP 24寸显示器又成了短板了^_^</P><br />
<p>搞到这台Baby之后，我该好好努力工作了吧，呵呵，多多研究12核Parallel Computing吧:)</P>",4739,2010-12-08 22:09:43.390,1,A
92,Wayne,败了Nikon D7000,Bought-Nikon-D7000,4,"<p>周六去星光入手了心仪已久的Nike D7000，配了个35mm/1.8 G，特别鸣谢Sean童鞋，不仅全程陪同，帮忙砍价，验机，最后还帮我全额付款，感动得我那个内牛满面啊^_^</p><br />
<p>玩了两天，出了点片，this is just a start, <b>出片才是硬道理</b>！！我会努力证明这款强大的机器在我这只菜鸟手上会发挥很大威力:)眼下还是很菜的。。。</P>
<br />
<p>菜片showing below：</p><br />
<p><img class=""BlogImage"" src=""http://ns5gpg.bay.livefilestore.com/y1pVcaD_I6NhSjpiRzNrS5GXkGrCRYMGLqigtwnqLjYnrBDIgok84TUGuiOZqq9tL_ixjVSygci2r0GQL5ldJ2hW6yQ-ttvDY5x/DSC_6296%20copy.jpg?psid=1"" alt="""" /><p/>$More$<br />
<p><img class=""BlogImage"" src=""http://ns5gpg.bay.livefilestore.com/y1pHSiJ91pXlz5dMIL2NgpDZIYKnM2bkNlUuebiVXNCzpcaN_9aGa-dQ_ESBrhrH7hAFCTXQBQwsQ4W_5dBwIMBt7F_yp3zdbmo/DSC_6317%20copy.jpg?psid=1"" alt="""" /><p/><br />
<p><img class=""BlogImage"" src=""http://ns5gpg.bay.livefilestore.com/y1p7KKli1Gy9DAvvfeoFGUYp7liNgBUVtFzc8xzbhu4WygE-7YtREVaN2eg_JxNgqBXZCWDjT_ybjP4dqnuOnn0Dm8XOMjmNd8f/DSC_6325%20copy.jpg?psid=1"" alt="""" /><p/><br />
<p><img class=""BlogImage"" src=""http://ns5gpg.bay.livefilestore.com/y1p3qk25nJFeiDx7tuSEhr2pSV0RcxawWQLCpFeOhLmaLcxJLrlVHpZ-v9ndhwPCidAdn9s66-R6_rgq9Bs_d23tbJ_kwNoWAFM/DSC_6334%20copy.jpg?psid=1"" alt="""" /><p/><br />
<p><img class=""BlogImage"" src=""http://ns5gpg.bay.livefilestore.com/y1pVcaD_I6NhSg9Jpv2yfi9WPLfsi2H1-mC96LPWfRB53bIgRIq9MYaZ9qK-IFyVl3oLcHRYQN3ujxMp_snqDI5hHinfilkXuIe/DSC_6346%20copy.jpg?psid=1"" alt="""" /><p/><br />
<p><img class=""BlogImage"" src=""http://ns5gpg.bay.livefilestore.com/y1p3qk25nJFeiBwV6dDKPG6JOXbtIfvMTBcioYTJX6MqeDqpEmUz4zgHaVuihSypdxNjmgnfVi_fe2CMzJAr3z-ovkUrMC_y5y5/DSC_6349%20copy.jpg?psid=1"" alt="""" /><p/><br />

<p>未完待续续续。。。</p>

",3002,2010-12-08 22:50:29.093,1,A
93,Wayne,IP Address to Geolocation,IPAddress-To-Geolocation,25,"<h2>Background</h2><br />Few months ago I found an interesting website: <a href=""http://ipinfodb.com/"" target=""_blank"">http://ipinfodb.com/</a>, it provided <a title=""InfoDB API"" href=""http://api.ipinfodb.com/"" target=""_blank"">API</a> which could ""translate"" any <strong>IP Address</strong> into a <strong>geography location </strong>including City/Region/Country as well as latitude/longitude and time zone information, to invoke its API, a registered API key is required (which is free).  Since beforehand I stored visitor's IP Addresses into my own database, I decided to utilize InfoDB API to store visitor's GEO locations.<br /> <br />Just few days ago, I casually emitted an idea: <strong>summarize those GEO location records and display them on Google Map</strong>, hum, it is feasible:)<br /> <br />So, the process is: <strong>Track visitor's IP addresses -&gt; ""Translate"" them to Geography location -&gt; Show them on Google Map</strong>!<br /> <br />(PS, I've been used <a title=""Google Analytics"" href=""https://www.google.com/analytics"" target=""_blank"">Google Analytics</a> for my Geek Place - <a title=""Wayne's Geek Place"" href=""http://WayneYe.com"" target=""_blank"">http://WayneYe.com</a> for more than two years, it is no double extremely powerful, and it already contains a feature ""Map Overlay"", however, due to privacy policy, Google Analytics does NOT display visitor's IP address, see <a href=""http://www.google.com/support/analytics/bin/answer.py?hl=en&amp;answer=86214"">http://www.google.com/support/analytics/bin/answer.py?hl=en&amp;answer=86214</a>).<br /><h2>Implementation</h2><br />The first task I need to do is track visitor's IP Address, most of the time, user visits a website in browser submits an HTTP GET request (an HTTP data package) based on <strong><a title=""Transmission Control Protocol"" href=""http://en.wikipedia.org/wiki/Transmission_Control_Protocol"" target=""_blank"">Transmission Control Protocol</a></strong> (most of the time) , browser passed the ball to DNS server and DNS server delivered the request to the designation - the web host server, during the process, the original Http request was possibly transferred through a number of routers/proxies and many other stuff, the request's header information might have been updated: <strong>Via </strong>(Standard HTTP request header) or <strong>X-Forwarded-For</strong> (non-standard header but widely used), could be the original ISP's information/IP Address OR possibly one of the proxy's IP Address.<br /> <br />So, usually the server received the request and saw Via/X-Forwarded-For header information, it got to know visitor's IP address (NOT all the time, some times ISP's IP address), in ASP.NET, it is simply to call <strong><code>Request.UserHostAddress</code></strong>, however, we can never simply trust this because of two major reasons:<br /><ol><br />            <li>Malicious application can forge HTTP request with modified X-Forwareded-To header (for example: X-Forwarded-To: <code>dangerous code</code>), if you are unlucky to trust it and have it inserted into Database, then SQL Injection hole will be utilized by Malicious application.</li><br />            <li>Not all the visitors are human-been, part of them could be search engine spiders, I must distinguish human visitors and spiders, otherwise for example, I will be happy to see a lot of ""visitors"" came from ""Mountain View, CA"" ^_^.</li><br /></ol><br />For #1: I use regular expression to validate the string I got from <strong><code>Request.UserHostAddress</code></strong>:<br /><pre style=""color: #000020; background: #f6f8ff;""><span style=""color: #200080; font-weight: bold;"">public</span> <span style=""color: #200080; font-weight: bold;"">static</span> Boolean IsValidIP<span style=""color: #308080;"">(</span><span style=""color: #200080; font-weight: bold;"">string</span> ip<span style=""color: #308080;"">)</span><br /><span style=""color: #406080;"">{</span><br />    <span style=""color: #200080; font-weight: bold;"">if</span> <span style=""color: #308080;"">(</span>System<span style=""color: #308080;"">.</span>Text<span style=""color: #308080;"">.</span>RegularExpressions<span style=""color: #308080;"">.</span>Regex<span style=""color: #308080;"">.</span>IsMatch<span style=""color: #308080;"">(</span>ip<span style=""color: #308080;"">,</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">)</span><span style=""color: #308080;"">)</span><br />    <span style=""color: #406080;"">{</span><br />        <span style=""color: #200080; font-weight: bold;"">string</span><span style=""color: #308080;"">[</span><span style=""color: #308080;"">]</span> ips <span style=""color: #308080;"">=</span> ip<span style=""color: #308080;"">.</span>Split<span style=""color: #308080;"">(</span><span style=""color: #1060b6;"">'.'</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />        <span style=""color: #200080; font-weight: bold;"">if</span> <span style=""color: #308080;"">(</span>ips<span style=""color: #308080;"">.</span>Length <span style=""color: #308080;"">=</span><span style=""color: #308080;"">=</span> <span style=""color: #008c00;"">4</span> || ips<span style=""color: #308080;"">.</span>Length <span style=""color: #308080;"">=</span><span style=""color: #308080;"">=</span> <span style=""color: #008c00;"">6</span><span style=""color: #308080;"">)</span><br />        <span style=""color: #406080;"">{</span><br />            <span style=""color: #200080; font-weight: bold;"">if</span> <span style=""color: #308080;"">(</span>System<span style=""color: #308080;"">.</span>Int32<span style=""color: #308080;"">.</span>Parse<span style=""color: #308080;"">(</span>ips<span style=""color: #308080;"">[</span><span style=""color: #008c00;"">0</span><span style=""color: #308080;"">]</span><span style=""color: #308080;"">)</span> <span style=""color: #308080;"">&lt;</span> <span style=""color: #008c00;"">256</span> &amp;&amp; System<span style=""color: #308080;"">.</span>Int32<span style=""color: #308080;"">.</span>Parse<span style=""color: #308080;"">(</span>ips<span style=""color: #308080;"">[</span><span style=""color: #008c00;"">1</span><span style=""color: #308080;"">]</span><span style=""color: #308080;"">)</span> <span style=""color: #308080;"">&lt;</span> <span style=""color: #008c00;"">256</span><br />                &amp; System<span style=""color: #308080;"">.</span>Int32<span style=""color: #308080;"">.</span>Parse<span style=""color: #308080;"">(</span>ips<span style=""color: #308080;"">[</span><span style=""color: #008c00;"">2</span><span style=""color: #308080;"">]</span><span style=""color: #308080;"">)</span> <span style=""color: #308080;"">&lt;</span> <span style=""color: #008c00;"">256</span> &amp; System<span style=""color: #308080;"">.</span>Int32<span style=""color: #308080;"">.</span>Parse<span style=""color: #308080;"">(</span>ips<span style=""color: #308080;"">[</span><span style=""color: #008c00;"">3</span><span style=""color: #308080;"">]</span><span style=""color: #308080;"">)</span> <span style=""color: #308080;"">&lt;</span> <span style=""color: #008c00;"">256</span><span style=""color: #308080;"">)</span><br />                <span style=""color: #200080; font-weight: bold;"">return</span> <span style=""color: #200080; font-weight: bold;"">true</span><span style=""color: #406080;"">;</span><br />            <span style=""color: #200080; font-weight: bold;"">else</span><br />                <span style=""color: #200080; font-weight: bold;"">return</span> <span style=""color: #200080; font-weight: bold;"">false</span><span style=""color: #406080;"">;</span><br />        <span style=""color: #406080;"">}</span><br />        <span style=""color: #200080; font-weight: bold;"">else</span><br />            <span style=""color: #200080; font-weight: bold;"">return</span> <span style=""color: #200080; font-weight: bold;"">false</span><span style=""color: #406080;"">;</span><br />    <span style=""color: #406080;"">}</span><br />    <span style=""color: #200080; font-weight: bold;"">else</span><br />        <span style=""color: #200080; font-weight: bold;"">return</span> <span style=""color: #200080; font-weight: bold;"">false</span><span style=""color: #406080;"">;</span><br /><span style=""color: #406080;"">}</span></pre><br />If the result is ""0.0.0.0"", I will$More$ ignore it.<br /><strong>For #2, </strong>so far I haven't found a ""<strong>perfect way</strong>"" to solve this issue (and I guess there might be no perfect solution to identify all the search engines in the world, please correct me if I am wrong); However, I've defined two rules to try my best to identify them for general and normal situations:<br /><h3>Rule #1:</h3><br />Request which contains ""<strong>Cookie</strong>"" Header with ""<strong><a href=""http://support.microsoft.com/kb/899918"" target=""_blank"">ASP.NET_SessionId</a></strong>"" <strong>AND</strong> its value is equal with server side, then it should be a normal user who has just visited my website within the one session.<br /> <br /><strong>Notes: there might be two exceptions for rule #1</strong>,<br /><ol><br />            <li>If user's browser has <strong>disabled Cookie </strong>then this rule <strong>will NOT be effective </strong>since the client request will <strong>never contain a Cookie header</strong> since the browser disabled it:).</li><br />            <li>Assume there is a crawler who crawls my website and accept storing cookie, then #1 will not be effective. However, I don't think a crawler will firstly request a SessionID and then request again with the SessionID)<strong>.</strong></li><br /></ol><br /><h3>Rule #2:</h3><br /><strong>Define a crawler list and analyses whether ""User-Agent"" header contains one of them, this should be configurable</strong>. Refer more Crawler example at: <a href=""http://en.wikipedia.org/wiki/Web_crawler#Examples_of_Web_crawlers"" target=""_blank"">http://en.wikipedia.org/wiki/Web_crawler#Examples_of_Web_crawlers</a><br /> <br /><a href=""http://en.wikipedia.org/wiki/Wikiquote:Linus_Torvalds"" target=""_blank"">Talk is cheap, show me the code</a>, I wrote a method to identify crawlers by applying two rules above.<br /><pre style=""color: #000020; background: #f6f8ff;""><span style=""color: #200080; font-weight: bold;"">public</span> <span style=""color: #200080; font-weight: bold;"">static</span> Boolean IsCrawlerRequest<span style=""color: #308080;"">(</span><span style=""color: #308080;"">)</span><br /><span style=""color: #406080;"">{</span><br />    <span style=""color: #595979;"">// Rule 1: Request which contains ""Cookie"" Header with ""ASP.NET_SessionId"" and its value is equal with server side, </span><br />    <span style=""color: #595979;"">// then it should be a normal user (except maliciously forging, I don't think a crawler will firstly request a sessionID and then request again with the SessionID).</span><br />    <span style=""color: #595979;"">//if (HttpContext.Current.Request.Cookies[""ASP.NET_SessionId""] != null</span><br />    <span style=""color: #595979;"">//    &amp;&amp; HttpContext.Current.Request.Cookies[""ASP.NET_SessionId""].Value == HttpContext.Current.Session.SessionID)</span><br />    <span style=""color: #200080; font-weight: bold;"">if</span> <span style=""color: #308080;"">(</span>HttpContext<span style=""color: #308080;"">.</span>Current<span style=""color: #308080;"">.</span>Request<span style=""color: #308080;"">.</span>Headers<span style=""color: #308080;"">[</span><span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">Cookie</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">]</span> <span style=""color: #308080;"">!</span><span style=""color: #308080;"">=</span> <span style=""color: #200080; font-weight: bold;"">null</span><br />        &amp;&amp; HttpContext<span style=""color: #308080;"">.</span>Current<span style=""color: #308080;"">.</span>Request<span style=""color: #308080;"">.</span>Headers<span style=""color: #308080;"">[</span><span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">Cookie</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">]</span><span style=""color: #308080;"">.</span>Contains<span style=""color: #308080;"">(</span><span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">ASP.NET_SessionId</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">)</span><span style=""color: #308080;"">)</span><br />        <span style=""color: #200080; font-weight: bold;"">return</span> <span style=""color: #200080; font-weight: bold;"">false</span><span style=""color: #406080;"">;</span>  <span style=""color: #595979;"">// Should be a normal user browsing my website using a browser.</span><br /> <br />    <span style=""color: #595979;"">// Rule 2: define a crawler list and analyses whether ""User-Agent"" header contains one of them, this should be configurable</span><br />    <span style=""color: #595979;"">// Refer more Crawler example at: http://en.wikipedia.org/wiki/Web_crawler#Examples_of_Web_crawlers</span><br />    var crawlerList <span style=""color: #308080;"">=</span> <span style=""color: #200080; font-weight: bold;"">new</span> String<span style=""color: #308080;"">[</span><span style=""color: #308080;"">]</span> <span style=""color: #406080;"">{</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">google</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">,</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">bing</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">,</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">msn</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">,</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">yahoo</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">,</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">baidu</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">,</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">sosospider</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">,</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">sogou</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">,</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">youdao</span><span style=""color: #800000;"">""</span> <span style=""color: #406080;"">}</span><span style=""color: #406080;"">;</span><br /> <br />    <span style=""color: #200080; font-weight: bold;"">if</span> <span style=""color: #308080;"">(</span><span style=""color: #308080;"">!</span>String<span style=""color: #308080;"">.</span>IsNullOrEmpty<span style=""color: #308080;"">(</span>HttpContext<span style=""color: #308080;"">.</span>Current<span style=""color: #308080;"">.</span>Request<span style=""color: #308080;"">.</span>UserAgent<span style=""color: #308080;"">)</span><span style=""color: #308080;"">)</span><br />        <span style=""color: #200080; font-weight: bold;"">foreach</span> <span style=""color: #308080;"">(</span>String bot <span style=""color: #200080; font-weight: bold;"">in</span> crawlerList<span style=""color: #308080;"">)</span><br />            <span style=""color: #200080; font-weight: bold;"">if</span> <span style=""color: #308080;"">(</span>HttpContext<span style=""color: #308080;"">.</span>Current<span style=""color: #308080;"">.</span>Request<span style=""color: #308080;"">.</span>UserAgent<span style=""color: #308080;"">.</span>ToLower<span style=""color: #308080;"">(</span>CultureInfo<span style=""color: #308080;"">.</span>InvariantCulture<span style=""color: #308080;"">)</span><span style=""color: #308080;"">.</span>Contains<span style=""color: #308080;"">(</span>bot<span style=""color: #308080;"">)</span><span style=""color: #308080;"">)</span><br />                <span style=""color: #200080; font-weight: bold;"">return</span> <span style=""color: #200080; font-weight: bold;"">true</span><span style=""color: #406080;"">;</span> <span style=""color: #595979;"">// It is a crawler</span><br /> <br />    <span style=""color: #200080; font-weight: bold;"">return</span> <span style=""color: #200080; font-weight: bold;"">false</span><span style=""color: #406080;"">;</span><br /><span style=""color: #406080;"">}</span></pre><br />Please be aware that I commented out <code>HttpContext.Current.Request.Cookies[""ASP.NET_SessionId""] != null</code>, since I found that Request.Cookie will <span clsss=""HighlightWords""><strong>ALWAYS contain ""ASP.NET_SessionId"" EVENT IF the browser disabled Cookie storing</strong></span>, I will do further investigation and double check later!<br /> <br />Ok, now we get normal users' IP Addresses and filtered search engine crawlers, the next step is invoking InfoDB API to ""translate"" IP Address to Geolocation, you need register an API KEY <a href=""http://ipinfodb.com/register.php"" target=""_blank"">here</a>, and then submit an HTTP GET request to:<br /><blockquote>http://api.ipinfodb.com/v2/ip_query.php?key=[<strong>API KEY</strong>]&amp;ip=[<strong>IP Address</strong>]&amp;timezone=false</blockquote><br />It returns XML below, I take IP=""117.136.8.14"" for example:<br /><pre style=""color: #000020; background: #f6f8ff;""><span style=""color: #004a43;"">&lt;?</span><span style=""color: #004a43;"">xml</span> <span style=""color: #004a43;"">version</span><span style=""color: #308080;"">=</span><span style=""color: #008c00;"">""1.0""</span> <span style=""color: #004a43;"">encoding</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""UTF-8""</span><span style=""color: #004a43;"">?&gt;</span><br /><span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">Response</span><span style=""color: #0057a6;"">&gt;</span><br />  <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">Status</span><span style=""color: #0057a6;"">&gt;</span>OK<span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">Status</span><span style=""color: #0057a6;"">&gt;</span><br />  <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">CountryCode</span><span style=""color: #0057a6;"">&gt;</span>CN<span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">CountryCode</span><span style=""color: #0057a6;"">&gt;</span><br />  <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">CountryName</span><span style=""color: #0057a6;"">&gt;</span>China<span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">CountryName</span><span style=""color: #0057a6;"">&gt;</span><br />  <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">RegionCode</span><span style=""color: #0057a6;"">&gt;</span>23<span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">RegionCode</span><span style=""color: #0057a6;"">&gt;</span><br />  <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">RegionName</span><span style=""color: #0057a6;"">&gt;</span>Shanghai<span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">RegionName</span><span style=""color: #0057a6;"">&gt;</span><br />  <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">City</span><span style=""color: #0057a6;"">&gt;</span>Shanghai<span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">City</span><span style=""color: #0057a6;"">&gt;</span><br />  <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">ZipPostalCode</span><span style=""color: #0057a6;"">&gt;</span><span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">ZipPostalCode</span><span style=""color: #0057a6;"">&gt;</span><br />  <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">Latitude</span><span style=""color: #0057a6;"">&gt;</span>31.005<span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">Latitude</span><span style=""color: #0057a6;"">&gt;</span><br />  <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">Longitude</span><span style=""color: #0057a6;"">&gt;</span>121.409<span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">Longitude</span><span style=""color: #0057a6;"">&gt;</span><br /> <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">Timezone</span><span style=""color: #0057a6;"">&gt;</span>0<span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">Timezone</span><span style=""color: #0057a6;"">&gt;</span><br />  <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">Gmtoffset</span><span style=""color: #0057a6;"">&gt;</span>0<span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">Gmtoffset</span><span style=""color: #0057a6;"">&gt;</span><br />  <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">Dstoffset</span><span style=""color: #0057a6;"">&gt;</span>0<span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">Dstoffset</span><span style=""color: #0057a6;"">&gt;</span><br />  <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">TimezoneName</span><span style=""color: #0057a6;"">&gt;</span><span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">TimezoneName</span><span style=""color: #0057a6;"">&gt;</span><br />  <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">Isdst</span><span style=""color: #0057a6;"">&gt;</span><span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">Isdst</span><span style=""color: #0057a6;"">&gt;</span><br />  <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">Ip</span><span style=""color: #0057a6;"">&gt;</span>117.136.8.14<span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">Ip</span><span style=""color: #0057a6;"">&gt;</span><br /><span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">Response</span><span style=""color: #0057a6;"">&gt;</span></pre><br />Wow, looks precise:), I am going to show visitor's geolocation on Google Map (I know this compromises visitor's privacy but my personal blog <a title=""Wayne's Geek Place"" href=""http://WayneYe.com"" target=""_blank"">http://WayneYe.com</a> is not a company and I will NEVER earn a cent by doing this:)).<br /> <br />Anyway, I use the latest <a href=""http://code.google.com/apis/maps/documentation/javascript/"" target=""_blank"">Google Map JavaScript API V3</a>, and there are two major functionalities:<br /><br />1. Display visitor's Geolocation as long as user's browser support ""<strong><a title=""navigator.geolocation"" href=""http://dev.w3.org/geo/api/spec-source.html"" target=""_blank"">navigator.geolocation</a></strong>"" property (Google Chrome, Mozilla Filefox support it, IE not support and I will set default location to New York City), a sample below:<br /> <br /><img title=""Visitor Info"" src=""http://ns5gpg.bay.livefilestore.com/y1plJ9KsiXnqp2mD0KngwYS-YeElOl-mbIBO29TiLWhI72MdlDOSJAzwDi2ADRfj94vJlSNsiVQ44Ang14vW6X6Nl98tRZ68_LY/VisitorInfo%20-%20Shanghai.png?psid=1"" alt=""VisitorInfo"" width=""726"" height=""467"" /><br /><br />2. Display a specified blog's visitors' geolocations on Google Map, screenshot below shows the visitors' geolocations who visited my blog: <strong><a title=""My new Dev box - HP Z800 Workstation"" href=""http://wayneye.com/ViewBlog.aspx?BlogID=91"" target=""_blank"">My new Dev box - HP Z800 Workstation</a>, </strong>by clicking each geolocation, it will show on Google Map.<br /><br /><img title=""Visitors of &lt;My new Dev box - HP Z800 Workstation&gt;"" src=""http://ns5gpg.bay.livefilestore.com/y1pCBJMdMTpY-u1Q0S7zqtVu4drJCDOt4vu9fXI01NWpuNsxyAcTZ496S_D-sE4wJfm7E_8MNfOtb_BDsd4A2GjE611hJjqRLED/Z800Visitors.png?psid=1"" alt=""Visitors of &lt;My new Dev box - HP Z800 Workstation&gt;"" width=""731"" height=""533"" /><br /><br />The JavaScript code showing below:<br /><pre style=""color: #000020; background: #f6f8ff;""><span style=""color: #308080;"">&lt;</span>script type<span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""text/javascript""</span><span style=""color: #308080;"">&gt;</span><br />    <span style=""color: #200080; font-weight: bold;"">var</span> initialLocation<span style=""color: #406080;"">;</span><br />    <span style=""color: #200080; font-weight: bold;"">var</span> newyork <span style=""color: #308080;"">=</span> <span style=""color: #200080; font-weight: bold;"">new</span> google<span style=""color: #308080;"">.</span>maps<span style=""color: #308080;"">.</span>LatLng<span style=""color: #308080;"">(</span><span style=""color: #008000;"">40.69847032728747</span><span style=""color: #308080;"">,</span> <span style=""color: #308080;"">-</span><span style=""color: #008000;"">73.9514422416687</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />    <span style=""color: #200080; font-weight: bold;"">var</span> browserSupportFlag <span style=""color: #308080;"">=</span> <span style=""color: #200080; font-weight: bold;"">new</span> Boolean<span style=""color: #308080;"">(</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />    <span style=""color: #200080; font-weight: bold;"">var</span> map<span style=""color: #406080;"">;</span><br />    <span style=""color: #200080; font-weight: bold;"">var</span> myOptions<br />    <span style=""color: #200080; font-weight: bold;"">var</span> infowindow <span style=""color: #308080;"">=</span> <span style=""color: #200080; font-weight: bold;"">new</span> google<span style=""color: #308080;"">.</span>maps<span style=""color: #308080;"">.</span>InfoWindow<span style=""color: #308080;"">(</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br /> <br />    <span style=""color: #200080; font-weight: bold;"">function</span> initialize<span style=""color: #308080;"">(</span><span style=""color: #308080;"">)</span> <span style=""color: #406080;"">{</span><br />        myOptions <span style=""color: #308080;"">=</span> <span style=""color: #406080;"">{</span><br />            zoom<span style=""color: #406080;"">:</span> <span style=""color: #008c00;"">6</span><span style=""color: #308080;"">,</span><br />            mapTypeId<span style=""color: #406080;"">:</span> google<span style=""color: #308080;"">.</span>maps<span style=""color: #308080;"">.</span>MapTypeId<span style=""color: #308080;"">.</span>ROADMAP<br />        <span style=""color: #406080;"">}</span><span style=""color: #406080;"">;</span><br />        map <span style=""color: #308080;"">=</span> <span style=""color: #200080; font-weight: bold;"">new</span> google<span style=""color: #308080;"">.</span>maps<span style=""color: #308080;"">.</span>Map<span style=""color: #308080;"">(</span>document<span style=""color: #308080;"">.</span>getElementById<span style=""color: #308080;"">(</span><span style=""color: #1060b6;"">""googleMapContainer""</span><span style=""color: #308080;"">)</span><span style=""color: #308080;"">,</span> myOptions<span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br /> <br />        <span style=""color: #595979;"">// Try W3C Geolocation (Preferred)</span><br />        <span style=""color: #200080; font-weight: bold;"">if</span> <span style=""color: #308080;"">(</span>navigator<span style=""color: #308080;"">.</span>geolocation<span style=""color: #308080;"">)</span> <span style=""color: #406080;"">{</span><br />            browserSupportFlag <span style=""color: #308080;"">=</span> <span style=""color: #0f4d75;"">true</span><span style=""color: #406080;"">;</span><br />            navigator<span style=""color: #308080;"">.</span>geolocation<span style=""color: #308080;"">.</span>getCurrentPosition<span style=""color: #308080;"">(</span><span style=""color: #200080; font-weight: bold;"">function</span> <span style=""color: #308080;"">(</span>position<span style=""color: #308080;"">)</span> <span style=""color: #406080;"">{</span><br />                map<span style=""color: #308080;"">.</span>setCenter<span style=""color: #308080;"">(</span><span style=""color: #200080; font-weight: bold;"">new</span> google<span style=""color: #308080;"">.</span>maps<span style=""color: #308080;"">.</span>LatLng<span style=""color: #308080;"">(</span>position<span style=""color: #308080;"">.</span>coords<span style=""color: #308080;"">.</span>latitude<span style=""color: #308080;"">,</span> position<span style=""color: #308080;"">.</span>coords<span style=""color: #308080;"">.</span>longitude<span style=""color: #308080;"">)</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />                infowindow<span style=""color: #308080;"">.</span>setContent<span style=""color: #308080;"">(</span><span style=""color: #1060b6;"">'Hi, dear WayneYe.com visitor! You are here:)'</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />                infowindow<span style=""color: #308080;"">.</span>setPosition<span style=""color: #308080;"">(</span><span style=""color: #200080; font-weight: bold;"">new</span> google<span style=""color: #308080;"">.</span>maps<span style=""color: #308080;"">.</span>LatLng<span style=""color: #308080;"">(</span>position<span style=""color: #308080;"">.</span>coords<span style=""color: #308080;"">.</span>latitude<span style=""color: #308080;"">,</span> position<span style=""color: #308080;"">.</span>coords<span style=""color: #308080;"">.</span>longitude<span style=""color: #308080;"">)</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />                infowindow<span style=""color: #308080;"">.</span>open<span style=""color: #308080;"">(</span>map<span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />            <span style=""color: #406080;"">}</span><span style=""color: #308080;"">,</span> <span style=""color: #200080; font-weight: bold;"">function</span> <span style=""color: #308080;"">(</span><span style=""color: #308080;"">)</span> <span style=""color: #406080;"">{</span><br />                handleNoGeolocation<span style=""color: #308080;"">(</span>browserSupportFlag<span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />            <span style=""color: #406080;"">}</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />        <span style=""color: #406080;"">}</span> <span style=""color: #200080; font-weight: bold;"">else</span> <span style=""color: #406080;"">{</span><br />            browserSupportFlag <span style=""color: #308080;"">=</span> <span style=""color: #0f4d75;"">false</span><span style=""color: #406080;"">;</span><br />            handleNoGeolocation<span style=""color: #308080;"">(</span>browserSupportFlag<span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />        <span style=""color: #406080;"">}</span><br /> <br />        <span style=""color: #200080; font-weight: bold;"">function</span> handleNoGeolocation<span style=""color: #308080;"">(</span>errorFlag<span style=""color: #308080;"">)</span> <span style=""color: #406080;"">{</span><br />            <span style=""color: #595979;"">//contentString = 'Cannot track your location, default to New York City.';</span><br /> <br />            map<span style=""color: #308080;"">.</span>setCenter<span style=""color: #308080;"">(</span>newyork<span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />            <span style=""color: #595979;"">//infowindow.setContent(contentString);</span><br />            <span style=""color: #595979;"">//infowindow.setPosition(newyork);</span><br />            infowindow<span style=""color: #308080;"">.</span>open<span style=""color: #308080;"">(</span>map<span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />        <span style=""color: #406080;"">}</span><br />    <span style=""color: #406080;"">}</span><br /> <br />    <span style=""color: #200080; font-weight: bold;"">function</span> setGoogleMapLocation<span style=""color: #308080;"">(</span>geoLocation<span style=""color: #308080;"">,</span> latitude<span style=""color: #308080;"">,</span> longitude<span style=""color: #308080;"">)</span> <span style=""color: #406080;"">{</span><br />        contentString <span style=""color: #308080;"">=</span> geoLocation<span style=""color: #406080;"">;</span><br /> <br />        <span style=""color: #200080; font-weight: bold;"">var</span> visitorLocation <span style=""color: #308080;"">=</span> <span style=""color: #200080; font-weight: bold;"">new</span> google<span style=""color: #308080;"">.</span>maps<span style=""color: #308080;"">.</span>LatLng<span style=""color: #308080;"">(</span>latitude<span style=""color: #308080;"">,</span> longitude<span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br /> <br />        map<span style=""color: #308080;"">.</span>setCenter<span style=""color: #308080;"">(</span>visitorLocation<span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />        infowindow<span style=""color: #308080;"">.</span>setContent<span style=""color: #308080;"">(</span>contentString<span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />        infowindow<span style=""color: #308080;"">.</span>setPosition<span style=""color: #308080;"">(</span>visitorLocation<span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />        infowindow<span style=""color: #308080;"">.</span>open<span style=""color: #308080;"">(</span>map<span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span><br />    <span style=""color: #406080;"">}</span><br /><span style=""color: #308080;"">&lt;</span><span style=""color: #308080;"">/</span>script<span style=""color: #308080;"">&gt;</span></pre><br />Ok, all done, eventually I built a visit record page which shows every's blog's visitors' Geolocations, the location is: <a title=""http://wayneye.com/VisitRecord"" href=""http://wayneye.com/VisitRecord"" target=""_blank"">http://wayneye.com/VisitRecord</a>.",8494,2010-12-30 13:14:50.397,1,A
94,Wayne,Happy 2011,Happy-2011,1,"元旦在家休息三天，由于老婆预产期临近的关系，爸妈都过来了，但是一家人哪都不能去，我在老婆的带领下学习烤曲奇，向来不安分的我自然要做点神马：）<br /><br /><img class=""BlogImage"" src=""http://public.bay.livefilestore.com/y1pwF6Qi_1j6AkgG0fUbBECqJfNQvSBYUdrsG85g0_kl5R-vxP2GleIqEi8t_Nlix7y-JEiXDL_-oew_tNVwtbvmA/Happy2011%20copy.jpg?psid=1"" alt=""Happy 2011"" /><br /><br />马上要添新丁了，希望我们全家2011年都Happy！",2319,2011-01-05 20:54:56.577,1,A
95,Wayne,PMP exam passed:),PMP-Exam-Passed,15," <p>
 Yesterday I received an Email from PMI, which confirmed I've passed the PMP exam and now became a certificated PMP, hum, I didn't expect the result came out in such a short duration, but anyway, feeling exicting:) </P>

 <p>
 I took the exam on Dec 4th, 2010, I still remember how hard I went over all the knowledge points from 4 books plus other material during the entire November: excepting eating, sleeping, working, I waseither reading PMP books or doing practice test, my mind was full filled with 5 Project Processes, Cost, Time (Schedule), Risk, Communication, EVM, Critical Path, Pareto Chart, 6-Sigma, and so on....
 </p>
<p>
During the reviewing process, I used to write <a href=""http://wayneye.wordpress.com/"" target=""_blank"">a blog related with EVM</a>, since I spent two whole days in learning & understanding the concept and the complex formulas, at that time <b>I sware I must pass the exam</b>, I told to myself: <b class=""HighlightWords"">I've been already working hard on it, if I didn't persist my passion, and eventually I failed the final exam, then all my effort would be meaningless</b> (not 100% useless considering the knowledge points I've learnt), if this happen I proved that I was a foolish guy. I decide not let that happen! And now the fact is I am a little bit smarter than a foolish guy:).
</p>

<p>
I would like to summarize my experience/tips on passing PMP exam, I believe Search Engines will index$More$ them and might help other people.
</p>

<ol start=""1"">
<li style=""list-style-type:decimal;"">2-3 books are far from enough, do not read too many books. Rita's <a href=""http://www.amazon.com/PMP-Exam-Prep-Sixth-Passing/dp/1932735186/ref=sr_1_1?ie=UTF8&qid=1294238620&sr=8-1"" target=""_blank"">PMP Exam Prep</a> is really a good one, other than that I would recommend a book for Chinese people: <a href=""http://www.amazon.cn/mn/detailApp/478-7420271-4106036?uid=478-7420271-4106036&ref=RC_PR&asin=B002EB06U2"" target=""_blank"">《题解《PMBOK指南》(第4版)》</a> in which Doctor Zhang shared a lot of experience/skills on  the exam, I wrote a review on Amazon.cn as a thank:).</li>
<li style=""list-style-type:decimal;"">Understand the formulas, not just remember it in mind, IMHO this is crucial for the exam, just as I said above, I spent two days on understanding EVM (I know I am far from smart~~). </li>
<li style=""list-style-type:decimal;"">
Practice at least 600 exam questions before the final exam, this is crucial for your success, each question is combined with one or more knowledge points, no matter you make it correct or incorrect, you get deeper understand to the knowledge point behind it.
</li>
<li style=""list-style-type:decimal;"">
Reading PMBOK for 2-3 times, I believe very few people can understand <b>AND master 80% of all the knowledge points</b> by just reading it 1 time, most of common people are not genius, persistently hard working is a must.
</li>
</ol>
<p>
Just after th exam finished, I took several pictures using my Nikon D7000,
just for keeping this memory in my mind, I've decided to post them onto my blog at that time, now I achieve this goal:)
</P>
<p><img class=""BlagImage"" src=""http://public.bay.livefilestore.com/y1py0fKI2nP7YiQeRMM5KzzUgBmm4lcWCH2NeG7rR57voYJbJ9VDoIZ_xiqu1ngJUf9dgJcYXwk0eeK0uWbgzUjxA/DSC_6306%20copy.jpg?psid=1"" alt=""PMP1"" />
</p>
<p>
<img class=""BlagImage"" src=""http://public.bay.livefilestore.com/y1pu5KFT1HhUIKLYlbJy0d9gvEn3PgpsJUcca2Vna_mSMCltfv6K_xZcY5fSwcq1JSxD_I2i7piZhMImY3ht5R0TQ/DSC_6310%20copy.jpg?psid=1"" alt=""PMP2"" />
</p>
<p>
<img class=""BlagImage"" src=""http://public.bay.livefilestore.com/y1pu5KFT1HhUIJ-TYYA28XZlMbfnMAbN9VSt0fvlnZO0zVnsxzaMVmdH0AeQluuTkWGuXOA00xpvgUTRD25d6NaLA/DSC_6311%20copy.jpg?psid=1"" alt=""PMP3"" />
</p>
<p>
<b>At last I wish all the people who is preparing for PMP pass the exam!</b>
</p>",3179,2011-01-05 22:57:24.953,1,A
96,Wayne,"""Unique URL Pattern"" in Ajax Web Application",Unique-URL-Pattern-In-Ajax,22,"<p>Testing: Can I really edit this?</p>
<h3>Background</h3>
Few days ago one of my friend asked me how does Gmail change its URL while user operates inside it without page refreshing, I've no idea about that at that time, he then shared a link <a href=""http://ajaxpatterns.org/Unique_URLs"" target=""_blank"">Ajax Pattern - Unique URLs</a> which deep dives into this topic, as the article mentioned: Unique URL make your website's link ""Bookmarkable, Linkable, Type-In-Able"", plus <strong>Sharable </strong>IMHO, easy to be shared to Social network which is extremely important nowadays.
<h3>Implementation</h3>
The key technology to achieve the """"Unique URL"" goal could be summarized into two points:
<ol>
	<li>If the content in the page has been updated by Ajax significantly enough, update the URL (<code>location.hash</code>) as well.</li>
<pre style=""color:#000020;background:#f6f8ff;width:600px;""><span style=""color:#595979;"">// Ajax rendering all blog entries in page number 5</span>
location<span style=""color:#308080;"">.</span>hash <span style=""color:#308080;"">=</span> <span style=""color:#1060b6;"">'Blogs&amp;Page5'</span><span style=""color:#406080;"">;</span></pre>
	<li>Every time the Ajax page loads, JS should<strong> understand the$More$ URL </strong>and <strong>render related content </strong>as well.</li>
<pre style=""color:#000020;background:#f6f8ff;width:600px;""><span style=""color:#0057a6;"">&lt;</span><span style=""color:#200080;font-weight:bold;"">body</span><span style=""color:#474796;""> </span><span style=""color:#074726;"">onload</span><span style=""color:#308080;"">=</span><span style=""color:#1060b6;"">""restoreAjaxContent()""</span><span style=""color:#0057a6;"">&gt;</span>
<span style=""color:#0057a6;"">&lt;</span><span style=""color:#200080;font-weight:bold;"">script type=""text/javascript""</span><span style=""color:#0057a6;"">&gt;</span>
<span style=""color:#200080;font-weight:bold;"">function</span> restoreAjaxContent<span style=""color:#308080;"">(</span><span style=""color:#308080;"">)</span><span style=""color:#406080;"">{</span>
    <span style=""color:#200080;font-weight:bold;"">var</span> urlHash <span style=""color:#308080;"">=</span> location<span style=""color:#308080;"">.</span>hash<span style=""color:#406080;"">;</span>
    <span style=""color:#200080;font-weight:bold;"">var</span> curPageNo <span style=""color:#308080;"">=</span> urlHash<span style=""color:#308080;"">.</span><span style=""color:#200080;font-weight:bold;"">replace</span><span style=""color:#308080;"">(</span><span style=""color:#1060b6;"">'Blogs&amp;Page'</span><span style=""color:#308080;"">,</span><span style=""color:#1060b6;"">''</span><span style=""color:#308080;"">)</span><span style=""color:#406080;"">;</span>
    <span style=""color:#595979;"">// Safe parse curPageNo into number, handles wrong parameters (Ignored for here)</span>
    <span style=""color:#595979;"">// Display loading text/image on the page (optional but better UX).</span>
    <span style=""color:#595979;"">// Ajax rendering all blog entries in page number curPageNo.</span>
<span style=""color:#406080;"">}</span>
<span style=""color:#0057a6;"">&lt;/</span><span style=""color:#200080;font-weight:bold;"">script</span><span style=""color:#0057a6;"">&gt;</span>
<span style=""color:#0057a6;"">&lt;/</span><span style=""color:#200080;font-weight:bold;"">body</span><span style=""color:#0057a6;"">&gt;</span></pre>
</ol>
What I want to emphasize is the hash value, i.e. the content behind # is originally expected an HTML element's name attribute used for In-Page navigation, it is completely the contract between client <strong>Browse</strong>r,<strong> HTML content </strong>and <strong>JavaScript</strong>, server side cannot get the information directly except we explicitly pass the value to the server side (hidden post, URL query string, Ajax etc), therefore,if some user access the unique URL, your website's client side JS should parse the hash and retrieve relevant data from server side.
<p><strong>Advantage</strong><p/>
<ol>
	<li><span style=""color:#3366ff;"">Better user experience.</span>
<br />Every time user accesses the unique URL Ajax page, the fixed part of this page loaded first, and then loads the main content <strong>asynchronously, </strong>if the main content is large enough, for example, contains images or rich media content, the ""<strong>async loading</strong>"" is much better than the page loading blocked by downloading those images/medias.
For instance, originally loading one specific page requires 2 seconds totally, after applying the this ""<strong>async loading</strong>"",  the fixed part cost <strong>0.4 seconds</strong> to be loaded and the main content costs <strong>1.8 seconds</strong>, from <strong>user's point of view</strong>,  usually the <strong>latter case</strong> would be better because the user see your page is partially loaded within a short period (0.4) which feels good enough, plus a graceful loading/splash screen, eventually the UX got improved significantly!<br /></li><br />
	<li><span style=""color:#3366ff;"">Better SEO support (Performance Aspect)</span>
<br />The page rendering speed is an important fact for a search engine's crawler, by applying ""async loading"", the crawler will deem the page it is crawling has a good loading speed - <strong>0.4 seconds</strong>.<br /></li><br />
	<li><span style=""color:#3366ff;"">Easy to support W3 web standard</span>
<br />This is sort of kidding:) Since your main content is Ajax loaded, W3 validator (so does Search Engine) won't validate the main content which is very possible does not strictly adhere all the standard rules.<br /></li>
</ol>
<strong>Disadvantage</strong>
<ol>
	<li><span style=""color:#333333;""><span style=""color:#99cc00;"">Main content cannot be indexed by Search engines</span>
</span><br />All main content is loaded by JavaScript, Search engine won't crawler those content, this is a serious problem! However, it is easy to walk around, builds a <strong>traditional page without Ajax, </strong>store it into <a href=""http://sitemap.org"" target=""_blank"">sitemap.xml</a> and submit to search engine Web Master tool.<br /></li><br />
	<li><span style=""color:#99cc00;"">Harder to development and to maintain</span>
<br />Client JavaScript/Ajax development is more complex and less convenient comparing to server side technology like ASP.NET, JAVA EE or PHP.  Although there are jQuery (write less, do more), Prototype.js (make develop JS in a more OO way), DoJo and so on, it still might not be very happy while a developer is struggling with mixed HTML/CSS/JavaScript:)<br /></li><br />
</ol>
P.S. I spent two days in updating my blog (<a href=""http://WayneYe.com"" target=""_blank"">http://WayneYe.com</a>), revised the paging style from traditional into the Ajax Unique URL pattern above, it is no doing Ajax paging and update URL like ""<a href=""http://wayneye.com/#Blogs&amp;Page5"">http://wayneye.com/#Blogs&amp;Page5</a>"", it definitely ""<strong>Bookmarkable, Linkable, Type-In-Able and Sharable</strong>"", plus a loading panel and content fades in effect, I believe its UX is much better than before.",4382,2011-01-12 17:51:12.330,1,A
97,Wayne,Google Code is blocked by the 天杀的天朝 Govenment...,Google-Code-Blocked,5,"<p><img src=""http://ns5gpg.bay.livefilestore.com/y1pP7D_nr5IoLZ57Rwdjlodw3Xudd5tL7UUNJC0BI19k844wp8KYX8LVR2P-ye5bLzeRreeypkkPMMsiVmr_uzkQgUwauhBrSVP/GoogleCode.png?psid=1"" alt=""GCode Blocked"" /></p><br />
<p>这Code跟""Zheng Zhi""有关系吗？我搞不懂！<a href=""http://code.google.com"" target=""_blank"">http://code.google.com</a>可以访问估计是因为没有Https加密，具体某个项目比如我的<a href=""https://wayneblog.googlecode.com/svn/trunk/"" >WayneBlog项目</a>由于加密了，他们就怕有问题了？我实在是对你们无语了！！$More$</p>
<br />
<p>
<img src=""http://ns5gpg.bay.livefilestore.com/y1pP7D_nr5IoLbPhx8QqG82d3-LRQUsCzNQE-xdbTDNpkeTIvMfvZvNZxWofp4meemivmAwwDC0KrOfdAOdrQxhqdss_AtYlbrk/CNM.jpg?psid=1"" alt=""CNM"" /></p>
<br />
<p>
Gmail早已全程加密，QQ mail也“全程加密”（我知道这个是假的，只要需要，任何时候他们都可以”检查“），干脆把Gmail也封了呗，我猜他们暂时还没封的一个原因是因为他们暂时并不缺乏“检查”Gmail的“技术”，我曾经在Twitter上看到有异见人士反映Gmail账户异常，Gmail可能会<a href=""http://www.guao.hk/posts/detecting-suspicious-account-activity.html"" target=""_blank"">发现并通知你异常情况</a>，不过也不能做更多了，免费的Gmail总不能给每个用户发个USB KEY吧。。
</p>
<p>
现在的问题，我怎么办？我只想写点Code，<a href=""http://sourceforge.net/"" alt=""Sf"" target=""_blank"">SourceForge</a>从我天朝访问怎一个慢字了得啊，国内我找到一个提供15M的免费空间：http://code.svnspot.com/， 顶上的Banner就是一家医院的广告，OMG。。给点专业精神好不，程序员确实不太健康可也不需要天天往医院跑吧。
</p>
<p>
<span style=""font-size:20px""><b>唉！</b></span>
</p>
<p>
更新1.晚上发现连code.google.com也无法访问了。<br />
</p>
<p>
更新2.穿墙看了看，无辜的Google Code被封跟这2天真理部的最新精神不无关系。以后Update/Commit代码得先穿墙，多么奇妙的国度！<br />
</p>",3505,2011-01-15 12:01:41.950,1,A
98,Wayne,Utilize gzip compression in IIS,IIS-Gzip-Compression,21,"<p><strong>GZIP format </strong>is developed by <a title=""GNU Project"" href=""http://www.gnu.org/software/gzip/"" target=""_blank"">GNU Project</a> and standardized&nbsp;by IETF in <a href=""http://www.ietf.org/rfc/rfc1952.txt"" target=""_blank"">RFC 1952</a>, which <strong>MUST </strong>be considered by web developers to improve their websites' performance, there are several&nbsp;Quintessential articles documented using gzip compression, they are:</p>

<br /><a title=""10 Tips for Writing High-Performance Web Applications"" href=""http://msdn.microsoft.com/en-us/magazine/cc163854.aspx#S10"" target=""_blank""><strong>10 Tips for Writing High-Performance Web Applications</strong></a> <br />
<a title=""Best Practices for Speeding Up Your Web Site"" href=""http://developer.yahoo.com/performance/rules.html"" target=""_blank""><strong>Best Practices for Speeding Up Your Web Site</strong></a> <br />

<a title=""How To Optimize Your Site With GZIP Compression"" href=""http://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/"" target=""_blank""><strong>How To Optimize Your Site With GZIP Compression</strong></a> <br />

<a title=""IIS 7 Compression. Good? Bad? How much?"" href=""http://http//weblogs.asp.net/owscott/archive/2009/02/22/iis-7-compression-good-bad-how-much.aspx"" target=""_blank""><strong>IIS 7 Compression. Good? Bad? How much?</strong></a><br />
<p>A gzip compressed HTTP package&nbsp;can significantly save <strong>bandwidth </strong>thus <strong>speed up browser rendering</strong> after use hitting enter, so that user experience got improved finally, nowadays most of the popular browsers such as IE, Firefox, Chrome, Opera&nbsp;support gzip encoded content (please refer:&nbsp;<a href=""http://en.wikipedia.org/wiki/HTTP_compression"">http://en.wikipedia.org/wiki/HTTP_compression</a>).</p>
<p>PS:&nbsp;the other compression encoding is&nbsp;<strong>deflate</strong>, ""but it's less effective and less popular"" (refer:&nbsp;<a href=""http://developer.yahoo.com/performance/rules.html"">http://developer.yahoo.com/performance/rules.html</a>). Yahoo uses gzip compression and suggest developers do that:</p>
<p><img src=""http://ns5gpg.bay.livefilestore.com/y1ptFw9IXPvECzOSEjQyhOcKfHg9ILzEiWFjOSTf6L70RU_b4UrjfQ7CF5sURKB4QroFMacY_QDA2zjT5FiwOeb2a4f_0nciLOM/fiddlerobserve.png?psid=1"" alt="""" /></p>
<p>&nbsp;</p>
<h2>Compression in IIS</h2>
<p>For ASP.NET developer who host website$More$ on IIS like me, to achieve this is fairly easy, open IIS manager and select your website, then go to <strong>Compression </strong>Module. (Apache admins refer <a href=""http://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/"" target=""_blank"">here</a>)</p>
<p><img src=""http://ns5gpg.bay.livefilestore.com/y1pjisdljbocK_S6GXSzuV2vEe2FqJqUZP-zKD8ULDDpZtWzlCWHDdsvZTBI_C7fjbGz0cVZopytmd3Dp8WzB7Q2Xc6vSiw1SiV/iiscompression.png?psid=1"" alt="""" /></p>
<p>Double click and you will see:</p>
<p><img src=""http://ns5gpg.bay.livefilestore.com/y1paUldSocWDZADijYGvClrVnrMTk0GcdGsN7JLdKKFgaxdvHN1LLy4Btmq7GpYZ_v4K96jbczWK2SkVyjy9eHOwdkGWIfZXhfs/iiscompressionmodule.png?psid=1"" alt="""" /></p>
<p>IIS supports two kinds of compression:</p>
<ul>
<li><strong></strong><strong>Static </strong> Compression IIS compress a specific file at first time and only the first time,&nbsp;afterward&nbsp;every time IIS receive request on this file it will return the compressed data. &nbsp;This is usually used on the files not frequently changing such as a static html file, an rarely changed XML, a Word document or any file&nbsp;doesn't&nbsp;change frequently.</li>
<li><strong></strong><strong>Dynamic </strong>Compress IIS will do compression EVERY time a client's request on one specific file, this usually used on some content that often changes, for example, there is a large CSV file generating engine located on the server back end, and suppose to transfer to the client side, we can use dynamica compress.</li>
</ul>
$More$
<p>Scott Forsyth's pointed out:""<strong>Compression is a trade-off of CPU for Bandwidth</strong>."",&nbsp;one of the new feature in IIS 7 is web masters can <strong>customize IIS compression strategy</strong> based on the actual need, you can modify the&nbsp;<strong>applicationHost.config </strong>under ""%windir%\System32\inetsrv\config"", below is my sample:</p>
<pre style=""color: #000020; background: #f6f8ff;""><span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">httpCompression</span> <span style=""color: #474796;"">staticCompressionEnableCpuUsage</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">80</span><span style=""color: #1060b6;"">""</span> <span style=""color: #474796;"">dynamicCompressionDisableCpuUsage</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">80</span><span style=""color: #1060b6;"">""</span> <span style=""color: #474796;"">directory</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files</span><span style=""color: #1060b6;"">""</span><span style=""color: #0057a6;"">&gt;</span>
    <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">scheme</span> <span style=""color: #474796;"">name</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">gzip</span><span style=""color: #1060b6;"">""</span> <span style=""color: #474796;"">dll</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">%Windir%\system32\inetsrv\gzip.dll</span><span style=""color: #1060b6;"">""</span> <span style=""color: #0057a6;"">/&gt;</span>
    <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">staticTypes</span><span style=""color: #0057a6;"">&gt;</span>
        <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">add</span> <span style=""color: #474796;"">mimeType</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">text/*</span><span style=""color: #1060b6;"">""</span> <span style=""color: #474796;"">enabled</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">true</span><span style=""color: #1060b6;"">""</span> <span style=""color: #0057a6;"">/&gt;</span>
        <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">add</span> <span style=""color: #474796;"">mimeType</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">message/*</span><span style=""color: #1060b6;"">""</span> <span style=""color: #474796;"">enabled</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">true</span><span style=""color: #1060b6;"">""</span> <span style=""color: #0057a6;"">/&gt;</span>
        <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">add</span> <span style=""color: #474796;"">mimeType</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">application/x-javascript</span><span style=""color: #1060b6;"">""</span> <span style=""color: #474796;"">enabled</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">true</span><span style=""color: #1060b6;"">""</span> <span style=""color: #0057a6;"">/&gt;</span>
        <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">add</span> <span style=""color: #474796;"">mimeType</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">application/atom+xml</span><span style=""color: #1060b6;"">""</span> <span style=""color: #474796;"">enabled</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">true</span><span style=""color: #1060b6;"">""</span> <span style=""color: #0057a6;"">/&gt;</span>
        <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">add</span> <span style=""color: #474796;"">mimeType</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">application/xaml+xml</span><span style=""color: #1060b6;"">""</span> <span style=""color: #474796;"">enabled</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">true</span><span style=""color: #1060b6;"">""</span> <span style=""color: #0057a6;"">/&gt;</span>
        <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">add</span> <span style=""color: #474796;"">mimeType</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">*/*</span><span style=""color: #1060b6;"">""</span> <span style=""color: #474796;"">enabled</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">false</span><span style=""color: #1060b6;"">""</span> <span style=""color: #0057a6;"">/&gt;</span>
    <span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">staticTypes</span><span style=""color: #0057a6;"">&gt;</span>
    <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">dynamicTypes</span><span style=""color: #0057a6;"">&gt;</span>
        <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">add</span> <span style=""color: #474796;"">mimeType</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">text/*</span><span style=""color: #1060b6;"">""</span> <span style=""color: #474796;"">enabled</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">true</span><span style=""color: #1060b6;"">""</span> <span style=""color: #0057a6;"">/&gt;</span>
        <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">add</span> <span style=""color: #474796;"">mimeType</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">message/*</span><span style=""color: #1060b6;"">""</span> <span style=""color: #474796;"">enabled</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">true</span><span style=""color: #1060b6;"">""</span> <span style=""color: #0057a6;"">/&gt;</span>
        <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">add</span> <span style=""color: #474796;"">mimeType</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">application/x-javascript</span><span style=""color: #1060b6;"">""</span> <span style=""color: #474796;"">enabled</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">true</span><span style=""color: #1060b6;"">""</span> <span style=""color: #0057a6;"">/&gt;</span>
        <span style=""color: #0057a6;"">&lt;</span><span style=""color: #333385;"">add</span> <span style=""color: #474796;"">mimeType</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">*/*</span><span style=""color: #1060b6;"">""</span> <span style=""color: #474796;"">enabled</span><span style=""color: #308080;"">=</span><span style=""color: #1060b6;"">""</span><span style=""color: #1060b6;"">false</span><span style=""color: #1060b6;"">""</span> <span style=""color: #0057a6;"">/&gt;</span>
    <span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">dynamicTypes</span><span style=""color: #0057a6;"">&gt;</span>
<span style=""color: #0057a6;"">&lt;/</span><span style=""color: #333385;"">httpCompression</span><span style=""color: #0057a6;"">&gt;</span>
</pre>
<p>More detailed is described here:&nbsp;<a href=""http://www.iis.net/ConfigReference/system.webServer/httpCompression"">http://www.iis.net/ConfigReference/system.webServer/httpCompression</a>PS, Dynamic Compress is not installed by default, we need install it by turning on Windows Features:</p>
<p><img src=""http://ns5gpg.bay.livefilestore.com/y1pjisdljbocK-qNY6e9ZSj8QC_dToXc0Dnor1jqqMAWycVUFQDCcU3kMC9_gUzxJPU1ltzRKvtj2ggCUe0gx_eZH62DHXDvyIU/dynamiccompression.png?psid=1"" alt="""" /></p>
<p>My server host provider uses IIS 6.0 and does NOT enabling compression, I checked compression status for<a href=""http://wayneye.com"" target=""_blank""> http://wayneye.com</a> by using the free tool provided by <a href=""http://www.port80software.com/products/zipenable/"" target=""_blank"">port80software </a>and the result is:</p>
<p><img src=""http://ns5gpg.bay.livefilestore.com/y1pzajHQoK-MaLdyX4PY2Y5wcXfbsS7lJdn0tdg53QxTuF__VTymhzmuL61QPf_Df-TOgAmkardVRxn64NQViT1pGWrKsW6HaWd/wayneyedotcomcompressionstatus.png?psid=1"" alt="""" /></p>
<p>WOW, I must convince them to enable gzip compression!!</p>
<p>&nbsp;</p>
<h2>Programmatically compression using C#</h2>
<p>We can also programmatically compress the ASP.NET http response, for example I want to transfer a large CSVfile to the client, since csv file is in pure plaint text, it usually has high compression rate, sample code below:</p>
<pre style=""color: #000020; background: #f6f8ff;""><span style=""color: #200080; font-weight: bold;"">protected</span> <span style=""color: #200080; font-weight: bold;"">void</span> Page_Load<span style=""color: #308080;"">(</span><span style=""color: #200080; font-weight: bold;"">object</span> sender<span style=""color: #308080;"">,</span> EventArgs e<span style=""color: #308080;"">)</span>
<span style=""color: #406080;"">{</span>
    Response<span style=""color: #308080;"">.</span>Filter <span style=""color: #308080;"">=</span> <span style=""color: #200080; font-weight: bold;"">new</span> System<span style=""color: #308080;"">.</span>IO<span style=""color: #308080;"">.</span>Compression<span style=""color: #308080;"">.</span>GZipStream<span style=""color: #308080;"">(</span>Response<span style=""color: #308080;"">.</span>Filter<span style=""color: #308080;"">,</span>
                            System<span style=""color: #308080;"">.</span>IO<span style=""color: #308080;"">.</span>Compression<span style=""color: #308080;"">.</span>CompressionMode<span style=""color: #308080;"">.</span>Compress<span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
    Response<span style=""color: #308080;"">.</span>Headers<span style=""color: #308080;"">.</span>Remove<span style=""color: #308080;"">(</span><span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">Content-Encoding</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
    <span style=""background-color: #ffff00;"">Response<span style=""color: #308080;"">.</span>AddHeader<span style=""color: #308080;"">(</span><span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">Content-Encoding</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">,</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">gzip</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span></span>
    Response<span style=""color: #308080;"">.</span>ContentType <span style=""color: #308080;"">=</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">text/csv</span><span style=""color: #800000;"">""</span><span style=""color: #406080;"">;</span>
    Response<span style=""color: #308080;"">.</span>TransmitFile<span style=""color: #308080;"">(</span><span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">D:\\IamLarge.csv</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
    Response<span style=""color: #308080;"">.</span>End<span style=""color: #308080;"">(</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
<span style=""color: #406080;"">}</span>
</pre>
<p>If the request was submitted by a client browser, browser will automatically <strong>decompress </strong>the Http response, &nbsp;but in the Windows client application or Windows Service, we developers can also adopt gzip compression to save bandwidth, once received gzip Http package from the server, we can programmatically decompressing, I wrote a client console application to submit the Http request and receive/decompress the Http response package.</p>
<pre style=""color: #000020; background: #f6f8ff;""><span style=""color: #595979;"">/* Submit Http request to server with Accept-Encoding: gzip */</span>
WebClient client <span style=""color: #308080;"">=</span> <span style=""color: #200080; font-weight: bold;"">new</span> WebClient<span style=""color: #308080;"">(</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
<span style=""color: #595979;"">// It is mandatory by the client, if this header information is not specified, server will return the original content type, in my case, it is: text/csv</span>
<span style=""color: #000000; background-color: #ffff00;"">client.Headers.Add(""Accept-Encoding"", ""gzip"");</span>

<span style=""color: #200080; font-weight: bold;"">using</span><span style=""color: #308080;"">(</span>Stream gzipData <span style=""color: #308080;"">=</span> client<span style=""color: #308080;"">.</span>OpenRead<span style=""color: #308080;"">(</span><span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">http://localhost/StudyASPNET/gzipHttp/ReturnGzipPackage.aspx</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">)</span><span style=""color: #308080;"">)</span>
<span style=""color: #406080;"">{</span>
    WebHeaderCollection responseHeaders <span style=""color: #308080;"">=</span> client<span style=""color: #308080;"">.</span>ResponseHeaders<span style=""color: #406080;"">;</span>

    <span style=""color: #200080; font-weight: bold;"">using</span><span style=""color: #308080;"">(</span>GZipStream gzip <span style=""color: #308080;"">=</span> <span style=""color: #200080; font-weight: bold;"">new</span> GZipStream<span style=""color: #308080;"">(</span>gzipData<span style=""color: #308080;"">,</span> CompressionMode<span style=""color: #308080;"">.</span>Decompress<span style=""color: #308080;"">)</span><span style=""color: #308080;"">)</span>
    <span style=""color: #406080;"">{</span>
        <span style=""color: #200080; font-weight: bold;"">using</span><span style=""color: #308080;"">(</span>StreamReader reader<span style=""color: #308080;"">=</span> <span style=""color: #200080; font-weight: bold;"">new</span> StreamReader<span style=""color: #308080;"">(</span>gzip<span style=""color: #308080;"">)</span><span style=""color: #308080;"">)</span>
        <span style=""color: #406080;"">{</span>
            String content <span style=""color: #308080;"">=</span> reader<span style=""color: #308080;"">.</span>ReadToEnd<span style=""color: #308080;"">(</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
            File<span style=""color: #308080;"">.</span>WriteAllText<span style=""color: #308080;"">(</span><span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">D:\\Downloaded.csv</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">,</span> content<span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
        <span style=""color: #406080;"">}</span>
    <span style=""color: #406080;"">}</span>
<span style=""color: #406080;"">}</span>
</pre>
<p>Please be aware of one thing: ""<strong>Accept-Encoding: gzip</strong>"" is supported by all browsers <strong>by default</strong>, i.e. browser will automatically decompresses compressed Http package, so in the code we MUST <strong>explicitly </strong>specify ""<strong>Accept-Encoding: gzip</strong>"", below is what I investigated: First time, I explicitly set ""Accept-Encoding: gzip"", the Http response header contains ""<strong>Content-Encoding: gzip</strong>"", and the depression/file saving operations complete without any issues.</p>
<p><img src=""http://ns5gpg.bay.livefilestore.com/y1pzajHQoK-MaLof_PHBuaGl4-F0Q8nxi2_lnxxeWc4fFqy5fPO14Ty34QGoyge1i-xlCHeystf1qUVV4qAOO_QeNd4NkVEHq2X/acceptgzipheader.png?psid=1"" alt="""" /></p>
<p>Second time, I commented out the code, the result is, received Http headers does NOT contain content encoding information, since the server <strong>deemed you doesn't accept gzip encoded content</strong>, it won't return you compressed file, instead, <strong>it returned the original file</strong>, in my case, the csv file itself.</p>
<p><img src=""http://ns5gpg.bay.livefilestore.com/y1pXQ-_NIiU84bGiZaFJvc4vCw80dOWpGOAN3WW9R1M3lqcMhmtJ2hCbY6ydJRSPF7LwaWTNt_vVEQczkv4mgDiVu8myTTL-u7u/withoutsettingacceptgzip.png?psid=1"" alt="""" /></p>
<h2>Conclusion &amp; Hints</h2>
<p>Using Http Compression is one of the best practice to speed up the web sites, usually consider compress files like below:</p>
<ol>
<li><strong>Doesn't change frequently.</strong></li>
<li><strong>Has a significant compress-rate such as Html, XML, CSV, etc.</strong></li>
<li><strong>Dynamically generated and the server CPU has availability.</strong></li>
</ol>
<p>Please be aware that do NOT compress <strong>JPG, PNG, FLV, XAP </strong>and those kind of image/media files, since they are <strong>already </strong>compressed, compress them will waste CPU resources and you got a compressed copy with few KBs reduced:)</p>",8109,2010-12-10 16:53:10.307,1,A
99,Wayne,HTML is the new HTML5,HTML-is-the-new-HTML5,23,"<p>Few days ago <a href=""http://ln.hixie.ch/"" target=""_blank"">Ian Hickson</a> wrote a blog: <a href=""http://blog.whatwg.org/html-is-the-new-html5"" target=""_blank"">HTML is the new HTML5</a>, he referred ""<a href=""http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2009-December/024477.html"" target=""_blank"">we moved to a new development model</a>"", and comes with two major changes:</p>
<ol>
	<li><a href=""http://whatwg.org/html"">The HTML specification</a> will henceforth just be known as ""HTML"", with the URL <code>http://whatwg.org/html.</code></li>
	<li>The WHATWG HTML spec now became ""<strong>living standard</strong>"", ""It's more mature than any version of the HTML specification"". I took a screenshot below:</li>
</ol>
<p><img class=""alignnone"" title=""HTML Living Standard"" src=""http://ns5gpg.bay.livefilestore.com/y1p0X2ZXUehlk9Uwk0Bc97tevL8wKYGFuuhsg-GTbvqCEnoeEEYtCZWgvfvvqOXp6Rm7B64eLfv3spV7VvAL16pgHNmh8_ovObc/HTML%20Living%20Standard.png?psid=1"" alt=""HTML Living Standard"" width=""524"" height=""107"" /></p>

<p>In a simple sentence: HTML is going to ""<strong>unversioned model</strong>"", according to this there is definitely a concern: OK, living standard? Does this mean the standard could be changed/updated/revised at anytime? I saw one person asked posted this question and Ian Hickson replied, he emphasized WHATWG worked hard on backward-capability, and they worked tightly with browser vendors to make sure they do not change things that most people depend on, this is good and really important!</p>

<p>So, things is getting more and more interesting with HTML 5 (should I just call HTML?), few days$More$ before (18 January 2011) W3 just ""unveiled"" the HTML 5 logo: <a href=""http://www.w3.org/News/2011#entry-8992"">http://www.w3.org/News/2011#entry-8992</a>, I bet there could be more or less confusion:)</p>

<p><img class=""alignnone"" title=""HTML5 Logo"" src=""http://ns5gpg.bay.livefilestore.com/y1p0X2ZXUehlk9PgidKKSxOZi26jwsQ74CL2Vzo15rEU0A2Z8iN5dBLbwg30gmXSPzIxfcOUnf6pWZ1iktL8PNj1w1oe0uAaUt6/html5-logo.png?psid=1"" alt="""" width=""620"" height=""541"" /></p>",2870,2011-01-24 17:47:20.300,1,A
100,Wayne,[转自cnbeta]老扎克伯格：电脑从娃娃抓起,Educate-Mark-Zuckerberg,7,"<p><b>周五，马克-扎克伯格的父亲在接受广播采访时表示，很早就接触到电脑激发了他儿子对科技的兴趣，他还鼓励父母们在平衡“工作和玩”前提下多支持孩子们的长处和激情。</b></p>

<p>身为牙医的爱德华-扎克伯格博士表示，“我的孩子们都是围着我的办公室长大的，他们都很早就接触到电脑了。较早的接触电脑是有好处的。这一点很显然地加深了马克对科技的兴趣”。</p>

<p>老扎克伯格表示，1985年的时候就在自己的办公室装上电脑了。他的儿子马克-扎克伯格，Facebook共同创始人兼CEO，生于1984年，其后一直在他父亲牙科诊所的那幢房子里长大。</p>

<p>老扎克伯克在威彻斯特广播电台WVOX接受采访时做了一个小时的谈话。他说自己的电脑科学背景很有限，他自己在大学是学生物的。但是他说自己在“办公室通常是以技术为导向的”而且“总是装备最新的高科技工具”，包括早期的Atari 800个人电脑系统。他指出，“随机附带了一个编程光碟，我当时想马克可能会感兴趣，于是我就把相关知识传授给他了，马克就是从这开始起飞的”。他透露，马克曾经得到一本有关编程的书，但是“最终马克的编程能力是自学成材的”。</p>

<p>采访老扎克伯克的嘉宾以及很多打进电话的听众纷纷向牙医咨询如何培养孩子的，希望能得到些建议。老扎克伯克表示，“也许我能说的最好的事情是我和我的妻子都相信的一点，那就是不要强迫你的孩子，也不要试着把他们的生活引向某一个特定的方向，而是要去发现他们的长处是什么，并且支持他们的长处，支持他们会富有激情做的事情”。</p>

<p>老扎克伯克表示，他“不相信体罚在教育孩子上的作用”，但是他补充表示，孩子的某些行为需要父母让孩子明白“在那里当场指出这个行为是不能容忍的。如果你能够在孩子们的很小的时候告诉他们你不喜欢什么样的不良行为，他们$More$将会学会理解你在特定事情上的感受”。</p>

<p>老扎克伯克表示，自己不熟悉最近的畅销书《虎妈的战歌》(Battle Hymn of the Tiger Mother)的内容，《虎妈的战歌》建议一定程度得通过限制孩子们的课外活动来推进孩子们在专业上的发展。</p>

<p>老扎克伯克说，不想把自己描绘成一个儿童教育专家，但他表示：“我认为任何形式的极端家庭教育都是不好的。孩子们需要全面的发展。需要工作学习的时候，同样也需要玩的时候。”</p>

<p>他认为马克是“一个好学生，对数学和科学有特殊的喜好；同时还是一个好孩子，不喜欢吹嘘自己的成就”。他透露，在马克被提名为《时代》杂志年度人物的时候表现的很低调，他著名的儿子说“这一年肯定是很漫长的一年”。 </p>

<p>他说：“我对他的成就，还有其他孩子的成就都感到非常自豪”。马克的姐姐兰迪是Facebook销售主管，妹妹唐娜是普林斯顿大学的在读博士，最小的孩子阿丽尔是卡莱门麦肯纳学院（Claremont McKenna College）大三的学生，辅修计算机专业，现在正在找工作。</p>

<p>在被问及对电影《社交网络》（The Social Network）的评价时，老扎克伯克表示，“如果我坐下来，把它当成一部电影，而不是一部有关我儿子的故事来看的话，基本还能忍受”。他同时还指出， “电影中的有些描述没有准确的反映特定事情的发生，这一点让我比较纠结”。</p>

<p>当有听众打电话问，在他的孩子们都还小的时候，他的妻子凯伦是否工作时，老扎克伯克表示，“我的妻子是个超人。她工作家庭两不误。我们的情形很特别，因为我的办公室就在家里。要是可能的话我高度推荐这一点，因为这样的工作可以同时提供跟孩子们在一起的机会”。凯伦-扎克伯克是个精神病医生，她在她丈夫的诊所工作。</p>

<p>老扎克伯克表示，他现在会使用Facebook来促进自己的牙科诊疗，每天大概会在Facebook上花一个小时的时间。另外他仍然还在为马克做“日常牙科护理”。</p>

<p>原文链接：<a href=""http://www.cnbeta.com/articles/134039.htm"">http://www.cnbeta.com/articles/134039.htm</a></p>",2699,2011-02-05 18:12:08.703,1,A
101,Wayne,初为人父 - 人生中那些最重要的时刻,Freshman-Father,30,"<p>2011年1月25日晚7点36分，在经历了八个多月的期待之后（第一个月不知道<img style=""background-image:url(http://wayneye.com/Images/winLiveEmotions.gif);background-position:-0px -0px;width:19px;height:19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif"" />），我和老婆一起见证了一个新生命的诞生：一个小男孩，“虎尾巴”，也有一个他爸爸给他的名字：<strong><font color=""#608DF0"">叶皓宇</font></strong>。</p>

<p>谨以这篇Blog随笔记录这样一个我人生中最重要的时刻。</p>

<h3>前期准备</h3>

<p>我和老婆在准备期间做个很多功课，包括网上线下课程及请教身边朋友，同事等等，除了妈妈和宝宝的衣服、奶瓶，尿不湿等一些必备物品，一些辅助生产的东西包括一次性床垫，巧克力，野山参，喝水用的吸管等也都进行了采购。然后我们早已商量好并决定使用家庭化产房，我希望能够全程陪同亲爱的老婆，支持她，鼓励她，我相信能够在心理上很大程度上给她自信与勇气去面对这重要的、未知的第一次（事后老婆跟我说我的全程陪伴在很大程度上帮助了她<img  style=""background-image:url(http://wayneye.com/Images/winLiveEmotions.gif);background-position:-0px -0px;width:19px;height:19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif"" />），并且我们的目标是顺产，当时痛苦，但过后恢复快，身材恢复也快，而且不会在肚皮上留下难看的手术痕迹，总之，顺产是绿色的，是上帝赋予的能力，不到万不得已，我们都希望顺产。 
</p>

<h3>分娩过程</h3>

<p>25号早上起床时，老婆确实有说她晚上睡觉时感觉肚子里感觉跟平时不太一样，不过根据当时的情况我们两都不认为当天会发动，我照常去上班，大概在上午11点多，我们项目组正在开会，我接到老婆电话，说有见红，我于是赶紧驱车回家，回到家老婆正在洗澡，这个是她之前就盘算好了的--一旦有反应，马上洗澡，因为可能有段时间没法洗了<img style=""background-image:url(http://wayneye.com/Images/winLiveEmotions.gif);background-position:-0px -0px;width:19px;height:19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif"" />。等她洗完，她说没有感觉疼痛，于是我么就打算去医院检查一下，我们全家人（我爸妈都来上海了）包括老婆在内当时都觉得检查只是为了图个放心，估计会被医院礼貌“请回”。

</p>

<p>大概1点半左右到浦妇幼，挂了急诊后护士初检，爸妈和我在外等待了大概5分钟，老婆出来后表情十分惊讶，说护士说已经开了快三指，要立刻进产房，我们所有人都“啊啊啊”，于是紧紧张张办完手续就进了家庭化产房。
</p>

<p>这里插一段，对于老婆和我来说，这都是真正的第一次，她做了很多功课，了解得比我多，但理论和实践总是有或多或少的差距的。至于我，我真的不太清楚这会是怎么样一个过程，我只知道会很疼很疼（老婆之前跟我说如果人类的疼痛极限是10分，那么分娩就是接近10分），只希望尽自己最大努力陪着她，支持她顺利度过，顺利看到健康宝宝出生。
</p>

<p>进了产房后发现之前准备的待产物品还在后备箱，因为没人认为会这么快进产房！！！产房里估计是为了降低宝宝适应新环境的困难，空调温度设得比较高，大概28度吧，我作为“家属”必须头戴一个“帽子”（就是医院里医生，护士戴的那种，不过是一次性的），身穿一件大蓝褂，并且被告知不能随便出产房，因为外面有很多产妇。
</p>

<p>我和老婆在里面等待着，老婆的情况看上去还好，她说没有感觉到疼痛（先前在下面确定要进产房时我问护士，开了三指还感觉不到疼“算正常不？”，得到肯定的答复<img style=""background-image:url(http://wayneye.com/Images/winLiveEmotions.gif);background-position:-0px -0px;width:19px;height:19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif"" />），整个下午不知道是怎么过的，好像很快，又好像非常非常慢，护士大概2小时来检查一下宫口的情况，还有些文件要签字。这之间发生了一个小插曲，大概4点多钟时护士说老婆宫口开得不太快，拿一张文件让我签字确认，说是要人工破羊水，我在详细咨询了这个操作的利与弊之后我决定再观察2个小时（事后证明是比较合理的，人工破羊有点风险），我的出发点是我觉得老婆之前Always情况非常正常，我希望还是尽力靠她自己“自然的能力”来完成这件事情。
</p>

<p>大概到了5点左右，老婆的酸痛越来越严重（主要是酸），频率也越来越高$More$，后来大概每1,2分钟就要酸一次，每酸一次半分钟，我就开始给她按摩腰部帮她缓解下酸痛（老婆告诉我，她做的功课里有提到过感觉酸的产妇比感觉痛的产妇生产相对容易些，我希望在我们这是真的。）。到了大概6点左右医生检查说已经开到了10指，要开始接生了！她一面做些准备一面嘱咐老婆该怎样用力，这真是一段痛苦难熬的过程！我看着使尽浑身气力，早已满身大汗的老婆，只恨自己不能<strong>为她分担哪怕一点点疼痛，帮她使上一点点力气</strong>，我只能握着她的手，扶着她的肩，随着她的节奏（<a href=""http://baike.baidu.com/view/103295.htm"" target=""_blank"">宫缩</a>的节奏）为她鼓劲。。。

</p>

<p>经过了这一无比漫长的过程，到7点36分（事实上当时完全没有时间概念了，只希望老婆的痛苦快点过去，是小宝宝出来哇了之后医生问我时间我才看的），我亲眼看见宝宝出来了，老婆看上去似乎使完了所有的力气，满身是汗，精疲力尽，我告诉她：“宝宝已经出来了，老婆你真棒！”。医生吩咐我去拿婴儿的推车，我于是直接跑上7楼（产房在3楼，我觉得电梯慢），可是回来时路痴的毛病又犯，走迷路了<img style=""background-image:url(http://wayneye.com/Images/winLiveEmotions.gif);background-position:-171px -0px;width:19px;height:19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif"" />花了15分钟才回产房，医生已经在给老婆缝针了。我看到宝宝躺在一边，小手一捏一捏的，好像自己在玩，那一刻我看着小小的他，看着老婆，真是感慨万千：紧张，兴奋，激动，责任。。。 
</p>
<img class=""BlogImage""  src=""http://public.bay.livefilestore.com/y1purSnv10ogv6EHjgGRfYunrMJ4WwjEkAsOz890amrtF6zcwxudIJ5raSqSjFpB-N7M1-5LOKOM5zZBQ_lLULkhA/DSC_6880%20copy.jpg?psid=1"" alt=""小虎1"" />
<img class=""BlogImage""  src=""http://public.bay.livefilestore.com/y1pOf3QQvNvoLFKIwH4MHfGNtm6cMD1TwJSvAK6JDc3WWMUlUU2vaci6U2K8231EJT3JjOZJQbyJS_2DaFmqG7EMA/DSC_6871%20copy.jpg?psid=1"" alt=""小虎2"" />
<h3>这一夜，我不能寐</h3>

<p>缝针完毕、监护2个小时后，我们一家三口出了产房，爸妈在门口迎接我们，迎接这个让我们无比幸福的小生命，此时已经是10点多钟，我问了下护士台，说今天已经无法雇护工了（当时觉得没什么，事后发现如果能请的话，我绝对不会那样辛苦的说<img style=""background-image:url(http://wayneye.com/Images/winLiveEmotions.gif);background-position:-0px -0px;width:19px;height:19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif"" />），没有就没有吧，我能handle！
</p>

<p>那一整晚，除了兴奋与激动外，事情特别多，再加上没有经验，我忙得团团转。。老婆很虚弱，我要照顾，宝宝得喂奶，换尿片，护士会定时进来检查，等等等等，我大概只睡了2点40到3点40一个小时，早上7点多我就早早去询问护工的情况，被告知得10点多钟才有，我躺下时发现前些时刚刚好转的腰酸又复发了，而且更严重，腰酸得要断了。
</p>

<h3>展望将来</h3>

<p>我现在是一位父亲了，在往后的日子里，这个新的职能将会永远地伴随着我，我的一言一行都要对这个完整而幸福的家庭负责，我必须更加努力！
</p>
<img class=""BlogImage""  src=""http://public.bay.livefilestore.com/y1pcZYYkwrBidT2x0KUxUCHeH2Lbkijgp6jUMm7fecjIxlzjReykn_GElMFRVrYEbwcFHMuPS3_E7uPsSXs2nz3bg/DSC_6909%20copy.jpg?psid=1"" alt=""小虎的蛋糕"" />
<img class=""BlogImage""  src=""http://public.bay.livefilestore.com/y1pnmp8lYAkfy6emmT1wYu4l1_Nn8q9M9m-khfM0I4V9XNVvgXFeHiAwI1JpQMt6CbRAf4dcogAG0UdOS3o7Qd8Dg/DSC_6938%20copy.jpg?psid=1"" alt=""一家三口"" />
<p>网上戏言：“天朝有风险，投胎需谨慎”，不过我坚信：我没有投错胎，我儿子也没有！人没有机会选择自己的出身，但是每一个人，<strong>每时每刻都在书写自己的人生，每时每刻都有机会改变自己的命运</strong>！我这辈子可能没有机会坐在斯坦福纯净，高雅的课堂里，不过我可以为下一代创造尽可能好的教育和成长环境！也许，20年后，他能够实现他爹的梦想；40年后，他会像乔布斯一样，在<a href=""http://www.tudou.com/programs/view/XwfB67ef3Ro"" target=""_blank"">毕业典礼上给应届生们讲&quot;Stay hungry, stay foolish.&quot;</a>。我当然不会“逼迫”他去实现他爹的梦想（事实上我会给孩子相对宽松，自由的成长环境，他自己决定自己的人生与未来），但是我必须要尽我所能去<strong>维持这种梦想在理论上的可能性</strong>！！</p>
<img class=""BlogImage""  src=""http://ns5gpg.bay.livefilestore.com/y1pp76wQQ-5A11nzyObMKwEBaSLkFBFJ8PJyA3ea8PEgYpzHcLyf_1QCtoduGhOncU_SW_Fa2t15V5Pl5N8KxlIr9EWPQ5F7Hoa/P1160189.JPG?psid=1"" alt=""Stanford Map"" />
<img class=""BlogImage""  src=""http://ns5gpg.bay.livefilestore.com/y1pP2JrxGuHA6HtnHSsurc4fyCgNmv6GGHsCp8VbTJtXIsGjQjldNsgouFnGFdny6hRaFcRQAfEnxD_j-CPT9wl9z1H8ouaw4p_/P1160194.JPG?psid=1"" alt=""Stanford Campus"" />
<p><b>后记：为了纪念这一重要时刻，宝宝他妈也非常详细记录了这一天，链接地址：<a href=""http://wayneye.com/Blog/Diary-Of-Our-Little-Tiger-Birth /"">http://wayneye.com/Blog/Diary-Of-Our-Little-Tiger-Birth</a> 有兴趣的朋友们可以看看。</b></p>",5525,2011-02-06 17:19:05.770,1,A
102,Wendy,初为人母 - 我家小虎顺产记,Diary-Of-Our-Little-Tiger-Birth,30,"<p>今天是顺产后的第12天了，月子里的事情稍微理顺了些，在公公婆婆和老公的悉心照料下，人也恢复有精神，该是时候交作业去记录生命中那最重要的一天，作为对自己生命中一个重要里程碑的纪念^_^。</p>
  <p>2011年1月25日，预产期前一天，终于盼来了宝宝发动的信号。从上午11：00见红到晚上7：36宝宝出生，整个生产过程（PS：医学上分娩过程的三个产程：第一产程，从规律性宫缩至宫口全开；第二产程，胎儿娩出；第三产程，胎盘娩出；）共计历时八个多小时，外加产后二十多分钟的缝针和产后2个小时的观察时间，这些对我来讲按照痛苦指数可分为以下四个阶段：</p>

  <h3>一、谈笑风生阶段</h3>

  <p> 11：00 我还赖在床上，由于前一晚肚子一直硬邦邦的，外加些微的腰酸，没有休息好，所以平日里尽量陪老公起床吃早餐的我真的是懒得动了，外加宝宝一夜几乎没有胎动，我很是担心，用胎心仪听完宝宝咚咚有力的心跳后，还是不放心地晃晃肚子，以此希望宝宝动一动来抚平我那颗悬着的心。这一晃不要紧，宝宝不但没动，并且下身哗哗的流出一小股微红的液体。我不确定到底是见红了，还是羊水破了。没关系，平时看的一些理论知识现在派上用场了，我很镇定地先等了等，去分辨到底是哪一种，以便采取不一样的措施。我先用纸巾擦干净下身，坐立一会，看看是否还有液体流出，结果等了一会儿没见再流出来，便断定不是羊水破了，只是见红而已。于是喊来婆婆，告之了一下情况，然后得出一致结论是见红了，宝宝应该就快要出来了。根据我学习来的分娩知识，初产妇从见红到宝宝出来一般要一两天，而从出现有规律性宫缩到宫口全开要不11-12小时，所以我一点都不急。起床后第一件事就是不慌不忙地给老公打了个电话，报备一下情况说见红了，让他方便的时候可以开车回家；不过老公态度很是积极，说虽然当时在开会，但还是决定马上回家。然后就跟婆婆说用排骨汤下一大碗面条，由于怕月子期间有段时间不能洗澡，于是趁婆婆做饭时，我正好去美美地洗个澡。澡还没洗完，老公就已经回来了，由于平日里特别是孕后期出于安全等原因我们都是一起洗澡的，所以老公到家后就来洗手间问我是否要帮忙。我很淡定地回绝了，说状况良好，里面水气大，他穿着衣服就没必要进来了。洗完穿戴好一切后，婆婆已经把面条做好了。一家人边吃边商量着接下来该怎么办。我当时的意见是，目前只是见红，又不多，可以再等等，待出现五分钟一次规律性宫缩疼痛或如例假第二天似地一下出很多血又或才其它突发情况如羊水破了再去医院也不迟，我们家离医院开车也就二十分钟不到，所以不用急着去，并且很有把握地讲，这个样子就算去了，依据我在篱笆上看到的大多数例子，也会被医生给轰回来。老公也赞同我的意见，但公公出于对宝宝安全的考虑，建议还是先去医院看一下医生怎么说，就算被轰回来也没关系。婆婆也赞成公公，觉得在医院放心些。公公是一家之主，我们都非常尊重他，并且和老公在一起三年来的一切，也证明公公的决定确实都是很睿智很有先见之明的。于是吃完饭，就把洗漱用品和之前准备的待产包带上，一家人浩浩荡荡朝浦东妇幼保健院出发了。</p>

  <p> 12：30 来到浦妇幼，我们让公公婆婆在一楼大厅先坐着等会。我和老公挂完号，按医院英明地生产住院不用排队的规定直接找了个产科医生，把情况说明了一下，顺利被医生接收入院了。接来下就是去急诊室填写住院单，小护士问道，正好有最后一个单间要不要？老公迅速欣然答道，要；其实我觉得双人间就不错了，单间有点小贵；但老公坚持，他说这个省啥，住着舒服才最重要（真的是觉得老公在我身上花钱，从来都是毫不吝啬，而他自己买衣服那怕是超过一百块的，都要考虑了再考虑，对他这点真的是内心充满了感激）。确定后房间，跟老公去窗口交完押金七千大洋后又回到急诊室，小护士让我跟她进旁边的小房间一下；我很警戒地弱弱问了一下，不会是检查宫口吧？由于篱笆上的贴子看多了，知道宫口检查是有点小痛的，所以有点点怕怕的。无奈必经的一小关，乖乖地跟着小护士进了房间，褪去一条腿上的裤子躺在床上（没办法的，再要面子和尊严这时候也只能厚着脸皮任人宰割了<img style=""background-image:url(http://wayneye.com/Images/winLiveEmotions.gif);background-position:-0px -0px;width:19px;height:19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif"" />）。小护士一边手上准备着消毒戴手套一边问我几个问题：问题1，最近有同房过吗？答曰，有（知道有点羞羞，脸红ing；不过看客筒子们莫多想，本人完全是为了催产需要。不信你查查，自然催产的三个办法就是同房，多散步及还有啥的（不好意思，俺忘了））；问题2，有做过手术吗？答曰：近视眼手术算吗？护士回，这个不算。不过她又追问到，什么时候在哪里做的？我回道，08年2月14号在爱尔眼科（PS：之所以时间记得这么真切，是因为那是老公送我的情人节礼物$More$，呵呵）；小护士说这个不算啥手术，没关系的。但她又追问了一下医院名称，外加还问了费用；我回过神来，定定眼看看她，秀气的脸宠上戴着表镜框眼镜，估计她是对近视治疗手术很感兴趣，于是跟她多描述了两句。一问一答间，小护士宫口检查都做完了，除了一点点不适外，没有感到痛疼；只见小护士很诧异地说，开了两指多，快三指了，看你的表情一点都不难受呀？我回道：是没啥难受的;小护士继续问道,那有没有规律性宫缩痛疼？我回道：痛倒是不痛，倒是有点轻微的腰酸；&quot;腰酸也是宫缩的一种表现形式，那大概多久一次&quot;小护士负责任地问着；我沉思了一下，不确定地说，这个我倒没有太在意，好像不是很频繁，也没见啥规律，可能要二十来分钟吧？呵呵，估计这小护士被我的回答弄得有点不敢肯定自已的检查结果，于是换来另一小护士再次检查一下宫口，得出结论，确实是开了快三指了（据我所知，宫口开了两指就可以进产房了<img style=""background-image:url(http://wayneye.com/Images/winLiveEmotions.gif);background-position:-0px -0px;width:19px;height:19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif"" />）。穿戴好随小护士回到急诊室，按她吩咐腰酸了就告诉她，她来确认一下，宫缩之间的间隔时间（估计她是不相信，都开三指了，还如我所说没规律宫缩，可能要二十多分钟才腰稍微酸一下，呵呵）。她一边看着表一边跟我瞎聊着说，有的人生孩子简直跟唱戏似的，而我一脸的轻松，看不出一点难受的感觉，幸运啊！还有房间也是最后一间了，剩下的只有八人间或走廊加床了，如此幸运，宝宝干脆就叫叶幸运算了。果然，后面一个人来办理入院，只听旁边另一小护士说，只剩下八人间和加床，你要哪一样。我听后心里暗自庆醒自已的好运气。这时老公答话了，说叶幸运这名字太土了，不叫的。哈哈，这傻老公，还真当真了。跟护士聊着聊着，腰酸又开始了，一掐表，才五分钟就一次，这哪有二十分钟，护士暗自道。我笑着说，看我神经大条的，呵呵。于是护士赶紧办理了所有手续，然后吩咐我说，直接进产房吧，等生好了再去病房。我忙说道，我要家庭化产房和无痛分娩云云。小护士说去产房吧，找产房太夫他们会安排的。于是一行人上了电梯来到三楼，我和老公进产房找太夫，然后让公公婆婆去车里取来待产包和行李直接拿到七楼病房。</p>

  <p> 下午1：50，顺利躺进了家庭化产房（不得不说又是很幸运的一件事，浦妇幼只有周一至周五白天早八点至下午四点期间开二指需要进产房的孕妇才有家庭化产房，无痛分娩和导乐这些特别服务，其它时间只能一个人在普通产房熬着），之前检查过已经快开三指了，而无痛分娩麻药是需要在三指和四指之间打的，晚了就不行。所以我就赶尽跟产房太夫说，我要无痛分娩。医生看我一脸轻松样，和老公还有说有笑的，问我，你痛吗？我说不痛，就一点腰酸。医生说，不痛的话那就不需要打麻药了，打了不好生。于是省去无痛麻药，给我绑上胎心监测仪测胎心。我无聊地躺在产床上，记得上次上分娩课时，上课医生说，这床是日本进口的。老公无聊的，研究了一下产床，婴儿床以及其它房内电器。而我呢，拿着老公的手机斗了几盘地主。后面两人都无聊的，在我的要求下，让老公给我讲点东东。他讲了些大陆漂移，版块理论啥的。再后面还是无聊的，让老公拿手机读新闻，上开心网了。这种状态一直维持到3：50，医生再次检查宫口，期间签了一些乱七八糟的单子。</p>

  <p> 3：50医生检查宫口时，说宫口开的有点慢，只开了四指，理论上，两个小时应该要开到五六指啥的。然后问我们是否要先破水，这样可以加快宫缩。我问人工破水会痛吗？医生说不痛。而老公则细心地详细询问了一下，人工破水是否有负面影响。答曰，如果宝宝是隐性脐带脱落的话，理论上则有可能造成宝宝缺氧，不过这是极少数。老公想了想，说还是想顺其自然，决定再观察一个小时，如果产程太慢了再说。医生说马上快交班了，那她注明一下情况，省得接手的医生说产程慢，而她为啥没采取措施。我们答，好的。于是又恢复到之前的状态，和老公瞎聊着天，顺带看着墙上的钟来计算宫缩时间。</p>

  <p> 大概到了4：30的时候，医生来检检宫口说开了五六指了，产程不算太慢，可以先不用人工破水了。确实那时我已经感觉宫缩有点密了，三分钟一次，然后腰酸也逐渐厉害了，我让老公帮我摸腰以减轻酸楚感。但此时的腰酸还是可以忍受的，每三钟一次，一次也就二十秒。我深呼吸两次，老公按几下就过去了。</p>

  <h3>二、疼痛难忍阶段</h3>

  <p> 这个阶段大概从4：45到6点多一点，持续了一个半小时，后面平均每一分钟就痛一次，每次持续三十秒左右，老公帮我的腰部按摩已无法让我轻松半点。那时候我大概在想，这辈子没有如此难受过，真的是无法用语言形容。我也说不清是腰酸还是腰痛了，只知道每一秒都是煎熬。难受的有时实在忍不住，只能轻声叫着说，老公，我好痛，帮我按两下。然后紧握着他的手，深呼吸地数到三十，等这一波宫缩过去，舒坦半分钟，然后迎接下一波宫缩。其实到5：30的时候，我实在受不了了，让老公按铃找来医生说好难受。医生来了，说不痛怎么能生出孩子来。但还是在我的央求下检查了一下宫口，说已开了七八指了，让我有严重便意的时候再叫她们。然后就出去了。快到6点，实在忍不了了，感觉中好像有点要便便了，再次按铃叫来医生。医生无奈中，又再次检查了一下，非常庆幸的结果是，宫口已全开十指，可以进入下一产程，用力把宝宝摒出来。</p>

  <h3>三、筋疲力尽阶段</h3>

  <p> 十指已开，医生调整好产床，摆好我的腿姿，给我下身做了一些产前准备工作，然后给我人工破了水，吩咐我宫缩时深吸一口气，摒住用长力把宝宝往产道外推。破好水后，我感觉腰不酸了，一点都不难受了。所以不知道啥时候是宫缩了，开始不得要领的我，在医生的大声喝斥加威胁中，胡乱摒了几次。接生医生说，你的条件这么不好，孩子不小，盆股不大，你真的这么想顺吗？给你两个小时时间，如果生不出来就转去剖了，或用产钳把宝宝夹出来。那时的我，一门心思只想，我要把宝宝顺出来，一定要顺出来，转去剖的话，我前面的苦全部白受了；而用产钳的话，轻则把宝宝头型弄坏，重则影响宝宝智力，为了宝宝，我也要努力，九个多月的孕期都过来了，不能毁在这一下子。这种信念支持着我，我哀求着医生说，再给我指导一下用力方法，我一定配合好好把宝宝摒出来。医生说了一遍，然后看我摒了几下，估计是觉得不满意也没耐心，就出去了。我按着医生教的方法，当感觉到有些微腰酸时就吸气，摒住不呼气然后用长气拼命用力把宝宝往下推。每一次摒力，全身的力气都使尽了，人完全想瘫下来，那种感觉犹如一个体力不支者在被逼无奈的情况下，逃命似地快速跑完一百米后，体力全无；但下一次为了把宝宝产出，又需要重新再跑一次；如此几番地摒了几十次，医生进出了两三次很轻描淡写地看了一下情况，说她不在的时候，貌似我用力的方法还比较正确，胎儿已经下来了很多，让我继续努力。之后就出去了。还好有老公在旁边，一直鼓励着我，一起和我使着劲，这给了我莫大的安慰和动力。终力在7：20左右的时候医生说看到宝宝的脑袋了，可以开始消毒接生了，让我先不用用力了。我感觉到医生在我下身放置了一些消过毒的布，消过毒后打了针小麻药，就开剪会阴了。都说会阴剪切不痛，这真的不假，因为之前的痛疼太过了，然后人又完全没有力气了，再加上麻药的作用，我毫无被剪的感觉。一切就绪后，如医生所说，轻轻的用了两下力就感觉呼噜一下子宝宝出来了。没过两秒就听到响亮的婴儿哇哇声。孩子终于平安出来了，那颗悬着的心放下了，人也如滩烂泥一样垮下来了，但心里还是在想这一切很快就要结束了。</p>

  <h3>四、胜利在望阶段</h3>

  <p> 孩子出来后，医生帮我按了两下肚子就把胎盘娩出了，剪了宝宝的脐带，又稍微帮小家伙檫了下。我趁被闲置之余用微弱的声音问老公，是男孩还是女孩？老公不确定地说，好像是男孩；才说完，就见医生把宝宝在我眼前晃了一下屁屁，说是个男孩，3220G。当时的想法是，好的，知道性别了。不过这对我完全不重要，孩子是平安的被顺产出来的，这才是我希望的。我闭上眼睛，等着最后一道，缝针；本以为也就缝几针，但实际过程远远超过预期，全程大概不下二十分钟。由于麻药已过，我能感觉到医生每次下针和拉线的痛疼。我期间问过医生，问为什么要缝这么久？并且感觉是越来越疼。得到的回复是，总共要缝三层，由里往外一层一层缝，越到外面的皮肤越敏感，另外再加上我生产时出血过多，缝针时血也一直流不止，所以缝针过程不太顺利，她需要不断弄干净血后再接着缝，致使过程延长了一些。我想马上就快好了，忍一针就少一针了，于是在医生缝每一针时，我也只咬了咬牙深呼吸一口，一声不响地任其摆布着。在缝针过程，由于老公被支出去回病房拿婴儿床，出去了N久都没回来，心里空落落的。医生说，怎么你老公刚才积极的很，现在拿个婴儿床半天不回来？我也不知道具体原因，不过我猜那路痴可能是迷路了。这节骨眼上，希望他早点找到路推婴儿床回来，我真的很需要他，从未如此地急切地期盼着他在身边。针也快缝完了，医生不断地用力压我的子宫，能感觉每次都有大量的血流出。老公也终于推回来了婴儿床。我静静地输着液，等待着这一切的结束。终于医生说弄好了，把产床调整了一下，将我的双腿自然并拢，然后吩咐我老公帮我按肚子上的硬块（其实那是子宫）挤出里面的淤血，等观察两小时。说完就出去了。产房里只剩下我们一家三口，老公帮我一边压着肚子，一边看着睡在旁边婴儿床上的儿子；我有气无力地躺在产床上“享受”着一切结束后的解脱。记得大概我迷糊了半个多小时，人缓过一点点劲后，就让老公把宝宝推过来看一眼。小家伙乖乖躺着，小手在动啊动的，没有发出任何声响。看着这个在我肚子里待了九个多月的小东西，我内心感觉很是温暖，只知道为了他一切痛苦都值了。</p>

  <p> 两个小时的观察时间很快很顺利很轻松地就过去了，医院的护工阿姨让我自已爬上推车，我使用全身力气一点点地挪了上去，然后就被她呼呼地快速推出了产房。在产房门口，看到了焦急等待多时的公公婆婆。我无力地眠了眠嘴，说恭喜爸妈做爷爷奶奶了。然后公婆示意我说，辛苦了。就一并回到了病房，真正圆满地结束了生产的整个过程。</p>

  <p><b>后记：为了纪念这一重要时刻，宝宝他爸也在他的博客上详细记录了这一天，现附上链接地址：<a href=""http://wayneye.com/Blog/Freshman-Father/"">http://wayneye.com/Blog/Freshman-Father/</a>&nbsp;有兴趣的姐妹们可以看看。</b></p>",3606,2011-02-06 22:17:59.190,1,A
103,Wayne,A complete Impersonation Demo in C#.NET,DotNet-Impersonation-Demo,27,"<p>Under some scenarios we need impersonate another Windows account and do some work under that user’s session, for example:</p>

<ul>
<li>An enterprise ASP.NET web application provides server administrators’ ability to access the server under some specific privilege set; Server admin input their NT account information (<strong>domain\account + password</strong>) on the page, we need get WinNT <a href=""http://msdn.microsoft.com/en-us/library/Aa374909.aspx"">Access Token</a> and then impersonate this server user, so that we acquire its specific privilege and do the things <strong>ONLY THIS ACCOUNT CAN DO.</strong> </li>
<li>We developed a Windows Service which needs internet access periodically, but a specific user sets an <strong>Sock5 proxy</strong> to access internet, then your Windows Service needs to know the Socks proxy information so that it could access internet, you must impersonate this user and read the settings. 
</li>
</ul>
  <h3>Impersonation definition</h3>

  <p>Definition copied from: <a href=""http://msdn.microsoft.com/en-us/library/aa376391(VS.85).aspx"">http://msdn.microsoft.com/en-us/library/aa376391(VS.85).aspx</a></p>

  <blockquote>
    <p><strong>Impersonation is the ability of a thread to execute using different security information than the process that owns the thread. Typically, a thread in a server application impersonates a client. This allows the server thread to act on behalf of that client to access objects on the server or validate access to the client’s own objects.</strong></p>
  </blockquote>

  <p>I read many articles and blogs and wrote an <strong>ImpersonateHelper</strong> class to do impersonation work, during the investigating I noticed that very few articles/blogs refer a complete impersonation process, so I decided to write one that refer as more details as I can, and actually my code was a code snippet combination came from 10+ sources<img style=""background-image:url(http://wayneye.com/Images/winLiveEmotions.gif);background-position:-0px -0px;width:19px;height:19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif"" />.</p>

  <h3>Functionality</h3>

  <p>I create a local user: <strong>TempUser</strong> which belongs to “Administrators” (make sure log on TempUser at least once), I logged on as my own account and I am going to impersonate <strong>TempUser</strong> and do two things:</p>
$More$
  <ol>
    <li>Create a folder “C:\TempFolder”, modify its default privilege, ONLY <strong>TempUser</strong> has full control of it, I will create a text file under this folder after impersonating to <strong>prove impersonation is successfully</strong>. </li>

      <br /><img title=""Tempfolder1"" border=""0"" alt=""Tempfolder1"" src=""http://wayneye.files.wordpress.com/2010/10/tempfolder1_thumb.png?w=527&amp;h=543"" width=""527"" height=""543"" /> 

      <p><strong>Notes</strong>: After setting <strong>TempUser</strong> as the only owner, my current account cannot access this folder except privilege promotion (I disabled UAC, if UAC is enabled, a prompt window will pop up and as for Admin confirm). 

        <br />

        <br /><img title=""Tempfolder2"" border=""0"" alt=""Tempfolder2"" src=""http://wayneye.files.wordpress.com/2010/10/tempfolder2_thumb.png?w=370&amp;h=195"" width=""370"" height=""195"" /></p>

      <p>In additional, I tried to access this folder programmatically <strong>under my account</strong>, <strong>UnauthorizedAccessException</strong>will be thrown! 

        <br />

        <br /><img title=""Unauthorized"" border=""0"" alt=""Unauthorized"" src=""http://wayneye.files.wordpress.com/2010/10/unauthorized_thumb.png?w=495&amp;h=319"" width=""495"" height=""319"" /></p>

    <li>I will access <strong>TempUser’s</strong> <strong>HKEY_CURRENT_USER</strong> and do registry key creation, reading and deleting. </li>
</ol>
      <h3>Code Snippet</h3>
We need invoke three very famous Win32 API: <a href=""http://msdn.microsoft.com/en-us/library/aa378184(VS.85).aspx"">LogonUser</a>, <a href=""http://msdn.microsoft.com/en-us/library/aa446616(VS.85).aspx"">DuplicateToken</a> and <a href=""http://msdn.microsoft.com/en-us/library/aa379317(VS.85).aspx"">RevertToSelf</a>. 

  <pre style=""background: #f6f8ff; color: #000020""><span style=""color: #308080"">[</span>DllImport<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">advapi32.dll</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">)</span><span style=""color: #308080"">]</span>
<span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">static</span> <span style=""color: #200080; font-weight: bold"">extern</span> <span style=""color: #200080; font-weight: bold"">int</span> LogonUser<span style=""color: #308080"">(</span>String lpszUserName<span style=""color: #308080"">,</span>
    String lpszDomain<span style=""color: #308080"">,</span>
    String lpszPassword<span style=""color: #308080"">,</span>
    <span style=""color: #200080; font-weight: bold"">int</span> dwLogonType<span style=""color: #308080"">,</span>
    <span style=""color: #200080; font-weight: bold"">int</span> dwLogonProvider<span style=""color: #308080"">,</span>
    <span style=""color: #200080; font-weight: bold"">ref</span> IntPtr phToken<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
<span style=""color: #308080"">[</span>DllImport<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">advapi32.dll</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">,</span> CharSet <span style=""color: #308080"">=</span> CharSet<span style=""color: #308080"">.</span>Auto<span style=""color: #308080"">,</span> SetLastError <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">true</span><span style=""color: #308080"">)</span><span style=""color: #308080"">]</span>
<span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">static</span> <span style=""color: #200080; font-weight: bold"">extern</span> <span style=""color: #200080; font-weight: bold"">int</span> DuplicateToken<span style=""color: #308080"">(</span>IntPtr hToken<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">int</span> impersonationLevel<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">ref</span> IntPtr hNewToken<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

<span style=""color: #595979"">///A process should call the RevertToSelf function after finishing any </span>
<span style=""color: #595979"">///impersonation begun by using the DdeImpersonateClient, ImpersonateDdeClientWindow, </span>
<span style=""color: #595979"">///ImpersonateLoggedOnUser, ImpersonateNamedPipeClient, ImpersonateSelf, </span>
<span style=""color: #595979"">///ImpersonateAnonymousToken or SetThreadToken function.</span>
<span style=""color: #595979"">///If RevertToSelf fails, your application continues to run in the context of the </span>
<span style=""color: #595979"">///client, which is not appropriate. You should shut down the process if RevertToSelf fails.</span>
<span style=""color: #595979"">///RevertToSelf Function: http://msdn.microsoft.com/en-us/library/aa379317(VS.85).aspx</span>
<span style=""color: #595979"">///A boolean value indicates the function succeeded or not.</span>
<span style=""color: #308080"">[</span>DllImport<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">advapi32.dll</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">,</span> CharSet <span style=""color: #308080"">=</span> CharSet<span style=""color: #308080"">.</span>Auto<span style=""color: #308080"">,</span> SetLastError <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">true</span><span style=""color: #308080"">)</span><span style=""color: #308080"">]</span>
<span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">static</span> <span style=""color: #200080; font-weight: bold"">extern</span> <span style=""color: #200080; font-weight: bold"">bool</span> RevertToSelf<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

<span style=""color: #308080"">[</span>DllImport<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">kernel32.dll</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">,</span> CharSet <span style=""color: #308080"">=</span> CharSet<span style=""color: #308080"">.</span>Auto<span style=""color: #308080"">,</span> SetLastError <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">true</span><span style=""color: #308080"">)</span><span style=""color: #308080"">]</span>
<span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">static</span> <span style=""color: #200080; font-weight: bold"">extern</span> <span style=""color: #200080; font-weight: bold"">bool</span> CloseHandle<span style=""color: #308080"">(</span>IntPtr handle<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span></pre>

  <p><strong>An important notes</strong>: in order to access HKCU, we need invoke another Win32 API: <a href=""http://msdn.microsoft.com/en-us/library/bb762281(VS.85).aspx"">LoadUserProfile</a>,<strong> to acquire the handle of HKCU under TempUser</strong>, code below, as I highlighted line 45 and 49, after invoking LoadUserProfile, hProfile will be set handle to HKCU:</p>

  <pre style=""background: #f6f8ff; color: #000020""><span style=""color: #308080"">[</span>StructLayout<span style=""color: #308080"">(</span>LayoutKind<span style=""color: #308080"">.</span>Sequential<span style=""color: #308080"">)</span><span style=""color: #308080"">]</span>
<span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">struct</span> ProfileInfo
<span style=""color: #406080"">{</span>
    <span style=""color: #595979"">///</span>
    <span style=""color: #595979"">/// Specifies the size of the structure, in bytes.</span>
    <span style=""color: #595979"">///</span>
    <span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">int</span> dwSize<span style=""color: #406080"">;</span>

    <span style=""color: #595979"">///</span>
    <span style=""color: #595979"">/// This member can be one of the following flags: PI_NOUI or PI_APPLYPOLICY</span>
    <span style=""color: #595979"">///</span>
    <span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">int</span> dwFlags<span style=""color: #406080"">;</span>

    <span style=""color: #595979"">///</span>
    <span style=""color: #595979"">/// Pointer to the name of the user.</span>
    <span style=""color: #595979"">/// This member is used as the base name of the directory in which to store a new profile.</span>
    <span style=""color: #595979"">///</span>
    <span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">string</span> lpUserName<span style=""color: #406080"">;</span>

    <span style=""color: #595979"">///</span>
    <span style=""color: #595979"">/// Pointer to the roaming user profile path.</span>
    <span style=""color: #595979"">/// If the user does not have a roaming profile, this member can be NULL.</span>
    <span style=""color: #595979"">///</span>
    <span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">string</span> lpProfilePath<span style=""color: #406080"">;</span>

    <span style=""color: #595979"">///</span>
    <span style=""color: #595979"">/// Pointer to the default user profile path. This member can be NULL.</span>
    <span style=""color: #595979"">///</span>
    <span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">string</span> lpDefaultPath<span style=""color: #406080"">;</span>

    <span style=""color: #595979"">///</span>
    <span style=""color: #595979"">/// Pointer to the name of the validating domain controller, in NetBIOS format.</span>
    <span style=""color: #595979"">/// If this member is NULL, the Windows NT 4.0-style policy will not be applied.</span>
    <span style=""color: #595979"">///</span>
    <span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">string</span> lpServerName<span style=""color: #406080"">;</span>

    <span style=""color: #595979"">///</span>
    <span style=""color: #595979"">/// Pointer to the path of the Windows NT 4.0-style policy file. This member can be NULL.</span>
    <span style=""color: #595979"">///</span>
    <span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">string</span> lpPolicyPath<span style=""color: #406080"">;</span>

    <span style=""color: #595979"">///</span>
    <span style=""color: #595979"">/// Handle to the HKEY_CURRENT_USER registry key.</span>
    <span style=""color: #595979"">///</span>
    <span style=""color: #200080; font-weight: bold"">public</span> IntPtr hProfile<span style=""color: #406080"">;</span>
<span style=""color: #406080"">}</span>

    <span style=""color: #308080"">[</span>DllImport<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">userenv.dll</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">,</span> SetLastError <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">true</span><span style=""color: #308080"">,</span> CharSet <span style=""color: #308080"">=</span> CharSet<span style=""color: #308080"">.</span>Auto<span style=""color: #308080"">)</span><span style=""color: #308080"">]</span>
    <span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">static</span> <span style=""color: #200080; font-weight: bold"">extern</span> <span style=""color: #200080; font-weight: bold"">bool</span> LoadUserProfile<span style=""color: #308080"">(</span>IntPtr hToken<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">ref</span> ProfileInfo lpProfileInfo<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

    <span style=""color: #308080"">[</span>DllImport<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">Userenv.dll</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">,</span> CallingConvention <span style=""color: #308080"">=</span> CallingConvention<span style=""color: #308080"">.</span>Winapi<span style=""color: #308080"">,</span> SetLastError <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">true</span><span style=""color: #308080"">,</span> CharSet <span style=""color: #308080"">=</span> CharSet<span style=""color: #308080"">.</span>Auto<span style=""color: #308080"">)</span><span style=""color: #308080"">]</span>
    <span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">static</span> <span style=""color: #200080; font-weight: bold"">extern</span> <span style=""color: #200080; font-weight: bold"">bool</span> UnloadUserProfile<span style=""color: #308080"">(</span>IntPtr hToken<span style=""color: #308080"">,</span> IntPtr lpProfileInfo<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span></pre>

  <p><strong>Code to execute impersonation</strong>:</p>

  <pre style=""background: #f6f8ff; color: #000020"">WindowsIdentity m_ImpersonatedUser<span style=""color: #406080"">;</span>
            IntPtr token <span style=""color: #308080"">=</span> IntPtr<span style=""color: #308080"">.</span>Zero<span style=""color: #406080"">;</span>
            IntPtr tokenDuplicate <span style=""color: #308080"">=</span> IntPtr<span style=""color: #308080"">.</span>Zero<span style=""color: #406080"">;</span>
            <span style=""color: #200080; font-weight: bold"">const</span> <span style=""color: #200080; font-weight: bold"">int</span> SecurityImpersonation <span style=""color: #308080"">=</span> <span style=""color: #008c00"">2</span><span style=""color: #406080"">;</span>
            <span style=""color: #200080; font-weight: bold"">const</span> <span style=""color: #200080; font-weight: bold"">int</span> TokenType <span style=""color: #308080"">=</span> <span style=""color: #008c00"">1</span><span style=""color: #406080"">;</span>

            <span style=""color: #200080; font-weight: bold"">try</span>
            <span style=""color: #406080"">{</span>
                <span style=""color: #200080; font-weight: bold"">if</span> <span style=""color: #308080"">(</span>RevertToSelf<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span>
                <span style=""color: #406080"">{</span>
                    Console<span style=""color: #308080"">.</span>WriteLine<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">Before impersonation: </span><span style=""color: #800000"">&quot;</span> <span style=""color: #308080"">+</span>
                                      WindowsIdentity<span style=""color: #308080"">.</span>GetCurrent<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">.</span>Name<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

                    String userName <span style=""color: #308080"">=</span> <span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">TempUser</span><span style=""color: #800000"">&quot;</span><span style=""color: #406080"">;</span>
                    IntPtr password <span style=""color: #308080"">=</span> GetPassword<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

                    <span style=""color: #200080; font-weight: bold"">if</span> <span style=""color: #308080"">(</span>LogonUser<span style=""color: #308080"">(</span>userName<span style=""color: #308080"">,</span> Environment<span style=""color: #308080"">.</span>MachineName<span style=""color: #308080"">,</span> <span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">!@#$QWERasdf</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">,</span> LOGON32_LOGON_INTERACTIVE<span style=""color: #308080"">,</span>
                                  LOGON32_PROVIDER_DEFAULT<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">ref</span> token<span style=""color: #308080"">)</span> <span style=""color: #308080"">!</span><span style=""color: #308080"">=</span> <span style=""color: #008c00"">0</span><span style=""color: #308080"">)</span>
                    <span style=""color: #406080"">{</span>
                        <span style=""color: #200080; font-weight: bold"">if</span> <span style=""color: #308080"">(</span>DuplicateToken<span style=""color: #308080"">(</span>token<span style=""color: #308080"">,</span> SecurityImpersonation<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">ref</span> tokenDuplicate<span style=""color: #308080"">)</span> <span style=""color: #308080"">!</span><span style=""color: #308080"">=</span> <span style=""color: #008c00"">0</span><span style=""color: #308080"">)</span>
                        <span style=""color: #406080"">{</span>
                            m_ImpersonatedUser <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">new</span> WindowsIdentity<span style=""color: #308080"">(</span>tokenDuplicate<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
                            <span style=""color: #200080; font-weight: bold"">using</span> <span style=""color: #308080"">(</span>m_ImpersonationContext <span style=""color: #308080"">=</span> m_ImpersonatedUser<span style=""color: #308080"">.</span>Impersonate<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span>
                            <span style=""color: #406080"">{</span>
                                <span style=""color: #200080; font-weight: bold"">if</span> <span style=""color: #308080"">(</span>m_ImpersonationContext <span style=""color: #308080"">!</span><span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">null</span><span style=""color: #308080"">)</span>
                                <span style=""color: #406080"">{</span>
                                    Console<span style=""color: #308080"">.</span>WriteLine<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">After Impersonation succeeded: </span><span style=""color: #800000"">&quot;</span> <span style=""color: #308080"">+</span> Environment<span style=""color: #308080"">.</span>NewLine <span style=""color: #308080"">+</span>
                                                      <span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">User Name: </span><span style=""color: #800000"">&quot;</span> <span style=""color: #308080"">+</span>
                                                      WindowsIdentity<span style=""color: #308080"">.</span>GetCurrent<span style=""color: #308080"">(</span>TokenAccessLevels<span style=""color: #308080"">.</span>MaximumAllowed<span style=""color: #308080"">)</span><span style=""color: #308080"">.</span>Name <span style=""color: #308080"">+</span>
                                                      Environment<span style=""color: #308080"">.</span>NewLine <span style=""color: #308080"">+</span>
                                                      <span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">SID: </span><span style=""color: #800000"">&quot;</span> <span style=""color: #308080"">+</span>
                                                      WindowsIdentity<span style=""color: #308080"">.</span>GetCurrent<span style=""color: #308080"">(</span>TokenAccessLevels<span style=""color: #308080"">.</span>MaximumAllowed<span style=""color: #308080"">)</span><span style=""color: #308080"">.</span>User<span style=""color: #308080"">.</span>
                                                          Value<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

                                    #region LoadUserProfile
                                    <span style=""color: #595979"">// Load user profile</span>
                                    ProfileInfo profileInfo <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">new</span> ProfileInfo<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
                                    profileInfo<span style=""color: #308080"">.</span>dwSize <span style=""color: #308080"">=</span> Marshal<span style=""color: #308080"">.</span>SizeOf<span style=""color: #308080"">(</span>profileInfo<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
                                    profileInfo<span style=""color: #308080"">.</span>lpUserName <span style=""color: #308080"">=</span> userName<span style=""color: #406080"">;</span>
                                    profileInfo<span style=""color: #308080"">.</span>dwFlags <span style=""color: #308080"">=</span> <span style=""color: #008c00"">1</span><span style=""color: #406080"">;</span>
                                    Boolean loadSuccess <span style=""color: #308080"">=</span> LoadUserProfile<span style=""color: #308080"">(</span>tokenDuplicate<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">ref</span> profileInfo<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

                                    <span style=""color: #200080; font-weight: bold"">if</span> <span style=""color: #308080"">(</span><span style=""color: #308080"">!</span>loadSuccess<span style=""color: #308080"">)</span>
                                    <span style=""color: #406080"">{</span>
                                        Console<span style=""color: #308080"">.</span>WriteLine<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">LoadUserProfile() failed with error code: </span><span style=""color: #800000"">&quot;</span> <span style=""color: #308080"">+</span>
                                                          Marshal<span style=""color: #308080"">.</span>GetLastWin32Error<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
                                        <span style=""color: #200080; font-weight: bold"">throw</span> <span style=""color: #200080; font-weight: bold"">new</span> Win32Exception<span style=""color: #308080"">(</span>Marshal<span style=""color: #308080"">.</span>GetLastWin32Error<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
                                    <span style=""color: #406080"">}</span>

                                    <span style=""color: #200080; font-weight: bold"">if</span> <span style=""color: #308080"">(</span>profileInfo<span style=""color: #308080"">.</span>hProfile <span style=""color: #308080"">=</span><span style=""color: #308080"">=</span> IntPtr<span style=""color: #308080"">.</span>Zero<span style=""color: #308080"">)</span>
                                    <span style=""color: #406080"">{</span>
                                        Console<span style=""color: #308080"">.</span>WriteLine<span style=""color: #308080"">(</span>
                                            <span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">LoadUserProfile() failed - HKCU handle was not loaded. Error code: </span><span style=""color: #800000"">&quot;</span> <span style=""color: #308080"">+</span>
                                            Marshal<span style=""color: #308080"">.</span>GetLastWin32Error<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
                                        <span style=""color: #200080; font-weight: bold"">throw</span> <span style=""color: #200080; font-weight: bold"">new</span> Win32Exception<span style=""color: #308080"">(</span>Marshal<span style=""color: #308080"">.</span>GetLastWin32Error<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
                                    <span style=""color: #406080"">}</span>
                                    #endregion

                                    CloseHandle<span style=""color: #308080"">(</span>token<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
                                    CloseHandle<span style=""color: #308080"">(</span>tokenDuplicate<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

                                    <span style=""color: #595979"">// Do tasks after impersonating successfully</span>
                                    AccessFileSystem<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

                                    <span style=""color: #595979"">// Access HKCU after loading user's profile</span>
                                    AccessHkcuRegistry<span style=""color: #308080"">(</span>profileInfo<span style=""color: #308080"">.</span>hProfile<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

                                    <span style=""color: #595979"">// Unload user profile</span>
                                    <span style=""color: #595979"">// MSDN remarks http://msdn.microsoft.com/en-us/library/bb762282(VS.85).aspx</span>
                                    <span style=""color: #595979"">// Before calling UnloadUserProfile you should ensure that all handles to keys that you have opened in the</span>
                                    <span style=""color: #595979"">// user's registry hive are closed. If you do not close all open registry handles, the user's profile fails</span>
                                    <span style=""color: #595979"">// to unload. For more information, see Registry Key Security and Access Rights and Registry Hives.</span>
                                    UnloadUserProfile<span style=""color: #308080"">(</span>tokenDuplicate<span style=""color: #308080"">,</span> profileInfo<span style=""color: #308080"">.</span>hProfile<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

                                    <span style=""color: #595979"">// Undo impersonation</span>
                                    m_ImpersonationContext<span style=""color: #308080"">.</span>Undo<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
                                <span style=""color: #406080"">}</span>
                            <span style=""color: #406080"">}</span>
                        <span style=""color: #406080"">}</span>
                        <span style=""color: #200080; font-weight: bold"">else</span>
                        <span style=""color: #406080"">{</span>
                            Console<span style=""color: #308080"">.</span>WriteLine<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">DuplicateToken() failed with error code: </span><span style=""color: #800000"">&quot;</span> <span style=""color: #308080"">+</span> Marshal<span style=""color: #308080"">.</span>GetLastWin32Error<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
                            <span style=""color: #200080; font-weight: bold"">throw</span> <span style=""color: #200080; font-weight: bold"">new</span> Win32Exception<span style=""color: #308080"">(</span>Marshal<span style=""color: #308080"">.</span>GetLastWin32Error<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
                        <span style=""color: #406080"">}</span>
                    <span style=""color: #406080"">}</span>
                <span style=""color: #406080"">}</span>
            <span style=""color: #406080"">}</span>
            <span style=""color: #200080; font-weight: bold"">catch</span> <span style=""color: #308080"">(</span>Win32Exception we<span style=""color: #308080"">)</span>
            <span style=""color: #406080"">{</span>
                <span style=""color: #200080; font-weight: bold"">throw</span> we<span style=""color: #406080"">;</span>
            <span style=""color: #406080"">}</span>
            <span style=""color: #200080; font-weight: bold"">catch</span>
            <span style=""color: #406080"">{</span>
                <span style=""color: #200080; font-weight: bold"">throw</span> <span style=""color: #200080; font-weight: bold"">new</span> Win32Exception<span style=""color: #308080"">(</span>Marshal<span style=""color: #308080"">.</span>GetLastWin32Error<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
            <span style=""color: #406080"">}</span>
            <span style=""color: #200080; font-weight: bold"">finally</span>
            <span style=""color: #406080"">{</span>
                <span style=""color: #200080; font-weight: bold"">if</span> <span style=""color: #308080"">(</span>token <span style=""color: #308080"">!</span><span style=""color: #308080"">=</span> IntPtr<span style=""color: #308080"">.</span>Zero<span style=""color: #308080"">)</span> CloseHandle<span style=""color: #308080"">(</span>token<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
                <span style=""color: #200080; font-weight: bold"">if</span> <span style=""color: #308080"">(</span>tokenDuplicate <span style=""color: #308080"">!</span><span style=""color: #308080"">=</span> IntPtr<span style=""color: #308080"">.</span>Zero<span style=""color: #308080"">)</span> CloseHandle<span style=""color: #308080"">(</span>tokenDuplicate<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

                Console<span style=""color: #308080"">.</span>WriteLine<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">After finished impersonation: </span><span style=""color: #800000"">&quot;</span> <span style=""color: #308080"">+</span> WindowsIdentity<span style=""color: #308080"">.</span>GetCurrent<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">.</span>Name<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
            <span style=""color: #406080"">}</span></pre>

  <p><strong>AccessFileSystem method</strong></p>

  <pre style=""background: #f6f8ff; color: #000020""><span style=""color: #200080; font-weight: bold"">private</span> <span style=""color: #200080; font-weight: bold"">static</span> <span style=""color: #200080; font-weight: bold"">void</span> AccessHkcuRegistry<span style=""color: #308080"">(</span>IntPtr hkcuHandle<span style=""color: #308080"">)</span>
<span style=""color: #406080"">{</span>
    <span style=""color: #595979"">// Access registry HKCU</span>
    <span style=""color: #200080; font-weight: bold"">using</span> <span style=""color: #308080"">(</span>SafeRegistryHandle safeHandle <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">new</span> SafeRegistryHandle<span style=""color: #308080"">(</span>hkcuHandle<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">true</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span>
    <span style=""color: #406080"">{</span>
        <span style=""color: #200080; font-weight: bold"">using</span> <span style=""color: #308080"">(</span>RegistryKey tempUserHKCU <span style=""color: #308080"">=</span> RegistryKey<span style=""color: #308080"">.</span>FromHandle<span style=""color: #308080"">(</span>safeHandle<span style=""color: #308080"">)</span><span style=""color: #308080"">)</span>
        <span style=""color: #406080"">{</span>
            <span style=""color: #595979"">// Unum all sub keys under tempuser's HKCU</span>
            String<span style=""color: #308080"">[</span><span style=""color: #308080"">]</span> keys <span style=""color: #308080"">=</span> tempUserHKCU<span style=""color: #308080"">.</span>GetSubKeyNames<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

            <span style=""color: #595979"">// Create a new sub key under tempuser's HKCU</span>
            <span style=""color: #200080; font-weight: bold"">using</span> <span style=""color: #308080"">(</span>RegistryKey tempKeyByWayne <span style=""color: #308080"">=</span> tempUserHKCU<span style=""color: #308080"">.</span>CreateSubKey<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">TempKeyByWayne</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span>
            <span style=""color: #406080"">{</span>
                <span style=""color: #595979"">// Ensure priviledge</span>
                <span style=""color: #595979"">//RegistrySecurity registrySecurity = new RegistrySecurity();</span>
                <span style=""color: #595979"">//RegistryAccessRule accessRule = new RegistryAccessRule(Environment.MachineName + &quot;\\&quot; + userName,</span>
                <span style=""color: #595979"">//                                                       RegistryRights.TakeOwnership,</span>
                <span style=""color: #595979"">//                                                       InheritanceFlags.ContainerInherit,</span>
                <span style=""color: #595979"">//                                                       PropagationFlags.None,</span>
                <span style=""color: #595979"">//                                                       AccessControlType.Allow);</span>
                <span style=""color: #595979"">//registrySecurity.SetAccessRule(accessRule);</span>
                <span style=""color: #595979"">//tempKeyByWayne.SetAccessControl(registrySecurity);</span>

                <span style=""color: #595979"">// Create a new String value under created TempKeyByWayne subkey</span>
                tempKeyByWayne<span style=""color: #308080"">.</span>SetValue<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">StrType</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">,</span> <span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">TempContent</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">,</span> RegistryValueKind<span style=""color: #308080"">.</span>String<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

                <span style=""color: #595979"">// Read the value</span>
                <span style=""color: #200080; font-weight: bold"">using</span> <span style=""color: #308080"">(</span>RegistryKey regKey <span style=""color: #308080"">=</span> tempUserHKCU<span style=""color: #308080"">.</span>OpenSubKey<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">TempKeyByWayne</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span>
                <span style=""color: #406080"">{</span>
                    String valueContent <span style=""color: #308080"">=</span> regKey<span style=""color: #308080"">.</span>GetValue<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">StrType</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">)</span> <span style=""color: #200080; font-weight: bold"">as</span> String<span style=""color: #406080"">;</span>
                    Console<span style=""color: #308080"">.</span>WriteLine<span style=""color: #308080"">(</span>valueContent<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
                <span style=""color: #406080"">}</span>

                <span style=""color: #595979"">// Delete created TempKeyByWayne subkey</span>
                tempUserHKCU<span style=""color: #308080"">.</span>DeleteSubKey<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">TempKeyByWayne</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
                tempKeyByWayne<span style=""color: #308080"">.</span>Close<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
            <span style=""color: #406080"">}</span>
        <span style=""color: #406080"">}</span>
    <span style=""color: #406080"">}</span>
<span style=""color: #406080"">}</span></pre>

  <h3>Impersonation result and verification</h3>

  <p>Temp.txt was created. 
    <br /><img title=""TempFolder"" border=""0"" alt=""TempFolder"" src=""http://wayneye.files.wordpress.com/2010/10/tempfolder_thumb.png?w=558&amp;h=476"" width=""558"" height=""476"" /></p>

  <p>“TempKeyByWayne” was created under HKCU. 
    <br /><img title=""Registry"" border=""0"" alt=""Registry"" src=""http://wayneye.files.wordpress.com/2010/10/registry_thumb.png?w=608&amp;h=472"" width=""608"" height=""472"" /></p>

  <h3>Complete source code download</h3>

  <p><img alt="""" src=""http://wayneye.files.wordpress.com/2010/10/icon_csharp.gif?w=32&amp;h=32&amp;h=32"" width=""32"" height=""32"" />ImpersonateHelper.cs</p>

  <h3>References</h3>
<strong>How to implement impersonation in an ASP.NET application</strong> 

    <br /><a href=""http://support.microsoft.com/kb/306158"">http://support.microsoft.com/kb/306158</a> 

    <br /><strong>LogonUser Win32 API</strong> 

    <br /><a href=""http://msdn.microsoft.com/en-us/library/aa378184(VS.85).aspx"">http://msdn.microsoft.com/en-us/library/aa378184(VS.85).aspx</a> 

    <br /><strong>How to spawn a process that runs under the context of the impersonated user in Microsoft ASP.NET pages </strong>

    <br /><a href=""http://support.microsoft.com/kb/889251"">http://support.microsoft.com/kb/889251</a> 

    <br /><strong>ASP.NET Impersonation</strong> 

    <br /><a href=""http://msdn.microsoft.com/en-us/library/xh507fc5(v=VS.100).aspx"">http://msdn.microsoft.com/en-us/library/xh507fc5(v=VS.100).aspx</a> 

    <br /><strong>Safely Impersonating Another User</strong> 

    <br /><a href=""http://blogs.msdn.com/b/shawnfa/archive/2005/03/22/400749.aspx"">http://blogs.msdn.com/b/shawnfa/archive/2005/03/22/400749.aspx</a>

 ",8481,2010-10-22 15:57:22.643,1,A
104,Wayne,Programmatically PIN shortcut onto Taskbar on Win7,Programmatically-PIN-shortcut-Onto-Taskbar-on-Win7,28,"<h3>Background</h3>

<p>During my work I got one requirement of pinning a specific shortcut file (*.lnk) onto the Windows 7 Taskbar, after investigating I found programmtically achive this is “<strong>not permitte</strong>d”, refer MSDN article: <a href=""http://msdn.microsoft.com/en-us/library/dd378460(VS.85).aspx"">http://msdn.microsoft.com/en-us/library/dd378460(VS.85).aspx</a></p>

<blockquote>
  <p>A small set of applications are pinned by default for new installations. Other than these, only the user can pin further applications; programmatic pinning by an application is not permitted.</p>
</blockquote>

<p>However, the exception comes from <strong>Windows Script Hosting</strong>, a snippet of VBscript can achieve my requirement, I read several articles (refer the end of this post) and wrote two VBS scripts showing below:</p>

<p><strong>Pin to Taskbar</strong></p>

<pre style=""background: #f6f8ff; color: #000020"">Option Explicit

<span style=""color: #595979"">'Const CSIDL_COMMON_PROGRAMS = &amp;H17</span>
<span style=""color: #200080; font-weight: bold"">Dim</span> ShellApp, FSO, Desktop
<span style=""color: #200080; font-weight: bold"">Set</span> ShellApp <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">CreateObject</span><span style=""color: #308080"">(</span><span style=""color: #308080"">&quot;</span>Shell.Application<span style=""color: #308080"">&quot;</span><span style=""color: #308080"">)</span>
<span style=""color: #200080; font-weight: bold"">Set</span> FSO <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">CreateObject</span><span style=""color: #308080"">(</span><span style=""color: #308080"">&quot;</span>Scripting.FileSystemObject<span style=""color: #308080"">&quot;</span><span style=""color: #308080"">)</span>

<span style=""color: #595979"">'Set StartMenuFolder = ShellApp.NameSpace(CSIDL_COMMON_PROGRAMS)</span>
<span style=""color: #200080; font-weight: bold"">Set</span> Desktop <span style=""color: #308080"">=</span>  ShellApp<span style=""color: #008c00"">.</span>NameSpace<span style=""color: #308080"">(</span><span style=""color: #308080"">&quot;</span>C:\Users\Wayne\Desktop<span style=""color: #308080"">&quot;</span><span style=""color: #308080"">)</span>

<span style=""color: #200080; font-weight: bold"">Dim</span> LnkFile
LnkFile <span style=""color: #308080"">=</span> Desktop<span style=""color: #008c00"">.</span>Self<span style=""color: #008c00"">.</span>Path<span style=""color: #308080"">&amp;</span><span style=""color: #308080"">&quot;</span>\ScheduleNotifier.lnk<span style=""color: #308080"">&quot;</span>

<span style=""color: #200080; font-weight: bold"">If</span><span style=""color: #308080"">(</span>FSO<span style=""color: #008c00"">.</span>FileExists<span style=""color: #308080"">(</span>LnkFile<span style=""color: #308080"">)</span><span style=""color: #308080"">)</span> <span style=""color: #200080; font-weight: bold"">Then</span>
    <span style=""color: #200080; font-weight: bold"">Dim</span> tmp, verb
    <span style=""color: #595979"">'For Each verb in Desktop.ParseName(&quot;ScheduleNotifier.lnk&quot;).Verbs</span>
        <span style=""color: #595979"">'tmp = tmp&amp;verb&amp;chr(13)</span>
    <span style=""color: #595979"">'Next</span>
    <span style=""color: #595979"">'MsgBox(tmp)</span>

    <span style=""color: #200080; font-weight: bold"">Dim</span> desktopImtes, item
    <span style=""color: #200080; font-weight: bold"">Set</span> desktopImtes <span style=""color: #308080"">=</span> Desktop<span style=""color: #008c00"">.</span>Items<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span>

    <span style=""color: #200080; font-weight: bold"">For Each</span> item <span style=""color: #200080; font-weight: bold"">in</span> desktopImtes
        <span style=""color: #200080; font-weight: bold"">If</span> <span style=""color: #308080"">(</span>item<span style=""color: #008c00"">.</span>Name <span style=""color: #308080"">=</span> <span style=""color: #308080"">&quot;</span>ScheduleNotifier<span style=""color: #308080"">&quot;</span><span style=""color: #308080"">)</span> <span style=""color: #200080; font-weight: bold"">Then</span>
            <span style=""color: #595979"">'MsgBox(item.Name)</span>
            <span style=""color: #200080; font-weight: bold"">For Each</span> verb <span style=""color: #200080; font-weight: bold"">in</span> item<span style=""color: #008c00"">.</span>Verbs
                <span style=""color: #200080; font-weight: bold"">If</span> <span style=""color: #308080"">(</span>verb<span style=""color: #008c00"">.</span>Name <span style=""color: #308080"">=</span> <span style=""color: #308080"">&quot;</span>Pin to Tas&amp;kbar<span style=""color: #308080"">&quot;</span><span style=""color: #308080"">)</span> <span style=""color: #200080; font-weight: bold"">Then</span> <span style=""color: #595979"">'If (verb.Name = &quot;锁定到任务栏(&amp;K)&quot;)</span>
                    verb<span style=""color: #008c00"">.</span>DoIt
                <span style=""color: #200080; font-weight: bold"">End If</span>
            <span style=""color: #200080; font-weight: bold"">Next</span>
        <span style=""color: #200080; font-weight: bold"">End If</span>
    <span style=""color: #200080; font-weight: bold"">Next</span>

<span style=""color: #200080; font-weight: bold"">End If</span>

<span style=""color: #200080; font-weight: bold"">Set</span> FSO <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">Nothing</span>
<span style=""color: #200080; font-weight: bold"">Set</span> ShellApp <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">Nothing</span></pre>

<p><strong>Unpin from Taskbar</strong></p>

<pre style=""background: #f6f8ff; color: #000020"">Option Explicit
<span style=""color: #595979"">'Const CSIDL_COMMON_PROGRAMS = &amp;H17</span>
<span style=""color: #200080; font-weight: bold"">Dim</span> ShellApp, FSO, Desktop
<span style=""color: #200080; font-weight: bold"">Set</span> ShellApp <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">CreateObject</span><span style=""color: #308080"">(</span><span style=""color: #308080"">&quot;</span>Shell.Application<span style=""color: #308080"">&quot;</span><span style=""color: #308080"">)</span>
<span style=""color: #200080; font-weight: bold"">Set</span> FSO <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">CreateObject</span><span style=""color: #308080"">(</span><span style=""color: #308080"">&quot;</span>Scripting.FileSystemObject<span style=""color: #308080"">&quot;</span><span style=""color: #308080"">)</span>

<span style=""color: #595979"">'Set StartMenuFolder = ShellApp.NameSpace(CSIDL_COMMON_PROGRAMS)</span>
<span style=""color: #200080; font-weight: bold"">Set</span> Desktop <span style=""color: #308080"">=</span>  ShellApp<span style=""color: #008c00"">.</span>NameSpace<span style=""color: #308080"">(</span><span style=""color: #308080"">&quot;</span>C:\Users\Wayne\Desktop<span style=""color: #308080"">&quot;</span><span style=""color: #308080"">)</span>

<span style=""color: #200080; font-weight: bold"">Dim</span> LnkFile
LnkFile <span style=""color: #308080"">=</span> Desktop<span style=""color: #008c00"">.</span>Self<span style=""color: #008c00"">.</span>Path<span style=""color: #308080"">&amp;</span><span style=""color: #308080"">&quot;</span>\ScheduleNotifier.lnk<span style=""color: #308080"">&quot;</span>

<span style=""color: #200080; font-weight: bold"">If</span><span style=""color: #308080"">(</span>FSO<span style=""color: #008c00"">.</span>FileExists<span style=""color: #308080"">(</span>LnkFile<span style=""color: #308080"">)</span><span style=""color: #308080"">)</span> <span style=""color: #200080; font-weight: bold"">Then</span>
    <span style=""color: #200080; font-weight: bold"">Dim</span> tmp, verb
    <span style=""color: #595979"">'For Each verb in Desktop.ParseName(&quot;ScheduleNotifier.lnk&quot;).Verbs</span>
        <span style=""color: #595979"">'tmp = tmp&amp;verb&amp;chr(13)</span>
    <span style=""color: #595979"">'Next</span>
    <span style=""color: #595979"">'MsgBox(tmp)</span>

    <span style=""color: #200080; font-weight: bold"">Dim</span> desktopImtes, item
    <span style=""color: #200080; font-weight: bold"">Set</span> desktopImtes <span style=""color: #308080"">=</span> Desktop<span style=""color: #008c00"">.</span>Items<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span>

    <span style=""color: #200080; font-weight: bold"">For Each</span> item <span style=""color: #200080; font-weight: bold"">in</span> desktopImtes
        <span style=""color: #200080; font-weight: bold"">If</span> <span style=""color: #308080"">(</span>item<span style=""color: #008c00"">.</span>Name <span style=""color: #308080"">=</span> <span style=""color: #308080"">&quot;</span>ScheduleNotifier<span style=""color: #308080"">&quot;</span><span style=""color: #308080"">)</span> <span style=""color: #200080; font-weight: bold"">Then</span>
            <span style=""color: #595979"">'MsgBox(item.Name)</span>
            <span style=""color: #200080; font-weight: bold"">For Each</span> verb <span style=""color: #200080; font-weight: bold"">in</span> item<span style=""color: #008c00"">.</span>Verbs
                <span style=""color: #200080; font-weight: bold"">If</span> <span style=""color: #308080"">(</span>verb<span style=""color: #008c00"">.</span>Name <span style=""color: #308080"">=</span> <span style=""color: #308080"">&quot;</span>Unpin from Tas&amp;kbar<span style=""color: #308080"">&quot;</span><span style=""color: #308080"">)</span> <span style=""color: #200080; font-weight: bold"">Then</span> <span style=""color: #595979"">'If (verb.Name = &quot;从任务栏脱离(&amp;K)&quot;)</span>
                    verb<span style=""color: #008c00"">.</span>DoIt
                <span style=""color: #200080; font-weight: bold"">End If</span>
            <span style=""color: #200080; font-weight: bold"">Next</span>
        <span style=""color: #200080; font-weight: bold"">End If</span>
    <span style=""color: #200080; font-weight: bold"">Next</span>

<span style=""color: #200080; font-weight: bold"">End If</span>

<span style=""color: #200080; font-weight: bold"">Set</span> FSO <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">Nothing</span>
<span style=""color: #200080; font-weight: bold"">Set</span> ShellApp <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">Nothing</span></pre>

<p>Although two snippets of VBS code are simple and stright-forward, they has on serious limitation, it only support one specified language, attention of this line of code:</p>

<p><code>If</code> <code>(verb.Name = </code><code>&quot;Pin to Tas&amp;kbar&quot;</code><code>) </code><code>Then</code> <code>'If (verb.Name = &quot;锁定到任务栏(&amp;K)&quot;)</code></p>

<p>On Chinese locale, I have to replace “Pin to Tas&amp;kbar” with “锁定到任务栏(&amp;K)”, so in order to support more languages I need to know each exact {Pin sentence} to do the pinning, you know, google translation won’t always work in this case:), so I definitely don’t want to do that…</p>

<p>You probably ask WHY??? Because <a href=""http://msdn.microsoft.com/en-us/library/bb774172(v=VS.85).aspx"">FolderItemVerb </a>object only has one property: <strong>Name</strong>, and Name is definitely “<strong>language sensitive</strong>“, MSDN does mention there are two more properties “Application” and “Parent” however they are “Not implemented”.</p>

<h3>Several tips</h3>

<li>For a specific Windows user, all shortcuts pinned onto taskbar store the shortcuts files under 
  <br /><em>%AppData%\Microsoft\Internet Explorer\Quick Launch\User Pinned\TaskBar</em> </li>

<li>OEM manufacturers could “pre-pin” some shortcut onto the Taskbar before shipping the PC/laptops to the consumers, simply run batch command below during the DASH (see <strong><a href=""http://en.wikipedia.org/wiki/Desktop_and_mobile_Architecture_for_System_Hardware"">Desktop and mobile Architecture for System Hardware</a></strong>) process: 

  <br /><em>Rem Pining OEM Welcome Center app on task barReg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\TBDEn /v SBOEM0 /t REG_EXPAND_SZ /d “SomeFile.lnk” /f</em> 

  <p>&#160;</p>

  <h3>References</h3>

  <p><strong>Pin Items to the Start Menu or Windows 7 Taskbar via Script 
      <br /></strong><a href=""http://blogs.technet.com/b/deploymentguys/archive/2009/04/08/pin-items-to-the-start-menu-or-windows-7-taskbar-via-script.aspx"">http://blogs.technet.com/b/deploymentguys/archive/2009/04/08/pin-items-to-the-start-menu-or-windows-7-taskbar-via-script.aspx</a></p>

  <p><strong>Pin and Un-pin items to/from the Windows 7 taskbar 
      <br /></strong><a href=""http://blog.ananthonline.net/?p=37"">http://blog.ananthonline.net/?p=37</a></p>

  
</li>",16346,2010-07-17 22:07:11.850,1,A
105,Wayne,Study EVM (Earned Value Management) – Part 1,Study-EVM-Part-1,15,"<p>During the past few days I was studying <strong>Project Time Management</strong> in PMBOK, for preparing the upcoming PMP exam on 4th December 2010, while I spent a few hours on understanding/mastering EVM, I log my memory here<img style=""background-image:url(http://wayneye.com/Images/winLiveEmotions.gif);background-position:-0px -0px;width:19px;height:19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif""></p>

<p><strong>EVM</strong> stands for <a href=""http://en.wikipedia.org/wiki/Earned_value_management"">Eearned Value Management</a>, it is a complementary for <strong><a href=""http://en.wikipedia.org/wiki/Critical_path_method"">Critical Path Method</a></strong> schedule management, its purpose could be described as “<strong>What did we get for the money we spent?”</strong> the definition of is in Wikipedia is below:</p>

<blockquote>
  <p><b>Earned value management</b> (<b>EVM</b>) is a <a href=""https://mail.google.com/wiki/Project_management"">project management</a> technique for measuring project progress in an objective manner. EVM has the ability to combine measurements of scope, schedule, and cost in a single integrated system. When properly applied, EVM provides an early warning of performance problems. Additionally, EVM promises to improve the definition of <a href=""https://mail.google.com/wiki/Scope_(project_management)"">project scope</a>, prevent <a href=""https://mail.google.com/wiki/Scope_creep"">scope creep</a>, communicate objective progress to <a href=""https://mail.google.com/wiki/Stakeholder_(corporate)"">stakeholders</a>, and keep the <a href=""https://mail.google.com/wiki/Project_team"">project team</a> focused on achieving progress.</p>
</blockquote>

<p>There are three fundamental glossaries in EVM, they are:</p>

<ul>
  <li><strong>PV</strong> Plan Value (also called <strong>BCWS</strong> – Badget Cost for Work Scheduled) </li>

  <li><strong>AC </strong>Actual Cost (also called <strong>ACWP</strong> – Actual Cost for Work Performed) </li>

  <li><strong>EV</strong> Earned Value (also called <strong>BCWP </strong>Badget Cost for Worked Performed), so 

    <br />EV = BAC (Budget At Completion) * [Finished work]% 

    <br />EV formula from Wikipedia: </li>
</ul>

<p><img style=""background-color: white;background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px"" title=""EV"" border=""0"" alt=""EV"" src=""http://wayneye.files.wordpress.com/2010/11/ev_thumb.png?w=240&amp;h=59"" width=""240"" height=""59"" /></p>

<p>For simple and straight-forward, in my understanding:</p>

<ul>
  <li>PV is on a specified timestamp, what is the planed budget. </li>

  <li>AC is on a specified timestamp, what is the actual cost. </li>

  <li>EV is on a specified timestamp, how much percent of work has been done while how much cost was expected. </li>
</ul>

<ul>During the project implementing process, Program Manager tracks the schedule and cost using EVM, and calculate SV&amp;SV, SPI&amp;CPI, they are:</ul>

<p><strong>SV</strong> Schedule Variance </p>

  <p>SV = EV – PV </p>

  <p><strong>CV </strong>Cost Variance </p>

  <p>CV = EV – AC</p>
<br />
<p><strong>SPI</strong> Schedule Performance Index  </p>

  <p>SPI = EV/PV </p>

  <p><strong>CPI</strong> Cost Performance Index </p>

  <p>CPI = EV/CV</p>

<p>I take a simple example for better understanding, assume I am managing a <strong>10 days</strong> project code name “<strong>Lambda</strong>”, Lambda project has a BAC of <strong>$100</strong>, and the detailed project schedule was determined below:</p>

<table border=""1"" cellspacing=""0"" cellpadding=""2"" width=""400""><tbody>
    <tr>
      <td valign=""top"" width=""36"">Day#</td>

      <td valign=""top"" width=""36"">1</td>

      <td valign=""top"" width=""36"">2</td>

      <td valign=""top"" width=""36"">3</td>

      <td valign=""top"" width=""36"">4</td>

      <td valign=""top"" width=""36"">5</td>

      <td valign=""top"" width=""36"">6</td>

      <td valign=""top"" width=""36"">7</td>

      <td valign=""top"" width=""36"">8</td>

      <td valign=""top"" width=""36"">9</td>

      <td valign=""top"" width=""36"">10</td>
    </tr>

    <tr>
      <td valign=""top"" width=""36"">Budget</td>

      <td valign=""top"" width=""36"">$10</td>

      <td valign=""top"" width=""36"">$10</td>

      <td valign=""top"" width=""36"">$10</td>

      <td valign=""top"" width=""36"">$10</td>

      <td valign=""top"" width=""36"">$10</td>

      <td valign=""top"" width=""36"">$10</td>

      <td valign=""top"" width=""36"">$10</td>

      <td valign=""top"" width=""36"">$10</td>

      <td valign=""top"" width=""36"">$10</td>

      <td valign=""top"" width=""36"">$10</td>
    </tr>
  </tbody></table>

<p>The scenario is at the end of day 3, I (PM) called up team member and held a meeting to track status, we found:</p>

<p>We got<strong> 40%</strong> of the entire work done, on the other hand, we’ve already spent $60, based on this fact, I (PM) will get to know:</p>

<p>PV: 3 days past, initially we planed/supposed to spend $30 according to the schedule, so PV=30. </p>
<p>AC: We’ve spent &amp;60, so AC=60. </p>

<p>EV: we finished 40% of work, initially we planed/supposed to spend $40 to get 40% work done, so EV=40</p>

<p>OK, then:</p>

<p>SV = EV – PV = 40 – 30 = 10, <strong>greater than 0, it is good, we are ahead schedule</strong><img style=""background-image:url(http://wayneye.com/Images/winLiveEmotions.gif);background-position:-0px -0px;width:19px;height:19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif""></p>

<p>CV = EV- CV = 40 – 60 = -20,<strong> smaller than 0, it is not good, we are overspending money</strong><img style=""background-image:url(http://wayneye.com/Images/winLiveEmotions.gif);background-position:-171px -0px;width:19px;height:19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif"" /></p>

<p>SPI = EV/PV = 40/30 = 1.3 &gt; 1 greater than 1, good. 
  <br />CPI = EV/CV = 40/60 = 0.66 &lt; 1, smaller than 1, not good.</p>

<p>+U+U to myself, I put a flag here, I believe I will pass the exam!</p>

<h3>References</h3>

<p><strong>EVM on Wikipedia</strong> 

  <br /><a href=""http://en.wikipedia.org/wiki/Earned_value_management"">http://en.wikipedia.org/wiki/Earned_value_management</a></p>

<p><strong>EVM official web site 
    <br /></strong><a href=""http://www.earnedvaluemanagement.com/"">http://www.earnedvaluemanagement.com/</a></p>",2301,2010-11-07 10:17:27.000,1,A
106,Wayne,Study EVM (Earned Value Management) - Part 2,Study-EVM-Part-2,15,"<p>Once the CPI/SPI were calculated at some time-stamp, project manager should be deeper analyses, he need to predict the future cost:</p>

<p><strong>ETC (Estimate To Completion)</strong></p>

<p>Then EAC (Estimate At Completion) = AC + ETC</p>

<p>How to calculate ETC based on current situation (EV/AC/PV and SPI&amp;CPI), there are usually three methods:</p>

<ol>
  <li><strong>Regardless of current Schedule/Cost Performance Index
      <br /></strong>This way is simple, I don’t care what’s happened, <strong>EAC = BAC + EAC – AC</strong>, in other words, project team is confident to finish the project below estimated cost. </li>

  <li><strong>Estimated based on current CPI
      <br /></strong>This way is straight-forward, review current CPI and estimate future cost based on it:

    <br /><strong>EAC = AC + (BAC -EV)/CPI = BAC / CPI
      <br /></strong></li>

  <li><strong>Consider both CPI/SPI impact</strong>

    <br />I think this way the rationalist one, it consider both SPI and CPI, in additional, PM could give a “<strong>weight</strong>” to SPI or CPI according to his/her experience and judgement, so the formula is:

    <br /><strong>EAC&#160; = (BAC – EV) / (CPI * SPI)</strong></li>
</ol>

<p>No matter which method PM chooses, as long as the calculated/predicted <strong>EAC is not acceptable</strong>, then it is an “<strong>early warning</strong>” to the team.</p>

<p>Even more, PM need calculate TCPI, the content below as copied from <a href=""http://en.wikipedia.org/wiki/Earned_value_management"">EVM on Wikipedia</a>, it is very clear for me.</p>

<blockquote>
  <p>The To Complete Performance Index (TCPI) provides a projection of the anticipated performance required to achieve either the BAC or the EAC.</p>
</blockquote>
<p>For the TCPI based on BAC (describing the performance required to meet the original BAC budgeted total):<img style=""background-color: white;"" class=""BlogImage"" alt=""TCPI_{BAC} = { BAC - EV \over BAC - AC }"" src=""http://upload.wikimedia.org/math/5/5/d/55d902909bba737fe762d4a0e08f3680.png"" /></p>

<p>or for the TCPI based on EAC (describing the performance required to meet a new, revised budget total EAC):
<img style=""background-color: white;"" class=""BlogImage"" alt=""TCPI_{EAC} = { BAC - EV \over EAC - AC }"" src=""http://upload.wikimedia.org/math/f/9/4/f9464ad8d231f1068009c1098d57f2b2.png"" /></p>

<p><strong>Independent estimate at completion (IEAC)</strong></p>

<p>The IEAC is a metric to project total cost using the performance to date to project overall performance. This can be compared to the EAC, which is the manager’s projection.</p><img style=""background-color: white;"" class=""BlogImage"" alt=""IEAC = \sum AC + { \left( BAC - \sum EV \right) \over CPI }"" src=""http://upload.wikimedia.org/math/b/4/9/b49bab309431a0deb8d34096a5c146e2.png"" />

<p>Wish I success, again!&#160; +U!</p>",3181,2010-11-11 10:55:40.000,1,A
107,Wayne,Personal Schedule Management Tool,Personal-Schedule-Management-Tool,26,"<p>Time is always ticking no matter you care it or you don’t care it, everyone knows it including myself, to remind myself don’t waste too much time on gaming, reading news or something else, I developed a little tool which I call it “<strong>Personal Schedule Management Tool</strong>” to achieve this simple goal.</p>

<h3>Mechanism</h3>

<p>I create an XML file to store a serial of <strong>[time stamp/task to do]</strong> pairs, the tool will start with Windows and load the XML file, a working timer behind it will periodically check whether there is a task needs to be done at defined time stamp, once the condition is matched, the tool will</p>

<ol>
  <li>Shows Windows Balloon Tips with the task as content, screenshot below. 
    <br /><img class=""BlogImage"" title=""Balloon"" border=""0"" alt=""Balloon"" src=""http://wayneye.files.wordpress.com/2010/10/balloon_thumb.png?w=336&amp;h=165"" width=""336"" height=""165"" /></li>

  <li>Invokes managed Microsoft Speech API: SpeechSynthesizer.Speak() to remind me <strong>even if I am not in front of my dev-box at that time</strong>. </li>
</ol>

<p>Here is my XML to store schedule items:</p>

<pre style=""background: #f6f8ff; color: #000020""><span style=""color: #004a43"">&lt;?</span><span style=""color: #004a43"">xml</span> <span style=""color: #004a43"">version</span><span style=""color: #308080"">=</span><span style=""color: #008c00"">&quot;1.0&quot;</span> <span style=""color: #004a43"">encoding</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;utf-8&quot;</span> <span style=""color: #004a43"">?&gt;</span>
<span style=""color: #0057a6"">&lt;</span><span style=""color: #333385"">WayneScheduleItems</span><span style=""color: #0057a6"">&gt;</span>
  <span style=""color: #0057a6"">&lt;</span><span style=""color: #333385"">ScheduleItem</span> <span style=""color: #474796"">TriggerHour</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">18</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #474796"">TriggerMinute</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">20</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #474796"">Content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">Wayne, time to have your dinner.</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #0057a6"">/&gt;</span>
  <span style=""color: #0057a6"">&lt;</span><span style=""color: #333385"">ScheduleItem</span> <span style=""color: #474796"">TriggerHour</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">19</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #474796"">TriggerMinute</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">0</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #474796"">Content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">Wayne! It is time to learn technologies and programming skills, i.e. CODING TIME!</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #0057a6"">/&gt;</span>
  <span style=""color: #0057a6"">&lt;</span><span style=""color: #333385"">ScheduleItem</span> <span style=""color: #474796"">TriggerHour</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">20</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #474796"">TriggerMinute</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">30</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #474796"">Content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">OK, your eye and brain need rest, time to do some body execise - running, sit-ups, push-up, etc.  Enjoy:)</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #0057a6"">/&gt;</span>
  <span style=""color: #0057a6"">&lt;</span><span style=""color: #333385"">ScheduleItem</span> <span style=""color: #474796"">TriggerHour</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">21</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #474796"">TriggerMinute</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">0</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #474796"">Content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">Well, sweat off your face and have a bath:).</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #0057a6"">/&gt;</span>
  <span style=""color: #0057a6"">&lt;</span><span style=""color: #333385"">ScheduleItem</span> <span style=""color: #474796"">TriggerHour</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">21</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #474796"">TriggerMinute</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">30</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #474796"">Content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">All right, well come back, you know you should read some books!</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #0057a6"">/&gt;</span>
  <span style=""color: #0057a6"">&lt;</span><span style=""color: #333385"">ScheduleItem</span> <span style=""color: #474796"">TriggerHour</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">23</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #474796"">TriggerMinute</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">0</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #474796"">Content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">Wayne, thanks for the hard work! Time to sleep, have a good night!</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #0057a6"">/&gt;</span>
<span style=""color: #0057a6"">&lt;/</span><span style=""color: #333385"">WayneScheduleItems</span><span style=""color: #0057a6"">&gt;</span></pre>
$More$
<h3>UI Implementation</h3>

<p>The tool is a WinForm developed in C#, it has no Windows and starts in system tray, to achieve this I set MainWindow’s <strong>FormBorderStyle = None</strong>, <strong>ShowIcon = False</strong> and<strong> ShowInTaskBar = False</strong>, see below.</p>

<p><img class=""BlogImage"" title=""WindowProperty"" border=""0"" alt=""WindowProperty"" src=""http://wayneye.files.wordpress.com/2010/10/windowproperty_thumb.png?w=341&amp;h=692"" width=""341"" height=""692"" /></p>

<p>One more thing is drag two controls onto the form: <a href=""http://msdn.microsoft.com/en-us/library/system.windows.forms.notifyicon.aspx"">System.Windows.Forms.NotifyIcon</a>,<a href=""http://msdn.microsoft.com/en-us/library/system.windows.forms.contextmenustrip.aspx"">System.Windows.Forms.ContextMenuStrip</a> and&#160; and naming the instances as “systrayIcon” and “systrayMenu”.</p>

<p><img class=""BlogImage"" title=""Controls"" border=""0"" alt=""Controls"" src=""http://wayneye.files.wordpress.com/2010/10/controls_thumb.png?w=304&amp;h=154"" width=""304"" height=""154"" /></p>

<p>After that I need add menu items, code snippet below:</p>

<pre style=""background: #f6f8ff; color: #000020""><span style=""color: #200080; font-weight: bold"">this</span><span style=""color: #308080"">.</span>editScheduleItemsToolStripMenuItem<span style=""color: #308080"">.</span>Name <span style=""color: #308080"">=</span> <span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">editScheduleItemsToolStripMenuItem</span><span style=""color: #800000"">&quot;</span><span style=""color: #406080"">;</span>
<span style=""color: #200080; font-weight: bold"">this</span><span style=""color: #308080"">.</span>editScheduleItemsToolStripMenuItem<span style=""color: #308080"">.</span>Text <span style=""color: #308080"">=</span> <span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">Edit Schedule Items</span><span style=""color: #800000"">&quot;</span><span style=""color: #406080"">;</span>
<span style=""color: #200080; font-weight: bold"">this</span><span style=""color: #308080"">.</span>editScheduleItemsToolStripMenuItem<span style=""color: #308080"">.</span>Click <span style=""color: #308080"">+</span><span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">new</span> System<span style=""color: #308080"">.</span>EventHandler<span style=""color: #308080"">(</span><span style=""color: #200080; font-weight: bold"">this</span><span style=""color: #308080"">.</span>editScheduleItemsToolStripMenuItem_Click<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
<span style=""color: #200080; font-weight: bold"">this</span><span style=""color: #308080"">.</span>systrayMenu<span style=""color: #308080"">.</span>Items<span style=""color: #308080"">.</span>Add<span style=""color: #308080"">(</span>editScheduleItemsToolStripMenuItem<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span></pre>

<p>All right, its appearance is like below:</p>

<p><img class=""BlogImage"" title=""SystrayMenu"" border=""0"" alt=""SystrayMenu"" src=""http://wayneye.files.wordpress.com/2010/10/systraymenu_thumb.png?w=232&amp;h=149"" width=""232"" height=""149"" /></p>

<h3>Functionality implementation</h3>

<p><strong>Timer</strong>:</p>

<pre style=""background: #f6f8ff; color: #000020""><span style=""color: #595979"">// Initializes timer</span>
    scheduleTimer <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">new</span> System<span style=""color: #308080"">.</span>Timers<span style=""color: #308080"">.</span>Timer<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span>
                    <span style=""color: #406080"">{</span>
                        Interval <span style=""color: #308080"">=</span> 1000d <span style=""color: #308080"">*</span> <span style=""color: #008c00"">60</span> <span style=""color: #308080"">*</span> <span style=""color: #008c00"">10</span><span style=""color: #308080"">,</span> <span style=""color: #595979"">// 10 minutes</span>
                        Enabled <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">true</span>
                    <span style=""color: #406080"">}</span><span style=""color: #406080"">;</span>
    <span style=""color: #200080; font-weight: bold"">this</span><span style=""color: #308080"">.</span>scheduleTimer<span style=""color: #308080"">.</span>Start<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
    <span style=""color: #200080; font-weight: bold"">this</span><span style=""color: #308080"">.</span>scheduleTimer<span style=""color: #308080"">.</span>Elapsed <span style=""color: #308080"">+</span><span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">new</span> System<span style=""color: #308080"">.</span>Timers<span style=""color: #308080"">.</span>ElapsedEventHandler<span style=""color: #308080"">(</span>scheduleTimer_Elapsed<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

<span style=""color: #200080; font-weight: bold"">void</span> scheduleTimer_Elapsed<span style=""color: #308080"">(</span><span style=""color: #200080; font-weight: bold"">object</span> sender<span style=""color: #308080"">,</span> ElapsedEventArgs e<span style=""color: #308080"">)</span>
<span style=""color: #406080"">{</span>
    DateTime currentTime <span style=""color: #308080"">=</span> e<span style=""color: #308080"">.</span>SignalTime<span style=""color: #406080"">;</span>

    <span style=""color: #200080; font-weight: bold"">try</span>
    <span style=""color: #406080"">{</span>
        <span style=""color: #200080; font-weight: bold"">foreach</span> <span style=""color: #308080"">(</span>ScheduleItem scheduleItem <span style=""color: #200080; font-weight: bold"">in</span> scheduleItems<span style=""color: #308080"">)</span>
        <span style=""color: #406080"">{</span>
            <span style=""color: #200080; font-weight: bold"">if</span> <span style=""color: #308080"">(</span>currentTime<span style=""color: #308080"">.</span>Hour <span style=""color: #308080"">=</span><span style=""color: #308080"">=</span> scheduleItem<span style=""color: #308080"">.</span>TriggerHour
            &amp;&amp; currentTime<span style=""color: #308080"">.</span>Minute <span style=""color: #308080"">=</span><span style=""color: #308080"">=</span> scheduleItem<span style=""color: #308080"">.</span>TriggerMinute<span style=""color: #308080"">)</span>
            <span style=""color: #406080"">{</span>
                LogManager<span style=""color: #308080"">.</span>WriteAsync<span style=""color: #308080"">(</span>String<span style=""color: #308080"">.</span>Format<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">{0}, notification occurred: {1}.{2}</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">,</span>
                    currentTime<span style=""color: #308080"">.</span>ToLocalTime<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">,</span> scheduleItem<span style=""color: #308080"">.</span>Content<span style=""color: #308080"">,</span> Environment<span style=""color: #308080"">.</span>NewLine<span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

                <span style=""color: #595979"">// Trigger bubble/voice notification</span>
                <span style=""color: #200080; font-weight: bold"">this</span><span style=""color: #308080"">.</span>systrayIcon<span style=""color: #308080"">.</span>ShowBalloonTip<span style=""color: #308080"">(</span><span style=""color: #008c00"">8000</span><span style=""color: #308080"">,</span> Constants<span style=""color: #308080"">.</span>BalloonTitle<span style=""color: #308080"">,</span> scheduleItem<span style=""color: #308080"">.</span>Content<span style=""color: #308080"">,</span> ToolTipIcon<span style=""color: #308080"">.</span>Info<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
                SoundNotifier<span style=""color: #308080"">.</span>Phonate<span style=""color: #308080"">(</span>scheduleItem<span style=""color: #308080"">.</span>Content<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

                <span style=""color: #200080; font-weight: bold"">break</span><span style=""color: #406080"">;</span> <span style=""color: #595979"">// Avoid redundant check</span>
            <span style=""color: #406080"">}</span>
        <span style=""color: #406080"">}</span>
    <span style=""color: #406080"">}</span>
    <span style=""color: #200080; font-weight: bold"">catch</span> <span style=""color: #308080"">(</span>Exception ex<span style=""color: #308080"">)</span>
    <span style=""color: #406080"">{</span>
        LogManager<span style=""color: #308080"">.</span>WriteAsync<span style=""color: #308080"">(</span>ex<span style=""color: #308080"">.</span>Message<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
    <span style=""color: #406080"">}</span>

    LogManager<span style=""color: #308080"">.</span>WriteAsync<span style=""color: #308080"">(</span>String<span style=""color: #308080"">.</span>Format<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">Schedule check at: {0}{1}</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">,</span> currentTime<span style=""color: #308080"">.</span>ToLocalTime<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">,</span> Environment<span style=""color: #308080"">.</span>NewLine<span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
<span style=""color: #406080"">}</span></pre>

<p><strong>Load schedule items from XML using LINQ</strong>:</p>

<pre style=""background: #f6f8ff; color: #000020""><span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">static</span> <span style=""color: #200080; font-weight: bold"">class</span> ScheduleItemsReader
<span style=""color: #406080"">{</span>
    <span style=""color: #200080; font-weight: bold"">private</span> <span style=""color: #200080; font-weight: bold"">static</span> <span style=""color: #200080; font-weight: bold"">readonly</span> String ScheduleItemsXmlLocation <span style=""color: #308080"">=</span> Path<span style=""color: #308080"">.</span>Combine<span style=""color: #308080"">(</span>AppDomain<span style=""color: #308080"">.</span>CurrentDomain<span style=""color: #308080"">.</span>BaseDirectory<span style=""color: #308080"">,</span> <span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">ScheduleItems.xml</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

    <span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">static</span> IEnumerable<span style=""color: #308080"">&lt;</span>ScheduleItem<span style=""color: #308080"">&gt;</span> Load<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span>
    <span style=""color: #406080"">{</span>
        IList<span style=""color: #308080"">&lt;</span>ScheduleItem<span style=""color: #308080"">&gt;</span> scheduleItems <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">new</span> List<span style=""color: #308080"">&lt;</span>ScheduleItem<span style=""color: #308080"">&gt;</span><span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

        IEnumerable<span style=""color: #308080"">&lt;</span>XElement<span style=""color: #308080"">&gt;</span> scheduleItemsCollection <span style=""color: #308080"">=</span> from scheduleItem <span style=""color: #200080; font-weight: bold"">in</span> XElement<span style=""color: #308080"">.</span>Load<span style=""color: #308080"">(</span>ScheduleItemsXmlLocation<span style=""color: #308080"">)</span><span style=""color: #308080"">.</span>Descendants<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">ScheduleItem</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">)</span>
                                                        select scheduleItem<span style=""color: #406080"">;</span>

        <span style=""color: #200080; font-weight: bold"">foreach</span> <span style=""color: #308080"">(</span>XElement ele <span style=""color: #200080; font-weight: bold"">in</span> scheduleItemsCollection<span style=""color: #308080"">)</span>
        <span style=""color: #406080"">{</span>
            ScheduleItem scheduleItem <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">new</span> ScheduleItem<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
            scheduleItem<span style=""color: #308080"">.</span>TriggerHour <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">ushort</span><span style=""color: #308080"">.</span>Parse<span style=""color: #308080"">(</span>ele<span style=""color: #308080"">.</span>Attribute<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">TriggerHour</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">)</span><span style=""color: #308080"">.</span>Value<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
            scheduleItem<span style=""color: #308080"">.</span>TriggerMinute <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">ushort</span><span style=""color: #308080"">.</span>Parse<span style=""color: #308080"">(</span>ele<span style=""color: #308080"">.</span>Attribute<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">TriggerMinute</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">)</span><span style=""color: #308080"">.</span>Value<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
            scheduleItem<span style=""color: #308080"">.</span>Content <span style=""color: #308080"">=</span> ele<span style=""color: #308080"">.</span>Attribute<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">Content</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">)</span><span style=""color: #308080"">.</span>Value<span style=""color: #406080"">;</span>

            scheduleItems<span style=""color: #308080"">.</span>Add<span style=""color: #308080"">(</span>scheduleItem<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
        <span style=""color: #406080"">}</span>

        <span style=""color: #200080; font-weight: bold"">return</span> scheduleItems<span style=""color: #406080"">;</span>
    <span style=""color: #406080"">}</span>
<span style=""color: #406080"">}</span></pre>

<p><strong>Invoke Speech API</strong>:</p>

<pre style=""background: #f6f8ff; color: #000020""><span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">static</span> <span style=""color: #200080; font-weight: bold"">class</span> SoundNotifier
<span style=""color: #406080"">{</span>
    <span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">static</span> <span style=""color: #200080; font-weight: bold"">void</span> Phonate<span style=""color: #308080"">(</span>String sentence<span style=""color: #308080"">)</span>
    <span style=""color: #406080"">{</span>
        <span style=""color: #200080; font-weight: bold"">using</span> <span style=""color: #308080"">(</span>SpeechSynthesizer speaker <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">new</span> SpeechSynthesizer<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span>  <span style=""color: #595979"">// Dispose the its instance as soon as it spoke fnished</span>
        <span style=""color: #406080"">{</span>
            ReadOnlyCollection<span style=""color: #308080"">&lt;</span>InstalledVoice<span style=""color: #308080"">&gt;</span> installedVoices <span style=""color: #308080"">=</span> speaker<span style=""color: #308080"">.</span>GetInstalledVoices<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

            CultureInfo cultureInfo <span style=""color: #308080"">=</span> CultureInfo<span style=""color: #308080"">.</span>GetCultureInfo<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">en-US</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

            PromptBuilder pb <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">new</span> PromptBuilder<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
            pb<span style=""color: #308080"">.</span>StartVoice<span style=""color: #308080"">(</span>VoiceGender<span style=""color: #308080"">.</span>Female<span style=""color: #308080"">,</span> VoiceAge<span style=""color: #308080"">.</span>Adult<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
            pb<span style=""color: #308080"">.</span>StartStyle<span style=""color: #308080"">(</span><span style=""color: #200080; font-weight: bold"">new</span> PromptStyle<span style=""color: #308080"">(</span>PromptVolume<span style=""color: #308080"">.</span>Loud<span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

            pb<span style=""color: #308080"">.</span>StartSentence<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
            pb<span style=""color: #308080"">.</span>AppendText<span style=""color: #308080"">(</span>sentence<span style=""color: #308080"">,</span> PromptEmphasis<span style=""color: #308080"">.</span>Strong<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
            pb<span style=""color: #308080"">.</span>EndSentence<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

            pb<span style=""color: #308080"">.</span>EndStyle<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
            pb<span style=""color: #308080"">.</span>EndVoice<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

            speaker<span style=""color: #308080"">.</span>Speak<span style=""color: #308080"">(</span>pb<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
        <span style=""color: #406080"">}</span>
    <span style=""color: #406080"">}</span>
<span style=""color: #406080"">}</span></pre>

<p><strong>LogManager</strong>:</p>

<pre style=""background: #f6f8ff; color: #000020""><span style=""color: #200080; font-weight: bold"">public</span> <span style=""color: #200080; font-weight: bold"">static</span> <span style=""color: #200080; font-weight: bold"">void</span> WriteAsync<span style=""color: #308080"">(</span>String content<span style=""color: #308080"">)</span>
<span style=""color: #406080"">{</span>
    FileStream fileStream <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">null</span><span style=""color: #406080"">;</span>

    LogFilePath <span style=""color: #308080"">=</span> String<span style=""color: #308080"">.</span>Format<span style=""color: #308080"">(</span>LogFilePath<span style=""color: #308080"">,</span> DateTime<span style=""color: #308080"">.</span>Now<span style=""color: #308080"">.</span>ToString<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">MM-dd-yyyy</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
    <span style=""color: #200080; font-weight: bold"">if</span> <span style=""color: #308080"">(</span>File<span style=""color: #308080"">.</span>Exists<span style=""color: #308080"">(</span>LogFilePath<span style=""color: #308080"">)</span><span style=""color: #308080"">)</span>
        fileStream <span style=""color: #308080"">=</span> File<span style=""color: #308080"">.</span>OpenWrite<span style=""color: #308080"">(</span>LogFilePath<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
    <span style=""color: #200080; font-weight: bold"">else</span>
        fileStream <span style=""color: #308080"">=</span> File<span style=""color: #308080"">.</span>Create<span style=""color: #308080"">(</span>LogFilePath<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
    FileInfo logFile <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">new</span> FileInfo<span style=""color: #308080"">(</span>LogFilePath<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

    StringBuilder logBuilder <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">new</span> StringBuilder<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
    logBuilder<span style=""color: #308080"">.</span>AppendFormat<span style=""color: #308080"">(</span>
        <span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">===================================================================================================={0}{1}{0}{0}</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">,</span>
        Environment<span style=""color: #308080"">.</span>NewLine<span style=""color: #308080"">,</span>
        content<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

    <span style=""color: #200080; font-weight: bold"">byte</span><span style=""color: #308080"">[</span><span style=""color: #308080"">]</span> data <span style=""color: #308080"">=</span> Encoding<span style=""color: #308080"">.</span>UTF8<span style=""color: #308080"">.</span>GetBytes<span style=""color: #308080"">(</span>logBuilder<span style=""color: #308080"">.</span>ToString<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
    fileStream<span style=""color: #308080"">.</span>Position <span style=""color: #308080"">=</span> logFile<span style=""color: #308080"">.</span>Length<span style=""color: #406080"">;</span> <span style=""color: #595979"">// Move to the end of the existing text file</span>

    fileStream<span style=""color: #308080"">.</span>BeginWrite<span style=""color: #308080"">(</span>data<span style=""color: #308080"">,</span> <span style=""color: #008c00"">0</span><span style=""color: #308080"">,</span> data<span style=""color: #308080"">.</span>Length<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">new</span> AsyncCallback<span style=""color: #308080"">(</span>r <span style=""color: #308080"">=</span><span style=""color: #308080"">&gt;</span>
    <span style=""color: #406080"">{</span>
        AsyncState asyncState <span style=""color: #308080"">=</span> r<span style=""color: #308080"">.</span>AsyncState <span style=""color: #200080; font-weight: bold"">as</span> AsyncState<span style=""color: #406080"">;</span>

        asyncState<span style=""color: #308080"">.</span>FStream<span style=""color: #308080"">.</span>EndWrite<span style=""color: #308080"">(</span>r<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
        asyncState<span style=""color: #308080"">.</span>FStream<span style=""color: #308080"">.</span>Close<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
    <span style=""color: #406080"">}</span><span style=""color: #308080"">)</span><span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">new</span> AsyncState<span style=""color: #308080"">(</span>fileStream<span style=""color: #308080"">,</span> data<span style=""color: #308080"">,</span> m_ManualResetEvent<span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

    m_ManualResetEvent<span style=""color: #308080"">.</span>WaitOne<span style=""color: #308080"">(</span><span style=""color: #008c00"">100</span><span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">false</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
<span style=""color: #406080"">}</span></pre>

<p>&#160;</p>

<h3>Source download:</h3>

<p><a href=""https://www.sugarsync.com/pf/D987530_68_7303411631"">Schedule Management.zip</a></p>",4180,2010-05-19 23:25:30.517,1,A
108,Wayne,Encrypt .Net Configuration file,Encrypt-DotNet-Configuration-File,17,"<p>Under some scenarios the developers want to encrypt some sections inside app.config or web.config file, this article <a href=""http://msdn.microsoft.com/en-us/library/ms998283.aspx"">How To: Encrypt Configuration Sections in ASP.NET 2.0 Using RSA</a> describes how to do so clearly, Scott Guthrie also posted one: <a href=""http://weblogs.asp.net/scottgu/archive/2006/01/09/434893.aspx"">Encrypting Web.Config Values in ASP.NET 2.0</a>.</p>

<p>However, in the posts above they uses <strong>aspnet_regiis.exe</strong> and seems it doesn’t directly support app.config, if we want to encrypt app.config for Windows Form or WPF applications, while I tried use it to encrypt my app.config file, it generates a web.config which means my Winform definitely can’t use it, <strong>even if I copy the encrypted appSettings section from this generated web.config to my own app.config</strong>(ConfigurationManager.AppSettings[EncryptedKeyName] is<strong> null</strong> after I did that).</p>

<p><img class=""BlogImage"" title=""ConfigEncrypt"" alt=""Config Encrypt"" src=""http://wayneye.files.wordpress.com/2010/10/configencrypt.png?w=600&amp;h=405"" width=""600"" height=""405"" /></p>
$More$
<p><img class=""BlogImage"" title=""EncryptedWebConfig"" alt=""Encrypted WebConfig"" src=""http://wayneye.files.wordpress.com/2010/10/encryptedwebconfig.png?w=600&amp;h=383"" width=""600"" height=""383"" /></p>

<p>After several minutes google search and testing I found the code below is simple and very straight forward to achieve this:</p>

<pre style=""background: #f6f8ff; color: #000020"">Configuration config <span style=""color: #308080"">=</span> ConfigurationManager<span style=""color: #308080"">.</span>OpenExeConfiguration<span style=""color: #308080"">(</span>ConfigurationUserLevel<span style=""color: #308080"">.</span>None<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

SectionInformation appSettingsSecInfo <span style=""color: #308080"">=</span> config<span style=""color: #308080"">.</span>GetSection<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">appSettings</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">)</span><span style=""color: #308080"">.</span>SectionInformation<span style=""color: #406080"">;</span>
<span style=""color: #200080; font-weight: bold"">if</span> <span style=""color: #308080"">(</span><span style=""color: #308080"">!</span>appSettingsSecInfo<span style=""color: #308080"">.</span>IsProtected<span style=""color: #308080"">)</span>
<span style=""color: #406080"">{</span>
    Console<span style=""color: #308080"">.</span>WriteLine<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">The configuration file has NOT been protected!</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>

    <span style=""color: #595979"">// Encrypt this section by using security provider (RsaProtectedConfigurationProvider or DpapiProtectedConfigurationProvider).</span>
    appSettingsSecInfo<span style=""color: #308080"">.</span>ProtectSection<span style=""color: #308080"">(</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">RsaProtectedConfigurationProvider</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
    appSettingsSecInfo<span style=""color: #308080"">.</span>ForceSave <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">true</span><span style=""color: #406080"">;</span>

    config<span style=""color: #308080"">.</span>Save<span style=""color: #308080"">(</span>ConfigurationSaveMode<span style=""color: #308080"">.</span>Full<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
<span style=""color: #406080"">}</span></pre>

<p>This code snippet will do the encryption job and works for both app.config/web.config, here is the MSDN definition page for SectionInformation.ProtectSection:
  <br /><a href=""http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.protectsection.aspx"">http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.protectsection.aspx</a></p>

<H3>References:</H3>

  <p>Overview of Protected Configuration:</p>

  <p><a href=""http://msdn.microsoft.com/en-us/library/hh8x3tas.aspx"">http://msdn.microsoft.com/en-us/library/hh8x3tas.aspx</a></p>

<p>RsaProtectedConfigurationProvider Class:
  <br /><a href=""http://msdn.microsoft.com/en-us/library/system.configuration.rsaprotectedconfigurationprovider.aspx"">http://msdn.microsoft.com/en-us/library/system.configuration.rsaprotectedconfigurationprovider.aspx</a></p>

<p>DpapiProtectedConfigurationProvider Class:
  <br /><a href=""http://msdn.microsoft.com/en-us/library/system.configuration.dpapiprotectedconfigurationprovider.aspx"">http://msdn.microsoft.com/en-us/library/system.configuration.dpapiprotectedconfigurationprovider.aspx</a></p>",5604,2010-06-11 10:10:15.850,1,A
109,Wayne,Significant Enhancement in Internet Explorer 9,Significant-Enhancement-In-InternetExplorer9,23,"<h3>Background</h3>

<p>Microsoft announced Internet Explorer 9 Release Candidate on&#160; Feb 10<sup>th</sup>, 2011, RC indicates except bug fixing, there would not have big changes before the final RTM. Since I've been keeping a watchful eye on IE9 from its very first preview version, I would like to write a post about its significant enhancement from <strong>a developer's point of view</strong>, I intend to summarize most significant enhancement points of IE9 listed below:</p>

<ul>
  <li><strong>Enhanced performance</strong> </li>
</ul>

<ol>
  <ol>
    <li>The New Chakra JavaScript Engine </li>

    <li>Hardware Acceleration </li>
  </ol>
</ol>

<ul>
  <li><strong>Enhanced </strong><strong>Web Standard Support </strong></li>
</ul>

<ol>
  <ol>
    <li>HTML5 (huge number of new attributes support and Web Storage support) </li>

    <li>CSS3 (border-radius, ::selection pseudo-element, ) </li>

    <li>W3 standard Geolocaltion API </li>
  </ol>
</ol>

<ul>
  <li><strong>Windows 7 Integration</strong> </li>
</ul>

<ol>
  <ol>
    <li>Website customizable TaskBar Jumplist. </li>
  </ol>
</ol>

<p>By achieving new features above, IE9 will absolutely be <strong>the fastest and best Web Standard support version in the entire IE history</strong>.&#160;&#160; </p>

<h3>Walk through IE9 Enhancements</h3>

<h4>New JavaScript Engine – Chakra</h4>

<p>IE9 team must be persistently working so hard on improving Chakra's performance, I picked following two paragraph&#160; from Chakra Page on Wikipedia:</p>

<blockquote>
  <p>Microsoft's development of the engine was in response to evolving competing browsers, on which IE8 was lagging behind in terms of <a href=""http://en.wikipedia.org/wiki/JavaScript"">JavaScript</a> processing speed.<sup><a href=""http://en.wikipedia.org/wiki/Chakra_(JScript_engine)#cite_note-2"">[3]</a></sup> <a href=""http://en.wikipedia.org/wiki/WebKit#SunSpider"">SunSpider</a> tests performed on November 18, 2009 showed the <a href=""http://en.wikipedia.org/wiki/Professional_Developers_Conference"">PDC</a> version of IE9 executing scripts much faster than IE8, but slower than respectively <a href=""http://en.wikipedia.org/wiki/Mozilla_Firefox_3.6"">Firefox 3.6</a>, <a href=""http://en.wikipedia.org/wiki/Google_Chrome"">Chrome</a> 4, and <a href=""http://en.wikipedia.org/wiki/WebKit"">WebKit</a> Nightly.<sup><a href=""http://en.wikipedia.org/wiki/Chakra_(JScript_engine)#cite_note-EarlyDevLook-3"">[4]</a></sup> The same test performed on March 15, 2010 showed the first IE9 Platform Preview (using the then-current version of Chakra) to be faster than Firefox (with <a href=""http://en.wikipedia.org/wiki/SpiderMonkey_(JavaScript_engine)"">SpiderMonkey</a>), but slower than respectively <a href=""http://en.wikipedia.org/wiki/Safari_(web_browser)"">Safari</a> (with <a href=""http://en.wikipedia.org/wiki/WebKit#JavaScriptCore"">SquirrelFish Extreme</a>), Chrome (with <a href=""http://en.wikipedia.org/wiki/V8_(JavaScript_engine)"">V8</a>), and <a href=""http://en.wikipedia.org/wiki/Opera_(web_browser)"">Opera</a> (with <a href=""http://en.wikipedia.org/wiki/Presto_(layout_engine)"">Carakan</a>)</p>
</blockquote>

<blockquote>
  <p>On February 8, 2011, the test showed the IE9 Release Candidate (using the current version of Chakra) to be faster than Safari, Firefox (with <a href=""http://en.wikipedia.org/wiki/SpiderMonkey_(JavaScript_engine)#TraceMonkey"">TraceMonkey</a>), Opera, and Chrome.</p>
</blockquote>
$More$
<p>You can image there was a ""steep curve"" done by Chakra to catch up the competitors in the market: V8, TraceMonkey, etc.</p>

<p><img class=""BlogImage"" src=""http://ie.microsoft.com/testdrive/benchmarks/sunspider/SunSpiderResultsPPB8RC.png"" width=""625"" height=""441"" /></p>

<p><strong>WebKit SunSpider version 0.9.1 results generated February 8th 2011 </strong>(From slowest to fastest)</p>

<p>
  <table border=""1"" cellspacing=""0"" cellpadding=""2"" width=""300""><tbody>
      <tr>
        <th style=""text-align: left"">Detailed Results</th>

        <th style=""text-align: center"">Average (ms)</th>
      </tr>

      <tr>
        <td><strong>IE8</strong></td>

        <td style=""text-align: center""><strong>3746</strong></td>
      </tr>

      <tr>
        <td>Firefox 3.6.13</td>

        <td style=""text-align: center"">753</td>
      </tr>

      <tr>
        <td>Safari 5.0.3</td>

        <td style=""text-align: center"">310</td>
      </tr>

      <tr>
        <td>Firefox 4.0 Beta 11</td>

        <td style=""text-align: center"">254</td>
      </tr>

      <tr>
        <td>Chrome 10 Developer</td>

        <td style=""text-align: center"">248</td>
      </tr>

      <tr>
        <td>Opera 11</td>

        <td style=""text-align: center"">240</td>
      </tr>

      <tr>
        <td>Chrome 9</td>

        <td style=""text-align: center"">238</td>
      </tr>

      <tr>
        <td><font color=""#0080ff""><strong>IE9 Release Candidate</strong></font></td>

        <td style=""text-align: center""><font color=""#0080ff""><strong>209</strong></font></td>
      </tr>
    </tbody></table>
</p>

<p>IE9 is cutting edge in all modern Web Browsers in WebKit SunSpider test.</p>

<h4>Hardware Acceleration</h4>

<p>In general, the ""Hardware"" is the <strong>GPU</strong>, from the page <a href=""http://www.beautyoftheweb.com/#/highlights/all-around-fast"" target=""_blank"">All Around Fast</a>, they said:</p>

<blockquote>
  <p>Today's websites and browsers only use about 10% of the processing power your PC has to offer. Internet Explorer 9 <strong>unlocks the other 90%</strong>. With Internet Explorer 9, we're tapping into your graphics processor through Windows to harness the full potential of your PC. It makes HD video smoother, colors truer, graphics clearer, and websites more responsive.</p>
</blockquote>

<p>More specific, on <a href=""http://msdn.microsoft.com/en-US/ie/ff468705.aspx#_cfgraphics"" target=""_blank"">IE9 Guide for Developers</a> they described:</p>

<blockquote>
  <p>Internet Explorer 9 uses the DirectX family of Windows application programming interfaces (APIs) to enable several advances for web developers. We have moved all graphics and text rendering from the CPU to the graphics card by using Direct2D and DirectWrite. </p>
</blockquote>

<p>Well, how faster IE9 does by utilizing GPU's power? Please take a look at <a href=""http://www.beautyoftheweb.com/assets/videos/IE9_Performance_Video_H264.mp4"" target=""_blank"">this Video</a>.</p>

<h4>HTML5</h4>

<p>By running an HTML 5 support test at <a href=""http://html5test.com"" target=""_blank"">http://html5test.com</a>, IE9 RC scored 116, it is a pool score comparing to most other modern browsers (refer table below), however, much much better than IE 8 and below… </p>

<p>HTML5 Standard support test (From best to worst)</p>

<table border=""1"" cellspacing=""0"" cellpadding=""2"" width=""300""><tbody>
    <tr>
      <td valign=""top"" width=""170"">Web Browser</td>

      <td style=""text-align: center"" valign=""top"" width=""128"">HTML5 Test Score</td>
    </tr>

    <tr>
      <td valign=""top"" width=""170"">Google Chrome 10.0 Dev </td>

      <td style=""text-align: center"" valign=""top"" width=""128"">244</td>
    </tr>

    <tr>
      <td valign=""top"" width=""170"">Firefox 4.0 Beta 11</td>

      <td style=""text-align: center"" valign=""top"" width=""128"">197</td>
    </tr>

    <tr>
      <td valign=""top"" width=""170"">Opera 11</td>

      <td style=""text-align: center"" valign=""top"" width=""128"">177</td>
    </tr>

    <tr>
      <td valign=""top"" width=""170"">Safari</td>

      <td style=""text-align: center"" valign=""top"" width=""128"">165</td>
    </tr>

    <tr>
      <td valign=""top"" width=""170""><strong><font color=""#0080ff"">IE9</font></strong></td>

      <td style=""text-align: center"" valign=""top"" width=""128""><strong><font color=""#0080ff"">116</font></strong></td>
    </tr>

    <tr>
      <td valign=""top"" width=""170"">IE8</td>

      <td style=""text-align: center"" valign=""top"" width=""128"">37</td>
    </tr>

    <tr>
      <td valign=""top"" width=""170"">IE6</td>

      <td style=""text-align: center"" valign=""top"" width=""128"">12</td>
    </tr>
  </tbody></table>

<p>IE9 RC now support a lot of brand new HTML5 attributes like <a href=""http://www.w3.org/TR/html5/semantics.html#the-header-element"" target=""_blank"">header</a>, <a href=""http://www.w3.org/TR/html5/semantics.html#the-aside-element"" target=""_blank"">aside</a>, <a href=""http://www.w3.org/TR/html5/semantics.html#the-nav-element"" target=""_blank"">nav</a>, <a href=""http://www.w3.org/TR/html5/semantics.html#the-section-element"" target=""_blank"">section</a>, <a href=""http://www.w3.org/TR/html5/semantics.html#the-footer-element"" target=""_blank"">footer</a>, and <a href=""http://www.w3.org/TR/html5/the-canvas-element.html#the-canvas-element"" target=""_blank"">HTML5 canvas</a>, for more details you can refer <a href=""http://html5test.com"" target=""_blank"">HTML5Test</a> or <a href=""http://msdn.microsoft.com/en-US/ie/ff468705.aspx"" target=""_blank"">Internet Explorer 9 Guide for Developers</a>.</p>

<h4>Web Storage</h4>

<p>Web Storage is a brand new HTTP state storage strategy implemented by <a href=""http://www.w3.org/TR/webstorage/#the-sessionstorage-attribute"" target=""_blank"">Session Storage</a> and <a href=""http://www.w3.org/TR/webstorage/#the-localstorage-attribute"" target=""_blank"">Local Storage</a>, they are 100% stored in the client by a concrete browser, it is obvious bandwidth is saved and security risks are reduced by doing this. IMHO, this is one of the greatest improvement of HTML5! I will write another post delve deep into Web Storage to explain my opinion.</p>

<p>Now IE9 RC has completely supported sessionStorage and localStorage, Invoke sessionStorage and localStorage in JavaScript is fairly easy, sample code showing below:</p>

<pre style=""background: #f6f8ff; color: #000020"">localStorage<span style=""color: #308080"">.</span><span style=""color: #406080"">{</span>key<span style=""color: #406080"">}</span> <span style=""color: #308080"">=</span> strValue<span style=""color: #406080"">;</span>
<span style=""color: #200080; font-weight: bold"">var</span> localVal <span style=""color: #308080"">=</span> localStorage<span style=""color: #308080"">.</span><span style=""color: #406080"">{</span>key<span style=""color: #406080"">}</span><span style=""color: #406080"">;</span>

sessionStorage<span style=""color: #308080"">.</span><span style=""color: #406080"">{</span>key<span style=""color: #406080"">}</span> <span style=""color: #308080"">=</span> strValue<span style=""color: #406080"">;</span>
<span style=""color: #200080; font-weight: bold"">var</span> sessionVal <span style=""color: #308080"">=</span> sessionStorage<span style=""color: #308080"">.</span><span style=""color: #406080"">{</span>key<span style=""color: #406080"">}</span><span style=""color: #406080"">;</span></pre>

<h4>CSS3</h4>

<p>IE9 RC brought great CSS3 support such as font-face, namespace, border-radius, ::selection pseudo element, <a href=""http://tools.css3.info/selectors-test/test.html"" target=""_blank"">especially CSS3 selector</a>, IE9 RC ""Passed 574 out of 574 CSS3 selector tests"", whereas Chrome 10.0 Dev passed 558.</p>

<p>I write a IE9 CSS3 support page which demonstrates font-face, border-radius, ::selection and selectors, HTML5 source code pasted below, please feel free to have a try<img style=""background-image:url(http://wayneye.com/Images/winLiveEmotions.gif);background-position:-0px -0px;width:19px;height:19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif""></p>

<pre style=""background: #f6f8ff; color: #000020""><span style=""color: #004a43"">&lt;!DOCTYPE html&gt;</span>
<span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">html</span><span style=""color: #474796""> </span><span style=""color: #074726"">lang</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;en&quot;</span><span style=""color: #0057a6"">&gt;</span>
<span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">head</span><span style=""color: #0057a6"">&gt;</span>
    <span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span><span style=""color: #474796""> </span><span style=""color: #074726"">charset</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;utf-8&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span>
    <span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span><span style=""color: #474796""> </span><span style=""color: #074726"">name</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;application-name&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;Wayne IE9 CSS3 Support Demo&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span>
    <span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">title</span><span style=""color: #0057a6"">&gt;</span>Wayne IE9 CSS3 Support Demo<span style=""color: #0057a6"">&lt;/</span><span style=""color: #200080; font-weight: bold"">title</span><span style=""color: #0057a6"">&gt;</span>
    <span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">style</span><span style=""color: #0057a6""> type=&quot;text/css&quot;&gt;</span>
        <span style=""color: #406080"">@</span><span style=""color: #004a43"">font-face</span>
        <span style=""color: #406080"">{</span>
            <span style=""color: #7779bb; font-weight: bold"">font-family</span><span style=""color: #308080"">:</span> <span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">Blue Highway</span><span style=""color: #800000"">&quot;</span><span style=""color: #406080"">;</span>
            <span style=""color: #7779bb; font-weight: bold"">src</span><span style=""color: #308080"">:</span> <span style=""color: #400000"">url</span><span style=""color: #308080"">(</span><span style=""color: #0066ee"">http</span><span style=""color: #406080"">:</span><span style=""color: #200080; font-weight: bold"">//</span><span style=""color: #5555dd"">www.princexml.com</span><span style=""color: #40015a"">/fonts/larabie/bluehigh.ttf</span><span style=""color: #308080"">)</span> format(<span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">truetype</span><span style=""color: #800000"">&quot;</span>)<span style=""color: #406080"">;</span>
        <span style=""color: #406080"">}</span>
        <span style=""color: #200080; font-weight: bold"">body</span>
        <span style=""color: #406080"">{</span>
            <span style=""color: #7779bb; font-weight: bold"">background-color</span><span style=""color: #308080"">:</span> rgba(<span style=""color: #008c00"">100</span><span style=""color: #308080"">,</span><span style=""color: #008c00"">50</span><span style=""color: #308080"">,</span><span style=""color: #008c00"">0</span><span style=""color: #308080"">,</span><span style=""color: #008c00"">5</span><span style=""color: #308080"">,</span><span style=""color: #008c00"">0.5</span>)<span style=""color: #406080"">;</span>
            <span style=""color: #7779bb; font-weight: bold"">font-size</span><span style=""color: #308080"">:</span> <span style=""color: #008c00"">16</span><span style=""color: #006600"">px</span><span style=""color: #406080"">;</span>
            <span style=""color: #7779bb; font-weight: bold"">font-family</span><span style=""color: #308080"">:</span> <span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">Blue Highway</span><span style=""color: #800000"">&quot;</span> <span style=""color: #308080"">,</span>Arial<span style=""color: #308080"">,</span>Tahoma<span style=""color: #406080"">;</span>
        <span style=""color: #406080"">}</span>
        
        <span style=""color: #308080"">.</span>elementWithRoundedConor
        <span style=""color: #406080"">{</span>
            <span style=""color: #7779bb; font-weight: bold"">width</span><span style=""color: #308080"">:</span> <span style=""color: #008c00"">150</span><span style=""color: #006600"">px</span><span style=""color: #406080"">;</span>
            <span style=""color: #7779bb; font-weight: bold"">height</span><span style=""color: #308080"">:</span> <span style=""color: #008c00"">100</span><span style=""color: #006600"">px</span><span style=""color: #406080"">;</span>
            <span style=""color: #7779bb; font-weight: bold"">padding</span><span style=""color: #308080"">:</span> <span style=""color: #008c00"">10</span><span style=""color: #006600"">px</span><span style=""color: #406080"">;</span>
            <span style=""color: #7779bb; font-weight: bold"">margin</span><span style=""color: #308080"">:</span> <span style=""color: #008c00"">0</span> <span style=""color: #074726"">auto</span><span style=""color: #406080"">;</span>
            <span style=""color: #7779bb; font-weight: bold"">border</span><span style=""color: #308080"">:</span> <span style=""color: #008c00"">3</span><span style=""color: #006600"">px</span> <span style=""color: #074726"">dotted</span> <span style=""color: #008c00"">#</span><span style=""color: #008000"">666</span><span style=""color: #406080"">;</span>
            border-radius<span style=""color: #308080"">:</span> <span style=""color: #008c00"">10</span><span style=""color: #006600"">px</span> <span style=""color: #008c00"">10</span><span style=""color: #006600"">px</span> <span style=""color: #008c00"">10</span><span style=""color: #006600"">px</span> <span style=""color: #008c00"">10</span><span style=""color: #006600"">px</span><span style=""color: #406080"">;</span>
        <span style=""color: #406080"">}</span>
        <span style=""color: #308080"">:</span><span style=""color: #406080"">:</span>selection
        <span style=""color: #406080"">{</span>
            <span style=""color: #7779bb; font-weight: bold"">background-color</span><span style=""color: #308080"">:</span> <span style=""color: #008c00"">#</span><span style=""color: #008000"">E1E87A</span><span style=""color: #406080"">;</span>
            <span style=""color: #7779bb; font-weight: bold"">color</span><span style=""color: #308080"">:</span> <span style=""color: #007d45"">Black</span><span style=""color: #406080"">;</span>
        <span style=""color: #406080"">}</span>
        
        <span style=""color: #595979"">/*CSS3 selector*/</span>
        <span style=""color: #200080; font-weight: bold"">img</span><span style=""color: #308080"">[</span><span style=""color: #074726"">alt</span>*<span style=""color: #308080"">=</span><span style=""color: #800000"">&quot;</span><span style=""color: #1060b6"">ie9</span><span style=""color: #800000"">&quot;</span><span style=""color: #308080"">]</span> <span style=""color: #595979"">/*all div elements that have a alt attribute value containing &quot;ie9&quot;*/</span>
        <span style=""color: #406080"">{</span>
            <span style=""color: #7779bb; font-weight: bold"">border</span><span style=""color: #308080"">:</span> <span style=""color: #008c00"">3</span><span style=""color: #006600"">px</span> <span style=""color: #074726"">solid</span> <span style=""color: #008c00"">#</span><span style=""color: #008000"">4169E1</span><span style=""color: #406080"">;</span>
        <span style=""color: #406080"">}</span>
    <span style=""color: #0057a6"">&lt;/</span><span style=""color: #200080; font-weight: bold"">style</span><span style=""color: #0057a6"">&gt;</span>
<span style=""color: #0057a6"">&lt;/</span><span style=""color: #200080; font-weight: bold"">head</span><span style=""color: #0057a6"">&gt;</span>
<span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">body</span><span style=""color: #0057a6"">&gt;</span>
    <span style=""color: #0057a6"">&lt;</span><span style=""color: #333385"">header</span><span style=""color: #474796""> role</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;banner&quot;</span><span style=""color: #0057a6"">&gt;</span><span style=""color: #0057a6"">&lt;/</span><span style=""color: #333385"">header</span><span style=""color: #0057a6"">&gt;</span>
    <span style=""color: #0057a6"">&lt;</span><span style=""color: #333385"">aside</span><span style=""color: #0057a6"">&gt;</span>CSS3 border-radius demo:<span style=""color: #0057a6"">&lt;/</span><span style=""color: #333385"">aside</span><span style=""color: #0057a6"">&gt;</span>
    <span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">div</span><span style=""color: #474796""> </span><span style=""color: #074726"">class</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;elementWithRoundedConor&quot;</span><span style=""color: #0057a6"">&gt;</span>
        Some text<span style=""color: #008c00"">....</span>
    <span style=""color: #0057a6"">&lt;/</span><span style=""color: #200080; font-weight: bold"">div</span><span style=""color: #0057a6"">&gt;</span>
    <span style=""color: #0057a6"">&lt;</span><span style=""color: #333385"">aside</span><span style=""color: #0057a6"">&gt;</span>CSS3 selector demo:<span style=""color: #0057a6"">&lt;/</span><span style=""color: #333385"">aside</span><span style=""color: #0057a6"">&gt;</span>
    <span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">img</span><span style=""color: #474796""> </span><span style=""color: #074726"">src</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;http://i1-news.softpedia-static.com/images/news2/The-New-Internet-Explorer-9-IE9-Logo-2.png&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">alt</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;ie9test&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span>
    <span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">img</span><span style=""color: #474796""> </span><span style=""color: #074726"">src</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;http://mozcom-cdn.mozilla.net/img/home/download-logo.png&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">alt</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;FireFox&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span>
    <span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">img</span><span style=""color: #474796""> </span><span style=""color: #074726"">src</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;http://i1-news.softpedia-static.com/images/news2/The-New-Internet-Explorer-9-IE9-Logo-2.png&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">alt</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;ie9logo&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span>
    <span style=""color: #0057a6"">&lt;</span><span style=""color: #333385"">footer</span><span style=""color: #474796""> role</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;copyrightInfo&quot;</span><span style=""color: #0057a6"">&gt;</span>
    <span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">p</span><span style=""color: #0057a6"">&gt;</span><span style=""color: #074726"">&amp;</span><span style=""color: #074726"">nbsp</span><span style=""color: #074726"">;</span><span style=""color: #0057a6"">&lt;/</span><span style=""color: #200080; font-weight: bold"">p</span><span style=""color: #0057a6"">&gt;</span>
        <span style=""color: #074726"">&amp;</span><span style=""color: #074726"">copy</span><span style=""color: #074726"">;</span>WayneYe http://WayneYe<span style=""color: #008c00"">.</span>com <span style=""color: #008c00"">2011</span>
    <span style=""color: #0057a6"">&lt;/</span><span style=""color: #333385"">footer</span><span style=""color: #0057a6"">&gt;</span>

<span style=""color: #0057a6"">&lt;/</span><span style=""color: #200080; font-weight: bold"">body</span><span style=""color: #0057a6"">&gt;</span>
<span style=""color: #0057a6"">&lt;/</span><span style=""color: #200080; font-weight: bold"">html</span><span style=""color: #0057a6"">&gt;</span></pre>

<h4>Geolocation API</h4>

<p>One month ago I wrote a blog talking about invoking W3 standard Geolocation API and Google map to track end user's Geolocation (<a href=""http://wayneye.com/Blog/IPAddress-To-Geolocation/"">http://wayneye.com/Blog/IPAddress-To-Geolocation/</a>, it described how to implement W3 standard way to track Geolocation with sample JS code), at that time I was using IE9 Beta2 which doesn't support it, now it is excited for me IE9 RC has completely supported Geolocation API! See screenshot below:</p>

<p><img  class=""BlogImage"" src=""http://ns5gpg.bay.livefilestore.com/y1pq6juqM9GilACLSpvYU4zGI5uGZNAtMJc-S4o9e_pppqxk2lixQ8kX7WfA5OPZdoRO-OVQ1SvbEmSufF_MWODd1hIRLYv4nO1/WayneYeGeoTrack.png?psid=1"" /></p>

<p>By clicking ""Allow once"", your Geolocation will be collected by the browser and pass to Google map.</p>

<p><img class=""BlogImage"" src=""http://ns5gpg.bay.livefilestore.com/y1pAZ0uzU-x1aCIzszRl1ORYSx-NgvHGVhJeCeNf8co4aAnH1dTBRzFy1X9WdaDvrcJxEMQufMtPJ_7Zlz1mYoUkTYbsTJV0w-d/geoTrack.png?psid=1"" /></p>

<h4>Windows 7 Integration</h4>

<p>This is really a highlight feature and it is really funny<img style=""background-image:url(http://wayneye.com/Images/winLiveEmotions.gif);background-position:-0px -0px;width:19px;height:19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif"">, see screenshot below: </p>

<p><img class=""BlogImage""  src=""http://ns5gpg.bay.livefilestore.com/y1pEMYGYA5Tj78GeAEhcqcAorwQOEGMOG-sTyo1ecHrwc16Joq4XFEVH3FId6xxpvCS9yJQ20c5FctiP9rEf4dLSuTf2Q6Oe134/WayneYeJumpList.png?psid=1"" /></p>

<p>The implementation is easy, add similar meta attributes below and IE9 will register Jumplist on your Windows.</p>

<p style=""text-indent:0;""><span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span><span style=""color: #474796""> </span><span style=""color: #074726"">name</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;application-name&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;Wayne's Geek Life - Infinite passion on programming&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span> 

  <br /><span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span><span style=""color: #474796""> </span><span style=""color: #074726"">name</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;msapplication-tooltip&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;See what Wayne is blogging and sharing:)&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span> 

  <br /><span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span><span style=""color: #474796""> </span><span style=""color: #074726"">name</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;msapplication-starturl&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;http://WayneYe.com/&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span> 

  <br /><span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span><span style=""color: #474796""> </span><span style=""color: #074726"">name</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;msapplication-navbutton-color&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;#5f6dbd&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span> 

  <br /><span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span><span style=""color: #474796""> </span><span style=""color: #074726"">name</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;msapplication-window&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;width=960;height=600&quot;</span><span style=""color: #0057a6"">/&gt;</span> 

  <br /><span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span><span style=""color: #474796""> </span><span style=""color: #074726"">name</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;msapplication-task&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;name=Home;action-uri=http://WayneYe.com;icon-uri=http://WayneYe.com/favicon.ico&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span> 

  <br /><span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span><span style=""color: #474796""> </span><span style=""color: #074726"">name</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;msapplication-task&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;name=Album;action-uri=http://WayneYe.com/Album;icon-uri=http://WayneYe.com/favicon.ico&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span> 

  <br /><span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span><span style=""color: #474796""> </span><span style=""color: #074726"">name</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;msapplication-task&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;name=Video;action-uri=http://WayneYe.com/Video;icon-uri=http://WayneYe.com/favicon.ico&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span> 

  <br /><span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span><span style=""color: #474796""> </span><span style=""color: #074726"">name</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;msapplication-task&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;name=History;action-uri=http://WayneYe.com/History;icon-uri=http://WayneYe.com/favicon.ico&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span> 

  <br /><span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span><span style=""color: #474796""> </span><span style=""color: #074726"">name</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;msapplication-task&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;name=Visit Record;action-uri=http://WayneYe.com/VisitRecord;icon-uri=http://WayneYe.com/favicon.ico&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span> 

  <br /><span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span><span style=""color: #474796""> </span><span style=""color: #074726"">name</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;msapplication-task&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;name=About Wayne;action-uri=http://WayneYe.com/About;icon-uri=http://WayneYe.com/favicon.ico&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span> </p>
Microsoft's official guide <a href=""http://msdn.microsoft.com/library/gg491727(v=VS.85).aspx"" target=""_blank"">How to Create a Basic Pinned Site</a>. 

<h3>Conclusion</h3>

<p>IE9 RC has made a great enhancement on JavaScript execution performance and much better Web Standard (HTML5, CSS3, Geolocation API) support, even more, a seamless integration with Windows 7 Taskbar Jumplist. However, there are still a number of pities, personally I wish IE 9 will going to implement follow HTML5 features:</p>

<ul>
  <li>HTML5 form input elements (&lt;input type=""email/range/url/time/color etc."") now are completely not supported by IE9.</li>

  <li><a href=""http://www.w3.org/TR/workers/"" target=""_blank"">Web Workers</a> which supports long-running scripts that are not interrupted by scripts that respond to clicks or other user interactions.</li>

  <li><a href=""http://dev.w3.org/html5/eventsource/"" target=""_blank"">Server-Side events</a> (SSE) is standardized as part of HTML5, which allow servers initiate data transmission towards clients once an initial client connection has been established.</li>
</ul>

<h3>References</h3>

<br /><strong>The New JavaScript Engine in Internet Explorer 9 
    <br /></strong><a title=""http://blogs.msdn.com/b/ie/archive/2010/03/18/the-new-javascript-engine-in-internet-explorer-9.aspx"" href=""http://blogs.msdn.com/b/ie/archive/2010/03/18/the-new-javascript-engine-in-internet-explorer-9.aspx"">http://blogs.msdn.com/b/ie/archive/2010/03/18/the-new-javascript-engine-in-internet-explorer-9.aspx</a>
<br />
<br /><strong>Internet Explorer 9 Guide for Developers</strong> 
  <br /><a href=""http://msdn.microsoft.com/en-US/ie/ff468705.aspx"" target=""_blank"">http://msdn.microsoft.com/en-US/ie/ff468705.aspx</a>
<br /><br />
<strong>HTML5 Spec
    <br /></strong><a href=""http://dev.w3.org/html5/spec/Overview.html"">http://dev.w3.org/html5/spec/Overview.html</a>

<br /><br /><strong>W3 Geolocation API Specification 
    <br /></strong><a href=""http://dev.w3.org/geo/api/spec-source.html"">http://dev.w3.org/geo/api/spec-source.html</a>

<br /><br /><strong>HTML5 Doctor</strong>

  <br /><a title=""http://html5doctor.com/"" href=""http://html5doctor.com/"">http://html5doctor.com/</a>

<h3>Appendix</h3>

<p>I also want to take this opportunity to share two personal tips on developing cross-browser web application related with Internet Explorer.</p>

<p>1. Define ""X-UA-Compatible"" meta attribute to tell Internet Explorer what ""Browse Mode"" it should use, example below:</p>

<pre style=""background: #f6f8ff; color: #000020""><span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span> <span style=""color: #074726"">http-equiv</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">X-UA-Compatible</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">IE=edge;FF=3;OtherUA=4</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #0057a6"">/&gt;</span> <span style=""color: #595979"">&lt;!--</span><span style=""color: #595979"">IE will try to use the highest mode available.</span><span style=""color: #595979"">--&gt;</span>
<span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span> <span style=""color: #074726"">http-equiv</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">X-UA-Compatible</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">IE=7;FF=3;OtherUA=4</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #0057a6"">/&gt;</span> <span style=""color: #595979"">&lt;!--</span><span style=""color: #595979"">IE 7 browse mode.</span><span style=""color: #595979"">--&gt;</span>
<span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span> <span style=""color: #074726"">http-equiv</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">X-UA-Compatible</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #1060b6"">IE=EmulateIE7;FF=3;OtherUA=4</span><span style=""color: #1060b6"">&quot;</span> <span style=""color: #0057a6"">/&gt;</span> <span style=""color: #595979"">&lt;!--</span><span style=""color: #595979"">EmulateIE7 browse mode.</span><span style=""color: #595979"">--&gt;</span></pre>

<p>Please refer more details on MSDN article: <a href=""http://msdn.microsoft.com/en-us/library/cc196984(v=vs.85).aspx"" target=""_blank""><strong>compatible Property</strong></a> and <strong><a href=""http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx"" target=""_blank"">Defining Document Compatibility</a>.</strong></p>

<p>2. Conditional comments to distinguish specific IE version</p>

<pre style=""background: #f6f8ff; color: #000020""><span style=""color: #595979"">&lt;!--</span><span style=""color: #595979"">[if lte IE 6]&gt;</span>
<span style=""color: #595979"">&#160;&#160;&#160; HTML code only for IE6 and under, for example, add a special CSS file only</span>
<span style=""color: #595979"">&#160;&#160;&#160; for IE6(or under); Or, display a information panel to inform user IE6 is </span>
<span style=""color: #595979"">&#160;&#160;&#160; seriously outdated:)</span>
<span style=""color: #595979"">&lt;![endif]</span><span style=""color: #595979"">--&gt;</span></pre>

<p>&quot;<strong>lte</strong>"" indicates ""<strong>less-than or equal</strong>"" which I always use, you can also use ""[if !IE]"", ""[if IE 7]"", etc.,&#160; see complete usage in MSDN article: <strong><a href=""http://msdn.microsoft.com/en-us/library/ms537512(v=vs.85).aspx"" target=""_blank"">About Conditional Comments</a>.</strong></p>

<h3></h3>

<p><strong>Happy Coding<img style=""background-image:url(http://wayneye.com/Images/winLiveEmotions.gif);background-position:-0px -0px;width:19px;height:19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif""></strong></p>

<p>Also posted at:&nbsp;<em><a href=""http://www.codeproject.com/KB/HTML/IE9-RC-Enhancement.aspx"" target=""_blank"">http://www.codeproject.com/KB/HTML/IE9-RC-Enhancement.aspx</a></em></p>",5770,2011-02-18 21:17:35.177,1,A
110,Wayne,HTML5 Web Storage in Essence,HTML5-Web-Storage-In-Essence,23,"<h2>Background </h2>

<p><strong>Web Storage</strong> (also named Dom storage) is a brand new mechanism of storing temporary/permanent data introduced in HTML5 to replace cookie, it contains two new DOM objects: <strong>sessionStoragy</strong> and <strong>localStorage</strong>), in <a title=""Web Storage Spec"" href=""http://dev.w3.org/html5/webstorage/"" target=""_blank"">Web Storage Spec</a>, Ian Hickson documented that Web Storage are intended to solve two cases that &quot;<strong>not handled well by </strong><a href=""http://tools.ietf.org/html/draft-ietf-httpstate-cookie"" target=""_blank""><strong>Cookie</strong></a>&quot;, they are:</p>

<ol>
  <li>The first is designed for scenarios where the user is carrying out a single transaction, but could be carrying out multiple transactions in different windows at the same time. 
    <br /></li>

  <li>The second storage mechanism is designed for storage that spans multiple windows, and lasts beyond the current session. In particular, Web applications may wish to store megabytes of user data, such as entire user-authored documents or a user's mailbox, on the client side for performance reasons. </li>
</ol>

<p>sessionStorage and localStorage are introduced by W3 in HTML5 to solve problems above, let's begin with a review of how Cookie currently works.</p>

<br />

<h2>Current HTTP State Storage – <a href=""http://tools.ietf.org/html/draft-ietf-httpstate-cookie"" target=""_blank"">Cookie</a></h2>

<h3>Mechanism </h3>

<p>An HTTP Cookie was a set of key/value pairs which an HTTP web server requests a concrete client browser (i.e. User Agent - UA) to store on client's hard disk, when the UA request to the web server further, UA will wrap all the cookie data within the HTTP request header as long as following conditions are all satisfied:</p>

<ol>
  <li>The cookie data has not expired. </li>

  <li>The requested <em>domain</em> is under exactly the same domain when cookie was stored. </li>

  <li>The requested <em>path</em> under the domain is the same one where cookie was stored. </li>
</ol>

<p>Once the cookie expires, browser will delete it from local hard disk.</p>

<p>A common cookie example:</p>

<ol>
  <li>An end user types <a href=""http://www.foo.net"">www.foo.net</a> in a browser's navigation bar and hit enter. </li>

  <li><a href=""http://www.foo.net"">www.foo.net</a> returns HTTP status 200 message below (In the <span style=""color: green"">Green part</span>, web server expected client browser to store two Cookie key/value pairs: <strong>WayneKey1=value1;WayneKey2=Value2</strong>, they could be accessible from the entire domain, and they will expire after 1 year): 

    <br />

    <div style=""border-bottom: thin solid; border-left: thin solid; padding-bottom: 0px; padding-left: 1em; width: 640px; padding-right: 1em; border-top: thin solid; border-right: thin solid; padding-top: 0px"">
      <p><tt><font size=""2"">HTTP/1.1 200 OK 
            <br />Content-type: text/html 

            <br /><span style=""color: green"">Set-Cookie: WayneKey1=value1;WayneKey2=Value2;domain=www.foo.net; expires=Tue, 24-Feb-2012 07:13:22 GMT; path=/; HttpOnly</span> 

            <br />&#160; <br />(Response HTTP body)</font></tt></p>
    </div>
  </li>
$More$
  <li>Browser received the HTTP response and stored the cookie key/values in plaint text into user's hard disk. </li>

  <li>User did some interactions and requested back <a href=""http://www.foo.net"">www.foo.net</a>, browser will wrap the cookie data into request HTTP header. 

    <br />

    <div style=""border-bottom: thin solid; border-left: thin solid; padding-bottom: 0px; padding-left: 1em; width: 640px; padding-right: 1em; border-top: thin solid; border-right: thin solid; padding-top: 0px"">
      <p><tt><font size=""2"">GET /Index.aspx HTTP 1.1 
            <br />HOST: <a href=""http://www.foo.net"">www.foo.net</a></font></tt><tt><font size=""2""> 
            <br />Accept: *.* 

            <br /><span style=""color: green"">Cookie: WayneKey1=value1;WayneKey2=Value2;</span></font></tt></p>

      <p><tt><font size=""2""><span style=""color: green""></span>(Request HTTP body)</font></tt></p>
    </div>
  </li>
</ol>

<blockquote>
  <p>Notes: in #4 above, if client browser does not support cookie or cookie is disabled by user , a fallback mechanism might be implemented by the HTTP Web server, which can usually store cookie data within the URL (for an instance example, ASP.NET can support storing cookie in URL by setting <code>cookieless=&quot;UseUri&quot;</code> in web.config, refer: <a href=""http://msdn.microsoft.com/en-us/library/aa479314.aspx"" target=""_blank"">Cookieless ASP.NET</a>), or alternatively, the Web server won't allow client to use its features.</p>
</blockquote>

<p>Based on a server allocated &quot;<strong>Session ID</strong>&quot; storing in <strong>client cookie</strong>, <strong>Session object</strong> is widely used in all popular web servers to store temporary data<strong> on server side </strong>(could be memory, database or a dedicated session storage server and so on), in case client disabled cookie, web server might adopt the same strategy mentioned above (storing cookie in URL), or instead, they do not allow client to use its features except client gets cookie enabled. 

  <br /></p>

<h3>Situation</h3>

<p>Nowadays countless websites (for example Google, Facebook, Amazon, New York Times) relies on HTTP cookie to store data such as user preference, login information, shopping cart and so on. If you disable cookie in your browser and try to access many<strong> extremely popular web applications</strong> (like Facebook, Twitter, Gmail, Amazon and so on) today , you probably see screenshots below: </p>

<p><img class=""BlogImage"" src=""http://public.bay.livefilestore.com/y1p686gobFZyFZ7VohUS0-lj6XLdKPLZgoU70o7CHk5J0Ja-3J0ran6pnOeJFcgx-9hJN7AG4A9xCP_AtuySNBRxA/GoogleNoCookie.jpg?psid=1"" /></p>

<p><img class=""BlogImage"" src=""http://public.bay.livefilestore.com/y1p_s9UC7Xfq5CpJY2PfBxzRUL6bcQgUYe6h3fQ4yKNTqFwdtMDHwKxw_yvZW1d-Pe4LthjR3EuBF_WpBylRYlA3A/fbCookie.jpg?psid=1"" /></p>

<p><img class=""BlogImage"" src=""http://public.bay.livefilestore.com/y1p1LAxsLb-Au4jkE8ECQQdJF1UUjt1zZbiNMoEpa1yvwOWD5f0QAj-3tNDcIcP2wvIl7MBF8J0CcY0mwZ-ulXzVA/AmazonNoCookie.jpg?psid=1"" /></p>

<p>In one word, <strong style=""color:red"">cookie enabled is a mandatory condition</strong> <strong>to use these web giants</strong>. 

  <br /></p>

<h3>Cookie Drawbacks</h3>

<p>I investigated and summarized a number of drawbacks of Cookie listed below (two W3C points mentioned at the beginning are included):</p>

<ul>
  <li><strong>Size and count limit</strong> 

    <br />Most browsers limited cookie size to 4096 bytes and 300 maximum cookie count within a domain. IETF recommended limitation standard, refer: <a href=""http://www.ietf.org/rfc/rfc2109.txt"">http://www.ietf.org/rfc/rfc2109.txt</a> section 6.3. </li>

  <li><strong>Performance hit</strong> 

    <br />If a website uses cookie, then every HTTP request/response between server/browser must include all cookie key/values pairs in the HTTP header. </li>

  <li><strong>Security</strong> 

    <br />Cookie is stored in user's local hard disk in plaint text. If developers didn't deal with this appropriate, <a href=""http://en.wikipedia.org/wiki/HTTP_cookie#Cookie_theft_and_session_hijacking""><strong>cookie/session hijacking</strong></a> could possibly happen. </li>

  <li><strong>Ability to store data separately for more than one instance of same web application</strong> 

    <br />Cookie is not easy to handle one use case: separate instances of the same web application to run in different windows without interfering with each other (sessionStorage is going to well-support that, I will describe it later in this post). </li>
</ul>

<br />

<h2>Web Storage mechanism</h2>

<p>Unlike cookie which passed between server/client and could be accessed by both of them, sessionStorage/localStorage are <strong>100% stored in the client</strong> by a concrete browser, sessionStorage stores temporarily data in one HTTP session, localStorage stores permanent data into client hard disk. The advantage is obvious:</p>

<ul>
  <li>Data won't be passed through HTTP request/response, bandwidth will be saved. </li>

  <li>There will be no 4KB limitation, web site has much more flexibility to store large data in client. 
    <br />

    <br />

    <blockquote>Notes: W3C &quot;recommended 5 megabytes localStorage size limitation per domain&quot;, and &quot;welcome feedback&quot;, this is much larger than 4KB limitation in cookie. </blockquote>
  </li>

  <li>Now that data won't be passed through network, this will be relatively more secure. </li>

  <li>Considering further according to #3, a number of existing HTTPs connection in theory could use plaint HTTP by adopting Web Storage, because no need to encrypt the data, the data is stored in client side.&#160; Since HTTPs usually has only 10% performance comparing with HTTP,&#160; eventually either performance will be improved or cost is saved (procuring cheaper server hardware) . </li>
</ul>

<p>In my humbly opinion, Web Storage is <strong>one the greatest feature in HTML5,</strong> and<strong> </strong>I believe it will <strong>lead an HTTP web state storage revolution</strong> in the near future! Why? Considering several stories listed below, I guess they will very possibly happen soon!</p>

<p>&#160;</p>

<ol>
  <li><strong>Bandwidth save</strong>. You have an Email account of a popular Email service web application, and you use it daily, at very first time of your visit in a concrete browser. It stores your 300+ contacts list as well as your newest 20 email threads (first page) into your browser's local storage, and the data takes approximate 8 kilobytes in total. In future visits, this 8 kilobytes will not be transferred from the Email server. </li>

  <li><strong>No download time = Better UX</strong>. You like watching videos from a popular video web site, which records video list (by default 10 latest watched videos) you've watched <strong>as well as indexed real video stream data. E</strong>very time you visit the web site, you have a ability to view your watching history and most important, you can re-watch any video in the list in a second – from your local storage. </li>

  <li><strong>Surfing same web sites using more than one account simultaneously</strong>. For some reason, you registered two accounts in one web site, which uses session storage, and you can login with these two account in two browser tabs and interactive in isolation. For example, checking Gmail in two Tabs using two Gmail account at the same time. </li>
</ol>

<br />

<h2>Manipulating Storage in JavaScript</h2>

<br />

<h3>The Storage Interface</h3>

<p>Both sessionStorage/localStorage are inherited from an interface Storage, it defined in Web Storage Spec:</p>

<pre style=""background: #f6f8ff; color: #000020"">interface Storage <span style=""color: #406080"">{</span>
  readonly attribute unsigned long length<span style=""color: #406080"">;</span>
  DOMString key<span style=""color: #308080"">(</span><span style=""color: #200080; font-weight: bold"">in</span> unsigned long <span style=""color: #007d45"">index</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
  getter any <span style=""color: #200080; font-weight: bold"">getItem</span><span style=""color: #308080"">(</span><span style=""color: #200080; font-weight: bold"">in</span> DOMString key<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
  setter creator void setItem<span style=""color: #308080"">(</span><span style=""color: #200080; font-weight: bold"">in</span> DOMString key<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">in</span> any value<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
  deleter void removeItem<span style=""color: #308080"">(</span><span style=""color: #200080; font-weight: bold"">in</span> DOMString key<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
  void clear<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
<span style=""color: #406080"">}</span><span style=""color: #406080"">;</span></pre>

<h3>
  <br />Basic Operations</h3>

<p>First things first, we need check whether a concrete browser supports Web Storage or not, per <a href=""http://en.wikipedia.org/wiki/Comparison_of_layout_engines_(HTML5)"" target=""_blank"">Wikipedia: Comparison of layout engines (HTML5)</a>, IE8+ (IE8 does NOT support Storage Event, while IE9 RC supports), FireFox 3.5+, Safari 4.0+, Chrome 4.0+<strong> all support Web Storage</strong>. We can write a&#160; simple JS function to check whether client browser supports Web Storage or not:</p>

<pre style=""background: #f6f8ff; color: #000020""><span style=""color: #200080; font-weight: bold"">function</span> supportsLocalStorage<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span> <span style=""color: #406080"">{</span>
    <span style=""color: #200080; font-weight: bold"">return</span> <span style=""color: #308080"">(</span><span style=""color: #1060b6"">'localStorage'</span> <span style=""color: #200080; font-weight: bold"">in</span> window<span style=""color: #308080"">)</span> <span style=""color: #308080"">&amp;&amp;</span> window<span style=""color: #308080"">[</span><span style=""color: #1060b6"">'localStorage'</span><span style=""color: #308080"">]</span> <span style=""color: #308080"">!==</span> <span style=""color: #0f4d75"">null</span><span style=""color: #406080"">;</span>
<span style=""color: #406080"">}</span>

<span style=""color: #200080; font-weight: bold"">if</span><span style=""color: #308080"">(</span>supportsLocalStorage<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span> <span style=""color: #406080"">{</span>
    <span style=""color: #595979"">// Web Storage invocation here</span>
<span style=""color: #406080"">}</span>
<span style=""color: #200080; font-weight: bold"">else</span> <span style=""color: #406080"">{</span>
    alert<span style=""color: #308080"">(</span><span style=""color: #1060b6"">'Sorry, your browser does not support Web Storage'</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
<span style=""color: #406080"">}</span></pre>

<p>If the browser does support, then invoking sessionStorage and localStorage in JavaScript is fairly easy. Sample code which demonstrates set/get/remove/clear items storage shows below:</p>

<pre style=""background: #f6f8ff; color: #000020""><span style=""color: #595979"">// Set/Get locallStorage</span>
localStorage<span style=""color: #308080"">.</span><span style=""color: #406080"">{</span>key<span style=""color: #406080"">}</span> <span style=""color: #308080"">=</span> strValue<span style=""color: #406080"">;</span>
<span style=""color: #200080; font-weight: bold"">var</span> localVal <span style=""color: #308080"">=</span> localStorage<span style=""color: #308080"">.</span><span style=""color: #406080"">{</span>key<span style=""color: #406080"">}</span><span style=""color: #406080"">;</span>

<span style=""color: #595979"">// Set/Get sessionlStorage</span>
sessionStorage<span style=""color: #308080"">.</span><span style=""color: #406080"">{</span>key<span style=""color: #406080"">}</span> <span style=""color: #308080"">=</span> strValue<span style=""color: #406080"">;</span>
<span style=""color: #200080; font-weight: bold"">var</span> sessionVal <span style=""color: #308080"">=</span> sessionStorage<span style=""color: #308080"">.</span><span style=""color: #406080"">{</span>key<span style=""color: #406080"">}</span><span style=""color: #406080"">;</span>

<span style=""color: #595979"">// Remove an storage item</span>
localStorage<span style=""color: #308080"">.</span>removeItem<span style=""color: #308080"">(</span><span style=""color: #1060b6"">'key'</span><span style=""color: #308080"">)</span>
sessionStorage<span style=""color: #308080"">.</span>removeItem<span style=""color: #308080"">(</span><span style=""color: #1060b6"">'key'</span><span style=""color: #308080"">)</span>

<span style=""color: #595979"">// Clear storage</span>
localStorage<span style=""color: #308080"">.</span>clear<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
sessionStorage<span style=""color: #308080"">.</span>clear<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span></pre>

<p>Please be aware of one thing: both sessionStorage and localStorage<strong> can only store &quot;DOM <em>string</em>&quot; value</strong>, what if we want to store JavaScript object into them, the answer is definitely JSON string, and <a href=""http://stackoverflow.com/questions/2010892/storing-objects-in-html5-localstorage"" target=""_blank"">someone at StackOverFlow has provided an elegant way</a> to extend Storage.setObject/getObject method by using JavaScript prototype, code shows below:</p>

<pre style=""background: #f6f8ff; color: #000020"">Storage<span style=""color: #308080"">.</span><span style=""color: #007d45"">prototype</span><span style=""color: #308080"">.</span>setObject <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">function</span> <span style=""color: #308080"">(</span>key<span style=""color: #308080"">,</span> value<span style=""color: #308080"">)</span> <span style=""color: #406080"">{</span>
    <span style=""color: #200080; font-weight: bold"">this</span><span style=""color: #308080"">.</span>setItem<span style=""color: #308080"">(</span>key<span style=""color: #308080"">,</span> JSON<span style=""color: #308080"">.</span>stringify<span style=""color: #308080"">(</span>value<span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
<span style=""color: #406080"">}</span>
 
Storage<span style=""color: #308080"">.</span><span style=""color: #007d45"">prototype</span><span style=""color: #308080"">.</span>getObject <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">function</span> <span style=""color: #308080"">(</span>key<span style=""color: #308080"">)</span> <span style=""color: #406080"">{</span>
    <span style=""color: #200080; font-weight: bold"">return</span> <span style=""color: #200080; font-weight: bold"">this</span><span style=""color: #308080"">.</span><span style=""color: #200080; font-weight: bold"">getItem</span><span style=""color: #308080"">(</span>key<span style=""color: #308080"">)</span> <span style=""color: #308080"">&amp;&amp;</span> JSON<span style=""color: #308080"">.</span><span style=""color: #200080; font-weight: bold"">parse</span><span style=""color: #308080"">(</span><span style=""color: #200080; font-weight: bold"">this</span><span style=""color: #308080"">.</span><span style=""color: #200080; font-weight: bold"">getItem</span><span style=""color: #308080"">(</span>key<span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
<span style=""color: #406080"">}</span>
 
<span style=""color: #595979"">// By extending Storage's prototype above, just simply add/get JavaScript object into Storage</span>
localStorage<span style=""color: #308080"">.</span>setObject<span style=""color: #308080"">(</span><span style=""color: #1060b6"">'key'</span><span style=""color: #308080"">,</span>objValue<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
localStorage<span style=""color: #308080"">.</span>getObject<span style=""color: #308080"">(</span><span style=""color: #1060b6"">'key'</span><span style=""color: #308080"">,</span>objValue<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
sessionStorage<span style=""color: #308080"">.</span>setObject<span style=""color: #308080"">(</span><span style=""color: #1060b6"">'key'</span><span style=""color: #308080"">,</span> objValue<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
sessionStorage<span style=""color: #308080"">.</span>getObject<span style=""color: #308080"">(</span><span style=""color: #1060b6"">'key'</span><span style=""color: #308080"">,</span> objValue<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span></pre>

<p>My attached WebStorageDemo shows how to store both DOM String and JSON String into sessionStorage/localStorage, code snippet and screenshot showing below:</p>

<p>Store several fake Shopping Cart items into sessionStorage:</p>

<pre style=""background: #f6f8ff; color: #000020""><span style=""color: #200080; font-weight: bold"">function</span> S4<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span> <span style=""color: #406080"">{</span>
    <span style=""color: #200080; font-weight: bold"">return</span> <span style=""color: #308080"">(</span><span style=""color: #308080"">(</span><span style=""color: #308080"">(</span><span style=""color: #008c00"">1</span> <span style=""color: #308080"">+</span> <span style=""color: #007d45"">Math</span><span style=""color: #308080"">.</span><span style=""color: #200080; font-weight: bold"">random</span><span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span> <span style=""color: #308080"">*</span> <span style=""color: #008000"">0x10000</span><span style=""color: #308080"">)</span> <span style=""color: #308080"">|</span> <span style=""color: #008c00"">0</span><span style=""color: #308080"">)</span><span style=""color: #308080"">.</span><span style=""color: #200080; font-weight: bold"">toString</span><span style=""color: #308080"">(</span><span style=""color: #008c00"">16</span><span style=""color: #308080"">)</span><span style=""color: #308080"">.</span><span style=""color: #200080; font-weight: bold"">substring</span><span style=""color: #308080"">(</span><span style=""color: #008c00"">1</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
<span style=""color: #406080"">}</span>
<span style=""color: #200080; font-weight: bold"">function</span> Guid<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span> <span style=""color: #406080"">{</span>
    <span style=""color: #200080; font-weight: bold"">return</span> <span style=""color: #308080"">(</span>S4<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span> <span style=""color: #308080"">+</span> S4<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span> <span style=""color: #308080"">+</span> <span style=""color: #1060b6"">&quot;-&quot;</span> <span style=""color: #308080"">+</span> S4<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span> <span style=""color: #308080"">+</span> <span style=""color: #1060b6"">&quot;-&quot;</span> <span style=""color: #308080"">+</span> S4<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span> <span style=""color: #308080"">+</span> <span style=""color: #1060b6"">&quot;-&quot;</span> <span style=""color: #308080"">+</span> S4<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span> <span style=""color: #308080"">+</span> <span style=""color: #1060b6"">&quot;-&quot;</span> <span style=""color: #308080"">+</span> S4<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span> <span style=""color: #308080"">+</span> S4<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span> <span style=""color: #308080"">+</span> S4<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
<span style=""color: #406080"">}</span>
<span style=""color: #200080; font-weight: bold"">function</span> ShoppingCartItem<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span> <span style=""color: #406080"">{</span>
    <span style=""color: #200080; font-weight: bold"">this</span><span style=""color: #308080"">.</span>ProductID <span style=""color: #308080"">=</span> Guid<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
    <span style=""color: #200080; font-weight: bold"">this</span><span style=""color: #308080"">.</span>ProductName <span style=""color: #308080"">=</span> <span style=""color: #1060b6"">''</span><span style=""color: #406080"">;</span>
    <span style=""color: #200080; font-weight: bold"">this</span><span style=""color: #308080"">.</span>CategoryID <span style=""color: #308080"">=</span> <span style=""color: #308080"">-</span><span style=""color: #008c00"">1</span><span style=""color: #406080"">;</span>
    <span style=""color: #200080; font-weight: bold"">this</span><span style=""color: #308080"">.</span>Price <span style=""color: #308080"">=</span> <span style=""color: #308080"">-</span><span style=""color: #008000"">1.0</span><span style=""color: #406080"">;</span>
<span style=""color: #406080"">}</span>

<span style=""color: #595979"">// Fake items in shopping cart, and store into sessionstorage</span>
<span style=""color: #200080; font-weight: bold"">var</span> item1 <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">new</span> ShoppingCartItem<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
item1<span style=""color: #308080"">.</span>ProductName <span style=""color: #308080"">=</span> <span style=""color: #1060b6"">'HP WebOS Topaz'</span><span style=""color: #406080"">;</span>
item1<span style=""color: #308080"">.</span>CategoryID <span style=""color: #308080"">=</span> <span style=""color: #008c00"">8</span><span style=""color: #406080"">;</span>
item1<span style=""color: #308080"">.</span>Price <span style=""color: #308080"">=</span> <span style=""color: #008000"">849.99</span><span style=""color: #406080"">;</span>
<span style=""color: #200080; font-weight: bold"">var</span> item2 <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">new</span> ShoppingCartItem<span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
item2<span style=""color: #308080"">.</span>ProductName <span style=""color: #308080"">=</span> <span style=""color: #1060b6"">'Apple Ipad II'</span><span style=""color: #406080"">;</span>
item2<span style=""color: #308080"">.</span>CategoryID <span style=""color: #308080"">=</span> <span style=""color: #008c00"">10</span><span style=""color: #406080"">;</span>
item2<span style=""color: #308080"">.</span>Price <span style=""color: #308080"">=</span> <span style=""color: #008000"">799.99</span><span style=""color: #406080"">;</span>

<span style=""color: #200080; font-weight: bold"">var</span> currentUserShoppingCart <span style=""color: #308080"">=</span> <span style=""color: #200080; font-weight: bold"">new</span> <span style=""color: #007d45"">Array</span><span style=""color: #308080"">(</span><span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
currentUserShoppingCart<span style=""color: #308080"">[</span><span style=""color: #008c00"">0</span><span style=""color: #308080"">]</span> <span style=""color: #308080"">=</span> item1<span style=""color: #406080"">;</span>
currentUserShoppingCart<span style=""color: #308080"">[</span><span style=""color: #008c00"">1</span><span style=""color: #308080"">]</span> <span style=""color: #308080"">=</span> item2<span style=""color: #406080"">;</span>
sessionStorage<span style=""color: #308080"">.</span>setObject<span style=""color: #308080"">(</span><span style=""color: #1060b6"">'UserShoppingCart'</span><span style=""color: #308080"">,</span> currentUserShoppingCart<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span></pre>

<p><img class=""BlogImage"" src=""http://public.bay.livefilestore.com/y1p3Lmdjb5JZjRnpo_sNWx57VgfIzVZNQJKhcVib6r0TUVKBDOagddIWBoqwO-J_4KcQUzuSh4pYoAeAuUXI_ufVQ/ShoppingCart.jpg?psid=1"" /> </p>

<br />

<h3>Delve deep into sessionStorage/localStorage mechanism</h3>

<p>As I mentioned at the beginning, both sessionStorage/localStorage are &quot;<strong>100%</strong> <strong>stored in the client by a concrete browser</strong>&quot;, the difference between them is that sessionStorage is &quot;<strong>window/tab isolated</strong>&quot; while localStorage is <strong>shared </strong><strong>cross pages under a domain</strong>, in other words, sessionStorage takes care of storing temporary data during an HTTP session life time <strong>happened in one browser window/tab</strong>, each window/tab can maintain its own session data; <font style=""background-color: #ffffff"" color=""#555555"">While localStorage stores data persists into user's hard disk,</font> all pages under this concrete domain can manipulate the localStorage.</p>

<p>Let's again see a demo, I added a &quot;Counter&quot; which stored natural number into sessionStorage, and a clickable button can increase the Counter, code below:</p>

<pre style=""background: #f6f8ff; color: #000020""><span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">input</span><span style=""color: #474796""> </span><span style=""color: #074726"">type</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;button&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">value</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;Counter++&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">onclick</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;sessionStorage.Counter++;&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span></pre>

<p>And I open two instance of the page, respectively click &quot;<strong>Counter++</strong>&quot; on each page, then we will see each of them keeps its own counter:</p>

<p><img class=""BlogImage"" src=""http://public.bay.livefilestore.com/y1praukGjXm19ywHFfu7C7S8NmHiICrah-WadP17x5SUJE_YaFNiBmFxMR0Fu9PDI5lVbAH5YeukGoNJ1ds_44Y7g/IsolatedSessionStorage.jpg?psid=1"" /></p>

<p><font style=""background-color: #ffff00""><font style=""background-color: #ffffff"">On the </font></font><font style=""background-color: #ffffff"">contrary, data</font> stored in localStorage could be accessed by all pages under the same domain, in the demo shown below, initially I inserted a fake &quot;<strong>UserProfile</strong>&quot; into localStorage, and then open another page which has different path but under the same domain, we will see &quot;UserProfile&quot; stored by first page can be retrieved. </p>

<p><img class=""BlogImage"" src=""http://public.bay.livefilestore.com/y1pqK0xEp732Tb03IiYQ81b_DkPDDhW2nwVlkqSxBxKV-JPb6a2WhfO-pLo1j6SOkAXfppbX25D7Ymm7xmByRTC8w/localStorageShare.jpg?psid=1"" /></p>

<blockquote>
  <p>Notes: now that localStorage is shared, it therefore might be manipulated by more than one page simultaneously, W3 emphasized that the browser should implement &quot;Storage mutex&quot; to ensure the <strong>Thread safe</strong> of localStorage.</p>
</blockquote>

<p>By achieving these mechanisms, sessionStorage/localStorage is supposed to <font style=""background-color: #ffffff"">replace Cookie with a more straight-forward, effective and secure manner.</font></p>

<p>&#160;</p>

<h3>Storage Event </h3>

<p>W3 defines StorageEvent interface as below:</p>

<pre style=""background: #f6f8ff; color: #000020"">interface StorageEvent <span style=""color: #406080"">:</span> Event <span style=""color: #406080"">{</span>
  readonly attribute DOMString key<span style=""color: #406080"">;</span>
  readonly attribute any oldValue<span style=""color: #406080"">;</span>
  readonly attribute any newValue<span style=""color: #406080"">;</span>
  readonly attribute DOMString url<span style=""color: #406080"">;</span>
  readonly attribute Storage storageArea<span style=""color: #406080"">;</span>
  void initStorageEvent<span style=""color: #308080"">(</span><span style=""color: #200080; font-weight: bold"">in</span> DOMString typeArg<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">in</span> boolean canBubbleArg<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">in</span> boolean cancelableArg<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">in</span> DOMString keyArg<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">in</span> any oldValueArg<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">in</span> any newValueArg<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">in</span> DOMString urlArg<span style=""color: #308080"">,</span> <span style=""color: #200080; font-weight: bold"">in</span> Storage storageAreaArg<span style=""color: #308080"">)</span><span style=""color: #406080"">;</span>
<span style=""color: #406080"">}</span><span style=""color: #406080"">;</span></pre>

<p>Most famous browser (latest version) have implemented StorageEvent, see screenshot below below:</p>

<p><img class=""BlogImage"" src=""http://a1pwpq.bay.livefilestore.com/y1pzrtjaORKfHsUIc7qDpm8bW3SGa8R-LDCkjB_1OzGYB0rP5OfEYjuUlZjeF5vYHoMg47nLuk8xyNVAohAxPNSj7uEGyseVI_Q/StorageEventSupport.jpg?psid=1"" /></p>

<p>By reading their documents: <a href=""http://msdn.microsoft.com/en-us/library/cc197059(v=vs.85).aspx"" target=""_blank"">IE 9</a>, <a href=""https://developer.mozilla.org/en/DOM/Event/StorageEvent"" target=""_blank"">Firefox</a>, <a href=""http://developer.apple.com/library/safari/#documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Name-ValueStorage/Name-ValueStorage.html"" target=""_blank"">Safari</a>, the standard way to subscribe storage event is <code>window.addEventListener('storage', onStorageChanged, false)</code>, unfortunately, after trying 2 days, I recognized that it ONLY works in IE 9 RC at this timestamp (2/24/2011), even described by <a href=""http://developer.apple.com/library/safari/#documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Name-ValueStorage/Name-ValueStorage.html"" target=""_blank"">Safari official Dev document</a>, it doesn't work! So I am demonstrating StorageEvent in IE 9 RC, in code below, I subscribes storage event, once sessionStorage/localStorage items got changed, I checks storage's key to determine further reaction:</p>

<pre style=""background: #f6f8ff; color: #000020"">if (window<span style=""color: #008c00"">.</span>addEventListener) { // IE9, FF, Chrome, Safari, Opera
    window<span style=""color: #008c00"">.</span>addEventListener('storage', onStorageChanged, false);
}
else if (window<span style=""color: #008c00"">.</span>attachEvent) {
    window<span style=""color: #008c00"">.</span>attachEvent(&quot;onstorage&quot;, onStorageChanged); // IE 8
}
else {
    alert('Sorry, your browser does not support DOM event subscribtion!');
    return;
}

function onStorageChanged(e) {
    if (e<span style=""color: #008c00"">.</span>key != '') { 
        switch (e<span style=""color: #008c00"">.</span>key) {
            case 'Counter': // Counter stored in sessionStorage
                $('spCurCounter').innerHTML = 'Current Session Counter: <span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">b</span><span style=""color: #0057a6"">&gt;</span>' + e<span style=""color: #008c00"">.</span>newValue + '<span style=""color: #0057a6"">&lt;/</span><span style=""color: #200080; font-weight: bold"">b</span><span style=""color: #0057a6"">&gt;</span>';
                break;
            case 'UserShoppingCart':
                break;
            case 'UserProfile': // UserProfile stored in localStorage
                break;
            default:
                $('informationBar').innerHTML += 'New localStorage object added, Key: [<span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">span</span><span style=""color: #474796""> </span><span style=""color: #074726"">style</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #7779bb; font-weight: bold"">color</span><span style=""color: #308080"">:</span><span style=""color: #007d45"">red</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #0057a6"">&gt;</span>' + e<span style=""color: #008c00"">.</span>key + '<span style=""color: #0057a6"">&lt;/</span><span style=""color: #200080; font-weight: bold"">span</span><span style=""color: #0057a6"">&gt;</span>] Value: [<span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">span</span><span style=""color: #474796""> </span><span style=""color: #074726"">style</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #7779bb; font-weight: bold"">color</span><span style=""color: #308080"">:</span><span style=""color: #007d45"">red</span><span style=""color: #1060b6"">&quot;</span><span style=""color: #0057a6"">&gt;</span>' + e<span style=""color: #008c00"">.</span>newValue + '<span style=""color: #0057a6"">&lt;/</span><span style=""color: #200080; font-weight: bold"">span</span><span style=""color: #0057a6"">&gt;</span>].<span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">br</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span>';
                break;
        }
    }
}</pre>

<p>The GIF below demonstrates that when I insert a new object into localStorage, <code>onStorageChanged</code> function was triggered <strong>on two page instance simultaneously</strong>, and displays the new inserted data at the same time:</p>

<p><img class=""BlogImage"" src=""http://public.bay.livefilestore.com/y1pv-UxmWRws4m62vUfBfMkcISPduIDCSzHT6ANfAQIAnxOUHBMs5jx-rHNBv-XnIrPyYGj89ImicXwWXN0j332dg/WayneStorageEventDemo.gif?psid=1"" />&#160;&#160; </p>

<p>&#160;</p>

<h3>Storage Location/Format</h3>

<p>Let's finally look into how browser store localStorage: location and data format. Let's take IE9 and Google Chrome on Windows 7 as example, see table below:</p>

<table border=""1"" cellspacing=""0"" cellpadding=""2"" width=""712""><tbody>
    <tr>
      <td valign=""top"" width=""129""><strong>Browser</strong></td>

      <td valign=""top"" width=""474""><strong>localStorage location</strong></td>

      <td valign=""top"" width=""107""><strong>Data Format</strong></td>
    </tr>

    <tr>
      <td valign=""top"" width=""140"">IE 9 RC</td>

      <td valign=""top"" width=""474"">%userprofile%\AppData\Local\Microsoft\Internet Explorer\DOMStore\</td>

      <td valign=""top"" width=""107"">Plaint XML</td>
    </tr>

    <tr>
      <td valign=""top"" width=""151"">Chrome</td>

      <td valign=""top"" width=""474"">%userprofile%\AppData\Local\Google\Chrome\User Data\Default\Local Storage</td>

      <td valign=""top"" width=""107"">SQLite</td>
    </tr>
  </tbody></table>

<p>IE 9 actually stores localStorage items a simple xml file, below is how the XML stores &quot;UserProfile&quot; object in my demo:</p>

<pre style=""background: #f6f8ff; color: #000020""><span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">root</span><span style=""color: #0057a6"">&gt;</span>
    <span style=""color: #0057a6"">&lt;</span><span style=""color: #333385"">item</span><span style=""color: #474796""> </span>
<span style=""color: #474796"">&#160;&#160;&#160; </span><span style=""color: #074726"">name</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;UserProfile&quot;</span><span style=""color: #474796""> </span>
<span style=""color: #474796"">&#160;&#160;&#160; </span><span style=""color: #074726"">value</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;{&amp;quot;NickName&amp;quot;:&amp;quot;Wayne&amp;quot;,&amp;quot;EmailAddress&amp;quot;</span>
<span style=""color: #1060b6"">&#160;&#160;&#160; :&amp;quot;WebMaster@WayneYe.com&amp;quot;}&quot;</span><span style=""color: #474796""></span>
<span style=""color: #474796"">&#160;&#160;&#160; ltime</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;3439488560&quot;</span><span style=""color: #474796""> </span>
<span style=""color: #474796"">&#160;&#160;&#160; htime</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;30135140&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span>
<span style=""color: #0057a6"">&lt;/</span><span style=""color: #200080; font-weight: bold"">root</span><span style=""color: #0057a6"">&gt;</span></pre>

<p>Chrome stores data in a <a href=""http://sqlite.org"" target=""_blank"">SQLite</a> simple database table with two columns: <strong>Key</strong> and <strong>Value</strong>, screenshot below:</p>

<p><img class=""BlogImage"" src=""http://public.bay.livefilestore.com/y1puR2-WBtF3QYGG8DYnOIfTmxL2pvHJY1Jtv2HH9Te8brVssUbNLfgDlVAP2GcDnnKYzmZ-G9T5sHYba6KJ6Ujwg/Chromesqlite.jpg?psid=1"" /></p>

<p>&#160;</p>

<h3>Demo code notes</h3>

<p>I've also put the compete Demo on to my blog: <a href=""http://WayneYe.com/Demo/HTML5/WebStorageDemo.htm"" target=""_blank"">http://WayneYe.com/Demo/HTML5/WebStorageDemo.htm</a></p>

<p>Please note if you test my attached Demo or try any code related with Web Storage in IE 9, please make sure you added <strong>X-UA-Capability</strong> meta information in your HTML header, or explicitly set both Browse mode/Document mode to &quot;<strong>Internet Explorer 9 Standards</strong>&quot; in IE Developer tool, otherwise you probably see JS errors since IE 6,7 does NOT recognize session/local Storage.</p>

<pre style=""background: #f6f8ff; color: #000020""><span style=""color: #0057a6"">&lt;</span><span style=""color: #200080; font-weight: bold"">meta</span><span style=""color: #474796""> </span><span style=""color: #074726"">http-equiv</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;X-UA-Compatible&quot;</span><span style=""color: #474796""> </span><span style=""color: #074726"">content</span><span style=""color: #308080"">=</span><span style=""color: #1060b6"">&quot;IE=9&quot;</span><span style=""color: #474796""> </span><span style=""color: #0057a6"">/&gt;</span></pre>

<p><img class=""BlogImage"" src=""http://public.bay.livefilestore.com/y1puR2-WBtF3QaAgbM3t7pItKNSVHSvLFrD2RQR5_Y3qFIr8amp38U7_89nHl19jiz_tqZ8y6SePJuPVgcb114m1w/DevToolIE9.jpg?psid=1"" /></p>

<br />

<h2>Conclusion</h2>

<p>Compare to HTTP Cookie, HTML5 Web Storage mechanism provides relatively more convenient, flexibility, secure and faster way to store HTTP state data, it should replace HTTP Cookie gradually, especially nowadays most of popular web browsers had supported it (although there might be several issues such as StorageEvent I mentioned above), they do conform W3C standard to store data in sessionStorage/localStorage. Ian Hickson &quot;expected HTML 5 becomes <a href=""http://en.wikipedia.org/wiki/W3C_recommendation#Candidate_Recommendation_.28CR.29"">Candidate Recommendation</a> stage during 2012&quot;, let's be expecting and excited to see how things going in the coming future.</p>

<p>&#160;</p>

<h2>Further Read</h2>
<strong><a href=""http://dev.w3.org/html5/webstorage/"" target=""_blank"">Web Storage Specification</a></strong> 

<br /><strong><a href=""http://www.switchonthecode.com/tutorials/taking-a-dive-into-html5-web-storage"" target=""_blank"">Taking a Dive into HTML5 - Web Storage</a></strong> 

<br /><strong><a href=""http://diveintohtml5.org/storage.html"" target=""_blank"">Local Storage - Dive Into HTML5</a></strong> 

<br /><strong><a href=""http://en.wikipedia.org/wiki/Comparison_of_layout_engines_(HTML5)"" target=""_blank"">Comparison of layout engines (HTML5)</a></strong> 

<br /><strong><a href=""http://en.wikipedia.org/wiki/HTTP_cookie"" target=""_blank"">HTTP_Cookie</a> </strong>

<br /><strong><a href=""http://www.quirksmode.org/dom/tests/html5_storage.html"" target=""_blank"">HTML5 tests - storage</a></strong> 

<br /><strong><a href=""http://msdn.microsoft.com/en-us/library/cc197062(v=vs.85).aspx"" target=""_blank"">Introduction to DOM Storage</a></strong> 

<br /><strong><a href=""http://developer.apple.com/library/safari/documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Name-ValueStorage/Name-ValueStorage.html"" target=""_blank"">Safari Developer Library - Key-Value Storage</a></strong> 

<br /><strong><a href=""https://developer.mozilla.org/en/dom/storage"" target=""_blank"">DOM Storage - MDC Doc Center</a></strong>
<p>&nbsp;</p>
<p>
<b>Also posted at: <a href=""http://www.codeproject.com/KB/HTML/Web-Storage-In-Essence.aspx"" target=""_blank"">http://www.codeproject.com/KB/HTML/Web-Storage-In-Essence.aspx</a></b>
</p>",7975,2011-02-26 11:54:13.953,1,A
111,Wayne,AJAX Cross-Origin HTTP request,Ajax-Cross-Origin-HTTP-request,24,"<div>
<h3>Background</h3>
<p><strong>Cross-Origin Request Sharing - CORS</strong> (A.K.A.<strong> Cross-Domain AJAX request</strong>) is an issue that most web developers might encounter,&nbsp;according to <a href=""http://en.wikipedia.org/wiki/Same_origin_policy"" target=""_blank"">Same-Origin-Policy</a>, browsers restrict client JavaScript in a security sandbox, usually JS cannot directly communicate with a remote server from a different domain. In the past developers created many tricky ways to achieve Cross-Domain resource request, most commonly using ways are:</p>
<ol>
<li>Use Flash/Silverlight or server side as a ""proxy"" to communicate with remote.</li>
<li><a href=""http://en.wikipedia.org/wiki/JSON#JSONP"" target=""_blank"">JSON With Padding (JSONP)</a>.</li>
<li>Embeds remote server in an iframe and communicate through fragment or window.name, refer <a href=""http://jectbd.com/?p=611"" target=""_blank"">here</a>.</li>
</ol>
<p>And so on..</p>
<p>Those tricky ways have more or less some issues, for example JSONP might result in security hole if developers simply ""eval"" it, and #3 above, although it works, both domains should build strict contract between each other, it neither flexible nor elegant IMHO:)</p>
<p>W3C had introduced&nbsp;<a href=""http://www.w3.org/TR/cors/"" target=""_blank"">Cross-Origin Resource Sharing (CORS)</a>&nbsp;as a standard solution to provide a safe, flexible and a recommended standard way to solve this issue.&nbsp;</p>
<h3>Mechanism</h3>
<p>From a high level we can simply deem CORS is a contract between client AJAX call from domain A and a page hosted on domain B, a tipical Cross-Origin request/response would be:</p>
<p><strong>DomainA&nbsp;AJAX request headers</strong></p>
<blockquote>Host DomainB.com<br />User-Agent Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0<br />Accept text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8,application/json<br />Accept-Language en-us;<br />Accept-Encoding gzip, deflate<br />Keep-Alive 115<br /><strong><span style=""color: #3366ff;"">Origin http://DomainA.com&nbsp;</span></strong></blockquote>
<p><strong>DomainB response headers</strong></p>
<blockquote>Cache-Control private<br />Content-Type application/json; charset=utf-8<br /><strong><span style=""color: #3366ff;"">Access-Control-Allow-Origin DomainA.com</span></strong><br />Content-Length 87<br />Proxy-Connection Keep-Alive<br />Connection Keep-Alive</blockquote>
<p>The<span style=""color: #3366ff;""> blue parts</span> I marked above were the kernal facts, ""<span style=""color: #3366ff;"">Origin</span>"" request header ""indicates where the <a href=""http://www.w3.org/TR/cors/#cross-origin-request"" target=""_blank"">cross-origin request</a> or <a href=""http://www.w3.org/TR/cors/#preflight-request"" target=""_blank"">preflight request</a> originates from"", the ""<span style=""color: #3366ff;"">Access-Control-Allow-Origin</span>"" response header indicates this page allows remote request from DomainA (if the value is * indicate allows remote requests from any domain).</p>
$More$
<p>As I mentioned above, W3 recommended browser to implement a ""<strong><span style=""color: #3366ff;""><a href=""http://www.w3.org/TR/cors/#preflight-request"" target=""_blank"">preflight request</a></span></strong>"" before submiting the actually Cross-Origin HTTP request, in a nutshell it is an HTTP ""<strong>OPTIONS</strong>"" request:</p>
<blockquote>
<p>OPTIONS DomainB.com/foo.aspx HTTP/1.1</p>
</blockquote>
<p>If foo.aspx supports OPTIONS HTTP verb, it might return response like below:</p>
<blockquote>HTTP/1.1 200 OK<br />Date: Wed, 01 Mar 2011 15:38:19 GMT<br />Access-Control-Allow-Origin: http://DomainB.com<br />Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD<br />Access-Control-Allow-Headers: X-Requested-With<br />Access-Control-Max-Age: 1728000<br />Connection: Keep-Alive<br />Content-Type: application/json</blockquote>
<p>Only if the response contains ""<span>Access-Control-Allow-Origin</span>"" AND its value is ""*"" or contain the domain who submitted the CORS request, by satisfying this mandtory condition browser will submit the actual Cross-Domain request, and cache the result in ""<a href=""http://www.w3.org/TR/cors/#preflight-result-cache"" target=""_blank"">Preflight-Result-Cache</a>"".</p>
<h3>Implementation</h3>
<p>Let's take a look at server side code samples below (ASP.NET and PHP):</p>
<p>ASP.NET (C#)</p>
<pre style=""color: #000020; background: #f6f8ff;""><span style=""color: #200080; font-weight: bold;"">protected</span> <span style=""color: #200080; font-weight: bold;"">void</span> Page_Load<span style=""color: #308080;"">(</span><span style=""color: #200080; font-weight: bold;"">object</span> sender<span style=""color: #308080;"">,</span> EventArgs e<span style=""color: #308080;"">)</span>
<span style=""color: #406080;"">{</span>
    String data <span style=""color: #308080;"">=</span> String<span style=""color: #308080;"">.</span>Empty<span style=""color: #406080;"">;</span>
    String returnJSONStr <span style=""color: #308080;"">=</span> String<span style=""color: #308080;"">.</span>Empty<span style=""color: #406080;"">;</span>

    <span style=""color: #200080; font-weight: bold;"">switch</span> <span style=""color: #308080;"">(</span>Request<span style=""color: #308080;"">.</span>HttpMethod<span style=""color: #308080;"">)</span>
    <span style=""color: #406080;"">{</span>
        <span style=""color: #200080; font-weight: bold;"">case</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">GET</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">:</span>
            data <span style=""color: #308080;"">=</span> Request<span style=""color: #308080;"">.</span>QueryString<span style=""color: #308080;"">[</span><span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">Data</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">]</span><span style=""color: #406080;"">;</span>
            returnJSONStr <span style=""color: #308080;"">=</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">{\""Data\"":\""Hi remote friend, you tried to passed me data: *</span><span style=""color: #800000;"">""</span> <span style=""color: #308080;"">+</span> data <span style=""color: #308080;"">+</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">* through HTTP GET.\""}</span><span style=""color: #800000;"">""</span><span style=""color: #406080;"">;</span>
            <span style=""color: #200080; font-weight: bold;"">break</span><span style=""color: #406080;"">;</span>
        <span style=""color: #200080; font-weight: bold;"">case</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">POST</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">:</span>
            data <span style=""color: #308080;"">=</span> Request<span style=""color: #308080;"">.</span>Form<span style=""color: #308080;"">[</span><span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">Data</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">]</span><span style=""color: #406080;"">;</span>
            returnJSONStr <span style=""color: #308080;"">=</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">{\""Data\"":\""Hi remote friend, you tried to POST some mock data: *</span><span style=""color: #800000;"">""</span> <span style=""color: #308080;"">+</span> data <span style=""color: #308080;"">+</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">* to me.\""}</span><span style=""color: #800000;"">""</span><span style=""color: #406080;"">;</span>
            <span style=""color: #200080; font-weight: bold;"">break</span><span style=""color: #406080;"">;</span>
        <span style=""color: #200080; font-weight: bold;"">case</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">OPTIONS</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">:</span>
            <span style=""color: #200080; font-weight: bold;"">break</span><span style=""color: #406080;"">;</span>
        <span style=""color: #200080; font-weight: bold;"">default</span><span style=""color: #308080;"">:</span>
            returnBadRequestResponse<span style=""color: #308080;"">(</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
            <span style=""color: #200080; font-weight: bold;"">break</span><span style=""color: #406080;"">;</span>
    <span style=""color: #406080;"">}</span>

    <span style=""color: #200080; font-weight: bold;"">if</span> <span style=""color: #308080;"">(</span>String<span style=""color: #308080;"">.</span>IsNullOrEmpty<span style=""color: #308080;"">(</span>data<span style=""color: #308080;"">)</span><span style=""color: #308080;"">)</span>
        returnBadRequestResponse<span style=""color: #308080;"">(</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
    <span style=""color: #200080; font-weight: bold;"">else</span>
    <span style=""color: #406080;"">{</span>
        Response<span style=""color: #308080;"">.</span>AddHeader<span style=""color: #308080;"">(</span><span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">Access-Control-Allow-Origin</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">,</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">*</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
        Response<span style=""color: #308080;"">.</span>ContentType <span style=""color: #308080;"">=</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">application/json</span><span style=""color: #800000;"">""</span><span style=""color: #406080;"">;</span>
        Response<span style=""color: #308080;"">.</span>Write<span style=""color: #308080;"">(</span>returnJSONStr<span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
    <span style=""color: #406080;"">}</span>
<span style=""color: #406080;"">}</span>

<span style=""color: #200080; font-weight: bold;"">private</span> <span style=""color: #200080; font-weight: bold;"">void</span> returnBadRequestResponse<span style=""color: #308080;"">(</span><span style=""color: #308080;"">)</span>
<span style=""color: #406080;"">{</span>
    Response<span style=""color: #308080;"">.</span>StatusCode <span style=""color: #308080;"">=</span> <span style=""color: #008c00;"">400</span><span style=""color: #406080;"">;</span>
    Response<span style=""color: #308080;"">.</span>ContentType <span style=""color: #308080;"">=</span> <span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">application/json</span><span style=""color: #800000;"">""</span><span style=""color: #406080;"">;</span>
    Response<span style=""color: #308080;"">.</span>Write<span style=""color: #308080;"">(</span><span style=""color: #800000;"">""</span><span style=""color: #1060b6;"">{\""Error\"":\""Bad HTTP request type!\""}</span><span style=""color: #800000;"">""</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
<span style=""color: #406080;"">}</span>
</pre>
<p>PHP:</p>
<pre style=""color: #000000; background: #ffffff;""><span style=""color: #a65700; background: #ffffe8;"">&lt;?php</span>
<span style=""color: #800000; background: #ffffe8; font-weight: bold;"">if</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #800000; background: #ffffe8; font-weight: bold;"">isset</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #000000; background: #ffffe8;"">$</span><span style=""color: #808030; background: #ffffe8;"">[</span><span style=""color: #0000e6; background: #ffffe8;"">""Data""</span><span style=""color: #808030; background: #ffffe8;"">]</span><span style=""color: #808030; background: #ffffe8;"">)</span><span style=""color: #808030; background: #ffffe8;"">)</span>
<span style=""color: #800080; background: #ffffe8;"">{</span>
<span style=""color: #000000; background: #ffffe8;"">$method</span><span style=""color: #808030; background: #ffffe8;"">=</span><span style=""color: #000000; background: #ffffe8;"">$_SERVER</span><span style=""color: #808030; background: #ffffe8;"">[</span><span style=""color: #0000e6; background: #ffffe8;"">'REQUEST_METHOD'</span><span style=""color: #808030; background: #ffffe8;"">]</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #000000; background: #ffffe8;"">$data</span><span style=""color: #808030; background: #ffffe8;"">=</span><span style=""color: #0000e6; background: #ffffe8;"">""""</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #800000; background: #ffffe8; font-weight: bold;""> if</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #000000; background: #ffffe8;"">$method</span><span style=""color: #808030; background: #ffffe8;"">=</span><span style=""color: #808030; background: #ffffe8;"">=</span><span style=""color: #0000e6; background: #ffffe8;"">""POST""</span><span style=""color: #808030; background: #ffffe8;"">)</span>
<span style=""color: #800080; background: #ffffe8;"">{</span>
<span style=""color: #000000; background: #ffffe8;"">$data</span><span style=""color: #808030; background: #ffffe8;"">=</span><span style=""color: #000000; background: #ffffe8;"">$_POST</span><span style=""color: #808030; background: #ffffe8;"">[</span><span style=""color: #0000e6; background: #ffffe8;"">""Data""</span><span style=""color: #808030; background: #ffffe8;"">]</span><span style=""color: #800080; background: #ffffe8;"">;</span>

<span style=""color: #000000; background: #ffffe8;"">$fakeData</span><span style=""color: #808030; background: #ffffe8;"">=</span><span style=""color: #800000; background: #ffffe8; font-weight: bold;"">new</span><span style=""color: #000000; background: #ffffe8;""> FakeData</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #808030; background: #ffffe8;"">)</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #000000; background: #ffffe8;"">$fakeData</span><span style=""color: #808030; background: #ffffe8;"">-&gt;</span><span style=""color: #000000; background: #ffffe8;"">Data</span><span style=""color: #808030; background: #ffffe8;"">=</span><span style=""color: #0000e6; background: #ffffe8;"">""Hi remote friend, you tried to POST some mock data: *""</span><span style=""color: #808030; background: #ffffe8;"">+</span><span style=""color: #400000; background: #ffffe8;"">data</span><span style=""color: #808030; background: #ffffe8;"">+</span><span style=""color: #0000e6; background: #ffffe8;"">""* to me.""</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #000000; background: #ffffe8;"">$fakeData</span><span style=""color: #808030; background: #ffffe8;"">-&gt;</span><span style=""color: #000000; background: #ffffe8;"">Time</span><span style=""color: #808030; background: #ffffe8;"">=</span><span style=""color: #800000; background: #ffffe8; font-weight: bold;"">new</span><span style=""color: #000000; background: #ffffe8;""> DateTime</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #0000e6; background: #ffffe8;"">""now""</span><span style=""color: #808030; background: #ffffe8;"">)</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #800080; background: #ffffe8;"">}</span>
<span style=""color: #800000; background: #ffffe8; font-weight: bold;""> else</span><span style=""color: #800000; background: #ffffe8; font-weight: bold;"">if</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #000000; background: #ffffe8;"">$method</span><span style=""color: #808030; background: #ffffe8;"">=</span><span style=""color: #808030; background: #ffffe8;"">=</span><span style=""color: #0000e6; background: #ffffe8;"">""GET""</span><span style=""color: #808030; background: #ffffe8;"">)</span>
<span style=""color: #800080; background: #ffffe8;"">{</span>
<span style=""color: #000000; background: #ffffe8;"">$fakeData</span><span style=""color: #808030; background: #ffffe8;"">=</span><span style=""color: #800000; background: #ffffe8; font-weight: bold;"">new</span><span style=""color: #000000; background: #ffffe8;""> FakeData</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #808030; background: #ffffe8;"">)</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #000000; background: #ffffe8;"">$fakeData</span><span style=""color: #808030; background: #ffffe8;"">-&gt;</span><span style=""color: #000000; background: #ffffe8;"">Data</span><span style=""color: #808030; background: #ffffe8;"">=</span><span style=""color: #0000e6; background: #ffffe8;"">""Hi remote friend, you tried to passed me data: *""</span><span style=""color: #808030; background: #ffffe8;"">+</span><span style=""color: #400000; background: #ffffe8;"">data</span><span style=""color: #808030; background: #ffffe8;"">+</span><span style=""color: #0000e6; background: #ffffe8;"">""* through HTTP GET.""</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #000000; background: #ffffe8;"">$fakeData</span><span style=""color: #808030; background: #ffffe8;"">-&gt;</span><span style=""color: #000000; background: #ffffe8;"">Time</span><span style=""color: #808030; background: #ffffe8;"">=</span><span style=""color: #800000; background: #ffffe8; font-weight: bold;"">new</span><span style=""color: #000000; background: #ffffe8;""> DateTime</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #0000e6; background: #ffffe8;"">""now""</span><span style=""color: #808030; background: #ffffe8;"">)</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #800080; background: #ffffe8;"">}</span>
<span style=""color: #800000; background: #ffffe8; font-weight: bold;""> else</span>
<span style=""color: #800080; background: #ffffe8;"">{</span>
<span style=""color: #000000; background: #ffffe8;"">RaiseError</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #808030; background: #ffffe8;"">)</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #800080; background: #ffffe8;"">}</span>

<span style=""color: #400000; background: #ffffe8;"">header</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #0000e6; background: #ffffe8;"">'Content-type: application/json'</span><span style=""color: #808030; background: #ffffe8;"">)</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #000000; background: #ffffe8;"">$jsonStr</span><span style=""color: #808030; background: #ffffe8;"">=</span><span style=""color: #000000; background: #ffffe8;""> json_encode</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #000000; background: #ffffe8;"">$fakeData</span><span style=""color: #808030; background: #ffffe8;"">)</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #800000; background: #ffffe8; font-weight: bold;""> echo</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #000000; background: #ffffe8;"">$jsonStr</span><span style=""color: #808030; background: #ffffe8;"">)</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #800080; background: #ffffe8;"">}</span>
<span style=""color: #800000; background: #ffffe8; font-weight: bold;"">else</span>
<span style=""color: #800080; background: #ffffe8;"">{</span>
<span style=""color: #000000; background: #ffffe8;"">RaiseError</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #808030; background: #ffffe8;"">)</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #800080; background: #ffffe8;"">}</span>

<span style=""color: #800000; background: #ffffe8; font-weight: bold;"">function</span><span style=""color: #000000; background: #ffffe8;""> RaiseError</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #808030; background: #ffffe8;"">)</span>
<span style=""color: #800080; background: #ffffe8;"">{</span>
<span style=""color: #000000; background: #ffffe8;"">http_send_status</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #008c00; background: #ffffe8;"">405</span><span style=""color: #808030; background: #ffffe8;"">)</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #400000; background: #ffffe8;"">header</span><span style=""color: #808030; background: #ffffe8;"">(</span><span style=""color: #0000e6; background: #ffffe8;"">""Status: 405 Method Not Allowed""</span><span style=""color: #808030; background: #ffffe8;"">)</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #800080; background: #ffffe8;"">}</span>

<span style=""color: #696969; background: #ffffe8;"">/*Classes definition*/</span>
<span style=""color: #800000; background: #ffffe8; font-weight: bold;"">class</span><span style=""color: #000000; background: #ffffe8;""> FakeData</span>
<span style=""color: #800080; background: #ffffe8;"">{</span>
<span style=""color: #800000; background: #ffffe8; font-weight: bold;"">public </span><span style=""color: #000000; background: #ffffe8;"">$Data</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #800000; background: #ffffe8; font-weight: bold;"">public </span><span style=""color: #000000; background: #ffffe8;"">$Time</span><span style=""color: #800080; background: #ffffe8;"">;</span>
<span style=""color: #800080; background: #ffffe8;"">}</span>
<span style=""color: #a65700; background: #ffffe8;"">?&gt;</span>
</pre>
<p>Then client AJax call code:</p>
<pre style=""color: #000020; background: #f6f8ff;""><span style=""color: #200080; font-weight: bold;"">var</span> cor <span style=""color: #308080;"">=</span> <span style=""color: #0f4d75;"">null</span><span style=""color: #406080;"">;</span> <span style=""color: #595979;"">// cor stands for Cross-Origin request</span>

<span style=""color: #200080; font-weight: bold;"">if</span> <span style=""color: #308080;"">(</span>window<span style=""color: #308080;"">.</span>XMLHttpRequest<span style=""color: #308080;"">)</span> <span style=""color: #406080;"">{</span>
    cor <span style=""color: #308080;"">=</span> <span style=""color: #200080; font-weight: bold;"">new</span> XMLHttpRequest<span style=""color: #308080;"">(</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
<span style=""color: #406080;"">}</span>
<span style=""color: #200080; font-weight: bold;"">//else</span> <span style=""color: #200080; font-weight: bold;"">if</span> <span style=""color: #308080;"">(</span>window<span style=""color: #308080;"">.</span>XDomainRequest<span style=""color: #308080;"">)</span> <span style=""color: #406080;"">{</span>
    //cor <span style=""color: #308080;"">=</span> <span style=""color: #200080; font-weight: bold;"">new</span> XDomainRequest<span style=""color: #308080;"">(</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
<span style=""color: #406080;"">//}</span>
<span style=""color: #200080; font-weight: bold;"">else</span> <span style=""color: #406080;"">{</span>
    alert<span style=""color: #308080;"">(</span><span style=""color: #1060b6;"">""Your browser does not support Cross-Origin request!""</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
    <span style=""color: #200080; font-weight: bold;"">return</span><span style=""color: #406080;"">;</span>
<span style=""color: #406080;"">}</span>

cor<span style=""color: #308080;"">.</span>onreadystatechange <span style=""color: #308080;"">=</span> <span style=""color: #200080; font-weight: bold;"">function</span> <span style=""color: #308080;"">(</span><span style=""color: #308080;"">)</span> <span style=""color: #406080;"">{</span>
    <span style=""color: #200080; font-weight: bold;"">if</span> <span style=""color: #308080;"">(</span>cor<span style=""color: #308080;"">.</span>readyState <span style=""color: #308080;"">==</span> <span style=""color: #008c00;"">4</span><span style=""color: #308080;"">)</span> <span style=""color: #406080;"">{</span>
        document<span style=""color: #308080;"">.</span>getElementById<span style=""color: #308080;"">(</span><span style=""color: #1060b6;"">'lbl'</span><span style=""color: #308080;"">)</span><span style=""color: #308080;"">.</span>innerHTML <span style=""color: #308080;"">=</span> cor<span style=""color: #308080;"">.</span>responseText<span style=""color: #406080;"">;</span>
    <span style=""color: #406080;"">}</span>
<span style=""color: #406080;"">}</span><span style=""color: #406080;"">;</span>

<span style=""color: #200080; font-weight: bold;"">var</span> data <span style=""color: #308080;"">=</span> <span style=""color: #1060b6;"">'Some fake data'</span><span style=""color: #406080;"">;</span>
<span style=""color: #200080; font-weight: bold;"">if</span> <span style=""color: #308080;"">(</span>method <span style=""color: #308080;"">==</span> <span style=""color: #1060b6;"">'POST'</span><span style=""color: #308080;"">)</span> <span style=""color: #406080;"">{</span>
    cor<span style=""color: #308080;"">.</span>open<span style=""color: #308080;"">(</span><span style=""color: #1060b6;"">'POST'</span><span style=""color: #308080;"">,</span> <span style=""color: #1060b6;"">'http://WayneYe.com/Demo/CORSDemo/CORSDemoServer.aspx'</span><span style=""color: #308080;"">,</span> <span style=""color: #0f4d75;"">true</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
    cor<span style=""color: #308080;"">.</span>withCredential <span style=""color: #308080;"">=</span> <span style=""color: #1060b6;"">""true""</span><span style=""color: #406080;"">;</span>
    cor<span style=""color: #308080;"">.</span>setRequestHeader<span style=""color: #308080;"">(</span><span style=""color: #1060b6;"">'Content-Type'</span><span style=""color: #308080;"">,</span> <span style=""color: #1060b6;"">'application/x-www-form-urlencoded'</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
    cor<span style=""color: #308080;"">.</span>send<span style=""color: #308080;"">(</span><span style=""color: #1060b6;"">'Data='</span> <span style=""color: #308080;"">+</span> data<span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
<span style=""color: #406080;"">}</span>
<span style=""color: #200080; font-weight: bold;"">else</span> <span style=""color: #200080; font-weight: bold;"">if</span> <span style=""color: #308080;"">(</span>method <span style=""color: #308080;"">==</span> <span style=""color: #1060b6;"">'GET'</span><span style=""color: #308080;"">)</span> <span style=""color: #406080;"">{</span>
    cor<span style=""color: #308080;"">.</span>open<span style=""color: #308080;"">(</span><span style=""color: #1060b6;"">'GET'</span><span style=""color: #308080;"">,</span> <span style=""color: #1060b6;"">'http://WayneYe.com/Demo/CORSDemo/CORSDemoServer.aspx?Data='</span> <span style=""color: #308080;"">+</span> data<span style=""color: #308080;"">,</span> <span style=""color: #0f4d75;"">true</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
    cor<span style=""color: #308080;"">.</span>withCredential <span style=""color: #308080;"">=</span> <span style=""color: #1060b6;"">""true""</span><span style=""color: #406080;"">;</span>
    cor<span style=""color: #308080;"">.</span>send<span style=""color: #308080;"">(</span><span style=""color: #0f4d75;"">null</span><span style=""color: #308080;"">)</span><span style=""color: #406080;"">;</span>
<span style=""color: #406080;"">}</span>
</pre>
<p>&nbsp;The JS code works for all mainstream browsers (IE8+, FF 3.6+, Chrome 8+), I didn&rsquo;t use <a href=""http://msdn.microsoft.com/en-us/library/cc288060%28v=vs.85%29.aspx"" target=""_blank""><strong>XDomainObject</strong></a>&nbsp;which introduced in IE8 because XMLHttpRequest is already supported by IE8+, FF and Chrome, Safari, in additional XDR seems have a lot of restrictions (refer: <a href=""http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx"" target=""_blank"">http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx</a>).</p>
<h3>Conclusion</h3>
<p>Cross-Origin Resource Sharing provides a safe, flexible and a standard way for web developers to achieve Cross-Origin communication, maybe it is time to forget those tricky or inelegant ways like&nbsp;JSONP, Flash/Silverlight/server bridge or even window.name and so on:)</p>
<h3>References</h3>
</div>
<div><strong>Cross-Origin Resource Sharing</strong> <br /><a title=""http://www.w3.org/TR/cors/"" href=""http://www.w3.org/TR/cors/"">http://www.w3.org/TR/cors/</a> <br /><a title=""http://dev.w3.org/2006/waf/access-control/"" href=""http://dev.w3.org/2006/waf/access-control/"">http://dev.w3.org/2006/waf/access-control/</a><strong> <br /></strong> <br /> <strong>HTTP access control </strong><br /><a href=""https://developer.mozilla.org/En/HTTP_access_control"">https://developer.mozilla.org/En/HTTP_access_control</a></div>
<div><br /> <strong>IIS Verbs configuration</strong><br /><a href=""http://www.iis.net/ConfigReference/system.webServer/security/requestFiltering/verbs"">http://www.iis.net/ConfigReference/system.webServer/security/requestFiltering/verbs</a></div>",28121,2011-04-01 15:58:47.000,1,A
114,Wayne,HTML5 Web Socket in Essence,HTML5-Web-Socket-In-Essence,23,"<blockquote>
HTML5 WebSocket defines a bi-directional, full-duplex communication channel operates through a single TCP connection, this article discusses its fantastic performance, the WebSocket protocol principle and its handshake mechanism, and develop a WebSocket application in action (Team Poker).
</blockquote>
<p style=""text-align:center"">
<embed src=""http://player.youku.com/player.php/sid/XMjc2ODM2NjU2/v.swf"" quality=""high"" width=""480"" height=""400"" align=""middle"" allowScriptAccess=""sameDomain"" type=""application/x-shockwave-flash""></embed>
<br />
<strong style=""color:red"">Embeded youku video link because Youtube is outside of the largest ""intranet"" in the entire universe!!</strong></p>
<h3>Table of Content</h3>
<ol>
<li><a href=""#Introduction"">Introduction</a></li>
<li><a href=""#Background"">Background</a></li>
<li><a href=""#WebSocketInEssence"">WebSocket In Essence</a></li>
<li><a href=""#ExperimentalDemos"">Experimental Demos</a></li>
<li><a href=""#BrowserSupport"">Browser Support</a></li>
<li><a href=""#WebSocketJavaScriptAPI"">WebSocket JavaScript API</a></li>
<li><a href=""#DevelopWebSocketInAction"">Develop WebSocket In Action - Team Poker</a></li>
<li><a href=""#OpenIssues"">Open Issues</a></li>
<li><a href=""#Conclusion"">Conclusion</a></li>
<li><a href=""#References"">References &amp; Resources</a>&nbsp;</li>
</ol>
<h3 id=""Introduction"">Introduction</h3>
<p><a title=""HTML5 Web Socket"" href=""http://www.whatwg.org/specs/web-apps/current-work/complete/network.html#network"" target=""_blank"">HTML5 WebSocket</a>&nbsp;defines a bi-directional, full-duplex communication channel that operates through a single TCP socket over the Web, it provides efficient, low-latency and low cost connection between web client and server, based on WebSocket, developers can build&nbsp;<strong>scalable</strong>,&nbsp;<strong>real-time</strong>&nbsp;web applications in the future. Section below is the official definition of WebSocket copied from&nbsp;<a href=""http://tools.ietf.org/html/draft-ietf-hybi-thewebsocketprotocol-08"" target=""_blank"">IETF WebSocket protocol</a>&nbsp;page:&nbsp;</p>
<blockquote>
<p>The WebSocket protocol enables two-way communication between a user agent running untrusted code running in a controlled environment to a remote host that has opted-in to communications from that code. &nbsp;The security model used for this is the Origin-based security model commonly used by Web browsers. &nbsp;The protocol consists of an initial handshake followed by basic message framing, layered over TCP. &nbsp;The goal of this technology is to provide a mechanism for browser-based applications that need two-way communication with servers that does not rely on opening multiple HTTP connections (e.g. using XMLHttpRequest or &lt;iframe&gt;s and long polling).</p>
</blockquote>
<p>This article is trying to go through WebSocket basic concept, the problems it is going to solve, explain it in essence,&nbsp;watch some experimental Demos, develop a simple WebSocket&nbsp;application in action (Team Poker), and describe current open issues of WebSocket. I sincerely hope it will be&nbsp;<strong>systematically</strong>,&nbsp;<strong>easy to understand</strong>,&nbsp;<strong>from surface to deep&nbsp;</strong>so that eventually readers would not only learn what WebSocket is from high level but also&nbsp;<strong>understand it in depth!</strong>&nbsp;Any thoughts, suggestions or criticism&nbsp;you may have after reading this article will help me to improve in the future, i would appreciate it if you could leave a comment.</p>
<h3 id=""Background"">Background</h3>
<p>In traditional web applications, in order to achieve some real-time interaction with server, developers had to employ several tricky ways such as <a href=""http://plugins.jquery.com/plugin-tags/polling"">Ajax polling</a>,&nbsp;<a title=""Comet"" href=""http://en.wikipedia.org/wiki/Comet_(programming)"">Comet</a>&nbsp;(A.K.A <a href=""http://en.wikipedia.org/wiki/Ajax_Push"">Ajax push</a>,&nbsp;Full Duplex Ajax,&nbsp;HTTP Streaming, etc.),&nbsp;those technologies either periodically fire HTTP requests to server or hold the HTTP connection with server for a long time, which&nbsp;""<strong>contain lots of additional, unnecessary header data and introduce latency</strong>"" and resulted in ""<strong>an outrageously high price tag</strong>"".&nbsp;<a href=""http://websocket.org/quantum.html"">websocket.org</a> explained the problems exhaustively, compared the performance&nbsp;of Ajax polling and WebSocket in detail, built up two simple web pages, one periodically communicated with server using traditional HTTP and the other used HTML5 WebSocket, in the testing each HTTP&nbsp;request/response header is approximate <strong>871 byte</strong>, while data length of WebSocket connection is much shorter: <strong>2 bytes</strong> after connection established, as the transfer count getting larger, the result will be:</p>
<blockquote>
<p><strong>Traditional HTTP Request&nbsp;</strong></p>
<ul>
<li>
<p class=""bodytext""><strong>Use case A</strong>: 1,000 clients polling every second: Network throughput is (871 x 1,000) = 871,000 bytes = 6,968,000 bits per second (6.6 Mbps)</p>
</li>
<li>
<p class=""bodytext""><strong>Use case B</strong>: 10,000 clients polling every second: Network throughput is (871 x 10,000) = 8,710,000 bytes = 69,680,000 bits per second (66 Mbps)</p>
</li>
<li>
<p class=""bodytext""><strong>Use case C</strong>: 100,000 clients polling every 1 second: Network throughput is (871 x 100,000) = 87,100,000 bytes = 696,800,000 bits per second (665 Mbps)</p>
</li>
</ul>
<p><strong>HTML5 WebSocket</strong></p>
<ul>
<li>
<p class=""bodytext""><strong>Use case A</strong>: 1,000 clients receive 1 message per second: Network throughput is (2 x 1,000) = 2,000 bytes = 16,000 bits per second (0.015 Mbps)</p>
</li>
<li>
<p class=""bodytext""><strong>Use case B</strong>: 10,000 clients receive 1 message per second: Network throughput is (2 x 10,000) = 20,000 bytes = 160,000 bits per second (0.153 Kbps)</p>
</li>
<li>
<p class=""bodytext""><strong>Use case C</strong>: 100,000 clients receive 1 message per second: Network throughput is (2 x 100,000) = 200,000 bytes = 1,600,000 bits per second (1.526 Kbps)</p>
</li>
</ul>
</blockquote>
<p>Finally a more readable diagram:</p>
<p><img title=""Polling VS WebSocket"" src=""http://websocket.org/img/poll-ws-compare.gif"" alt=""Polling VS WebSocket"" width=""503"" height=""360"" /></p>
<blockquote>
<p>&nbsp;""HTML5 Web Sockets can provide a 500:1 or &mdash; depending on the size of the HTTP headers &mdash; even a 1000:1 reduction in unnecessary HTTP header traffic and 3:1 reduction in latency"". &nbsp;--<a href=""http://websocket.org"">WebSocket.org</a></p>
</blockquote>
<h3 id=""WebSocketInEssence"">WebSocket In Essence</h3>
<p>The motivation of creating WebSocket is to replace polling and long polling(Comet), and endow HTML5 web application the ability of real-time communication. Browser based web application can fire WebSocket connection request through JavaScript API, and then transfer data with server <strong>over only one TCP connection</strong>.</p>
$More$
<p>This is achieved by the new protocol - The <strong>WebSocket Protocol</strong>, which is essentially an&nbsp;<strong>independent TCP-based protocol.</strong>&nbsp;To establish a WebSocket connection client/browser forms an HTTP request with ""<strong>Upgrade: WebSocket</strong>"" header which indicates a protocol upgrade request, and the handshake key(s) will be interpreted by HTTP servers and handshake response will be returned (the detailed handshake mechanism will be described below), afterwards the connection is established (figuratively speaking, the 'sockets' have been plugged in at both client and server ends),&nbsp;both sides can&nbsp;transfer/receive data&nbsp;<strong>independently</strong>, no more redundant header information, and the connection&nbsp;<strong>won't be closed until one side sends close signal</strong>, that's why WebSocket is <strong>bidirectional </strong>and <strong>full duplex</strong>, in additional, comparing the request/response paradigm of HTTP, WebSocket layers a framing mechanism on top on TCP, each data frame is minimally just 2 bytes.  </p>
<p>Now it is time for us to delve deep into this protocol, let's start with WebSocket version <strong><a href=""http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol-76"">draft-hixie-thewebsocketprotocol-76</a></strong> which is now supported by browsers (Chrome 6+, Firefox 4+, Opera 11) and many WebSocket servers (please refer to&nbsp;<a href=""#BrowserSupport"">Browser/Server Support</a>&nbsp;section below for details). A typical WebSocket request/response example is shown below:</p>
<blockquote><strong>Request</strong><br /> GET /demo HTTP/1.1<br />Upgrade: WebSocket<br />Connection: Upgrade<br />Host: example.com<br />Origin: http://example.com<br />Sec-WebSocket-Key1: 4 @1 46546xW%0l 1 5<br />Sec-WebSocket-Key2: 12998 5 Y3 1 .P00<br /> <br />^n:ds[4U&nbsp;<br /> <br /> <strong>Response</strong><br /> HTTP/1.1 101 WebSocket Protocol Handshake<br />Upgrade: WebSocket<br />Connection: Upgrade<br />Sec-WebSocket-Origin: http://example.com<br />Sec-WebSocket-Location: ws://example.com/demo<br />Sec-WebSocket-Protocol: sample<br /> <br />8jKS'y:G*Co,Wxa-&nbsp;</blockquote>
<p>The entire process could be described as: the client raise a ""special"" HTTP request which request ""Upgrade"" connecting protocol to ""WebSocket"", on domain ""example.com"" with path ""/demo"", with three ""<strong>handshake</strong>"" fields:&nbsp;<strong>Sec-WebSocket-Key1</strong>, <strong>Sec-WebSocket-Key2</strong> and&nbsp;<strong>8 bytes</strong> ({^n:ds[4U}) after the fields are random tokens which the WebSocket server uses to construct a <strong>16-byte security hash</strong>&nbsp;at the end of its handshake to prove that it has read the client's handshake.</p>
<p>Since WebSocket protocol is NOT finalized and is being improved and standardized by&nbsp;<a href=""http://datatracker.ietf.org/wg/hybi/charter/"">IETF Hypertext Bidirectional (HyBi) Working Group</a>,&nbsp;at the time I wrote this article, the latest WebSocket version is ""<strong><a href=""http://tools.ietf.org/html/draft-ietf-hybi-thewebsocketprotocol-08"">draft-ietf-hybi-thewebsocketprotocol-08</a></strong>"" lasted updated by<strong> Ian Fette&nbsp;on June 7, 2011</strong>, in which both request/response headers are changed comparing to version 76, the handshake mechanism was changed as well, Sec-WebSocket-Key1 and&nbsp;Sec-WebSocket-Key1 are replaced with one&nbsp;Sec-WebSocket-Key.</p>
<p>WebSocket request/response in the latest&nbsp;<strong>draft-ietf-hybi-thewebsocketprotocol-08:</strong></p>
<blockquote><strong>Request</strong><br />GET /demo HTTP/1.1<br />Host: example.com<br />Upgrade: websocket<br />Connection: Upgrade<br />Sec-WebSocket-Key: V2ViU29ja2V0IHJvY2tzIQ==<br />Sec-WebSocket-Origin: http://example.com<br />Sec-WebSocket-Protocol: chat, superchat<br />Sec-WebSocket-Version: 8<br /><br /><strong>Response</strong><br />HTTP/1.1 101 Switching Protocols<br />Upgrade: websocket<br />Connection: Upgrade<br />Sec-WebSocket-Accept: VAuGgaNDB/reVQpGfDF8KXeZx5o=<br />Sec-WebSocket-Protocol: chat</blockquote>
<p>The <strong>Sec-WebSocket-Key</strong> is a base64 encoded randomly generated 16-byte value, in the case above it is ""<strong>WebSocket rocks!</strong>"", the server reads the key, concats with a magic GUID ""258EAFA5-E914-47DA-95CA-C5AB0DC85B11"", to ""V2ViU29ja2V0IHJvY2tzIQ==258EAFA5-E914-47DA-95CA-C5AB0DC85B11"", then compute its SHA1 hash, get result ""540b8681a34307fade550a467c317c297799c79a"", finally based64 encodes the hash and append the value to header ""<strong>Sec-WebSocket-Accept</strong>"".</p>
<p>I've written C# code below to demonstrate how to compute the Sec-WebSocket-Accept conforming to&nbsp;<strong>draft-ietf-hybi-thewebsocketprotocol-08</strong>:&nbsp;</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #7f9f7f;"">/// <span style=""color: #c0c0c0;"">&lt;summary&gt;</span></span><br /> <span style=""color: #7f9f7f;"">/// Computes server security hash for HTML5 WebSocket, handshake mechanism </span><br /> <span style=""color: #7f9f7f;"">/// based on draft-ietf-hybi-thewebsocketprotocol-08</span><br /> <span style=""color: #7f9f7f;"">/// <span style=""color: #cc99ff;""><a href=""http://tools.ietf.org/html/draft-ietf-hybi-thewebsocketprotocol-08#page-27""><span style=""color: #cc99ff;"">http://tools.ietf.org/html/draft-ietf-hybi-thewebsocketprotocol-08#page-27</span></a></span></span><br /> <span style=""color: #7f9f7f;"">/// <span style=""color: #c0c0c0;"">&lt;/summary&gt;</span></span><br /> <span style=""color: #7f9f7f;"">/// <span style=""color: #c0c0c0;"">&lt;param name=""secWebSocketKey""&gt;</span>The handshake key ""Sec-WebSocket-Key"" from client.<span style=""color: #c0c0c0;"">&lt;/param&gt;</span></span><br /> <span style=""color: #7f9f7f;"">/// <span style=""color: #c0c0c0;"">&lt;returns&gt;</span>The computed security hash to fill ""Sec-WebSocket-Accept"" header.<span style=""color: #c0c0c0;"">&lt;/returns&gt;</span></span><br /> <span style=""color: #e3ceab;"">public</span> <span style=""color: #e3ceab;"">static</span> <span style=""color: #dcdccc;"">String</span> <span style=""color: #efef8f;"">ComputeWebSocketHandshakeSecurityHash08</span>(<span style=""color: #dcdccc;"">String</span> <span style=""color: #dcdccc;"">secWebSocketKey</span>)<br /> <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">const</span> <span style=""color: #dcdccc;"">String</span> <span style=""color: #dcdccc;"">MagicKEY</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #cc9393;"">""258EAFA5-E914-47DA-95CA-C5AB0DC85B11""</span>;<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">String</span> <span style=""color: #dcdccc;"">secWebSocketAccept</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">String</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">Empty</span>;<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// 1. Combine the request Sec-WebSocket-Key with magic key.</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">String</span> <span style=""color: #dcdccc;"">ret</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">secWebSocketKey</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">MagicKEY</span>;<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// 2. Compute the SHA1 hash</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">SHA1</span> <span style=""color: #dcdccc;"">sha</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #e3ceab;"">new</span> <span style=""color: #dcdccc;"">SHA1CryptoServiceProvider</span>(); <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dfdfbf; font-weight: bold;"">byte</span><span style=""color: #dcdccc;"">[]</span> <span style=""color: #dcdccc;"">sha1Hash</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">sha</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">ComputeHash</span>(<span style=""color: #dcdccc;"">Encoding</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">UTF8</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">GetBytes</span>(<span style=""color: #dcdccc;"">ret</span>));<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// 3. Base64 encode the hash</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">secWebSocketAccept</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">Convert</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">ToBase64String</span>(<span style=""color: #dcdccc;"">sha1Hash</span>);<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">return</span> <span style=""color: #dcdccc;"">secWebSocketAccept</span>;<br /> <span style=""color: #dcdccc;"">}</span></pre>
<p>Unit test code:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #dcdccc;"">String</span> <span style=""color: #dcdccc;"">secWebSocketKey</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">Convert</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">ToBase64String</span>(<span style=""color: #dcdccc;"">Encoding</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">UTF8</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">GetBytes</span>(<span style=""color: #cc9393;"">""WebSocket rocks!""</span>));<br /> <span style=""color: #dcdccc;"">Console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">WriteLine</span>(<span style=""color: #cc9393;"">""Sec-WebSocket-Key: {0}""</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">secWebSocketKey</span>);<br /> <br /> <span style=""color: #dcdccc;"">String</span> <span style=""color: #dcdccc;"">secWebSocketAccept</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">ComputeWebSocketHandshakeSecurityHash08</span>(<span style=""color: #dcdccc;"">secWebSocketKey</span>);<br /> <span style=""color: #dcdccc;"">Console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">WriteLine</span>(<span style=""color: #cc9393;"">""Sec-WebSocket-Accept: ""</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">secWebSocketAccept</span>);</pre>
<p>We would see the result by running code above:</p>
<pre>Sec-WebSocket-Key: V2ViU29ja2V0IHJvY2tzIQ==<br />Sec-WebSocket-Accept: VAuGgaNDB/reVQpGfDF8KXeZx5o=</pre>
<blockquote>Please note draft-ietf-hybi-thewebsocketprotocol-08 is <strong>NOT supported by any common web browsers since it was just published on June 7, 2011</strong>. However, we can learn it so that we know what is happening now with WebSocket and where it's going in the future.</blockquote>
<h3 id=""ExperimentalDemos"">Experimental Demos</h3>
<p>So far there are already many experimental WebSocket Demos built based on either draft-hixie-thewebsocketprotocol-75&nbsp;or&nbsp;draft-hixie-thewebsocketprotocol-76.<br /><br /><a href=""http://rumpetroll.com/"" target=""_blank"">http://rumpetroll.com/</a>&nbsp;<br />Play a tadpole in canvas and can chat with other tadpoles, tadpoles location and char messages could be seen by everyone in real-time. <br /><br /><a href=""http://html5labs.interoperabilitybridges.com/prototypes/websockets/websockets/info"">http://html5labs.interoperabilitybridges.com/prototypes/websockets/websockets/info</a>&nbsp;<br />WebSocket Demos in Microsoft HTML5 Labs<br /><br /> <a href=""http://html5demos.com/web-socket"">http://html5demos.com/web-socket<br /></a>A very simple ""Chat room"" demo using WebSocket.<br /> <br /> <a href=""http://kaazing.me/"">http://kaazing.me/<br /></a>Refresh stock, weather, news and twits in real-time powered by Kaazing's real-time message delivery network solution.<br /> <br /><a href=""http://mrdoob.com/projects/multiuserpad/"">Mr. Doob's Multiuser Sketchpad<br /></a>In this multi-user&nbsp;<code>&lt;canvas&gt;</code>&nbsp;drawing application, Web Sockets are used to pass along the coordinates of the lines that other users draw back to each client as they happen.</p>
<p>And so on.. You will also see <a href=""#DevelopWebSocketInAction"">a simple demo developed by me below</a>.</p>
<h3 id=""BrowserSupport"">Browser/Server Support</h3>
<p>WebSocket is not only designed for browser/server communication, client application can also use it. However, I guess browser will still be the major platform for WebSocket protocol taken into account the emerging handsets and the coming cloud. At the time I wrote this article, WebSocket protocol version draft-ietf-hybi-thewebsocketprotocol-76 was supported by Safari 5+/Google chrome 6+ (<a href=""http://www.google.com/url?sa=t&amp;source=web&amp;cd=2&amp;sqi=2&amp;ved=0CCgQFjAB&amp;url=http%3A%2F%2Fblog.chromium.org%2F2010%2F06%2Fwebsocket-protocol-updated.html&amp;ei=6dPsTej1LoeiuQP74_G4Dw&amp;usg=AFQjCNE1pV7Gkebr-GFivY1eocAz1LqkgQ&amp;sig2=NUv_2j1YIz5j8rMdPH5PtQ"">link</a>), Mozilla Firefox 4+ (disabled by default&nbsp;<a href=""https://developer.mozilla.org/en/WebSockets"">link</a>) and Opera 11 (disabled by default&nbsp;<a href=""http://my.opera.com/core/blog/websockets"">link</a>), IE 9/10 does not support... but on not supported browsers we can use Flash shim/fallback by adopting&nbsp;<a href=""https://github.com/gimite/web-socket-js"" rel=""nofollow"">web-socket-js</a>.</p>
<p>The awesome&nbsp;<a href=""http://caniuse.com/#search=websocket"">Can I uses it</a>&nbsp;is&nbsp;maintaining HTML5 new features&nbsp;support&nbsp;in all popular browsers, screenshot below shows WebSocket support:</p>
<p><a title=""Click to enlarge"" href=""http://a1rvha.bay.livefilestore.com/y1p6ecKygtANGqAnIDS7zapwe9zUQgFB__gBeXmF6VF-dKBRn__thLJh3puXV-2rToxke3ufkf3ZLSXkUjBzfMo9DHPSRlvKoo8/WebSocketBrowsersupport.png?psid=1""><img title=""WebSocket Browser Support Table"" src=""http://a1rvha.bay.livefilestore.com/y1p6ecKygtANGqAnIDS7zapwe9zUQgFB__gBeXmF6VF-dKBRn__thLJh3puXV-2rToxke3ufkf3ZLSXkUjBzfMo9DHPSRlvKoo8/WebSocketBrowsersupport.png?psid=1"" alt=""WebSocket Browser Support Table"" width=""640"" height=""212"" /></a></p>
<p>There are also a number of WebSocket servers available:</p>
<p><a href=""http://socket.io"">http://socket.io</a>&nbsp; - Provides seamless support for a variety of transports (WebSocket, WebSocket over Flash, XHR polling, JSONP polling, etc.) intended for real-time communication developed by&nbsp;<a href=""http://devthought.com/"">Guillermo Rauch</a>&nbsp;</p>
<p><a href=""https://github.com/ncr/node.ws.js"">node.ws.js</a>&nbsp;- A simple WebSocket server (support both&nbsp;<span class=""Apple-style-span"" style=""white-space: pre;"">draft-hixie-thewebsocketprotocol-75 and </span><span class=""Apple-style-span"" style=""white-space: pre;"">draft-hixie-thewebsocketprotocol-76</span>) developed based on <a href=""http://github.com/Guille/node.websocket.js"">node.websocket.js</a>.</p>
<p><a href=""https://github.com/gimite/web-socket-js"" rel=""nofollow"">web-socket-js</a>&nbsp;- HTML5 Web Socket implementation powered by Flash</p>
<p><a href=""http://nugget.codeplex.com/"">http://nugget.codeplex.com</a>&nbsp;- A web socket server implemented in C#.</p>
<p><a href=""http://jWebSocket"">jWebSocket.org</a>&nbsp;- The Open Source Java WebSocket Server</p>
<p><a href=""http://code.google.com/p/phpwebsocket"">phpwebsocket</a> - PHP version of WebSocket server.</p>
<h3 id=""WebSocketJavaScriptAPI"">WebSocket JavaScript API</h3>
<p>W3C defined&nbsp;<a href=""http://www.w3.org/TR/websockets/#the-websocket-interface"">WebSocket interface</a>&nbsp;as below:</p>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #dcdccc;"">[</span><span style=""color: #dcdccc;"">Constructor</span>(<span style=""color: #e3ceab;"">in</span> <span style=""color: #dcdccc;"">DOMString</span> <span style=""color: #dcdccc;"">url</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #e3ceab;"">in</span> <span style=""color: #dcdccc;"">optional</span> <span style=""color: #dcdccc;"">DOMString</span> <span style=""color: #dcdccc;"">protocols</span><span style=""color: #dcdccc;"">)]</span><br /> <span style=""color: #dcdccc;"">[</span><span style=""color: #dcdccc;"">Constructor</span>(<span style=""color: #e3ceab;"">in</span> <span style=""color: #dcdccc;"">DOMString</span> <span style=""color: #dcdccc;"">url</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #e3ceab;"">in</span> <span style=""color: #dcdccc;"">optional</span> <span style=""color: #dcdccc;"">DOMString</span><span style=""color: #dcdccc;"">[]</span> <span style=""color: #dcdccc;"">protocols</span><span style=""color: #dcdccc;"">)]</span><br /> <span style=""color: #e3ceab;"">interface</span> <span style=""color: #dcdccc;"">WebSocket</span> <span style=""color: #dcdccc;"">{</span><br /> &nbsp; <span style=""color: #dcdccc;"">readonly</span> <span style=""color: #dcdccc;"">attribute</span> <span style=""color: #dcdccc;"">DOMString</span> <span style=""color: #dcdccc;"">url</span>;<br /> <br /> &nbsp; <span style=""color: #7f9f7f;"">// ready state</span><br /> &nbsp; <span style=""color: #e3ceab;"">const</span> <span style=""color: #dcdccc;"">unsigned</span> <span style=""color: #e3ceab;"">short</span> <span style=""color: #dcdccc;"">CONNECTING</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #8cd0d3;"">0</span>;<br /> &nbsp; <span style=""color: #e3ceab;"">const</span> <span style=""color: #dcdccc;"">unsigned</span> <span style=""color: #e3ceab;"">short</span> <span style=""color: #dcdccc;"">OPEN</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #8cd0d3;"">1</span>;<br /> &nbsp; <span style=""color: #e3ceab;"">const</span> <span style=""color: #dcdccc;"">unsigned</span> <span style=""color: #e3ceab;"">short</span> <span style=""color: #dcdccc;"">CLOSING</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #8cd0d3;"">2</span>;<br /> &nbsp; <span style=""color: #e3ceab;"">const</span> <span style=""color: #dcdccc;"">unsigned</span> <span style=""color: #e3ceab;"">short</span> <span style=""color: #dcdccc;"">CLOSED</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #8cd0d3;"">3</span>;<br /> &nbsp; <span style=""color: #dcdccc;"">readonly</span> <span style=""color: #dcdccc;"">attribute</span> <span style=""color: #dcdccc;"">unsigned</span> <span style=""color: #e3ceab;"">short</span> <span style=""color: #dcdccc;"">readyState</span>;<br /> &nbsp; <span style=""color: #dcdccc;"">readonly</span> <span style=""color: #dcdccc;"">attribute</span> <span style=""color: #dcdccc;"">unsigned</span> <span style=""color: #e3ceab;"">long</span> <span style=""color: #dcdccc;"">bufferedAmount</span>;<br /> <br /> &nbsp; <span style=""color: #7f9f7f;"">// networking</span><br /> &nbsp;&nbsp;<span style=""color: #dcdccc;"">attribute</span> <span style=""color: #f0dfaf; font-weight: bold;"">Function</span> <span style=""color: #dcdccc;"">onopen</span>;<br /> &nbsp;&nbsp;<span style=""color: #dcdccc;"">attribute</span> <span style=""color: #f0dfaf; font-weight: bold;"">Function</span> <span style=""color: #dcdccc;"">onmessage</span>;<br /> &nbsp;&nbsp;<span style=""color: #dcdccc;"">attribute</span> <span style=""color: #f0dfaf; font-weight: bold;"">Function</span> <span style=""color: #dcdccc;"">onerror</span>;<br /> &nbsp;&nbsp;<span style=""color: #dcdccc;"">attribute</span> <span style=""color: #f0dfaf; font-weight: bold;"">Function</span> <span style=""color: #dcdccc;"">onclose</span>;<br /> &nbsp; <span style=""color: #dcdccc;"">readonly</span> <span style=""color: #dcdccc;"">attribute</span> <span style=""color: #dcdccc;"">DOMString</span> <span style=""color: #dcdccc;"">protocol</span>;<br /> &nbsp; <span style=""color: #e3ceab;"">void</span> <span style=""color: #dcdccc;"">send</span>(<span style=""color: #e3ceab;"">in</span> <span style=""color: #dcdccc;"">DOMString</span> <span style=""color: #dcdccc;"">data</span>);<br /> &nbsp; <span style=""color: #e3ceab;"">void</span> <span style=""color: #dcdccc;"">close</span>();<br /> <span style=""color: #dcdccc;"">};</span><br /> <span style=""color: #dcdccc;"">WebSocket</span> <span style=""color: #e3ceab;"">implements</span> <span style=""color: #dcdccc;"">EventTarget</span>;</pre>
<p>The <em>url </em>attribute is the WebSocket server Url, the <em>protocol </em>is usually ""ws"" (for unencrypted plain text WebSocket) or ""wss"" (for secure WebSocket), <em>send</em> method sends data to server after connected, <em>close </em>is to send close signal, besides there are four important events: onopen, onmessage, onerror and onclose, I borrowed a nice picture below from <a href=""http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/"">nettuts</a>.</p>
<p><img title=""WebSocket Events"" src=""http://d2o0t5hpnwv4c1.cloudfront.net/751_webSocketsStarter/events.jpg"" alt=""WebSocket Events"" width=""600"" height=""300"" /></p>
<ul>
<li><strong>onopen</strong>: When a socket has opened, i.e. after TCP three-way handshake and WebSocket handshake.</li>
<li><strong>onmessage</strong>: When a message has been received from WebSocket server.</li>
<li><strong>onerror</strong>: Triggered when error occurred.</li>
<li><strong>onclose</strong>: When a socket has been closed.</li>
</ul>
<p>JavaScript code below is to setup WebSocket connection and retrieve data:</p>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">wsUrl</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #cc9393;"">'ws://localhost:8888/DummyPath'</span>;<br /> <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">websocket</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #e3ceab;"">new</span> <span style=""color: #dcdccc;"">WebSocket</span>(<span style=""color: #dcdccc;"">wsUrl</span>);<br /> <span style=""color: #dcdccc;"">websocket</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">onopen</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span> <span style=""color: #dcdccc;"">onOpen</span>(<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">};</span><br /> <span style=""color: #dcdccc;"">websocket</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">onclose</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span> <span style=""color: #dcdccc;"">onClose</span>(<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">};</span><br /> <span style=""color: #dcdccc;"">websocket</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">onmessage</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span> <span style=""color: #dcdccc;"">onMessage</span>(<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">};</span><br /> <span style=""color: #dcdccc;"">websocket</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">onerror</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span> <span style=""color: #dcdccc;"">onError</span>(<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">};</span><br /> <br /> &nbsp;&nbsp;&nbsp; <br /> <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">onOpen</span>(<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">log</span>(<span style=""color: #cc9393;"">""Connected to WebSocket server.""</span>);<br /> &nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">websocket</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">send</span>(<span style=""color: #cc9393;"">""HTML5 WebSocket rocks!""</span>);<br /> <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">onClose</span>(<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span> <span style=""color: #dcdccc;"">console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">log</span>(<span style=""color: #cc9393;"">""Disconnected""</span>); <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">onMessage</span>(<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">log</span>(<span style=""color: #cc9393;"">'Retrieved data from server: '</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">data</span>); <br /> &nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// Update UI...</span><br /> <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">onError</span>(<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span> <span style=""color: #dcdccc;"">console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">log</span>(<span style=""color: #cc9393;"">'Error occured: '</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">data</span>); <span style=""color: #dcdccc;"">}</span></pre>
<h3 id=""DevelopWebSocketInAction"">Develop WebSocket In Action - Team Poker Demo<span class=""Apple-style-span"" style=""font-size: 10px; font-weight: normal;"">&nbsp;</span></h3>
<p>Estimating user story effort by using&nbsp;<a href=""http://www.crisp.se/planningpoker/"">Planning Poker Cards</a>&nbsp;is well-known and widely used in Agile/Scrum development, Program Manager/Scrum Master prepare user stories beforehand, hold meeting with stake holders and have them play poker to represent one's estimation on each story, the higher the card value is, the harder to implement, on the contrary, the lower the value is, the easier to implement, ""0"" indicates ""no effort"" or ""has been done"", ""?"" indicates ""mission impossible"" or ""unclear requirement"".</p>
<p>Actually there is a website - <a title=""Poker Planning"" href=""http://pokerplanning.com"">http://pokerplanning.com</a>&nbsp;does the exact work described above, my co-workers and I used it for several times, however, we found it is getting slower and slower as more team members joining the game or after several rounds of voting, we did experience the worst result: no one can vote anymore because everyone's voting page got stucked.&nbsp;I strongly suspect the major reason for this is its Ajax Polling strategy in order to ensure everyone got real-time voting status. By tracking its network activities I guess I was right.</p>
<p>Ajax polling in&nbsp;<a title=""Poker Planning"" href=""http://pokerplanning.com"">http://pokerplanning.com</a>:<br /><img title=""Ajax Polling"" src=""http://a1rvha.bay.livefilestore.com/y1pa2JzUcKtaGjtoIXjpWoiEA17Mq5w75kRsegCjqdvOZ_G4GoKzbzy6wol_zvpR09erNYzURiWOedM3paxsWSNGVSoebfN5VH4/AJaxPolling.png?psid=1"" alt=""Ajax Polling"" width=""640"" height=""318"" /></p>
<p>I believe HTML5 WebSocket will solve the problem! So I developed a simple demo (I named it <strong>Team Poker</strong>) which currently only has limited and basic functionalities described as below:</p>
<ol>
<li>User can login to poker room after inputting his/her nickname.</li>
<li>Everyone gets notified when one user players a poker.</li>
<li>Everyone gets notified when new player joins.</li>
<li>Newly joined player can see the current participants and voting status.</li>
</ol>
<p>The login screenshot for requirement #1:</p>
<p><img title=""TeamPoker - Login"" src=""http://a1rvha.bay.livefilestore.com/y1pPoZ5fyE2aQNYii7Ebnl1A4FljhylbIQVLX4XXz_zKuXnGerroSBQJr7pcograDIZOPuJz_s2j4I7OWoEjhpwIbOCLsHMltiR/TeamPoker-Login.png?psid=1"" alt=""TeamPoker - Login"" width=""640"" height=""516"" /></p>
<p>New participant(s), new voted poker(s) status update screenshot for requirement #2 and #3 (please click on the image to enlarge):</p>
<p><a title=""Click to enlarge"" href=""http://a1rvha.bay.livefilestore.com/y1plgEc-4xlEcANc_McjugrixSwHuleRSc0sxEm8W4nShfEECx50rK_9cpvZcgbG85R5V38tq-EuJgMksFGbwVjnhwr-mk6DfI0/TeamPoker-Vote.png?psid=1""><img title=""TeamPoker - Voting - Click to enlarge"" src=""http://a1rvha.bay.livefilestore.com/y1plgEc-4xlEcANc_McjugrixSwHuleRSc0sxEm8W4nShfEECx50rK_9cpvZcgbG85R5V38tq-EuJgMksFGbwVjnhwr-mk6DfI0/TeamPoker-Vote.png?psid=1"" alt=""TeamPoker - Voting"" width=""640"" height=""317"" /></a></p>
<p>Newly joined participant(s) can see current game status, story #4:</p>
<p><a href=""http://a1rvha.bay.livefilestore.com/y1pMaywJvAp-OoJh6hHJGO31UGfYqJu0n9z0tGGWBRCu5jS0PKE61qepvIoBge326IVyencTn8kCPk5AoQj4fkZzPxbFFPasFYC/TeamPoker-VoteFinished.png?psid=1"" title=""Click to enlarge""><img title=""TeamPoker-Vote Status"" src=""http://a1rvha.bay.livefilestore.com/y1pMaywJvAp-OoJh6hHJGO31UGfYqJu0n9z0tGGWBRCu5jS0PKE61qepvIoBge326IVyencTn8kCPk5AoQj4fkZzPxbFFPasFYC/TeamPoker-VoteFinished.png?psid=1"" alt=""TeamPoker-Vote Status"" width=""640"" height=""337"" /></a></p>
<blockquote>
<p>Please note the Team Poker demo is concentrated on&nbsp;demonstrating the power of WebSocket, in real world, player shouldn't see the poker values played by other players, and there is functionalities like moderator customizing user stories, storing game status on server side, and there is no fancy UI/animation. However, I've share all the source code at the beginning of this article, in additional, I've uploaded the source code on github: <a href=""https://github.com/WayneYe/TeamPoker"">https://github.com/WayneYe/TeamPoker</a>,&nbsp;wish some people make it better and productive, will you fork it with me? Dear reader:).</p>
</blockquote>
<p>Ok, now coding time, since all clients need to get notified about other client's changes (new player joining or new poker played), in additional, new joint player needs to know current status, I defined two communication contracts:</p>
<ul>
<li><em>ClientMessage</em>&nbsp;indicates message sent from client, contains&nbsp;a Type property reflects enumeration class <em>MessageType - NewParticipaint, NewVoteInfo, and a Data</em> property to store data<em>.</em></li>
<li><em>ServerStatus</em>, stores current playing players as well as current voting status - a hashtable [{PlayerName}, {VoteValue}], broadcast to all clients once receiving new client message.</li>
</ul>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">TeamPoker</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">TeamPoker</span> || <span style=""color: #efefaf; font-weight: bold;"">function</span> () <span style=""color: #dcdccc;"">{</span> <span style=""color: #dcdccc;"">};</span><br /> <br /> <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">VoteInfo</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">playerName</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">voteValue</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">this</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">PlayerName</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">playerName</span>;<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">this</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">VoteValue</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">voteValue</span>;<br /> <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">MessageType</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">NewParticipaint</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #cc9393;"">'NewParticipaint'</span><span style=""color: #dcdccc;"">,</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">NewVoteInfo</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #cc9393;"">'NewVoteInfo'</span><br /> <span style=""color: #dcdccc;"">};</span><br /> <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">ClientMessage</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">type</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">data</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">this</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">Type</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">type</span>;<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">this</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">Data</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">data</span>;<br /> <span style=""color: #dcdccc;"">};</span><br /> <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">ServerStatus</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> () <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">this</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">Players</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">[];</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">this</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">VoteStatus</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">[];</span><br /> <span style=""color: #dcdccc;"">};</span></pre>
<p>&nbsp;On client side,&nbsp;a WebSocket connection will be established after user clicking ""Login"" button, the nickname will be sent to WebSocket server running on nodejs, the kernal client code is shown below:</p>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">connectToWsServer</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> () <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// Init Web Socket connect</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">WSURI</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #cc9393;"">""ws://192.168.1.6:8888""</span>;<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">WsClient</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #e3ceab;"">new</span> <span style=""color: #dcdccc;"">WebSocket</span>(<span style=""color: #dcdccc;"">WSURI</span>);<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">WsClient</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">onopen</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">log</span>(<span style=""color: #cc9393;"">'Successfully connected to WebSocket server.'</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">joinGame</span>();<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">};</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">WsClient</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">onclose</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">log</span>(<span style=""color: #cc9393;"">'Connection closed.'</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">};</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">WsClient</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">onmessage</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">log</span>(<span style=""color: #cc9393;"">'Retrived msg from server: '</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">data</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">updateGameStatus</span>(<span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">data</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">};</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">WsClient</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">onerror</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">log</span>(<span style=""color: #cc9393;"">'An error occured: '</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">data</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">};</span><br /> <span style=""color: #dcdccc;"">};</span><br /> <br /> <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">joinGame</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> () <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">joinGameMsg</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #e3ceab;"">new</span> <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">ClientMessage</span>(<span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">MessageType</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">NewParticipaint</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">CurrentPlayerName</span>);<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">WsClient</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">send</span>(<span style=""color: #dcdccc;"">JSON</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">stringify</span>(<span style=""color: #dcdccc;"">joinGameMsg</span>));<br /> <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #dcdccc;"">TeamPoker</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">updateGameStatus</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">data</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// Format/fill the data from server side to HTML</span><br /> <span style=""color: #dcdccc;"">}</span></pre>
<p>On server side, one important task is to maintain all active client WebSocket connections so that it can ""broadcast"" messages to every client, and remove the closed client to avoid sending message to ""dead"" client. Other than this, the logic is very simple, validate message type sent from client, update players/vote status repository and then broadcast to all client:</p>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #7f9f7f;"">/*</span><br /> <span style=""color: #7f9f7f;"">WebSocket server based on</span><br /> <span style=""color: #7f9f7f;"">https://github.com/ncr/node.ws.js</span><br /> <span style=""color: #7f9f7f;"">Written By Wayne Ye 6/4/2011</span><br /> <span style=""color: #7f9f7f;"">http://wayneye.com</span><br /> <span style=""color: #7f9f7f;"">*/</span><br /> <br /> <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">sys</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">require</span>(<span style=""color: #cc9393;"">""sys""</span><span style=""color: #dcdccc;"">),</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">ws</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">require</span>(<span style=""color: #cc9393;"">""./ws""</span>);<br /> <br /> <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">clients</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">[],</span> <span style=""color: #dcdccc;"">players</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">[],</span> <span style=""color: #dcdccc;"">voteStatus</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">[];</span><br /> <br /> <span style=""color: #dcdccc;"">ws</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">createServer</span>(<span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">websocket</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">websocket</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">addListener</span>(<span style=""color: #cc9393;"">""connect""</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">resource</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// emitted after handshake</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">sys</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">debug</span>(<span style=""color: #cc9393;"">""Client connected on path: ""</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">resource</span>);<br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// # Add to our list of clients</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">clients</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">push</span>(<span style=""color: #dcdccc;"">websocket</span>); <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}).</span><span style=""color: #dcdccc;"">addListener</span>(<span style=""color: #cc9393;"">""data""</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">data</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">clinetMsg</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">JSON</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">parse</span>(<span style=""color: #dcdccc;"">data</span>);<br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">switch</span> (<span style=""color: #dcdccc;"">clinetMsg</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">Type</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">case</span> <span style=""color: #dcdccc;"">MessageType</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">NewParticipaint</span><span style=""color: #dcdccc;"">:</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">newPlayer</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">clinetMsg</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">Data</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">sys</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">debug</span>(<span style=""color: #cc9393;"">'New Participaint: '</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">newPlayer</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">players</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">push</span>(<span style=""color: #dcdccc;"">newPlayer</span>);<br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">break</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">case</span> <span style=""color: #dcdccc;"">MessageType</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">NewVoteInfo</span><span style=""color: #dcdccc;"">:</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">newVoteInfo</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">clinetMsg</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">Data</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">sys</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">debug</span>(<span style=""color: #cc9393;"">'New VoteInfo: '</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">newVoteInfo</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">PlayerName</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #cc9393;"">' voted '</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">newVoteInfo</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">VoteValue</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">voteStatus</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">push</span>(<span style=""color: #dcdccc;"">newVoteInfo</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">break</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">default</span><span style=""color: #dcdccc;"">:</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">break</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// Notify all clients except the one just sent data</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">serverStatus</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #e3ceab;"">new</span> <span style=""color: #dcdccc;"">ServerStatus</span>();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">serverStatus</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">Players</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">players</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">serverStatus</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">VoteStatus</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">voteStatus</span>;<br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">srvMsgData</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">JSON</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">stringify</span>(<span style=""color: #dcdccc;"">serverStatus</span>);<br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">sys</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">debug</span>(<span style=""color: #cc9393;"">'Broadcast server status to all clients: '</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">srvMsgData</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">for</span> (<span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">i</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #8cd0d3;"">0</span>; <span style=""color: #dcdccc;"">i</span> <span style=""color: #dcdccc;"">&lt;</span> <span style=""color: #dcdccc;"">clients</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">length</span>; <span style=""color: #dcdccc;"">i</span><span style=""color: #dcdccc;"">++</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">clients</span><span style=""color: #dcdccc;"">[</span><span style=""color: #dcdccc;"">i</span><span style=""color: #dcdccc;"">].</span><span style=""color: #dcdccc;"">write</span>(<span style=""color: #dcdccc;"">srvMsgData</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}).</span><span style=""color: #dcdccc;"">addListener</span>(<span style=""color: #cc9393;"">""close""</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> () <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// emitted when server or client closes connection</span><br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">for</span> (<span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">i</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #8cd0d3;"">0</span>; <span style=""color: #dcdccc;"">i</span> <span style=""color: #dcdccc;"">&lt;</span> <span style=""color: #dcdccc;"">clients</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">length</span>; <span style=""color: #dcdccc;"">i</span><span style=""color: #dcdccc;"">++</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// # Remove from our connections list so we don't send</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// # to a dead socket</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">if</span> (<span style=""color: #dcdccc;"">clients</span><span style=""color: #dcdccc;"">[</span><span style=""color: #dcdccc;"">i</span><span style=""color: #dcdccc;"">]</span> <span style=""color: #dcdccc;"">==</span> <span style=""color: #dcdccc;"">websocket</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">sys</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">debug</span>(<span style=""color: #cc9393;"">""close with client: ""</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">websocket</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">clients</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">splice</span>(<span style=""color: #dcdccc;"">i</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">break</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">});</span><br /> <span style=""color: #dcdccc;"">}).</span><span style=""color: #dcdccc;"">listen</span>(<span style=""color: #8cd0d3;"">8888</span>);<br /> <br /> <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">MessageType</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">NewParticipaint</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #cc9393;"">'NewParticipaint'</span><span style=""color: #dcdccc;"">,</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">NewVoteInfo</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #cc9393;"">'NewVoteInfo'</span><br /> <span style=""color: #dcdccc;"">};</span><br /> <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">ClientMessage</span>(<span style=""color: #dcdccc;"">type</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">data</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">this</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">Type</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">type</span>;<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">this</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">Data</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">data</span>;<br /> <span style=""color: #dcdccc;"">};</span><br /> <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">VoteInfo</span>(<span style=""color: #dcdccc;"">playerName</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">voteValue</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">this</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">PlayerName</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">playerName</span>;<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">this</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">VoteValue</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">voteValue</span>;<br /> <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">ServerStatus</span>() <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">this</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">Players</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">[];</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">this</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">VoteStatus</span> <span style=""color: ",9126,2011-06-10 14:16:57.860,1,A
115,Wayne,【转载】韩寒 - 没希望工程,There-Is-No-The-Hope-Project,5,"<p>中国的慈善机构是很淡定的，因为他们都是政府机构，事态再失控，他们都不害怕。他们知道，他们拥有最后一道防线：舆论消灭权。在这些慈善机构们到了最危险的时候，肯定有个部门会发出最后的吼声，然后一片寂静。比较著名的一次慈善机构行使舆论消灭权是在2002年，《南方周末》头版揭露希望工程负责任挪用亿元善款进行投资，最终导致亏损。结果这份报纸几十万份被收回销毁，仅存几千在人间。写这篇文章的新闻人方进玉遭到处理，提供线索的杨女士在2006年患癌症去世，审计报告一直没有对外公开。此前希望工程还有假信丑闻，上海一家规模不大的私营公司捐助希望工程17名学生，他们收到了所有学生的感谢信，结果经查证，仅有3名学生收到了善款，其余均为假信，他们踏访了那片土地，发现感谢信中的一些学生其实已经失学。后来南方周末的记者去做过深度报告，有一家未收到善款的失学的兰姓孩子家中母亲双腿瘫痪，家中孩子全部失学，由于当时中央还征收农业税，而残疾人可以免除农业税，孩子的母亲交不起五十元办理残疾证，所以爬到了当地政府门口要求减免，官员说，你没有残疾证，所以你不是残疾人。后来走访的学生虽然补收到了希望工程善款，但日期其实已经被涂改。</p>
<p>&nbsp;</p>
<p>虽然在假信风波中，有相当责任是地方的共青团和教委，因为是官方慈善机构的性质，所以善款会先到当地共青团，再到教委，再到学校，再到个人，但毫无疑问这是整套系统出现的问题。那么为什么类似红十字会这样的慈善机构，臭名昭著，但官方一样不允许非官方的慈善机构或者NGO的产生呢？我觉得这并不是因为官方担心管理混乱，因为NGO再混乱也混乱不过他们自己。而是由于官方机构做的实在太差，所以他们明白很多NGO的诞生势必会很快树立威信，吸引大量年轻人和各界人士，而NGO往往都与慈善有关，加上独立，透明，又有资金和会员的支持，又获得人心，等于是建党伟业，假以时日，势必会政权构成一定的威胁，就算没有威胁，被监督和对比着也是浑身不舒服，就好比金正日一定不喜欢金城武天天站在他边上。所以官方牢牢控制着慈善机构，管理媒体，审计和司法的又都是自己人，这便是中国所谓慈善机构的问题来源。</p>
<p>&nbsp;</p>
<p>但是很明显，红十字会的后台没有希望工程硬，在新浪微薄搜索红十字，会出现很多内容，正面负面都有，但是搜索希望工程或者其娘家青基会，马上会出现&ldquo;根据相关法律法规，你所搜索的内容不予显示&rdquo;，这就变成了没希望工程。而在百度和谷歌上搜索其丑闻，很多也被屏蔽。在丑闻出现以后，红十字会的各种领导虽然智商不济，但还硬撑召开了发布会，说了一堆不着边的傻话，而且新闻媒体也没有遭到报复。希望工程面对自己的丑闻则不会进行任何的回应，直接封杀媒体，销毁报纸，处理记者。红十字会表示，争取马上开通查询系统，可以让捐款者知道每一笔善款的去处。而希望工程则无法审计。面对一个这样霸道而神秘的慈善工程，我们完全有理由用最坏的心去揣测他，并要求对希望工程进行独立的审计。</p>
<p>&nbsp;</p>
<p>在我们做学生的时候，大家都曾经被要求为希望工程捐献，而且年复一年。如果你问我，我们还要为希望工程捐款么，我问你，如果美国人用TWITTER搜索一个慈善机构和一个慈善工程，结果搜索不到任何信息，那他们会为这个慈善机构捐款么？人类没有任何理由为一个不愿公布审计报告并压迫传媒的机构捐款，无论它救助的是什么样的对象或者获得了什么样的成就。</p>
<p>&nbsp;</p>
<p>如果我们以最好的心去揣测，那么希望工程也可以退出历史舞台了，如果现在退出，那也算功成身退，毕竟希望工程帮助过不少贫困学生，虽然这是拿老百姓的捐款来节省应该是属于财政的开支，但也是有善。当年邓小平推出希望工程，财政尚不富裕，需要民间慈善。但如今，公款吃喝一年数千亿，维稳一年数千亿，讨好各种生僻国家一家数百亿，而中国有失学儿童三百万，承担他们教育仅仅需要一年十亿。假设现在的中国没有一所小学，要给中国的五十万个村里每一个村都盖一个小学，包括华西村之流也给盖上，需要的全部资金也仅仅等于我们的全体行政人员一个季度不要进行公款消费。所以我觉得希望工程已经完全没有任何的理由向民间征集善款，教育本来是国家财政的一个重要支出部分。我们来看一个数据：2010年香港GDP17481亿港元，征税2090亿港元。深圳GDP9511亿元，征税3061亿元，广州GDP10604亿元，征税3379亿元。香港税收占GDP12%，深圳、广州均为32%。香港教育预算540亿，医疗预算399亿，共占税收45%；而广深两地的教育、医疗预算累计才213亿元，占税收3%。说到医疗，我们再看另外一个数据：政府投入的医疗费用中，80%是为850万以党政干部为主的群体服务；据监察部、人事部披露，全国有200万名各级干部长期请病假，其中有40万名干部长期占据了干部病房、干部招待所、度假村，一年开支约为500亿元。</p>
<p>&nbsp;$More$</p>
<p>这两个数据说明了什么我就不说了。到了今天，政府有足够的能力和义务去承担基础教育和希望工程，老百姓无需去掏不明不白并不容质疑的捐款。如果政府对教育的支出所占的GDP比例达到了其他国家的相应比例，而基础教育问题依然无法解决，那才是民间慈善应该帮助和顶上的时候。但这些不意味着我们不再需要慈善，我自己抄袭自己一下，引用去年一篇文章的结尾来给这篇文章结尾：</p>
<p>&nbsp;</p>
<p>诸恶莫作，众善奉行。但是如果诸恶一直在作，甚至越做越过，乃至是非颠倒，这一切都不影响后面的那句，众善奉行。</p>
<p>&nbsp;</p>
<p>只有众善够重，诸恶才能被诛。</p>
<p>&nbsp;</p>
<p><a href=""http://blog.sina.com.cn/s/blog_4701280b010185jh.html"">原文链接</a>，可能会被HX，但我这里不会，如果我这个PageRank 1的也被HX了，那他们也太。。。</p>",2599,2011-07-01 00:02:51.390,1,A
116,Wayne,帮助这些被遗弃的孩子 - 从身边微小的事做起,Healing-The-Abandoned-Children,1,"<p>上个周六，我陪老婆去参加一个公益活动，感触颇多，谨以短文一篇记录下所见，所思，所想。</p>
<p><a href=""http://jamieweidner.squarespace.com/healing-home/"" target=""_blank"">Shanghai Healing Home</a>由一群工作上在上海的<a href=""http://jamieweidner.squarespace.com/the-team/"" target=""_blank"">老外们</a>创建，他们从各种途径（一般是医院）收养被遗弃的患有先天性唇腭裂的孩子们，起初自己出资，慢慢地呼吁有爱心的人资助，逐渐地发展到一定规模，目前一共大概收养了<a href=""http://jamieweidner.squarespace.com/baby-pics/"" target=""_blank"">25个孩子</a>，他们中的一部分已经通过好心人的捐赠以及组员的沟通与努力成功实施了手术，跟正常的孩子无异，并且有些孩子已经提交相关组织申请领养。</p>
<p>我们的工作是帮助搬家，下午2:30约在广兰路地铁站集合，然后帮忙把东西从广兰路的一幢房子搬到巨峰路，大概一共来了快20个人，我和老婆是这次唯二的中国人。。人齐了后，组织者Lauren开始分工，我和老婆被分到照顾小孩，（照顾小孩的都是女人，就我一公的。。我估计一来我们第一次参加跟他们不太熟，不好意思让我们干重活，也可能考虑到英美鬼畜力气大些，我想起了敢死队里杰森&middot;斯坦森对李连杰说的：&ldquo;Four and a half??&rdquo;），anyway，我只想多多了解下。</p>
<p>初到孩子们的&ldquo;家&rdquo;，立刻感觉到温馨与仁爱，同时又觉得有些心酸，坦白说我也非常愤怒，可谓是百感交集，。但是在3个多小时跟这些可爱的孩子们一起的时间里，一个最简单的词可以概括：开心！</p>
<p><a href=""http://weibo.com/2204328387"" target=""_blank"">@可爱的小光头他妈</a>和一个可爱的孩子（已经做过手术）<a href=""https://byfiles.storage.live.com/y1pTeABxiKlAaWFTcX75aFzKbK4Th8CRLAijVUmwIUDq6Sf8qRKqao09avWCf5YREmy60kdFUEASb96wxXAQ80oJQ/IMAG0010.jpg?psid=1"" target=""_blank""><br /></a><img class=""BlogImage"" title=""@可爱的小光头他妈和孩子"" src=""https://byfiles.storage.live.com/y1pTeABxiKlAaWFTcX75aFzKbK4Th8CRLAijVUmwIUDq6Sf8qRKqao09avWCf5YREmy60kdFUEASb96wxXAQ80oJQ/IMAG0010.jpg?psid=1"" alt=""@可爱的小光头他妈和孩子"" width=""640"" height=""361"" /></p>
<p>鄙人和一个可爱的女孩子，她很乖，我抱了她1个多小时，她一会都不闹。<br /><img class=""BlogImage"" title=""我和一个可爱的女孩子"" src=""https://byfiles.storage.live.com/y1pru163iNf4ZMqJQ17FDYcWeeK5WQK61vKYyvEtGZwKSXgffMQNFVLREXfHZdnPP7Vabq4QT8LlRTrYRFEwVyb9A/IMAG0011.jpg?psid=1"" alt=""博主和一个可爱的女孩子"" width=""640"" height=""361"" /></p>
<p>很多患有唇腭裂的孩子，没有办法自然吸奶，只能用软管插入胃中，把奶通过软管挤进胃里，真的非常可怜，下面这个小孩就是这样的情况，已经块一岁了，却骨瘦如柴，她也非常乖，一直躺在那里，一声都没闹，一双明亮的眼睛不停地到处看。</p>
<p><img title=""可怜的孩子，只能用软管进食"" src=""https://byfiles.storage.live.com/y1pwd5hMKeaS_sKKQHAhA4jkVpo3mGTXcsBwO2afoNFGylq5QR4UBkEVoCALnety_2JwRyui4F4lgU6UXye5_MvGQ/IMAG0012.jpg?psid=1"" alt=""可怜的孩子，只能用软管进食"" width=""640"" height=""361"" /></p>
<p>这个胖小子这么会睡，难怪有点吨位:)<br /><img class=""BlogImage"" title=""胖小子"" src=""https://byfiles.storage.live.com/y1pwd5hMKeaS_t7BIAPYQvZwvntFbdxS0hIQFbXVMO93NL8WYRaLGtJMq-2Fsyks4j1Ch-C4CpGVQvQSC2FEXCuxA/IMAG0013.jpg?psid=1"" alt=""胖小子"" width=""640"" height=""361"" />&nbsp;</p>
<p>幸好有这群好心人，他们其实已经算非常幸运了：<br /><img class=""BlogImage"" title=""一起睡"" src=""https://byfiles.storage.live.com/y1p2swHMRpTbao_Uzf30Y8Qafw64Ty9C2jbyisxYXINWHzwbId7dmJr4faMWNDx5qg5PTXwW5wz4wpTKReqhRrO4w/IMAG0018.jpg?psid=1"" alt=""一起睡"" width=""640"" height=""361"" />&nbsp;</p>
<p><img src=""https://by1.storage.live.com/items/734274473CC13A10!2755:Scaled1024/IMAG0020.jpg?psid=1&amp;ck=0&amp;ex=720"" alt=""睡得很香"" width=""361"" height=""640"" /></p>
<p><img src=""https://by1.storage.live.com/items/734274473CC13A10!2758:Scaled1024/IMAG0021.jpg?psid=1&amp;ck=0&amp;ex=720"" alt=""这个孩子还很小"" width=""361"" height=""640"" /></p>
<p>这个小女孩叫小五，她真是可爱的，非常非常乖，一个人坐着玩，一丁点儿都不闹，而且她好像还比较喜欢我，往我身上爬，最后我走的时候还抓着我的手不放，呵呵，我走后一会就想她了，下次一定再去巨峰路看她！<br /><img class=""BlogImage"" title=""可爱的小五"" src=""https://byfiles.storage.live.com/y1pB2lFtAMVLJR9XhLXhzi9GvcN-hO8fmCkjpF6m_PKmmoHPwt9LBbL1SmNTSxUJJpp4XhVkehEAeo831RJqKg5Fw/IMAG0022.jpg?psid=1"" alt=""可爱的小五"" width=""640"" height=""361"" />&nbsp;</p>
<p>听组织成员Freda介绍，为一名患有唇腭裂的孩子做手术大概只需要1-2万元，他们一方面接受捐赠，另一方面四处寻求医院的&rdquo;免费手术&ldquo;，我不是这方面专家，描述得可能有问题，但是确实有免费做这种手术的（听了这个让我感觉很欣慰，我原来老是在想，为啥谁谁谁身患绝症媒体都呼吁社会献爱心，医院呢？医院就不能献爱心？？）。</p>$More$
<p>无论如何，我这个穷酸的码农今次为这些可爱的孩子们做了一丁点贡献，我像Freda询问了捐赠渠道，以及：&rdquo;你们需要码农帮忙改进/维护网站吗？&ldquo;，Freda表示非常需要，我给了她我的联系方式。</p>
<p>现在，鄙人向本博的极小众读者呼吁，行动起来，从身边的小事做起，给这些可爱的孩子们一点帮助，Shanghai Healing Home的捐赠方式在<a href=""http://jamieweidner.squarespace.com/donate/"" target=""_blank"">这个页面</a>，一点点钱，一些您的孩子穿过的衣服，用过的用品或者玩过的玩具，都可以的！</p>
<p>Let's start from the...</p>
<p>Man In the Mirror</p>
<p>I'm gonna make a change,<br />For once im my life<br />It's gonna feel real good,<br />Gonna make a diference<br />Gonna make it right...<br />As I, turn up the collar on<br />My favorite winter coat<br />This wind is blowing my mind<br />I see the kids in the streets,<br />With not enought to eat<br />Who am I to be blind?<br />Pretending not to see their needs<br />A summer disregard,a broken bottle top<br />And a one man soul<br />They follow each other on the wind ya' know<br />'Cause they got nowhere to go<br />That's why I want you to know<br />I'm starting with the man in the mirror<br />I'm asking him to change his ways<br />And no message could have been any clearer<br />If you wanna make the world a better place<br />(Take a look at yourself, and then make a change)<br />(Na na na, na na na, na na, na nah)<br />I've been a victim of a selfish kind of love<br />It's time that I realize<br />That there are some with no home, not a nickel to loan<br />Could it be really me, pretending that they're not alone?<br />A willow deeply scarred, somebody's broken heart<br />And a washed out dream</p>
<p><object width=""240"" height=""20"" data=""http://WayneYe.com/AudioPlayer/audioplayer.swf"" type=""application/x-shockwave-flash""><param name=""pluginspage"" value=""http://www.macromedia.com/go/getflashplayer"" /><param name=""src"" value=""http://WayneYe.com/AudioPlayer/audioplayer.swf"" /><param name=""allownetworking"" value=""internal"" /><param name=""allowscriptaccess"" value=""never"" /><param name=""quality"" value=""high"" /><param name=""flashvars"" value=""file=http://chongqing.eol.cn/jing_dian_music_4778/20090629/W020090629657990816340.mp3&amp;repeat=true&amp;autostart=false&amp;showdigits=ture&amp;showdownload=false&amp;width=240&amp;height=20"" /><param name=""wmode"" value=""opaque"" /></object></p>
<p>现在来谈谈我为什么愤怒？</p>
<p>孩子是无辜的，为什么这些父母忍心丢下他们？？现在不是文革，三年自然灾害，给孩子一口饭吃，让他们能够活下来，做不到吗？？</p>
<blockquote><strong>唇颚裂</strong>（<strong>Cleft lip and palate</strong>）是常见的一种先天性缺陷，亦是最可治愈的一种，大致可分为唇裂（或俗称<strong>兔唇</strong>，<strong>兔瓣嘴</strong>）、颚裂和唇颚裂。在亚洲地区每约500至600名新生婴儿便有一名患者。</blockquote>
<p>摘自<a href=""http://zh.wikipedia.org/zh-cn/%E5%94%87%E9%A1%8E%E8%A3%82"" target=""_blank"">维基百科</a>。</p>
<blockquote>
<p>唇腭裂是口腔颌面部最常见的先天性畸形，平均每生700个婴儿中就有1个患唇腭裂。唇腭裂不仅严重影响面部美观，还因口、鼻腔相通，直接影响发育，经常招致上呼吸道感染，并发中耳炎。小孩因吮奶困难导致明显营养不良，在儿童和家长的心理上造成严重的创伤。</p>
</blockquote>
<p>摘自<a href=""http://baike.baidu.com/view/1079601.htm"" target=""_blank"">百度百科</a>。</p>
<p>通过查阅资料，我知道了唇腭裂是完全可以通过手术修复的，我们没有理由遗弃无辜的孩子！</p>
<p>最近，托郭大美女的福，广大景德镇P民想必对红十字会了解更多了吧？嗯，拿着善款，购豪宅，开玛莎拉蒂，鄙人随便查了下<a href=""http://car.autohome.com.cn/price/brand-57.html?search_a_car_%c2%ea%c9%af%c0%ad%b5%d9"" target=""_blank"">汽车之家</a>，在国内买一辆玛莎拉蒂200多万，按一个孩子的手术费用2万块算，<strong>可以给200个唇腭裂的孩子正常人的生活</strong>！今天看到<a href=""http://weibo.com/2178683425/l4EWAeTIb"" target=""_blank"">你们还逼捐</a>，网友又发现原来郭美美也不算啥，<a href=""http://weibo.com/2093659437/eDkCII6icxi"" target=""_blank"">有更厉害的</a>，在了解了这些情况后，敬爱的读者，鄙人<strong>强烈建议您不要再给他们的豪宅，跑车做贡献</strong>！</p>
<p>不得不提我们伟光正的公仆，我知道您们忙着呢：开会，卖地，强拆，搞大工程，等等等等，你们忙得很！可是，别的我不想多说，我个人不觉得<a href=""http://news.163.com/10/0206/01/5UQ5QS320001124J.html"" target=""_blank"">4000亿的世博会</a>有神马好的，这些钱足以实现全民医保！这个社会会少很多悲剧，必然会HX一些！</p>",3780,2011-07-04 22:06:23.103,1,A
117,Wayne,IE6真该死了,IE6-Should-Dead,6,"<p><a href=""http://ie6countdown.com"" target=""_blank"">http://ie6countdown.com</a> 微软官方劝退IE6网站，其页面上希望您告诉朋友不要用IE6了，而且可以<a href=""http://www.ie6countdown.com/join-us.aspx"" target=""_blank"">获取一段脚本</a>挂在您的网站上，
并且列出了各个国家的地区的IE6份额，我天朝当然高居榜首。</p>
<p><img title=""IE6市场份额"" src=""http://ww3.sinaimg.cn/large/76a6d6a2jw1dixhye2op6j.jpg"" alt=""IE6市场份额"" width=""493"" height=""357"" /></p>
<p>&nbsp;</p>
<p>我们是否应该为&ldquo;世界第一&rdquo;感到羞愧？？实际上几个有关衙门是不是更应该脸上无光？</p>
<ol>
<li><strong>尊重知识产权</strong>！否则在这个星球上处处遭人鄙视，而且扼杀了自己的<strong>创新能力及公平竞争土壤</strong>！</li>
<li>正常点吃，经济点开，少贪一点，少抽一点，把<strong>属于人民的财富还给人民</strong>！</li>
</ol>
<p>第二条能够改善会使更多的人买得起正版，而用盗版归根结底是官方对知识产权重视不够！几年前胡哥访问Biil Gates老家，以及今年初买波音的飞机，实际上都是承认错误，钱可以送，但就是不改！实际上，恶果就是这样的土壤上难有世界级企业，为啥？刚有点好的态势就被Copy了，还没法通过法律手段起诉。</p>
<p>PS, wayneye.com从第一天开始就不支持IE6，您可以试试拿IE6访问是个啥情况:)</p>",2382,2011-07-07 22:35:44.797,1,A
118,Wayne,Exception handling particulars in C#,Exception-Handling-Particulars-In-Csharp,17,"<h3>Background</h3>
<p>Exception handling appears in most .NET applications, this post is trying to describe some &nbsp;Exception handling particulars in C# which might not take enough awareness from C# developers.&nbsp;</p>
<h3>Differences between throw and throw ex&nbsp;</h3>
<p>I guess every C# developer has seen code snippet below:</p>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #e3ceab;"">try</span><br /> <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// Do some work, exception occurs</span><br /> <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #e3ceab;"">catch</span> (IO<span style=""color: #dcdccc;"">Exception</span> <span style=""color: #dcdccc;"">ex</span>)<br /> <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// Exception caught, re-throw it to bubble up</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">throw</span> <span style=""color: #dcdccc;"">ex</span>;<br /> <span style=""color: #dcdccc;"">}</span></pre>
<p>In the <code>catch</code> block, we can rethrow the caught exception instance of <code>IOException&nbsp;</code>to higher level, and we may also saw another way in a little different:</p>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #e3ceab;"">try</span><br /> <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// Do some work, exception occurs</span><br /> <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #e3ceab;"">catch</span> (IO<span style=""color: #dcdccc;"">Exception</span> <span style=""color: #dcdccc;"">ex</span>)<br /> <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// Exception caught, re-throw it to bubble up</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">throw</span>;<br /> <span style=""color: #dcdccc;"">}</span></pre>
<h3><strong>Is there any different?&nbsp;</strong></h3>
<p>The answer is yes! To prove that I wrote a simple snippet of code below, first is a simple customized Exception: DummyException.</p>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #e3ceab;"">internal</span> <span style=""color: #e3ceab;"">class</span> <span style=""color: #dcdccc;"">DummyException</span> <span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">Exception</span><br /> <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">public</span> <span style=""color: #efef8f;"">DummyException</span>(<span style=""color: #dcdccc;"">String</span> <span style=""color: #dcdccc;"">dummymsg</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">:</span> <span style=""color: #e3ceab;"">base</span>(<span style=""color: #dcdccc;"">dummymsg</span>)<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">{</span><br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">public</span> <span style=""color: #efef8f;"">DummyException</span>(<span style=""color: #dcdccc;"">String</span> <span style=""color: #dcdccc;"">dummymsg</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">Exception</span> <span style=""color: #dcdccc;"">innerException</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">:</span> <span style=""color: #e3ceab;"">base</span>(<span style=""color: #dcdccc;"">dummymsg</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">innerException</span>)<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">{</span><br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #dcdccc;"">}</span></pre>
<p>&nbsp;And then I manually throw the DummyException within one method, while handle it in different way mentioned above:</p>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #e3ceab;"">class</span> <span style=""color: #dcdccc;"">Program</span><br /> <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">private</span> <span style=""color: #e3ceab;"">static</span> <span style=""color: #e3ceab;"">void</span> <span style=""color: #efef8f;"">DoLowLevelOperation</span>()<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// Do some low level operation</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">throw</span> <span style=""color: #e3ceab;"">new</span> <span style=""color: #efef8f;"">DummyException</span>(<span style=""color: #cc9393;"">""A dummy exception message!""</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">public</span> <span style=""color: #e3ceab;"">static</span> <span style=""color: #e3ceab;"">void</span> <span style=""color: #efef8f;"">MethodThrowException1</span>()<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">try</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">DoLowLevelOperation</span>();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">catch</span> (<span style=""color: #dcdccc;"">DummyException</span> <span style=""color: #dcdccc;"">de</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">throw</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">public</span> <span style=""color: #e3ceab;"">static</span> <span style=""color: #e3ceab;"">void</span> <span style=""color: #efef8f;"">MethodThrowException2</span>()<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">try</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">DoLowLevelOperation</span>();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">catch</span> (<span style=""color: #dcdccc;"">DummyException</span> <span style=""color: #dcdccc;"">de</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">throw</span> <span style=""color: #dcdccc;"">de</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">static</span> <span style=""color: #e3ceab;"">void</span> <span style=""color: #efef8f;"">Main</span>(<span style=""color: #dfdfbf; font-weight: bold;"">string</span><span style=""color: #dcdccc;"">[]</span> <span style=""color: #dcdccc;"">args</span>)<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">try</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">MethodThrowException1</span>();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">catch</span> (<span style=""color: #dcdccc;"">DummyException</span> <span style=""color: #dcdccc;"">de1</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">Console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">WriteLine</span>(<span style=""color: #dcdccc;"">de1</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">Message</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">Console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">WriteLine</span>(<span style=""color: #dcdccc;"">de1</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">StackTrace</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">try</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">MethodThrowException2</span>();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">catch</span> (<span style=""color: #dcdccc;"">DummyException</span> <span style=""color: #dcdccc;"">de2</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">Console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">WriteLine</span>(<span style=""color: #dcdccc;"">de2</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">Message</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">Console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">WriteLine</span>(<span style=""color: #dcdccc;"">de2</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">StackTrace</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #dcdccc;"">}</span></pre>
<p>&nbsp;The result will be:</p>
<p>$More$</p>
<p><img title=""Exception handling"" src=""https://byfiles.storage.live.com/y1pOsmopqaR3U4_pOpoKta9ao4On0IrEWZf78M-fGOIROnhl0nPaFzDEJSeykT3-jL8fBn5YBddITP0rM9qzZU3qg/EXHandling.png?psid=1"" alt=""Exception handling"" width=""677"" height=""442"" /></p>
<p>So the difference is, ""throw ex"" will truncate&nbsp;the StackTrace information where it was originally thrown (this will cause the so called issue - ""breaking the stack""), but ""throw"" will contain all the information.</p>
<p>Delve deeper, ""throw ex"" in IL level essentially indicates ""<strong>rethrow</strong>"", whereas ""throw"" indicate ""<strong>throw</strong>"", please see their IL code below:</p>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">method</span> <span style=""color: #e3ceab;"">public</span> <span style=""color: #dcdccc;"">hidebysig</span> <span style=""color: #e3ceab;"">static</span> <span style=""color: #e3ceab;"">void</span> <span style=""color: #dcdccc;"">MethodThrowException1</span>() <span style=""color: #dcdccc;"">cil</span> <span style=""color: #dcdccc;"">managed</span><br /> <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">maxstack</span> <span style=""color: #8cd0d3;"">1</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">locals</span> <span style=""color: #dcdccc;"">init</span> (<br /> <span style=""color: #efef8f;"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [0]</span> <span style=""color: #e3ceab;"">class</span> <span style=""color: #dcdccc;"">ConsoleUnitTest</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">DummyException</span> <span style=""color: #dcdccc;"">de</span>)<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_0000</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">nop</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_0001</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">nop</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_0002</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">call</span> <span style=""color: #e3ceab;"">void</span> <span style=""color: #dcdccc;"">ConsoleUnitTest</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">Program</span><span style=""color: #dcdccc;"">::</span><span style=""color: #dcdccc;"">DoLowLevelOperation</span>()<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_0007</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">nop</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_0008</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">nop</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_0009</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">leave</span><span style=""color: #dcdccc;"">.</span>s <span style=""color: #dcdccc;"">L_000f</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_000b</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">stloc</span><span style=""color: #dcdccc;"">.</span><span style=""color: #8cd0d3;"">0</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_000c</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">nop</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_000d</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">rethrow</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_000f</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">nop</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_0010</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">ret</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">.</span><span style=""color: #e3ceab;"">try</span> <span style=""color: #dcdccc;"">L_0001</span> <span style=""color: #dcdccc;"">to</span> <span style=""color: #dcdccc;"">L_000b</span> <span style=""color: #e3ceab;"">catch</span> <span style=""color: #dcdccc;"">ConsoleUnitTest</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">DummyException</span> <span style=""color: #dcdccc;"">handler</span> <span style=""color: #dcdccc;"">L_000b</span> <span style=""color: #dcdccc;"">to</span> <span style=""color: #dcdccc;"">L_000f</span><br /> <span style=""color: #dcdccc;"">}</span></pre>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">method</span> <span style=""color: #e3ceab;"">public</span> <span style=""color: #dcdccc;"">hidebysig</span> <span style=""color: #e3ceab;"">static</span> <span style=""color: #e3ceab;"">void</span> <span style=""color: #dcdccc;"">MethodThrowException2</span>() <span style=""color: #dcdccc;"">cil</span> <span style=""color: #dcdccc;"">managed</span><br /> <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">maxstack</span> <span style=""color: #8cd0d3;"">1</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">locals</span> <span style=""color: #dcdccc;"">init</span> (<br /> <span style=""color: #efef8f;"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [0]</span> <span style=""color: #e3ceab;"">class</span> <span style=""color: #dcdccc;"">ConsoleUnitTest</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">DummyException</span> <span style=""color: #dcdccc;"">de</span>)<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_0000</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">nop</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_0001</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">nop</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_0002</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">call</span> <span style=""color: #e3ceab;"">void</span> <span style=""color: #dcdccc;"">ConsoleUnitTest</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">Program</span><span style=""color: #dcdccc;"">::</span><span style=""color: #dcdccc;"">DoLowLevelOperation</span>()<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_0007</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">nop</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_0008</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">nop</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_0009</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">leave</span><span style=""color: #dcdccc;"">.</span>s <span style=""color: #dcdccc;"">L_000f</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_000b</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">stloc</span><span style=""color: #dcdccc;"">.</span><span style=""color: #8cd0d3;"">0</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_000c</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">nop</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_000d</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">ldloc</span><span style=""color: #dcdccc;"">.</span><span style=""color: #8cd0d3;"">0</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_000e</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #e3ceab;"">throw</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_000f</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">nop</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">L_0010</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #dcdccc;"">ret</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">.</span><span style=""color: #e3ceab;"">try</span> <span style=""color: #dcdccc;"">L_0001</span> <span style=""color: #dcdccc;"">to</span> <span style=""color: #dcdccc;"">L_000b</span> <span style=""color: #e3ceab;"">catch</span> <span style=""color: #dcdccc;"">ConsoleUnitTest</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">DummyException</span> <span style=""color: #dcdccc;"">handler</span> <span style=""color: #dcdccc;"">L_000b</span> <span style=""color: #dcdccc;"">to</span> <span style=""color: #dcdccc;"">L_000f</span><br /> <span style=""color: #dcdccc;"">}</span></pre>
<p>&nbsp;The definition for ""rethrow"" and ""throw"" in IL are showing below:</p>
<blockquote>
<p>rethrow: <strong>Rethrows the current exception.</strong></p>
<p>throw: <strong>Throws the exception Object currently on evaluation stack.</strong></p>
</blockquote>
<p><strong><strong>So what should we do?</strong></strong></p>
<p>Now that we are clear about the difference, what should we do? Every time we manually throw a specific type of Exception, we should wrap the caught exception as InnerException:</p>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #e3ceab;"">try</span><br /> <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">throw</span> <span style=""color: #e3ceab;"">new</span> <span style=""color: #efef8f;"">DummyException</span>(<span style=""color: #cc9393;"">""A dummy exception message!""</span>);<br /> <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #e3ceab;"">catch</span> (<span style=""color: #dcdccc;"">DummyException</span> <span style=""color: #dcdccc;"">de</span>)<br /> <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">AnotherTypeOfException</span> <span style=""color: #dcdccc;"">anotherTypeOfException</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #e3ceab;"">new</span> <span style=""color: #dcdccc;"">AnotherTypeOfException</span>(<span style=""color: #cc9393;"">""Customized exception message.""</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">de</span>)<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">throw</span> <span style=""color: #dcdccc;"">anotherTypeOfException</span>;<br /> <span style=""color: #dcdccc;"">}</span></pre>
<p>When initializes <code>AnotherTypeOfException</code>&nbsp;we actually calls Exception's construcor ""<code>(String message, Exception innerException)</code>"", so finally there will be&nbsp;<strong>no information loss.</strong></p>
<p>There is one&nbsp;particular&nbsp;details,&nbsp;when we wrote code similar with below, Resharper will warning us it is redundant, because ""<em>The catch statement may appear to be doing something, but it really isn't: all it's doing is throwing the exception (with the same stack information)</em>"",&nbsp;<a href=""http://confluence.jetbrains.net/display/ReSharper/Catch+clause+is+redundant"" target=""_blank"">Resharper link</a>.&nbsp;</p>
<p><img src=""http://www.codeproject.com/KB/Blogs/228868/RedundantThrow1.png"" alt=""RedundantThrow1.png"" width=""303"" height=""137"" /></p>
<p><img src=""http://www.codeproject.com/KB/Blogs/228868/RedundantThrow2.png"" alt=""RedundantThrow2.png"" width=""389"" height=""203"" />&nbsp;&nbsp;</p>
<p>Instead, if we wrote ""<code>throw de</code>"", in the above example, Resharper will NOT give you any warning, because now we know they are different,&nbsp;""<code>throw de</code>"" will&nbsp;<strong>truncate the StackTrace information and rethrow the&nbsp;<code>DemmyException&nbsp;</code>instance</strong>.&nbsp;</p>
<h3>Different between parameterless&nbsp;catch and catch (Exception ex)&nbsp;</h3>
<p>Before .NET Framework 2.0, Non-CLS-Compliant exceptions does not inherit from&nbsp;<code>System.Exception</code>, that means catch (Exception ex) cannot catch Non-CLS-Compliant exceptions thrown from for example COM or native C++ components; However, in .NET Framework 2.0, compiler will wrap those&nbsp;Non-CLS-Compliant exceptions into an specific Exception type:&nbsp;<a href=""http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.runtimewrappedexception.aspx"" target=""_blank"">RuntimeWrappedException</a>,&nbsp;it has a property:&nbsp;<code>WrappedException</code><code>&nbsp;</code>to store a non-CLS-Compliant exception, results in statement ""<code>catch (Exception ex)</code>"" can catch all runtime exceptions.</p>
<p>Whereas this is configurable, the wrapping operation is by default on how ever could be turn off be applying&nbsp;<a href=""http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.runtimecompatibilityattribute.aspx"" target=""_blank"">RuntimeCompatibility&nbsp;</a>attribute to your assembly, i.e. AssemblyInfo.cs.</p>
<pre>[assembly: RuntimeCompatibility(WrapNonExceptionThrows = false)]
</pre>
<p>By specifying WrapNonExceptionThrows = false under RuntimeCompatibility attribute, Non-CLS-Compliant exceptions will not be converted to&nbsp;<code>System.Exception</code>, so they will not be caught by catch (Exception ex) but can be caught by parameterless catch.&nbsp;&nbsp;</p>
<h3>Further reading&nbsp;&nbsp;</h3>
<p>Exception Handling on MSDN<br /><a href=""http://msdn.microsoft.com/en-us/library/ms229005.aspx"">http://msdn.microsoft.com/en-us/library/ms229005.aspx</a></p>
<p>Using COM Object<br /><a href=""http://insideaspnet.com/index/using-com-objects/"">http://insideaspnet.com/index/using-com-objects/</a>&nbsp;</p>
<p>Difference between ""throw"" and ""throw ex"" in .NET<br /><a href=""http://geekswithblogs.net/sdorman/archive/2007/08/20/Difference-between-quotthrowquot-and-quotthrow-exquot-in-.NET.aspx"">http://geekswithblogs.net/sdorman/archive/2007/08/20/Difference-between-quotthrowquot-and-quotthrow-exquot-in-.NET.aspx</a></p>
<p>Also posted at my blog - Wayne's Geek Life:&nbsp;<br /><a href=""http://wayneye.com/Blog/Different-Between-Throw-Throw-EX"">http://wayneye.com/Blog/Different-Between-Throw-Throw-EX&nbsp;</a>&nbsp;</p>
<p>Also posted on CodeProject:&nbsp;<a href=""http://www.codeproject.com/Articles/228868/Different-between-throw-and-throw-ex"">http://www.codeproject.com/Articles/228868/Different-between-throw-and-throw-ex</a></p>",3906,2011-07-08 15:22:19.380,1,A
119,Wayne,JavaScript - Foundation of the Language,JavaScript-Foundation-Of-The-Language,22,"<h2>Introduction</h2>
<p>JavaScript&nbsp;""<a href=""http://brendaneich.com/"" target=""_blank"">was born under the shadow of Java</a>"" - Brenden Eich, it&nbsp;is ""<a href=""http://www.crockford.com/javascript/javascript.html"" target=""_blank"">the most misunderstood programming language in the world</a>"" - Douglas Crockford. JavaScript&nbsp;was used so widely nowadays, nearly everywhere&nbsp;as long as you are using a web browser and surfing the internet, most of the websites have JS inside, and even server side -&nbsp;<a href=""nodejs.org"" target=""_blank"">nodejs</a>, according to&nbsp;<a href=""http://langpop.com/"">http://langpop.com/</a>, JavaScript is <strong>the fourth popular programming language in the world</strong>.&nbsp;</p>
<p>In this post I am trying to use <strong>refined language</strong> to cover some foundation of JavaScript (many of which confused quite a number of developers) including&nbsp;<strong>basic data types, comparison mechanism, functions, Execution context, Variable Scope Chain, essence of Closure and anounymous function (lambda)</strong>. Hope it can more or less help people have more fun and less&nbsp;frustration&nbsp;in the future JS coding.&nbsp;</p>
<h2>Basic data types/object types&nbsp;</h2>
<p>In JavaScript, there are 5 basic types: <code>Undefined</code>, <code>Null</code>, <code>Boolean</code>, <code>Number </code>and <code>String</code>,&nbsp;integers&nbsp;&nbsp;Boolean&nbsp;values and <strong>strings </strong>are <strong>accessed by value</strong>, that's different with many&nbsp;modern&nbsp;languages like C# (System.String) or Python (PyStringObject), string are object and passed by reference, JS code snipppet below proves that string is stored in the stack and passed by value.&nbsp;</p>
<pre>var str = ""a"";
                
function strValTest(s) {
    s = ""b"";  // ""s"" is a String value: ""a"".
    alert(s); // Will alert ""b"".
}
strValTest(str);
alert(str); // Will alert ""a"", because when called strValTest, String variable's <strong>value</strong> is passed as argument.
</pre>
<p>String is JavaScript is also <strong>immutable </strong>just like many other languages, i.e. any change applied on an existing string will create a new string in memory and destroy the old one (there is still different with C# in which there is a <a href=""http://msdn.microsoft.com/en-us/library/system.string.intern.aspx"" target=""_blank"">String Intern Pool</a> to store all String values in managed heap). Code snippet below shows the difference between string and String:&nbsp;</p>
<pre>var str1 = ""A new String"";
console.log(""str1"");
console.log(str1 instanceof String); // false
console.log(str1 instanceof Object); // false
console.log(typeof (str1)); // string

var str2 = new String(""A new String"");  // Create a new Object stored on the heap with value ""A new String""
console.log(""str2"");
console.log(str2 instanceof String); // true
console.log(str2 instanceof Object); // true
console.log(typeof (str2)); // object
</pre>
<p>Then you might have question of: how come string instance has methods now that string is value type? The&nbsp;answer&nbsp;is that In JavaScript there are corresponding Object wrapper for the basic types: <code>Number</code>, <code>Boolean</code> and <code>String</code>, they inherit from Object and have their own properties and methods such as <code>Number.toFixed()</code> and <code>String.indexOf()</code>, simple code snippet below:</p>
<pre>string str = ""I am a JSer""; // Create a new string variable on the stack with value ""I am a JSer"".
alert(str.indexOf(""JSer""));
</pre>
<p>Essentially at the back end, JS interpreter will temporarily creates a new String object and invokes its instance method ""indexOf"", after the method call finished, the temporary String object will be claimed, the process can be demonstrated as below:</p>
<pre>string str = ""I am a JSer"";
var tmp = new String(str);
alert(tmp.indexOf(""JSer""));
tmp = null;
</pre>
<p>&nbsp;</p>
<h3>Comparison</h3>
<p>Comparison might be a very confused part in JavaScript, why? See code below:</p>
<pre>console.log(null == undefined); // true Per ECMA-262, null and undefined are superficially equal, essentially ""the value undefined is a derivative of null""&lt;professional&gt;.
console.log(null === undefined); // false
console.log(NaN == NaN);  // false. A specific NaN is not considered equal to another NaN because they may be different values. Also refer: http://en.wikipedia.org/wiki/NaN
console.log('5' == 5);   // true. 
console.log('5' === 5);   // false. typeof('5') is string and typeof(5) is number
console.log(false == 0);  // true
console.log(true == 1);  // true
console.log(null == 0);  // false

console.log(typeof (null)); // object
console.log(typeof (undefined)); // undefined

Foo.prototype = {
	constructor: Foo,
	valueOf: function () {
		return ""Object Foo"";
	},
	toString: function () {
		return ""Foo"";
	}
};

var foo1 = new Foo();
console.log(""foo1 == foo2: "" + (foo1 == ""Object Foo"")); // true will call foo1.valueOf() 

var foo2 = new Foo();
console.log(""foo1 == foo2: "" + (foo1 == foo2)); // false foo1, foo2 point to diffrent instance of Foo

foo2 = foo1;
console.log(""foo1 == foo2: "" + (foo1 == foo2)); // true no doudt
&lt;/professional&gt;</pre>
<p>Are you sweating?&nbsp;I did... So I read book and copied Paragraph below&nbsp;from&nbsp;&lt;<a href=""http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764579088.html"" target=""_blank"">Professional JavaScript for Web Developers</a>&gt;.&nbsp;</p>
<p>&nbsp;</p>
<blockquote style=""color: #666666; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: #f6f8ff; border-top-left-radius: 3px 3px; border-top-right-radius: 3px 3px; border-bottom-right-radius: 3px 3px; border-bottom-left-radius: 3px 3px; width: 80%; border-width: 1px; border-color: #9999ff; border-style: solid;"">
<ul>
<li>If an operand is a Boolean value, convert it into a numeric value before checking for equality.&nbsp;</li>
<li>A value of false converts to 0, whereas a value of true converts to 1.&nbsp;</li>
<li>If one operand is a string and the other is a number, attempt to convert the string into a number&nbsp;before checking for equality.&nbsp;</li>
<li>If either operand is an object, the valueOf() method is called to retrieve a primitive value to&nbsp;compare according to the previous rules. If valueOf() is not available, then toString() is&nbsp;called.&nbsp;</li>
<li>The operators also follow these rules when making comparisons:</li>
<li>Values of null and undefined are equal.&nbsp;</li>
<li>Values of null and undefined cannot be converted into any other values for equality checking.&nbsp;</li>
<li>If either operand is NaN, the equal operator returns false and the not - equal operator returns&nbsp;true. Important note: Even if both operands are NaN , the equal operator returns false because,&nbsp;by rule, NaN is not equal to NaN.&nbsp;</li>
<li>If both operands are objects, then they are compared to see if they are the same object. If both&nbsp;operands point to the same object, then the equal operator returns true . Otherwise, the two are&nbsp;not equal. &nbsp;</li>
</ul>
</blockquote>
<h3>Function</h3>
<p>In JavaScript, function is not only traditional function but also an object, define a function is actually define a pointer to that function, and function is not only traditional function but also an &nbsp;Object. I wrote code snippet below for better understanding:&nbsp;</p>
<pre>function dummyFunc() { // Define a function and a pointer to it, the pointer's name is ""dummyFunc""
	this.DummyProperty = ""Dummy Property"";
	console.log(""Dummy func"");
}

var tempFunc = dummyFunc; // Define a variable tempFunc, let it equal to dummyFunc which is a function pointer pointing to function defined above
dummyFunc = null; // null the dummyFunc
tempFunc(); // tempFunc still points to the function defined above so still can be executed.

var dummy = new tempFunc(); // Will invoke tempFunc's constructor to form a new Object
console.log(dummy.DummyProperty);
</pre>
<p>Another very important point of functions is the parameters, in JavaScript, function's arguments are ALL passed by <strong>value</strong>, <strong>NOT reference</strong> even if the argument is an Object, to prove this please see code snippet below:</p>
<pre>var person = new Object();
function setName(obj) {
	obj.Name = ""Wayne""; // obj is actually newly created and given the pointer's value, so obj and the reference type outside this function will both point to the Object on the heap, thus operation on obj will affect the Object passed in the function.
	
	obj = new Object(); // By executing this line, temporary variable obj will point to a new Object, has no relationship with the passed-in Object any more.
	obj.Name = ""Wendy"";
}

setName(person); // Executing this line will pass person's pointer stored in stack to the function setName, 
alert(person.Name); // Will alert ""Wayne""
</pre>
<h3>Execution Context and Variable Scope Chain&nbsp;</h3>
$More$
<p>Execution Context is a environment in which all JavaScript runs, if not specified, the context is usually global (window), or can be specified by invoking call/apply. In a lower level,&nbsp;when JavaScript interpreter starts executing a function, this function's&nbsp;execution context will be pushed into stack, then the function itself will be pushed into stack. &nbsp;&nbsp;</p>
<p>Code snippet picked from: <a href=""http://www.nczonline.net/blog/2010/02/16/my-javascript-quiz/"" target=""_blank"">http://www.nczonline.net/blog/2010/02/16/my-javascript-quiz/</a>&nbsp;</p>
<pre>var x = 5,
o = {
	x: 10,
	doIt: function doIt() {
		var x = 20;
		setTimeout(function () {
			alert(this.x);
		}, 10);
	}
};
o.doIt(); // Will alert 5 because the execution context is window, window.x = 5;

o.doIt = function () {
	var x = 20;
	// Change the function's execution context by call()/apply 
	setTimeout((function () { alert(this.x); }).apply(o), 20);
}
o.doIt(); // Will alert 10 because execution context is object o, o.x = 10;
</pre>
<p>A scope chain is a list of objects that are searched for identifiers appear in the code of the context.&nbsp;When a snippet of code is executing under its execution context, within the context <strong>a Scope Chain is formed with local variables at beginning and global variables at ending</strong>, JavaScript resolves identifiers within a particular context by climbing up the scope chain, moving locally to globally, if a variable cannot be find after traversing the whole Scope Chains, an error will occur.&nbsp;Inside a function, the very first variable in its Scope Chain is <code>arguments</code>.&nbsp;</p>
<p><img src=""http://www.codeproject.com/KB/scripting/JavaScript-Foundation/execution-context.png"" alt=""execution-context.png"" width=""340"" height=""249"" />&nbsp;</p>
<pre>var name = ""solarSystem""; // Assuming the global execution context is The Universe here:)
        
function earth() {
	var name = 'earth';
	(function () {
		var name = 'country'; // name belongs to local Scope Chain now
		alert(name); // country
	})();
	alert(name); // earth
}
earth(); // In the earth execution context, ""The Universe""'s Scope Chain contains solarSystem can be accessed.

alert(name); // solarSystem
alert(blah); // Throw error, because cannot find variable definition for ""blah"" after traversing the entire Scope Chain.
</pre>
<h3>Closure</h3>
<p>Douglas Crockford: ""JavaScript has closures. What this means is that an inner function always has access to the vars and parameters of its outer function, even after the outer function has returned. This is an extremely powerful property of the language.""</p>
<p>In JavaScript a closure is formed when you nest functions, inner functions can refer to the variables present in their outer enclosing functions even after their parent functions have already executed.&nbsp;</p>
<p>Let's first take a look at a basic Closure:&nbsp;</p>
<pre>function foo(x) {
	var y = 2;

	return function (z) {
		console.log(""x + y + z: "" + (x + y + z)); // Result will be 1 + 2 + 3 = 6 
	}
}
var bar = foo(1); // Bar is now a closure
bar(3);
</pre>
<p>To deeply understand closure, we must first understand function, Execution Context and Scope Chain I described above, so describe the code snippet above could be: foo is defined as a function pointer, the function takes one parameter, so this parameter belongs to its Scope Chain when it is called in future, inside foo, a local variable y is defined with integer value 2, so it is also in the Scope Chain,&nbsp;and finally it returns an anonymous function which takes one parameter z, once foo is called, it returns a pointer which points to this anonymous function, the entire process can be described in details below.&nbsp;</p>
<p>&nbsp;</p>
<ol>
<li>Prepare Execution Context for foo.&nbsp;</li>
<li>Scope Chain for foo will be formed, members on the chain: <code>arguments</code>, y, anonymous function.&nbsp;</li>
<li>Anonymous function is defined but not executed, when it is executed in the future its own Scope Chain will also be formed at the lower level of foo's Scope Chain, members on the Chain:&nbsp;<code>arguments</code>, z, and the most important, foo's Scope Chain will be retained for this anonymous function.&nbsp;</li>
<li>foo returns the anonymous function, a closure will be created, <strong>Scope Chains in the Closure will be retained</strong> unless program explicitly null it. Please note when foo returns, the anonymous function inside it is not executed!&nbsp;</li>
<li>When executing bar passing parameter 3, JavaScript interpreter will firstly search&nbsp;bar's Scope Chain and&nbsp;try to find x, y, z in , z is 3 but cannot find x and y, then it&nbsp;<strong>clime&nbsp;up one level</strong>, and found retained Scope, x's value is 1, and y's value is 2 (if not found it will clime up again, in this case, it will be global),&nbsp;ah-ha, we found all of them, result is 6.&nbsp;&nbsp;</li>
</ol>
<p>&nbsp;</p>
<p>Clear? No confuse? I hope you are:) &nbsp;Simply saying, <strong>a Closure is a function can access parent Scope Chain AND the Scope Chain is retained</strong>!&nbsp;</p>
<p>Now modify the case above a little bit to make sure we understand ""<strong>retained Scope Chain</strong>"":&nbsp;&nbsp;</p>
<pre>function foo(x) {
	var y = 2;

	var func = function (z) {
		console.log(x + y + z);
	}

	x++;
	y++;

	return func;
}
var bar1 = foo(1);
bar1(3); // Result will be 2 + 3 + 3 = 8

var bar2 = foo(1); // Create a new closure, local variables are not copied when a new closure is created.
bar2(3); // Result will still be 8
bar2(3); // Result will still be 8
</pre>
<p>&nbsp;</p>
<p>No matter we create a new Closure or we executes the ""Closure instance"" bar2 many times, the Scope retained for bar are independent, result will always be 8.&nbsp;&nbsp;</p>
<p>Delve deeper, essentially in ECMAScript, functions have an ""<strong>Internal Property</strong>"" - <strong>[[Scope]]</strong>, ECMA-262&nbsp;defines it as:<em> A lexical environment that defines the environment in which a Function object is executed</em>.&nbsp;As an instance, in the example above, when foo was executed and return value to bar, <strong>foo's Scope Chain was save into bar's [[Scope]] property</strong>.</p>
<p>If there is more then one inner functions inside one function body, then the retained Scope Chain will <strong>be shared between each other</strong>, please refer example below:&nbsp;</p>
<pre>function shareScope() {
	var n = 0;

	return {
		""innerFuncA"": function () { console.log(++n); },
		""innerFuncB"": function () { console.log(++n); }
	};
}

var shareScopeInstance = shareScope();
shareScopeInstance.innerFuncA(); // 1
shareScopeInstance.innerFuncB(); // 2
</pre>
<p>Let's finally take a look at one example which might confused a lot people, and then finish Closure part.&nbsp;</p>
<pre>function buildList(list) {
	var result = [];
	for (var i = 0; i &lt; list.length; i++) {
		result.push(function () {
			console.log(++i);
		});
	}
	return result;
}

var fnlist = buildList([1, 2, 3]);
for (var idx in fnlist)
	fnlist[idx]();

</pre>
<p>In the example above, the answer is NOT ""1,2,3"", after <code>buildList</code> is executed, <code>result </code>is an array contains n (n = 3) closures, all of them share the same Scope Chain created by <code>buildList</code>, when each of them is executed, JS interpreter fetches the Scope Chain and looking for i, what is i'value in the Scope Chain? After the for loop i became <strong>3</strong> since JS has no blocked scope i still exists outside of for loop, and in the console you will see ""4, 5, 6"" printed out.&nbsp;</p>
<h3>Anonymous Function (Lambda)</h3>
<p>As long as we understand Scope Chain and Closure&nbsp;completely, there will be no confusion about anonymous function, it is essentially <strong>a declared function without a function pointer points to it</strong>,&nbsp;it is always used to setup a ""blocked-scope"", for example, many JavaScript library was executed inside a big anonymous function:</p>
<pre>(function (window, undefined) {
	var VirtualCompany = function () {
		
	};
})(window);
</pre>
<p>The anonymous function is executed as soon as it is downloaded completely, passing in the window object and only expose one global object: <code>VirtualCompany</code>,&nbsp;so that the library encapsulates its internal&nbsp;implementation and won't be conflict with other JS Libs.</p>
<p>By employing anonymous function, we can modify the Closure example I demonstrated above, to let it achieve our&nbsp;original&nbsp;goal:&nbsp;</p>
<pre>function buildList(list) {
	var result = [];
	for (var i = 0; i &lt; list.length; i++) {
		result.push((function (i) {
			return function () { console.log(++i); };
		})(i));
	}
	return result;
}

var fnlist = buildList([1, 2, 3]);
for (var idx in fnlist)
	fnlist[idx]();
</pre>
<p>This time the result will be ""1,2,3"", because every time's invocation on ""result.push"", what was pushed into the array? The answer is: <strong>A closure&nbsp;with the anonymous function's&nbsp;Scope Chain stored</strong>, what's inside the anonymous function's Scope Chain? i in the for loop. During each iteration inside the for&nbsp;loop, an anonymous function is executed by passing i into it, so i existing in its Scope Chain, and since the&nbsp;anonymous function&nbsp;return another&nbsp;anonymous function, a Closure was formed and the Scope was retained.</p>
<h3>Summary</h3>
<p>JavaScript is a great language and it has a <strong>very bright future</strong> in my humbly opinion, considering its important role in the coming Web Standard - HTML5, event I/O based, high performance web server - nodejs, and JavaScript will also play an important role in the coming Cloud time, it is time for the developers who didn't seriously learnt it before to re-learn it.&nbsp;In fact I have brokenly wrote JavaScript code for 6 years, however, to be honest, I am ashamed that I never seriously learnt it in the past,&nbsp;some of its basic theory, useful skills as well as best practices&nbsp;I never knew, so I wrote this post to summarize things I re-learnt, hope it will help&nbsp;programmers like me. &nbsp;</p>
<p>&nbsp;</p>
<p><strong> Happy JavaScript coding! Be a happy JSer:)&nbsp;</strong></p>
<p>&nbsp;</p>
<h3>Further Reading (Strongly recommended)&nbsp;</h3>
<p><a href=""http://www.amazon.com/gp/product/047022780X?ie=UTF8&amp;tag=nczonline-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=047022780X"" target=""_blank"">Professional JavaScript for Web Developers (Wrox Programmer to Programmer)</a>&nbsp;</p>
<p><a href=""http://dmitrysoshnikov.com/ecmascript/javascript-the-core/"" target=""_blank"">JavaScript. The core</a>&nbsp;</p>
<p><a href=""http://tore.darell.no/pages/scope_in_javascript"" target=""_blank"">Scope In JavaScript</a>&nbsp;</p>
<p><a href=""http://www.ecma-international.org/publications/standards/Ecma-262.htm"" target=""_blank"">ECMA-262</a>&nbsp;</p>
<p><a href=""http://brendaneich.com/"" target=""_blank"">New JavaScript Engine Module Owner</a>&nbsp;</p>
<p><a href=""http://www.crockford.com/"">Douglas Crockford's Wrrrld Wide Web</a><a href=""http://www.crockford.com/"">&nbsp;</a></p>
<p><span class=""Apple-style-span"" style=""font-family: monospace; line-height: normal; white-space: pre-wrap; font-size: medium;""><a href=""http://ejohn.org"">John Resig - JavaScript Programmer</a></span>&nbsp;</p>

<p>&nbsp;</p>
<p>
Also posted on CodeProject:<br />
<a href=""http://www.codeproject.com/KB/scripting/JavaScript-Foundation.aspx"" target=""_blank"">http://www.codeproject.com/KB/scripting/JavaScript-Foundation.aspx</a>
</p>",3291,2011-07-24 21:13:10.907,1,A
120,Wayne,这是个TMD奇迹的国度,This-Is-A-Miraculous-Country,5,"<p>原文地址：<a href=""http://society.people.com.cn/GB/223276/15251568.html"" target=""_blank"">http://society.people.com.cn/GB/223276/15251568.html</a>。（这链接不会HX的）</p>
<p><img title=""神奇"" src=""https://byfiles.storage.live.com/y1pb6KQxM82dso3zr0f3OjUkP5nXcCx9AQW7JO0yQS7S-oMXXL2TDWzuuvLoiZr3MiRTfTNStHeT3JcvlMH8yGEmA/Shenqi.png?psid=1"" alt=""神奇"" width=""621"" height=""787"" /></p>
<p><img src=""http://ww1.sinaimg.cn/large/7098e6d5jw1djixq3w308j.jpg"" alt=""香港报纸"" width=""640"" height=""480"" /></p>
<p>白岩松:一个人心脏功能是好的，肝脾胃什么都是好的，但他是个弱智，你能说他是健康的人么？！</p>
<p>&nbsp;</p>
<p>做了6年了，方知自己是<a href=""http://weibo.com/k/%2523%25E6%2597%25A0%25E8%25AF%2581%25E7%25A8%258B%25E5%25BA%258F%25E5%2591%2598%2523?Refer=Index_header"" target=""_blank"">#无证程序员#</a>。。</p>
<p><img src=""http://ww1.sinaimg.cn/large/3ec41096gw1djlisjlc6lj.jpg"" alt=""无证程序员"" width=""600"" /></p>
<p>【装】无证程序员、临时工、温州动车事故及其他&nbsp;<br /><br />刚刚听说，温州动车事故的调查有了新进展：铁路调度程序出现bug（漏洞）是本次事故的主要原因，警方已经拘留了两名无证程序员。&nbsp;<br /><br />上海的大火，我们懂得了无证电焊工，中华的脊梁，我们懂得了盖章临时工。温州动车事故的&ldquo;无证程序员 ""的横空出世，着实让人感到科学发展观的巨大威力。这是九十年来活学活用马克思列宁主义并将之与中国实际相结合的典范啊。本来我正在纳闷，铁道部的智商虽然不济，但怎么也不会想不起&ldquo;无证临时工 ""这样的惯例，没想到人家还能翻出花样来。想想也是，总不能说司机请的是临时工吧，把程序员这种陌生的名目请出来，只能让你干瞪眼。但是这么个涉及千万人命、亿万家庭的交通工程，核心的调度程序却是请无证程序员搞出来的，这尼玛的太后现代了，到底是想说明无能者无证，还是用人者无能，着实混乱&nbsp;<br /><br />几十条鲜活的生命毕竟是逝去了。我们也许不知道真实的数目，但我们知道，他们是某人的子女，某人的丈夫，某人的妻子，某人的父母&hellip;&hellip;活生生的在自诩自主发展世界第一的冰凉轨道上阴阳两隔。最后一个从被宣布&ldquo;没有生命迹象 ""的车厢中被拯救的2岁女婴，注定成了又一个孤儿。我万分庆幸她没有被埋在&ldquo;方便救援 ""的匪夷所思的大坑中，她还有漫长的人生，来追讨这段愤怒的旅程。&nbsp;<br /><br />像我这样的外行，每每遇到这样的事故，看起来总是伤心又伤神。这么个投资数千亿的系统工程，遇雷而崩，简直匪夷所思，老百姓建个房子还知道装个避雷针，你设计的运行环境难道是晴空万里艳阳高照吗？即便被雷劈，从停车到追尾，长达十余分钟，调度的在哪里，程序出现问题，难道通讯也出现问题了吗，就是现用手机也来得及通知啊。即便来不及通知，动车之间难道是盲开吗？前车突停，后车居然茫然无知，司机难道不知道通知后来者吗&hellip;&hellip;日本新干线在地震的情况下尚无事故发生，而天朝挨个雷劈居然就捅出了娄子。在我看来，要达到追尾这种结果，在现代的技术条件下，简直跟临时工当上国家主席是一样的概率，但这样的概率居然他妈的就发生了。&nbsp;<br /><br />虽然我们知道天朝是个什么都有可能发生的神奇国度，但是神奇到这样的地步，难免让人咬牙切齿，黯然神伤。新闻发布会上哪几个从后门悄悄溜走的猥琐身影，只能让人更加无语，人而无耻，百事可为。挨雷劈的，不该是动车。&nbsp;<br /><br />请允许我指着太阳说：日！！！！！！&nbsp;</p>",2595,2011-07-26 16:28:01.123,1,A
121,Wayne,视频: 陈丹青：美国是如何对待移民子女受教育的,Education-In-China,5,"<blockquote>
<p>【陈丹青对北京公民待遇歧视爆粗口】著名画家陈丹青日前在谈话中动容：在美国移民子女上学，不用出示任何证件，只要你拿出国外寄来的信封，就给你的孩子办理入学，而中国的孩子在中国上学这么不公平！&ldquo;<strong>听说北京的官员说：我们是为北京人民服务的。这不王八蛋么！我操他妈的！&rdquo;</strong></p>
</blockquote>
<p><object width=""480"" height=""400"" data=""http://player.youku.com/player.php/sid/XMjc5NDY2NDI0/v.swf"" type=""application/x-shockwave-flash""><param name=""src"" value=""http://player.youku.com/player.php/sid/XMjc5NDY2NDI0/v.swf"" /><param name=""allowfullscreen"" value=""true"" /><param name=""quality"" value=""high"" /><param name=""allowscriptaccess"" value=""always"" /></object></p>
<p>&nbsp;</p>
<p><strong><span style=""color: #ff0000;"">我CNM，狗官！!</span></strong></p>
<p>&nbsp;</p>
<p>还有什么好说的呢？？？少年强则国强！一个国家对待孩子和教育的态度决定了他对自己未来的态度！我大概知道我们的狗官是怎么对待我们的孩子的：</p>
<p><a href=""http://www.infzm.com/content/41664"" target=""_blank"">教育部：今年促进实现教育经费占GDP比例4%目标</a></p>
<blockquote>
<p>早在1993年，中共中央和国务院颁布的《中国教育改革和发展纲要》就曾提出，&ldquo;逐步提高国家财政性教育经费支出占国民生产总值的比例，在本世纪末达到4%。&rdquo;时隔十多年，这一目标仍没有实现。2008年财政性教育经费占GDP的比重达到历史最高，但也只占GDP的3.48%。</p>
</blockquote>
<p><a href=""http://www.nationmaster.com/graph/edu_edu_spe-education-spending-of-gdp"">Education spending (% of GDP)</a>,&nbsp;这个数据是美国网站NationMaster给出的教育投入占GDP比重，古巴第一，中国没上榜，作者表示在调查中，而根据路透社2008年的统计，中国的这个数据应是2.5%。就算达到了4%，也仅排名全球84位，跟阿根廷持平，我们的GDP全球第二啊！！！！</p>
<p>我大概也清楚，不管是2.5%也好，4%也好，真正用于教育用途的。。。要打几折？？？</p>
<p>我要是32岁以前还留在这个鸟地方为你们日日做邪恶之事而做贡献（我哪天没上税？你哪天没Rape我？？？），我TM就一头撞死！！！</p>",2604,2011-08-06 21:01:17.657,1,A
122,Wayne,写代码写累了，DIY pizza玩,DIY-Pizza-When-Tired-Of-Coding,1,"<p>周中写Code写累了，偶尔看到微博上有人发自制Pizza的教程，觉得很有兴趣，于是周末自己搞了一下，成果如下：</p>
<p>第一锅 - 什锦pizza （金枪鱼+火腿+香菇+青椒 = Wayne荤食天地）：</p>
<p><img title=""First pizza"" src=""https://byfiles.storage.live.com/y1pJlKKbl8HJT4IP3ghXx_XmrAR7_nkqCmcsUjdhueG6FZvOdN5f8WAp1b6_vc7YmEZ6cOCp9gJlaM/C360_2011-08-27%2019-21-55.jpg?psid=1"" alt=""First pizza"" width=""640"" height=""480"" /></p>
<p>第二锅 - 依然Wayne荤食天地，but double cheese：<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" /></p>
<p><img title=""Second pizza"" src=""https://byfiles.storage.live.com/y1pbZGDgIt8TEHgh2IT8ff5delPKdJM0p6jo0oXhDfivaqK_XIJY_RC-b7cKdTx242DZ2hvY4PvwaI/C360_2011-08-27%2020-37-30.jpg?psid=1"" alt=""Second pizza"" width=""640"" height=""480"" /></p>
<p>从2点钟去金桥家乐福买食材，到晚上8点半，我忙活了6个伴小时，就弄出来这2锅，我负责80%的工作，感谢<a title=""Lp's Microblog"" href=""http://weibo.com/n/%E5%8F%AF%E7%88%B1%E7%9A%84%E5%B0%8F%E5%85%89%E5%A4%B4%E4%BB%96%E5%A6%88"" target=""_blank"">@可爱的小光头他妈</a>和<a title=""Jessie's Microblog"" href=""http://weibo.com/littlejiangxue"" target=""_blank"">@痒痒兔爪爪</a>的帮忙</p>。
<p><img title=""Jessie holds Pizza"" src=""https://byfiles.storage.live.com/y1pstcuSQFiLe6crrcKci5foMA2SBmJfS4D7Pe6__8BX_PmSsmurt7XCP_FJMfREEJTPF1vMOOzsoU/C360_2011-08-27%2018-52-52.jpg?psid=1"" alt=""Jessie holds Pizza"" width=""640"" height=""480"" /></p>
<p>Have a slice day^_^</p>
<p><img title=""Have a Slice day"" src=""https://byfiles.storage.live.com/y1pH7Ishl0DIuhMfquEHjrjpni89Pq8BNYXQLdfFRqhbZtgqBdVBy2D2hjYIv74eYZctNS297p7WBk/C360_2011-08-27%2020-54-58.jpg?psid=1"" alt=""Have a Slice day"" width=""640"" height=""480"" /></p>
<h3>我整理的做法：</h3>
<p><strong>面饼</strong><br />1.低筋面粉300g<br />2.酵母粉1小匙 <br />3.盐少许（约2-5g） <br />4.砂糖15g <br />5.奶油20g <br />6.温开水170 ㏄（冬天温水，夏天凉水） <br />7.半个蛋（蛋打散与温水混合，约180 ㏄～200 ㏄）<br /><br />1.和面，揉至扩展阶段，发酵至2倍大<br />2.发酵好的面团，以塑胶袋包覆，松弛15min<br />3.杆平<br />4.用叉子均匀地在底部刺小洞，放置温度稍高的地方，发酵20min左右<br /><br /><strong>Pizza酱</strong><br />1. 准备好西红柿丁，洋葱丁，蒜蓉<br />2. 热锅，放入黄油块（3-4 块）， 橄榄油亦可<br />3. 黄油融化后放入洋葱丁和蒜蓉， 炒一分钟<br />4. 洋葱爆香以后，放入西红柿丁，大火翻炒<br />5. 当看到西红柿炒出汁水以后，放进糖、黑胡椒粉、牛至叶(Oregano)，罗勒(Basil），翻炒均匀，然后盖上锅盖，转小火煮20分钟左右。煮的过程中不时打开锅盖翻炒一下，以免糊底。<br />6. 煮好后，如果此时水份还比较多，转大火收汁成酱，加入盐，翻炒均匀后即可出锅。<br /><br /><strong>Pizza Cheese</strong><br />马苏里拉奶酪片<br /><br /><strong>食材</strong> （个人喜好，我选择了火腿+青椒+菠萝+碎肉+香菇）<br /><br />pizza出锅后撒些Cheese粉味道更好。<br /><br /><br /><strong>烘焙</strong>：210&deg;,烤箱中层，大约20min<br /><br />Tips:<br />1、调酵母的水一定要是温水，用手摸上去稍有点热即可，否则酵母就给汤死了；<br />2、PIZZA酱一定要炒浓稠，而且不能刷太多，否则烤的时候会淌水；<br />3、要想烤好的PIZZA能拉出丝来，就一定要选用马苏里拉奶酪；<br />4、想吃表皮脆脆的饼，可以在第二次进烤箱前在饼皮上刷上一层油。<br /><br />名词解释：<br />罗勒（Basil），是大多数人接触到的第一种意大利香草，吃意面、比萨都会看到。罗勒号称&ldquo;香草之王&rdquo;，和意大利的另一种代表性蔬菜&mdash;&mdash;番茄，味道非常相配，所以铺天盖地使用开来。由新鲜罗勒、乳酪、松子、大蒜和橄榄油混合而成的罗勒酱，就是有名的意大利pesto酱。罗勒味道清新，有点像丁香，意大利菜中使用的是甜罗勒，芳香味最佳，台湾菜中的九层塔也是罗勒的一种，味道比较冲一点。<br />牛至（学名：Origanum vulgare）又名滇香薷，是唇形科牛至属中的一种植物。<br />做烹调用时，常与番茄、乳酪搭配；牛至与罗勒是给予意大利菜独特香味的两大用料。</p>
<p>&nbsp;</p>",2810,2011-08-28 15:26:30.877,1,A
123,Wayne,nodejs+express+jade+socket.io on Ubuntu 11.04,nodejs-express-jade-socketio-On-Ubuntu,31,"<h3>Introduction</h3>
<p><a title=""socket.io"" href=""socket.io"" target=""_blank"">socket.io</a>&nbsp;is a brilliant project which perfectly supports <a href=""http://www.w3.org/TR/websockets/"" target=""_blank"">HTML5 WebSocket</a>, in additional, it can fall back to flash or long polling when the client web browser does not support WebSocket, I explored it today on Ubuntu, I summarized the process in this post.</p>
<p>&nbsp;</p>
<h3>Install nodejs</h3>
<p>I used nodejs v0.4.11, the latest stable version, by mannually compile/make/install.</p>
<p><code>sudo curl http://nodejs.org/dist/node-v0.4.11.tar.gz -o ~/Desktop/WayneDevLab/node.tar </code></p>
<p><code>sudo tar -xf node.tar cd node-v0.4.11</code></p>
<p><code>./configure</code></p>
<p><code>make </code></p>
<p><code>sudo make install</code></p> 

<p>In the ""./configure"" step above if it prompted ""libssl-dev"" not found, please install libssl-dev (<code>sudo apt-get install libssl-dev</code>) which is required by node for hosting HTTPs server.</p>
<h3>Install npm</h3>
<p><code>curl http://npmjs.org/install.sh | sh</code></p>
<h3>Install express</h3>
<p><a title=""expressjs"" href=""http://expressjs.com/"">express</a>&nbsp;is an insanely fast and high performance server-side JavaScript web development framework built on node, hosting a real web server based on node will be much harder without it:)</p>
<pre>$ npm install -g express<br />$ express /tmp/foo &amp;&amp; cd /tmp/foo<br />$ npm install -d<span style=""white-space: normal;"">&nbsp;</span></pre>
<h3>Install socket.io</h3>
<p><code>npm install socket.io</code></p>
<h3>Setting up the Web server!!</h3>
<p>I've modified my app.js as below:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">express</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">require</span>(<span style=""color: #cc9393;"">'express'</span>);<br /> <br /> <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">app</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">module</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">exports</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">express</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">createServer</span><span style=""color: #dcdccc;"">(),</span> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">io</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">require</span>(<span style=""color: #cc9393;"">'socket.io'</span><span style=""color: #dcdccc;"">).</span><span style=""color: #dcdccc;"">listen</span>(<span style=""color: #dcdccc;"">app</span>);<br /> <br /> <span style=""color: #7f9f7f;"">// Configuration</span><br /> <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">configure</span>(<span style=""color: #efefaf; font-weight: bold;"">function</span><span style=""color: #dcdccc;"">(){</span><br /> &nbsp; <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">set</span>(<span style=""color: #cc9393;"">'views'</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">__dirname</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #cc9393;"">'/views'</span>);<br /> &nbsp; <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">set</span>(<span style=""color: #cc9393;"">'view engine'</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #cc9393;"">'jade'</span>);<br /> &nbsp; <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">set</span>(<span style=""color: #cc9393;"">'view options'</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">{</span><span style=""color: #dcdccc;"">layout</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #e3ceab;"">false</span><span style=""color: #dcdccc;"">});</span><br /> &nbsp; <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">use</span>(<span style=""color: #dcdccc;"">express</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">bodyParser</span>());<br /> &nbsp; <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">use</span>(<span style=""color: #dcdccc;"">express</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">methodOverride</span>());<br /> &nbsp; <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">use</span>(<span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">router</span>);<br /> &nbsp; <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">use</span>(<span style=""color: #dcdccc;"">express</span><span style=""color: #dcdccc;"">.</span><span style=""color: #e3ceab;"">static</span>(<span style=""color: #dcdccc;"">__dirname</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #cc9393;"">'/public'</span>));<br /> <span style=""color: #dcdccc;"">});</span><br /> <br /> <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">configure</span>(<span style=""color: #cc9393;"">'development'</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #efefaf; font-weight: bold;"">function</span><span style=""color: #dcdccc;"">(){</span><br /> &nbsp; <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">use</span>(<span style=""color: #dcdccc;"">express</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">errorHandler</span><span style=""color: #dcdccc;"">({</span> <span style=""color: #dcdccc;"">dumpExceptions</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #e3ceab;"">true</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">showStack</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #e3ceab;"">true</span> <span style=""color: #dcdccc;"">}));</span> <br /> <span style=""color: #dcdccc;"">});</span><br /> <br /> <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">configure</span>(<span style=""color: #cc9393;"">'production'</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #efefaf; font-weight: bold;"">function</span><span style=""color: #dcdccc;"">(){</span><br /> &nbsp; <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">use</span>(<span style=""color: #dcdccc;"">express</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">errorHandler</span>()); <br /> <span style=""color: #dcdccc;"">});</span><br /> <br /> <span style=""color: #7f9f7f;"">// Routes</span><br /> <br /> <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">get</span>(<span style=""color: #cc9393;"">'/'</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #efefaf; font-weight: bold;"">function</span>(<span style=""color: #dcdccc;"">req</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">res</span><span style=""color: #dcdccc;"">){</span><br /> &nbsp; <span style=""color: #dcdccc;"">res</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">render</span>(<span style=""color: #cc9393;"">'index'</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">title</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #cc9393;"">'Wayne Express Hello World'</span><span style=""color: #dcdccc;"">,</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">youAreUsingJade</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #e3ceab;"">true</span><span style=""color: #dcdccc;"">,</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">domain</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #cc9393;"">'192.168.1.4'</span><br /> &nbsp; <span style=""color: #dcdccc;"">});</span><br /> <span style=""color: #dcdccc;"">});</span><br /> <br /> <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">listen</span>(<span style=""color: #8cd0d3;"">3000</span>);<br /> <span style=""color: #dcdccc;"">console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">log</span>(<span style=""color: #cc9393;"">""Express server listening on port %d in %s mode""</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">address</span><span style=""color: #dcdccc;"">().</span><span style=""color: #dcdccc;"">port</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">app</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">settings</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">env</span>);<br /> <br /> <span style=""color: #dcdccc;"">io</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">sockets</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">on</span>(<span style=""color: #cc9393;"">'connection'</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">socket</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp; <span style=""color: #dcdccc;"">socket</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">emit</span>(<span style=""color: #cc9393;"">'news'</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">{</span> <span style=""color: #dcdccc;"">hello</span><span style=""color: #dcdccc;"">:</span> <span style=""color: #cc9393;"">'world'</span> <span style=""color: #dcdccc;"">});</span><br /> &nbsp; <span style=""color: #dcdccc;"">socket</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">on</span>(<span style=""color: #cc9393;"">'my other event'</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">data</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">log</span>(<span style=""color: #dcdccc;"">data</span>);<br /> &nbsp; <span style=""color: #dcdccc;"">});</span><br /> <span style=""color: #dcdccc;"">});</span></pre>
<p>And below is my index.jade:</p>
<pre>!!! 5
html(lang=""en"")
  head
    title= title
    script(src='http://'+ domain + ':3000/socket.io/socket.io.js')
    script(type='text/javascript')
      var socket;
      socket =  io.connect('http://192.168.1.4:3000');

      socket.on('news', function (data) {
       console.log(data);
       socket.emit('my other event', { my: 'data' });
             });
  body
    h1 Wayne WebSocket Demo using Socket.io
    #container
      - if (youAreUsingJade)
        p You are amazing
      - else
        p Get on it!

    p Powered By a(href='http://socket.io') Socket.io

    footer Copyright&copy;2011 http://wayneye.com
</pre>
<h3>Testing everything up</h3>
<p>Start the server by:</p>
<p>
<code>$ node app.js</code></p>
<p>It works:)</p>
<p>I tested the combination above by using google Chromoum Dev 12 and Dev 15, they seperately adhere WebSocket protocol <a title=""76"" href=""http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol-76"">draft-hixie-thewebsocketprotocol-76</a>&nbsp;and <a title=""hybi10"" href=""http://tools.ietf.org/html/draft-ietf-hybi-thewebsocketprotocol-10"" target=""_blank"">draft-ietf-hybi-thewebsocketprotocol-10</a>, the connection details for hybi10 is showing below:</p>
<p><img title=""socket.io"" src=""https://byfiles.storage.live.com/y1pTUHjX2huuUrB64zVgNJ6w9cGtfZ_xXEmZm9LG2Xx6u9s-vZN2EHA2i8FdhYrnF3rODiuaq3hN-U/Wayne%20socket.io.png?psid=1"" alt=""socket.io"" width=""640"" /></p>
<p>socket.io will print out useful information on console when running:</p>
<p><img title=""socket.io console"" src=""https://byfiles.storage.live.com/y1p81UPa6dAmB6gfas8xMw8rMHjBxOxb6B-e3P3t5rX5Iox-_VBQ7sbGE79MC_kG5pEipy_z1BQ-h4/console.png?psid=1"" alt=""socket.io console"" width=""640"" /></p>
<p>&nbsp;</p>
<p>Wish that helps:)</p>",16390,2011-08-29 23:06:16.780,1,A
124,Wayne,HTML5 WebMessaging In Essence,HTML5-WebMessaging-In-Essence,22,"<p><a href=""http://www.codeproject.com/KB/HTML/HTML5-WebMessaging/HTML5_Cross-Domain_WebMessaging_Demo.zip"">Download HTML5_Cross-Domain_WebMessaging_Demo.zip - 2.97 KB</a></p>
<p>As a web developer, sometimes we are easy to encounter one problem:<strong> Cross-Domain communication</strong>, conforming <a title=""Same-Origin-Policy"" href=""http://en.wikipedia.org/wiki/Same_origin_policy"" target=""_blank"">Same-Origin-Policy</a>, JavaScript code cannot access code stay in different <strong>domain</strong>(or sub-domain) or&nbsp;<strong>protocol </strong>(HTTP/HTTPs) or&nbsp;<strong>port</strong>, so there was no direct (or I can say: simple) way to achieve Cross-Domain Communication. However, those kinds of requirements does happen: page A and page B are in different domain, &nbsp;B is ""embedded"" in A, i.e., there is an ""iframe"" in page A whose ""src"" is page B's URL, now page A wants to control page B and vise-versa.&nbsp;</p>
<p>By limiting the solution to be done by 100% client JavaScript, beforehand HTML5, there are a number of tricky ""hacks"", such as:</p>
<ol>
<li>URL long polling: container page A changes the iframe page B's URL hash, and B periodically checks the hash, once the hash changed, it takes action according to the contracted hash value. [BTW, the pattern can be revised to be non-polling by HTML5 <a title=""onhashchange event"" href=""http://www.w3.org/TR/html5/history.html#event-hashchange"" target=""_blank"">onchashchange event</a>]</li>
<li><a title=""CrossFrame"" href=""http://www.julienlecomte.net/blog/2007/11/31/"" target=""_blank"">CrossFrame</a>, a Safe Communication Mechanism Across Documents and Across Domains.</li>
<li>Window Size Monitoring: update the iframe's window size once, and the containning window subscribes its ""onresize"" event then takes corresponding action(s). <a title=""Google Mapplets"" href=""http://code.google.com/apis/maps/documentation/mapplets/basics.html"" target=""_blank"">Google Mapplets</a> adopted this pattern.</li>
</ol>
<p>Well, personally I really don't like all of them... either inelegant, or violates the original functionalities of DOM elements, or too complecated. I believe many people don't like them too even the pattern inventors I bet... That why WHATWG created Cross-Domain communication in HTML5: <strong><a href=""http://www.w3.org/TR/webmessaging"" target=""_blank"">Web Messaging</a></strong>.</p>
<p>As an HTML5 crazy advocator I like it very much, complete client communication, no server impact, efficient, secure (at least in theory).</p>
<h3>How to</h3>
<p>""Child"" can be an iframe or an popup window by invocking window.open, ""parent page"" A contains source code is like below:</p>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #e3ceab;"">&lt;iframe</span> <span style=""color: #efef8f;"">id=</span><span style=""color: #cc9393;"">""ifr""</span> <span style=""color: #efef8f;"">src=</span><span style=""color: #cc9393;"">""http://domainB.com/B.htm"" onload=""sendCommand();""</span><span style=""color: #e3ceab;"">&gt;</span><br /> &nbsp; No frame!<br /> <span style=""color: #e3ceab;"">&lt;/iframe&gt;</span><br /> <br /> <span style=""color: #e3ceab;"">&lt;script </span><span style=""color: #efef8f;"">type=</span><span style=""color: #cc9393;"">""text/javascript""</span><span style=""color: #e3ceab;"">&gt;</span> &nbsp; <br /> &nbsp; <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">sendCommand</span>() <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">ifr</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #f0dfaf; font-weight: bold;"">document</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">getElementById</span>(<span style=""color: #cc9393;"">""ifr""</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">ifr</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">contentWindow</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">postMessage</span>(<span style=""color: #cc9393;"">""Hello""</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #cc9393;"">""http://domainB.com""</span>);<br /> &nbsp; <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #e3ceab;"">&lt;/script&gt;</span></pre>
<blockquote>
<p>Notice, make sure post message <strong>only when the iframe is loaded</strong>, otherwise the contentWindow will be still in same domain with the container page.</p>
</blockquote>
<p>Child page B contains code like below:</p>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #e3ceab;"">&lt;input</span> <span style=""color: #efef8f;"">type=</span><span style=""color: #cc9393;"">""button""</span> <span style=""color: #efef8f;"">value=</span><span style=""color: #cc9393;"">""Cross domain call""</span> <span style=""color: #efef8f;"">onclick=</span><span style=""color: #cc9393;"">""sendMsg();""</span> <span style=""color: #e3ceab;"">/&gt;</span><br /> <br /> <span style=""color: #e3ceab;"">&lt;script&gt;</span><br /> <span style=""color: #f0dfaf; font-weight: bold;"">window</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">addEventListener</span>(<span style=""color: #cc9393;"">""message""</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">receiveMessage</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #e3ceab;"">false</span>);<br /> <br /> <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">receiveMessage</span>(<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">log</span>(<span style=""color: #cc9393;"">""Page B received message from origin: %s.""</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">origin</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">log</span>(<span style=""color: #cc9393;"">""Event data: %s""</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">data</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">//evt.source will be a window who sent the message, it can be used to post message to it</span><br /> &nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// Take action(s)</span><br /> <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #e3ceab;"">&lt;/script&gt;</span></pre>
<p>The demo code above is one direction: parent sends message to child (iframe), actually bi-directional message trasfer can also be done, similar with ""Parent control child"", child page posts message to container window, only different is call ""<code>parent.postMessage</code>"".</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">receiveMessage</span>(<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">source</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">postmessage</span>(<span style=""color: #cc9393;"">""Hello caller""</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #7f9f7f;"">// or parent.postmessage(""Hello parent"");</span><br /> <span style=""color: #dcdccc;"">}</span></pre>
<h3>Web Messaging Essential</h3>
<p>In a nutshell, HTML5 Web Messaging is a suite of JavaScript API exposed by web browser, to communicate between different&nbsp;<a title=""Browsing context"" href=""http://www.w3.org/TR/html5/browsers.html#browsing-context"" target=""_blank"">browsing context</a>, when JavaScript code in one browser tab/window trys to deliver a message to another tab/window, web browser locates the target tab/window under the specified domain, and file a <a href=""http://www.w3.org/TR/webmessaging/#messageevent"" target=""_blank"">MessageEvent</a>&nbsp;(which inherits from DOMEvent) to the target tab/window, so if the target tab/window already subscribed the message event, it will gets notified, eventually the message got delivered through <code>MessageEvent.data</code>.</p>
<h3>Live Demo</h3>
<p>I've done a demo in my dev machine, I override my local hosts file to let &nbsp;Container.com, DomainA.com, DomainB.com and DomainC.com all point to 127.0.0.1:</p>
<blockquote><strong>127.0.1.1 Container.com<br />127.0.0.1 DomainA.com</strong><br /><strong>127.0.0.1 DomainB.com</strong><br /><strong>127.0.0.1 DomainC.com</strong></blockquote>
<p>I prepared a Container page which contains code below:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #e3ceab;"">&lt;h3&gt;</span>HTML5 Cross-Domain post message demo<span style=""color: #e3ceab;"">&lt;/h3&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;p</span> <span style=""color: #efef8f;"">id=</span><span style=""color: #cc9393;"">""infoBar""</span><span style=""color: #e3ceab;"">&gt;&lt;/p&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;div</span> <span style=""color: #efef8f;"">id=</span><span style=""color: #cc9393;"">""wrapperA""</span><span style=""color: #e3ceab;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">&lt;input</span> <span style=""color: #efef8f;"">type=</span><span style=""color: #cc9393;"">""text""</span> <span style=""color: #efef8f;"">id=</span><span style=""color: #cc9393;"">""txtA""</span> <span style=""color: #e3ceab;"">/&gt;&lt;br</span> <span style=""color: #e3ceab;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">&lt;input</span> <span style=""color: #efef8f;"">type=</span><span style=""color: #cc9393;"">""button""</span> <span style=""color: #efef8f;"">value=</span><span style=""color: #cc9393;"">""Post Message""</span> <span style=""color: #efef8f;"">onclick=</span><span style=""color: #cc9393;"">""postMsgToIfr('A');""</span> <span style=""color: #e3ceab;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">&lt;br</span> <span style=""color: #e3ceab;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">&lt;iframe</span> <span style=""color: #efef8f;"">id=</span><span style=""color: #cc9393;"">""ifrA""</span> <span style=""color: #efef8f;"">src=</span><span style=""color: #cc9393;"">""http://DomainA.com/A.htm""</span><span style=""color: #e3ceab;"">&gt;&lt;/iframe&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;/div&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;div</span> <span style=""color: #efef8f;"">id=</span><span style=""color: #cc9393;"">""wrapperB""</span><span style=""color: #e3ceab;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">&lt;input</span> <span style=""color: #efef8f;"">type=</span><span style=""color: #cc9393;"">""text""</span> <span style=""color: #efef8f;"">id=</span><span style=""color: #cc9393;"">""txtB""</span> <span style=""color: #e3ceab;"">/&gt;&lt;br</span> <span style=""color: #e3ceab;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">&lt;input</span> <span style=""color: #efef8f;"">type=</span><span style=""color: #cc9393;"">""button""</span> <span style=""color: #efef8f;"">value=</span><span style=""color: #cc9393;"">""Post Message""</span> <span style=""color: #efef8f;"">onclick=</span><span style=""color: #cc9393;"">""postMsgToIfr('B');""</span> <span style=""color: #e3ceab;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">&lt;br</span> <span style=""color: #e3ceab;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">&lt;iframe</span> <span style=""color: #efef8f;"">id=</span><span style=""color: #cc9393;"">""ifrB""</span> <span style=""color: #efef8f;"">src=</span><span style=""color: #cc9393;"">""http://DomainB.com/B.htm""</span><span style=""color: #e3ceab;"">&gt;&lt;/iframe&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;/div&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;div</span> <span style=""color: #efef8f;"">id=</span><span style=""color: #cc9393;"">""wrapperC""</span><span style=""color: #e3ceab;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">&lt;input</span> <span style=""color: #efef8f;"">type=</span><span style=""color: #cc9393;"">""text""</span> <span style=""color: #efef8f;"">id=</span><span style=""color: #cc9393;"">""txtC""</span> <span style=""color: #e3ceab;"">/&gt;&lt;br</span> <span style=""color: #e3ceab;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">&lt;input</span> <span style=""color: #efef8f;"">type=</span><span style=""color: #cc9393;"">""button""</span> <span style=""color: #efef8f;"">value=</span><span style=""color: #cc9393;"">""Post Message""</span> <span style=""color: #efef8f;"">onclick=</span><span style=""color: #cc9393;"">""postMsgToIfr('C');""</span> <span style=""color: #e3ceab;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">&lt;br</span> <span style=""color: #e3ceab;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">&lt;iframe</span> <span style=""color: #efef8f;"">id=</span><span style=""color: #cc9393;"">""ifrC""</span> <span style=""color: #efef8f;"">src=</span><span style=""color: #cc9393;"">""http://DomainC.com/C.htm""</span><span style=""color: #e3ceab;"">&gt;&lt;/iframe&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;/div&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;div</span> <span style=""color: #efef8f;"">style=</span><span style=""color: #cc9393;"">""clear: both""</span><span style=""color: #e3ceab;"">&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;/div&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;script </span><span style=""color: #efef8f;"">type=</span><span style=""color: #cc9393;"">""text/javascript""</span><span style=""color: #e3ceab;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f0dfaf; font-weight: bold;"">window</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">addEventListener</span>(<span style=""color: #cc9393;"">""message""</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">receiveMessage</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #e3ceab;"">false</span>);<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">infoBar</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #f0dfaf; font-weight: bold;"">document</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">getElementById</span>(<span style=""color: #cc9393;"">""infoBar""</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">receiveMessage</span>(<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">infoBar</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">innerHTML</span> <span style=""color: #dcdccc;"">+=</span> <span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">origin</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #cc9393;"">"": ""</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">data</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #cc9393;"">""&lt;br /&gt;""</span>;<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">postMsgToIfr</span>(<span style=""color: #dcdccc;"">domain</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">switch</span> (<span style=""color: #dcdccc;"">domain</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">case</span> <span style=""color: #cc9393;"">""A""</span><span style=""color: #dcdccc;"">:</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">ifr</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #f0dfaf; font-weight: bold;"">document</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">getElementById</span>(<span style=""color: #cc9393;"">""ifrA""</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">ifr</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">contentWindow</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">postMessage</span>(<span style=""color: #f0dfaf; font-weight: bold;"">document</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">getElementById</span>(<span style=""color: #cc9393;"">""txtA""</span><span style=""color: #dcdccc;"">).</span><span style=""color: #dcdccc;"">value</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #cc9393;"">""http://DomainA.com""</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">break</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">case</span> <span style=""color: #cc9393;"">""B""</span><span style=""color: #dcdccc;"">:</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">ifr</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #f0dfaf; font-weight: bold;"">document</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">getElementById</span>(<span style=""color: #cc9393;"">""ifrB""</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">ifr</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">contentWindow</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">postMessage</span>(<span style=""color: #f0dfaf; font-weight: bold;"">document</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">getElementById</span>(<span style=""color: #cc9393;"">""txtB""</span><span style=""color: #dcdccc;"">).</span><span style=""color: #dcdccc;"">value</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #cc9393;"">""http://DomainB.com""</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">break</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">case</span> <span style=""color: #cc9393;"">""C""</span><span style=""color: #dcdccc;"">:</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">ifr</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #f0dfaf; font-weight: bold;"">document</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">getElementById</span>(<span style=""color: #cc9393;"">""ifrC""</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">ifr</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">contentWindow</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">postMessage</span>(<span style=""color: #f0dfaf; font-weight: bold;"">document</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">getElementById</span>(<span style=""color: #cc9393;"">""txtC""</span><span style=""color: #dcdccc;"">).</span><span style=""color: #dcdccc;"">value</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #cc9393;"">""http://DomainC.com""</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">break</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">default</span><span style=""color: #dcdccc;"">:</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">throw</span> <span style=""color: #e3ceab;"">new</span> <span style=""color: #dcdccc;"">error</span>(<span style=""color: #cc9393;"">""No such domain!""</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> <span style=""color: #e3ceab;"">&lt;/script&gt;</span></pre>
<p>And three pages: A.htm located in DomainA.com,&nbsp;B.htm located in DomainB.com,&nbsp;C.htm located in DomainC.com, phisically they all located under C:\inetpub\wwwrooot, while in the browser I manually type DomainA/B/C.com to make the cheat<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" />, the code in the A/B/C page are similar, showing below:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #e3ceab;"">&lt;h4&gt;</span>DomainA/A.htm1<span style=""color: #e3ceab;"">&lt;/h4&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;input</span> <span style=""color: #efef8f;"">type=</span><span style=""color: #cc9393;"">""button""</span> <span style=""color: #efef8f;"">value=</span><span style=""color: #cc9393;"">""Cross domain call""</span> <span style=""color: #efef8f;"">onclick=</span><span style=""color: #cc9393;"">""doClick();""</span> <span style=""color: #e3ceab;"">/&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;div</span> <span style=""color: #efef8f;"">id=</span><span style=""color: #cc9393;"">""d""</span><span style=""color: #e3ceab;"">&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;/div&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;script&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f0dfaf; font-weight: bold;"">window</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">addEventListener</span>(<span style=""color: #cc9393;"">""message""</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">receiveMessage</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #e3ceab;"">false</span>);<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">doClick</span>() <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">parent</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">postMessage</span>(<span style=""color: #cc9393;"">""Message sent from ""</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">location</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">host</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #cc9393;"">""http://container.com""</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">d</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #f0dfaf; font-weight: bold;"">document</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">getElementById</span>(<span style=""color: #cc9393;"">""d""</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">receiveMessage</span>(<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">d</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">innerHTML</span> <span style=""color: #dcdccc;"">+=</span> <span style=""color: #cc9393;"">""Received message \""&lt;span style=\""color:red\""&gt;""</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">data</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #cc9393;"">""&lt;/span&gt;\"" from domain: ""</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">origin</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #cc9393;"">""&lt;br /&gt;""</span>;<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #e3ceab;"">&lt;/script&gt;</span></pre>
<p>I recorded a gif image below to demonstrate the Cross-Domain messaging:</p>
<p><img title=""HTML5 Cross-Domain Messaging Demo"" src=""http://ww2.sinaimg.cn/large/76a6d6a2gw1dkq13gnv6ig.gif"" alt=""HTML5 Cross-Domain Messaging Demo"" width=""567"" height=""382"" /></p>
<p>See the message passed through different domain in bi-direction? Isn't it cool?</p>
<h3>MessageChannel</h3>
<p>To support independent communication under different <a title=""Browsing context"" href=""http://www.w3.org/TR/html5/browsers.html#browsing-context"" target=""_blank"">browsing context</a>, HTML5 introduced&nbsp;<strong><a title=""Message Channel"" href=""http://www.w3.org/TR/html5/comms.html#message-channels"">Message Channel</a></strong>&nbsp;to post message independently, its official definition is showing below:</p>
<blockquote>
<p>Communication channels in this mechanisms are implemented as two-ways pipes, with a port at each end. Messages sent in one port are delivered at the other port, and vice-versa. Messages are asynchronous, and delivered as DOM events.&nbsp;</p>
</blockquote>
<p>I spent about half a day in investigating the Message Channel and finally got it worked, my code is showing below:</p>
<h4>Container page source code</h4>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #e3ceab;"">&lt;iframe</span> <span style=""color: #efef8f;"">id=</span><span style=""color: #cc9393;"">""ifr""</span> <span style=""color: #efef8f;"">src=</span><span style=""color: #cc9393;"">""http://wayneye.me/WebProjects/HRMS/Opener.html""</span> <span style=""color: #efef8f;"">onload=</span><span style=""color: #cc9393;"">""initMessaging()""</span><span style=""color: #e3ceab;"">&gt;&lt;/iframe&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;input</span> <span style=""color: #efef8f;"">type=</span><span style=""color: #cc9393;"">""button""</span> <span style=""color: #efef8f;"">value=</span><span style=""color: #cc9393;"">""Post Message""</span> <span style=""color: #efef8f;"">onclick=</span><span style=""color: #cc9393;"">""postMsg();""</span> <span style=""color: #e3ceab;"">/&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;div</span> <span style=""color: #efef8f;"">id=</span><span style=""color: #cc9393;"">""d""</span><span style=""color: #e3ceab;"">&gt;&lt;/div&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;script&gt;</span><br /> <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">d</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #f0dfaf; font-weight: bold;"">document</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">getElementById</span>(<span style=""color: #cc9393;"">""d""</span>);<br /> <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">channel</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #e3ceab;"">new</span> <span style=""color: #dcdccc;"">MessageChannel</span>();<br /> <span style=""color: #dcdccc;"">channel</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">port1</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">onmessage</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">d</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">innerHTML</span> <span style=""color: #dcdccc;"">+=</span> <span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">origin</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #cc9393;"">"": ""</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">data</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #cc9393;"">""&lt;br /&gt;""</span>;<br /> <span style=""color: #dcdccc;"">};</span><br /> <br /> <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">initMessaging</span>() <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">child</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #f0dfaf; font-weight: bold;"">document</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">getElementById</span>(<span style=""color: #cc9393;"">""ifr""</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">child</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">contentWindow</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">postMessage</span>(<span style=""color: #cc9393;"">'hello'</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #cc9393;"">'http://wayneye.me'</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #dcdccc;"">[</span><span style=""color: #dcdccc;"">channel</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">port2</span><span style=""color: #dcdccc;"">]);</span><br /> <span style=""color: #dcdccc;"">}</span><br /> <br /> <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">postMsg</span>() <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">channel</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">port1</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">postMessage</span>(<span style=""color: #cc9393;"">'Message sent from '</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">location</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">host</span>);<br /> <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #e3ceab;"">&lt;/script&gt;</span></pre>
<h4>iframe page source code</h4>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #dcdccc; background-color: #3f3f3f;""> <span style=""color: #e3ceab;"">&lt;div</span> <span style=""color: #efef8f;"">id=</span><span style=""color: #cc9393;"">""info""</span><span style=""color: #e3ceab;"">&gt;&lt;/div&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;input</span> <span style=""color: #efef8f;"">type=</span><span style=""color: #cc9393;"">""button""</span> <span style=""color: #efef8f;"">value=</span><span style=""color: #cc9393;"">""Post Message""</span> <span style=""color: #efef8f;"">onclick=</span><span style=""color: #cc9393;"">""postMsg();""</span> <span style=""color: #e3ceab;"">/&gt;</span><br /> <span style=""color: #e3ceab;"">&lt;script&gt;</span><br /> <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">info</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #f0dfaf; font-weight: bold;"">document</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">getElementById</span>(<span style=""color: #cc9393;"">""info""</span>);<br /> <span style=""color: #efefaf; font-weight: bold;"">var</span> <span style=""color: #dcdccc;"">port</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #e3ceab;"">null</span>;<br /> <span style=""color: #f0dfaf; font-weight: bold;"">window</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">addEventListener</span>(<span style=""color: #cc9393;"">""message""</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">e</span>) <span style=""color: #dcdccc;"">{</span><br /> <span style=""color: #dcdccc;"">console</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">log</span>(<span style=""color: #dcdccc;"">e</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">if</span>(<span style=""color: #dcdccc;"">e</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">ports</span> <span style=""color: #dcdccc;"">&amp;&amp;</span> <span style=""color: #dcdccc;"">e</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">ports</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">length</span> <span style=""color: #dcdccc;"">&gt;</span> <span style=""color: #8cd0d3;"">0</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">port</span> <span style=""color: #dcdccc;"">=</span> <span style=""color: #dcdccc;"">e</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">ports</span><span style=""color: #dcdccc;"">[</span><span style=""color: #8cd0d3;"">0</span><span style=""color: #dcdccc;"">];</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">port</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">start</span>();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">port</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">addEventListener</span>(<span style=""color: #cc9393;"">""message""</span><span style=""color: #dcdccc;"">,</span> <span style=""color: #efefaf; font-weight: bold;"">function</span> (<span style=""color: #dcdccc;"">evt</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">info</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">innerHTML</span> <span style=""color: #dcdccc;"">+=</span> <span style=""color: #cc9393;"">""Received message \""""</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">data</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #cc9393;"">""\"" from domain: ""</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">evt</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">origin</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #cc9393;"">""&lt;br /&gt;""</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">},</span> <span style=""color: #e3ceab;"">false</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #dcdccc;"">},</span> <span style=""color: #e3ceab;"">false</span>);<br /> <br /> <span style=""color: #efefaf; font-weight: bold;"">function</span> <span style=""color: #dcdccc;"">postMsg</span>() <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #e3ceab;"">if</span>(<span style=""color: #dcdccc;"">port</span>) <span style=""color: #dcdccc;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">port</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">postMessage</span>(<span style=""color: #cc9393;"">""Data sent from ""</span> <span style=""color: #dcdccc;"">+</span> <span style=""color: #dcdccc;"">location</span><span style=""color: #dcdccc;"">.</span><span style=""color: #dcdccc;"">host</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #dcdccc;"">}</span><br /> <span style=""color: #e3ceab;"">&lt;/script&gt;</span></pre>
<p>The entire process can be described as:</p>
<ol>
<li>Container page (A) embedded an iframe whose src is pointing to a page (B) in different domain.</li>
<li>Once the iframe loaded, the container posts a message to page B with a <a title=""MessagePortArray"" href=""http://www.w3.org/TR/webmessaging/#messageportarray"" target=""_blank"">MessagePortArray</a>. &nbsp;</li>
<li>Page B received the message as well as the array containing a list of MessagePort objects.</li>
<li>Page B registers onmessage event on port instance.</li>
<li>Page B invokes <code>port.postmessage</code> to send a message to page A through this MessageChannel.&nbsp;</li>
</ol>
<blockquote>At this timestamp, I seems only Opera correctly supports MessageChannel, Google Chrome and IE10 Platform Preview 2 failed to deliver the ports array, Safari cannot gets the onmessage event fired. Firefox 7.0 beta event doesn't support MessageChannel object.</blockquote>
<blockquote>Note: Ports can also enable communication between HTML5 Web Workers.</blockquote>
<p>One more thing (plagiarize Steve Jobs<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" />), to use Message Channel one noticable point is, web developer should explicitly close the channel once there is no need, otherwise there will be a strong reference between two pages, as W3 official page emphasized below:</p>
<blockquote>
<p>Authors are strongly encouraged to explicitly close&nbsp;<code>MessagePort</code>&nbsp;objects to disentangle them, so that their resources can be recollected. Creating many&nbsp;<code>MessagePort</code>&nbsp;objects and discarding them without closing them can lead to high memory usage.</p>
</blockquote>
<h3>Further reading</h3>
<p><a href=""http://www.w3.org/TR/webmessaging"" target=""_blank"">HTML5 Web Messaging</a></p>
<p><a href=""https://developer.mozilla.org/en/DOM/window.postMessage"" target=""_blank"">window.postMessage - MDN Docs</a></p>
<p><a href=""http://html5demos.com/postmessage2"" target=""_blank"">HTML5 Demo: postMessage (cross domain)</a></p>
<p><a href=""http://davidwalsh.name/window-postmessage"" target=""_blank"">HTML5&prime;s window.postMessage AP</a></p>
<p><a href=""http://msdn.microsoft.com/en-us/ie/hh272905"" target=""_blank"">Internet Explorer 10 Platform Preview: HTML5</a></p>
<p><a href=""http://ithelp.ithome.com.tw/question/10057709"" target=""_blank"">http://ithelp.ithome.com.tw/question/10057709</a></p>
<p>&nbsp;</p>
<p>Also posted on CodeProject:&nbsp;<a href=""http://www.codeproject.com/KB/HTML/HTML5-WebMessaging.aspx"">http://www.codeproject.com/KB/HTML/HTML5-WebMessaging.aspx</a></p>",4720,2011-08-30 15:44:40.390,1,A
125,Wayne,HTML5 WebSocket in Essence技术分享,HTML5-WebSocket-In-Essence-Public-Speak,23,"<p>今天下午，我非常荣幸受邀参加HTML5兴趣小组每月一次的沙龙活动，我给大家分享了HTML5 WebSocket的特性，协议本质，以及我的Team Poker demo。</p>
<p>第一次做技术分享，表面&ldquo;淡定&ldquo;，内心紧张，因语速较快原本打算持续1个小时左右的分享，大约40分钟就结束了，囧<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" /></p>
<h3>现场照片</h3>
<p><img title=""现场照片"" src=""https://byfiles.storage.live.com/y1pMtnvfjQDIBfrpDHz_9K6Fh4a3lh6W8IMlJQshmz1o1UyOXrug0zhIef_1o3Z6DCqO3ts_8W5aIE/DSC_0203.JPG?psid=1"" alt=""现场照片"" width=""640"" height=""426"" /></p>
<h3>在谈各种comet技巧</h3>
<p><img title=""Wayne"" src=""https://byfiles.storage.live.com/y1pMtnvfjQDIBeOoxbC43ItWFPAMLDpOZbGFmraKQHUDSrm5WYzO2Pt6xoiJUcPYSIgXbuQ5qhhkEA/DSC_0204.JPG?psid=1"" alt=""Wayne"" width=""640"" height=""426"" /></p>
<h3>PPT</h3>
<p><a title=""HTML5 WebSocket defines a bi-directional, full-duplex communication channel operates through a single TCP connection, this article discusses its fantastic performance, the WebSocket protocol principle and its handshake mechanism, and develop a WebSoc"" href=""http://prezi.com/zh1i14qm_3re/html5-websocket-in-essence/"">HTML5 WebSocket in Essence</a>&nbsp;on&nbsp;<a href=""http://prezi.com"">Prezi</a></p>
<p class=""prezi-player""><object id=""prezi_zh1i14qm_3re"" width=""550"" height=""400"" data=""http://prezi.com/bin/preziloader.swf"" type=""application/x-shockwave-flash""><param name=""allowfullscreen"" value=""true"" /><param name=""allowscriptaccess"" value=""always"" /><param name=""flashvars"" value=""prezi_id=zh1i14qm_3re&amp;lock_to_path=0&amp;color=ffffff&amp;autoplay=no&amp;autohide_ctrls=0"" /><param name=""src"" value=""http://prezi.com/bin/preziloader.swf"" /></object></p>
<h3>现场视频</h3>
<p><object width=""480"" height=""400"" data=""http://player.youku.com/player.php/sid/XMjk3MTE3NTY0/v.swf"" type=""application/x-shockwave-flash""><param name=""src"" value=""http://player.youku.com/player.php/sid/XMjk3MTE3NTY0/v.swf"" /><param name=""allowfullscreen"" value=""true"" /><param name=""quality"" value=""high"" /><param name=""allowscriptaccess"" value=""always"" /></object></p>
<p>摄影帅哥貌似对焦不实的说<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" /></p>
<p><strong>下一次，希望更好！+U！</strong></p>",2884,2011-08-20 23:39:36.407,1,A
126,Wayne,Print partial web content,Print-Partial-Web-Content,23,"<p>Per project needs we need print part of a web page, which I have no idea when I saw this requirement,&nbsp;I googled and I read this post:&nbsp;<a href=""http://www.huntingground.freeserve.co.uk/main/mainfram.htm?../scripts/printing.htm"">http://www.huntingground.freeserve.co.uk/main/mainfram.htm?../scripts/printing.htm</a>, it basically use <code>document.write</code> to write the content you want to print to a new window by <code>window.open</code>, it works, however I really don't like the opened window.</p>
<p>Occasionally&nbsp;I tried to find out whether CSS can achieve such function, seemed I was on the right way: <a href=""http://www.w3.org/TR/CSS2/media.html"" target=""_blank"">CSS media types</a> is to control different display settings on different ""media"", controled completely by your own. What a shame to myself! CSS media types definiton from W3C official page:</p>
<blockquote>
<p><strong>One of the most important features of style sheets is that they specify how a document is to be presented on different media: on the screen, on paper, with a speech synthesizer, with a braille device, etc.</strong></p>
</blockquote>
<p>We can define print style by few ways:</p>
<ol>
<li>Make a seperate css file to define print style and link it by specifying <code>media=print</code>, &lt;link rel=""stylesheet"" type=""text/css"" href=""print.css"" media=""print"" /&gt;</li>
<li>Insert a &lt;style media=""print""&gt; snippet into the &lt;head&gt;.</li>
<li>Define <code>@media print</code> rule inline with our CSS code: <code>@media print {#text_print:display:visible;}</code>.</li>
</ol>
<p>I'd reccomended option 1 or 3 if the project is small.</p>
<p>In additional I occasionally found that the&nbsp;Web Development extetion for Chrome already support this, we don't have to waste many pieces of papers<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" />.</p>
<p><img title=""Web Development Tool"" src=""https://byfiles.storage.live.com/y1pjr4gj8WcdWQMf0guwFcaGtSwgMWiYdaWY09gDnQ8tfWCe7nKaYOXMF19LfqIyydSv57DRK32q9o/print.png?psid=1"" alt=""Web Development Tool"" width=""640"" height=""134"" /></p>
<p>See also:</p>
<p><a href=""http://javascript.about.com/library/blprint.htm"" target=""_blank"">Print Button</a></p>
<p><a href=""http://www.w3schools.com/css/css_mediatypes.asp"" target=""_blank"">W3C School: CSS Media types</a></p>",2940,2011-09-28 15:25:57.360,1,A
127,Wayne,Experiencing Windows 8 Tablet,Experiencing-Windows-8-Tablet,6,"<p>This week is a <strong>Tablet week</strong> for me, <a href=""http://reyaandrithik.blogspot.com/"" target=""_blank"">Shilpa</a> told me the Ipad2 I won in the <a href=""http://www.codeproject.com/script/Awards/Winners.aspx?obtid=2&amp;cmpTpId=3&amp;cid=494"" target=""_blank"">Codeproject HTML5 &amp; CSS3 competition</a> had just arrived at Cupertino office, and my boss notified me he had successfully helped me bought an <strong>HP Touchpad</strong> - $99, &nbsp;and my colleague <a href=""http://www.buildwindows.com/"" target=""_blank"">Jun Yi</a> participated <a href=""http://www.buildwindows.com/"" target=""_blank"">Winndows Builld event</a> hosted on Sep 13th in Anaheim, CA, no doubt, he got a free <strong>Windows 8 Tablet</strong>, I envy him, absolutely; however this afternoon, he kindly borrowed it to me for the entire China National Day, I appreciate him<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" />.</p>
<p>My Ipad2 and HP Touchpad will be brought by Mr.X who will visit Shanghai office recently, I am extremely excited about the Windows 8 Tablet, actually before I got it I've already borrowed an HP TouchSmart PC and installed Windows 8 Developer Preview, I even developed an ""Hello World"" Metro style app<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" />.</p>
<p>Well one thing I wanna mention is during my way home, it rained heavily, since I was riding my bike the Tablet is exposed in the rain, so I unfixed my T-Shirt and covered it without&nbsp;hesitation! That's what a real geek should do, isn't it? By doing this I got a lot of doubtful look because I was barebacked^_^</p>
<p>No more words, enjoy my photos!</p>
<h3>My wet T-Shirt<img title=""My wet T-Shirt"" src=""https://byfiles.storage.live.com/y1pxTNL-MF1l740a2uXRpVLWcx7hrFupxEprrs31HZMY3xsoocpywrxmSP7GNQeCSk2YoG7Sems0_s/DSC_8399.jpg?psid=1"" alt=""My wet T-Shirt"" width=""639"" height=""423"" /></h3>
<h3>It got protected<br /><img title=""It got protected"" src=""https://byfiles.storage.live.com/y1pWQmrrguD8gOBo_ZLBm80Uf9kjLNBz-8s4gf8TRYY6VNXx186-vyacCk22xcl12zx7pgtvZx0LAM/DSC_8406.jpg?psid=1"" alt=""It got protected"" width=""639"" height=""423"" />&nbsp;</h3>
<h3>Metro UI<br /><img title=""Metro UI"" src=""https://byfiles.storage.live.com/y1pI3ekTss800qtvrh1n94V1oHdAZHNdE7xpxU0D4cMfvhb7sdChWvEGvXWW9V_DCugcR7vRa4LcOE/DSC_8409.jpg?psid=1"" alt=""Metro UI"" width=""639"" height=""423"" />&nbsp;</h3>
<h3>Running Visual Studio 11 Express<br /><img title=""Running Visual Studio 11 Express"" src=""https://byfiles.storage.live.com/y1pCAXQdFEi23VF7QQ9YfI1N5PjoytYlDvcv4fbCTs5_qEed50i0xHDggSVlN-u318t3SH_sXaPMH0/DSC_8410.jpg?psid=1"" alt=""Running Visual Studio 11 Express"" width=""639"" height=""423"" /></h3>",2555,2011-09-29 20:41:41.670,1,A
128,Wayne,WayneYe.com成功搬至米国服务器,WayneYe-Dot-Com-Transferred-To-US-Server,1,"<p>目前的架构：ASP.NET 4.0 + IIS 7.0 + SQL Server 2008 R2, oh yeah!</p>
<p>弄好之后嘛，第一件事：</p>
<p><img title=""Fuck ICP"" src=""https://byfiles.storage.live.com/y1pMvfvIBSAqQJjrcMHVuyrPvhVP3uqtMAyeIy3QpSVV7gWTmoWDP8GqlSMHQwBFyytkAbdylUWPmA/icp.png?psid=1"" alt=""Fuck ICP"" width=""575"" height=""61"" /></p>
<p>DNS重定向：</p>
<p><img title=""DNS"" src=""https://byfiles.storage.live.com/y1pLqolvmGXcBGsdHsp9lx9Y-9eBIJ3SYnad6uJR1lpeUpkJCgGcykrErOptBTyTnS36kxfk8VGySk/nslookup.png?psid=1"" alt=""DNS"" width=""293"" height=""161"" /></p>
<p>服务器地址在加州Pasadena。</p>
<p>日后会更加努力Blogging，Page Rank早上4, +U!</p>",2392,2011-10-10 07:09:18.840,1,A
129,Wayne,URL Rewrite Rules used by WayneYe.com,URL-Rewrite-Rules-Used-By-WayneYe-Dot-Com,25,"<p>I've successfully transferred my website to winhost, now the architecture is <strong>IIS 7.5 + ASP.NET 4.0 + SQL Server 2008 R2 + HTML5</strong>, this blog post is a summary about&nbsp;URL Rewrite Rules used by WayneYe.com.</p>
<h3>RESTful URL for blogs</h3>
<p>Blog posts are absolutely the soul of a blog website, comparing with blog URL format: ""/yyyy/MM/{Blog_Title}"", I actually prefer ""<strong>/Blog/{Blog_Title}</strong>"", more simpler/shorter, in additional and more important, generally speacking,valuable content is valuable no matter when it was posted, for example, a developer is searching C# covariance &amp; contravariance articles, two articles separately posted on 3/28/2010 and 1/25/2011 won't make ANY difference for this developer.</p>
<p>Now that all my blogs take URI format like: ""http://WayneYe.com/Blog/{Blog_Title}"", it is so called ""<a href=""http://en.wikipedia.org/wiki/Permalink"" target=""_blank"">Permalink</a>"", I must ensure there is no duplicate blog titles (not case sensetive even if I can enable URL case sensitive through IIS manager, it would be quite confuse to the end user), so actually in my backend blog post page I did a DB check for existing blog titiles:)</p>
<p>Here is the Blog URL rewrite config XML stored in my Web.config:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""BlogPermalinkRewrite""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""^Blog/([A-Za-z0-9-_()^%]{1,})$""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""ViewBlog.aspx?Permalink={R:1}""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span></pre>
<h3>Navigate Links</h3>
<p>That's so simply, rewrite to an ASPX page under a matched directory:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""NaviAlbum""</span> <span style=""color: #cae682;"">patternSyntax=</span><span style=""color: #95e454; font-style: italic;"">""ExactMatch""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""Album""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""Album/Index.aspx""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""NaviVideo""</span> <span style=""color: #cae682;"">patternSyntax=</span><span style=""color: #95e454; font-style: italic;"">""ExactMatch""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""Video""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""Video/Index.aspx""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""NaviTags""</span> <span style=""color: #cae682;"">patternSyntax=</span><span style=""color: #95e454; font-style: italic;"">""ExactMatch""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""Tags""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""Tags/Index.aspx""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""NaviVisitRecord""</span> <span style=""color: #cae682;"">patternSyntax=</span><span style=""color: #95e454; font-style: italic;"">""ExactMatch""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""VisitRecord""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""VisitRecord/Index.aspx""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""NaviAboutMe""</span> <span style=""color: #cae682;"">patternSyntax=</span><span style=""color: #95e454; font-style: italic;"">""ExactMatch""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""AboutMe""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""AboutMe/Index.aspx""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span></pre>
<h3>Category/Archive/Tag</h3>
<p>These three type of URLs are similar, but makes a log of sense to a website comforming REST.</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""CategoryRewrite""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""^Category/([A-Za-z0-9-_/]{1,})$""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""ShowBlogs.aspx?Condition=Category&amp;amp;Cat={R:1}""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""BlogTagRewrite""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""^Tag/(.*)$""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""SearchTag.aspx?t={R:1}""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""ArchiveYearRewrite""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""^Archive/(\d{4})$""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""ShowBlogs.aspx?Condition=Time&amp;amp;Year={R:1}""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""ArchiveYearMonthRewrite""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""^Archive/(\d{4})/(\d{2})$""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""ShowBlogs.aspx?Condition=Time&amp;amp;Year={R:1}&amp;amp;Month={R:2}""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""ArchiveYearMonthDayRewrite""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""^Archive/(\d{4})/(\d{2})/(\d{1,2})$""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""ShowBlogs.aspx?Condition=Time&amp;amp;Year={R:1}&amp;amp;Month={R:2}&amp;amp;Day={R:3}""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span></pre>
<h3>Define Atom/RSS feeds MIME type</h3>
<p>WayneYe.com programmatically generates Atom/RSS feeds in plain XML format, the two XML file exists phisically under <a href=""http://wayneye.com/Feeds/Atom/Atom.xml"" target=""_blank"">Feeds/Atom/Atom.xml</a> and <a href=""http://wayneye.com/Feeds/RSS/RSS.xml"" target=""_blank"">Feeds/RSS/RSS.xml</a>, other then rewrite URL for both, one more important thing to do is override the ""text/xml"" <a href=""http://en.wikipedia.org/wiki/Internet_media_type"" target=""_blank"">MIME type</a>&nbsp;to follow the standard:</p>
<ol>
<li>Atom feeds MIME type should be ""<strong><a href=""http://tools.ietf.org/html/rfc4287"" target=""_blank"">application/atom+xml</a></strong>""</li>
<li>RSS feeds MIME type should be ""<strong><a href=""http://www.rssboard.org/rss-mime-type-application.txt"" target=""_blank"">application/rss+xml</a></strong>"".</li>
</ol>
<p>To achieve this needs a little bit more work: intercepting response stream and overriding server variable, this requires adding an ""Allowed Server Variables"": this is done by the following steps:</p>$More$
<ol>
<li>Open IIS Manager, go to my web application.</li>
<li>Go to ""URL Rewrite""</li>
<li>In the Actions panel, select ""View Server Variables"".</li>
<li>Add a new Server Variable: ""RESPONSE_CONTENT_TYPE"".</li>
</ol>
<p>Here is the config XML for rewriting the request:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""AtomFeedRewrite""</span> <span style=""color: #cae682;"">patternSyntax=</span><span style=""color: #95e454; font-style: italic;"">""ExactMatch""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""Feeds/Atom""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""Feeds/Atom/Atom.xml""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""RSSFeedRewrite""</span> <span style=""color: #cae682;"">patternSyntax=</span><span style=""color: #95e454; font-style: italic;"">""ExactMatch""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""Feeds/RSS""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">url=</span><span style=""color: #95e454; font-style: italic;"">""Feeds/RSS/RSS.xml""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span></pre>
<p>And below is for overriding the ""text/xml"" MIME type config XML:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">&lt;outboundRules&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;preConditions&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;preCondition</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""Match Atom Feeds""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;add</span> <span style=""color: #cae682;"">input=</span><span style=""color: #95e454; font-style: italic;"">""{REQUEST_URI}""</span> <span style=""color: #cae682;"">pattern=</span><span style=""color: #95e454; font-style: italic;"">""Feeds/Atom""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;/preCondition&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;preCondition</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""Match RSS Feeds""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;add</span> <span style=""color: #cae682;"">input=</span><span style=""color: #95e454; font-style: italic;"">""{REQUEST_URI}""</span> <span style=""color: #cae682;"">pattern=</span><span style=""color: #95e454; font-style: italic;"">""Feeds/RSS""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;/preCondition&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;/preConditions&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""AtomFeedsIMEType""</span> <span style=""color: #cae682;"">preCondition=</span><span style=""color: #95e454; font-style: italic;"">""Match Atom Feeds""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">serverVariable=</span><span style=""color: #95e454; font-style: italic;"">""RESPONSE_CONTENT_TYPE""</span> <span style=""color: #cae682;"">pattern=</span><span style=""color: #95e454; font-style: italic;"">""(.*)""</span> <span style=""color: #cae682;"">negate=</span><span style=""color: #95e454; font-style: italic;"">""false""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">value=</span><span style=""color: #95e454; font-style: italic;"">""application/atom+xml""</span> <span style=""color: #cae682;"">replace=</span><span style=""color: #95e454; font-style: italic;"">""true""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""RSSFeedsIMEType""</span> <span style=""color: #cae682;"">preCondition=</span><span style=""color: #95e454; font-style: italic;"">""Match RSS Feeds""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">serverVariable=</span><span style=""color: #95e454; font-style: italic;"">""RESPONSE_CONTENT_TYPE""</span> <span style=""color: #cae682;"">pattern=</span><span style=""color: #95e454; font-style: italic;"">""(.*)""</span> <span style=""color: #cae682;"">negate=</span><span style=""color: #95e454; font-style: italic;"">""false""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">value=</span><span style=""color: #95e454; font-style: italic;"">""application/rss+xml""</span> <span style=""color: #cae682;"">replace=</span><span style=""color: #95e454; font-style: italic;"">""true""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/outboundRules&gt;</span></pre>
<p>Result:<br /><img title=""Define Atom Feeds IME Type"" src=""https://byfiles.storage.live.com/y1p4SuOwoPucu45uROxElaUOnGfYIQpQDxmEOktVqDl3HyJaS-mUnElTZXcpcTeY8J0adqizgHKjvk/AtomIME.png?psid=1"" alt=""Define Atom Feeds IME Type"" width=""501"" height=""233"" /></p>
<p>&nbsp;</p>
<h3>Customize HTTP Response Headers</h3>
<p>I added a customized (non-standard) ""<strong>Auther</strong>"" HTTP response Header for all the requests, just for fun^_^</p>
<p>The config code is below:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">&lt;outboundRules&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;rule</span> <span style=""color: #cae682;"">name=</span><span style=""color: #95e454; font-style: italic;"">""WayneHttpHeader""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;match</span> <span style=""color: #cae682;"">serverVariable=</span><span style=""color: #95e454; font-style: italic;"">""RESPONSE_Author""</span> <span style=""color: #cae682;"">pattern=</span><span style=""color: #95e454; font-style: italic;"">""^$""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;action</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""Rewrite""</span> <span style=""color: #cae682;"">value=</span><span style=""color: #95e454; font-style: italic;"">""Wayne Ye (Admin@WayneYe.com)""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;/rule&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/outboundRules&gt;</span></pre>
<p>Screenshot for an example of ""Auther"" header appears when requesting to <a href=""http://WayneYe.com/AboutMe"" target=""_blank"">http://WayneYe.com/AboutMe</a>.</p>
<p><img title=""Customized &quot;Auther&quot; Header"" src=""https://byfiles.storage.live.com/y1pfvmJjttBiBsPxk2jrEmyICqQC82ef-uP7Aeuqedbma15H7_U-uUORIBKOFyOwQoKp_QWw6XMjMs/Auther.png?psid=1"" alt=""Customized &quot;Auther&quot; Header"" width=""487"" height=""343"" /></p>
<h3>Canonical domain URL</h3>
<p>Canonical domain URL is a crucial fact for a website which want to make good SEO, URL Rewrite module already provides a template to help you do this by simply giving it your preferred domain. I did and the result is showing below:</p>
<p><img title=""Conanical URL"" src=""https://byfiles.storage.live.com/y1pSAJuwFnr6ZIuDMnxl4WBELOTafbGNAn6E_29GVi2xvPz64HSLpP8GNsVv3V341pwhMEACoUgkDs/Canonical%20URL.png?psid=1"" alt=""Conanical URL"" width=""661"" height=""59"" /></p>
<h3>Conclusion</h3>
<p>IIS URL Rewrite Module is the most powerful rewriting tool in the world, simple, easy to learn and use, highly customization and extention supports, I love it! In fact before I transferred my blog from to winhost, to achieve few parts of the rewrite functions listed above, I wrote mroe than 100 hundred lines of code in HttpModule, and got seriously compromised results, let me record the&nbsp;<strong>miserable history</strong> below.</p>
<p>I defined an <code>WayneBlogModule</code> which inherits from <a href=""http://msdn.microsoft.com/en-us/library/system.web.ihttpmodule.aspx"" target=""_blank"">IHttpModule</a>, it add extra URL examination to <a href=""http://msdn.microsoft.com/en-us/library/system.web.httpapplication.beginrequest.aspx"" target=""_parent"">HttpApplication.BeginRequest</a>, checking whether the requested URI matches conditions defined by myself, based on concrete requested URI, the <code>WayneBlogModule</code>&nbsp;invoke <a href=""http://msdn.microsoft.com/en-us/library/system.web.httpcontext.rewritepath.aspx"" target=""_blank"">HttpContext.RewritePath</a> to achieve the goal, however, it has an inextricable issue: the requested resource ""<strong>MUST exist</strong>"", otherwise IIS will return 404 to the client, the module has <strong>no chance to get executed</strong>, although there are some tricky ways (or I'd say, odd ways) to solve this issue such as ""let redirects all 404 response to a specified file"" then checks the requested URI, I didn't adopt that because I think it is odd and obay the original technical base.</p>
<p><strong>IIS URL Rewrite module perfectly solves my problem, sincerely thanks!</strong>&nbsp;</p>
<p><strong>Screenshot for completely list of rewrite rule used by WayneYe.com</strong> (click to enlarge):</p>
<p><a href=""https://byfiles.storage.live.com/y1pSAJuwFnr6ZL4UeUTeduC016ZlF1JywpxFN051upGzFGeDSVPCo-jbPU9lt2avpEU7CftK-dcOnQ/URL%20Rewrite.png?psid=1"" target=""_blank""><img title=""Completely rule list"" src=""https://byfiles.storage.live.com/y1pSAJuwFnr6ZL4UeUTeduC016ZlF1JywpxFN051upGzFGeDSVPCo-jbPU9lt2avpEU7CftK-dcOnQ/URL%20Rewrite.png?psid=1"" alt=""Completely rule list"" width=""600"" height=""340"" /></a></p>
<h3>Further Reading</h3>
<p><a href=""http://learn.iis.net/page.aspx/734/url-rewrite-module/"" target=""_blank"">IIS URL Rewrite module</a></p>
<p><a href=""http://www.iis.net/download/urlrewrite"" target=""_blank"">Download URL Rewrite Module 2.0</a></p>",4555,2011-10-16 07:10:28.397,1,A
130,Wayne,2011年10月17日 - 应该被定为国耻日,2011-October-The-Seventeenth-The-Day-Of-Infamy,5,"<p>
<a href=""http://you.video.sina.com.cn/api/sinawebApi/outplayrefer.php/vid=63088598_1_Ok29HCJtCmXK+l1lHz2stqkM7KQNt6nknynt71+iJAtbXAuKYorfO4kK5irWCMdH+GQ/s.swf"" target=""_blank"">视频地址</a>
</p>
<p>我不知道在这个蓝色的生命星球上，有几种动物会无视自己受伤的同胞，然而，我天朝佛山的这帮渣滓做到了，彻彻底底地做到了！</p>
<p>今天，作为一个中国人，我感到耻辱到极点，为有如此禽兽不如的同胞，为活在这个伟大的&ldquo;河蟹射会&rdquo;，为了无处发泄胸中不满，为了太多太多的不公平，不公正！</p>
<p>倘使今日有一强权国家侵略我中华，我华夏儿女团结一致，奋勇抗敌，则不会有任何可耻之处。然而，这段视频<span style=""color: #000000;"">给予鄙人<strong>心灵上的创伤，已远超肉体上的伤痛</strong></span>！</p>
<p>鄙人以为：<strong>对于交通肇事伤人并<span style=""color: #ff0000;"">逃逸</span>的罪犯，最终<span style=""color: #ff0000;"">造成被害人死亡</span>的，肇事人应被判处<span style=""color: #ff0000;"">故意杀人罪</span></strong>。</p>
<p>网上查了下：目前刑法的有关法律条文如下：</p>
<blockquote><strong>根据刑法第133条的规定，犯交通肇事罪的，处3年以下有期徒刑或者拘役；交通运输肇事后逃逸或者有其他特别恶劣情节的，处3年以上7年以下有期徒刑</strong> <strong>因逃逸致人死亡的，处7年以上有期徒刑。</strong></blockquote>
<p>更新：今天（10月24日），看到新闻 - <a href=""http://news.163.com/11/1021/12/7GSVQ18B00011229.html"" target=""_blank"">小悦悦已经死亡</a>，无尽的悲痛。。。哀莫大于心死！我对某些人，某些事，已彻底心死！&nbsp;</p>
<p>贴几条网友评论，可以代表鄙人观点：</p>
<blockquote>
<p>""最近一周以来，我的脑海里每时每刻都有那个孩子的视频，我的孩子也是2岁多，也和悦悦一样是那么可爱的年龄，我都不敢完整看完视频，只一个镜头就已经让我心碎了。仿佛自己就是那个孩子，无助，痛苦；也仿佛自己就是那些冷血过客之一，愧对我们的孩子啊。这个世界到底怎么了，一条鲜活的生命啊！！！！孩子，这个世界让你失望了吧。昨天一个同事告诉我她怀孕了，我都没有底气恭喜她，带孩子来到这个世界对吗？？悦悦宝贝，一路走好，阿姨在遥远的地方祝福你，在天堂快乐的生活吧，来世不要到这来了。""</p>
<p>""一条人命几十万摆平,有钱人眼中人贱如草,哪里还有对生命的敬畏?&ldquo;</p>
<p>&rdquo;火箭成功升空，能代表什么？经济数据耀眼，能代表什么？一个个的（捞民伤材）面子工程骏工，又能代表什么？？&hellip;&hellip;小悦悦的离世，在我眼中看到依然是漆黑的世界，漆黑中还隐藏着利齿呀&hellip;&hellip;&hellip;&hellip;&ldquo;</p>
<p>&ldquo;希望小悦悦投胎到美利坚的点支持！谢谢！&rdquo;</p>
<p><span>""愿她去天堂的路，没有车来车往。""</span></p>
<p><span>""回复：就算有车来车往，也不会有冷漠的路人，因为这类冷漠的人不会出现在天堂""</span></p>
<p>&nbsp;</p>
</blockquote>
<p><br />最后鄙人以为：</p>
<p><span style=""color: #ff0000; font-size: medium;""><strong>2011年10月17日 - 应该被定为国耻日！</strong></span></p>",2791,2011-10-17 06:20:10.523,1,A
131,Wayne,Atomic Operation in C#.Net,Atomic-Operation-In-Csharp,18,"<h3>Introduction</h3>
<p>Atomic Operation is named academic to <a href=""http://en.wikipedia.org/wiki/Atomic_operation"" target=""_blank"">Linearizability</a>,&nbsp;Atomicity is a guarantee of isolation from concurrent processes, it can be enfored by hardware level build on <a href=""coherence"" target=""_blank"">Cache&nbsp;Coherence</a> protocol, or software level exclusive lock. In this blog post, I am going to explore a few number of mechanisms to achieve atomic operation in .Net.</p>
<h3>What are Atomic operations and what are not?</h3>
<p>In <a href=""http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-334.pdf"" target=""_blank"">C# Specification</a>, the stamement about atomic operation is:</p>
<blockquote>&ldquo;Reads and writes of the following data types shall be atomic: bool, char, byte, sbyte, short, ushort, uint, int, float, and reference types.&rdquo; Also: &ldquo;&hellip;there is no guarantee of atomic read-modify-write, such as in the case of increment or decrement.&rdquo;.</blockquote>
<p><a href=""http://www.albahari.com/threading/"" target=""_blank"">Threading In C#</a>&nbsp;by Joseph Albahari described:</p>
<blockquote>""Read/write on a field of 32-bit or less is always atomic, operations on 64-bit are guaranteed to be atomic only in 64-bit OS, statements that combine more than one read/write operation are never atomic.""</blockquote>
<p>For example, following operations are guaranteed to be atomic operations:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">3</span>; <span style=""color: #99968b; font-style: italic;"">// Always atomic</span><br /> <span style=""color: #cae682;"">long</span> <span style=""color: #f6f3e8;"">l</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #f6f3e8;"">Int64</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">MaxValue</span>; <span style=""color: #99968b; font-style: italic;"">// Atomic in 64-bit enviroment, non-atomic on 32-bit environment</span></pre>
<p>Code like below are never atomic:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>;<br /> <span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">j</span> <span style=""color: #f6f3e8;"">+=</span> <span style=""color: #f6f3e8;"">i</span>;&nbsp; <span style=""color: #99968b; font-style: italic;"">// Non-atomic, read and write operation</span><br /> <span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">++;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #99968b; font-style: italic;"">// Non-atomic, read and write operation</span></pre>
<p>And I am trying to document atomic operation in a lower level in the section below.</p>
<h3>Essence</h3>
<p>Comsidering two threads (or two processes) are running simultaneously: T1 and T2, there is a field stored in memory, T1 reads its value and do some calculation on the value and finally write the new value back to memory, during the period T2 was actually doing exact same task - i.e. read/calculate/write value back, so possibly one operation on this field <strong>overrides another</strong> - in other word:&nbsp;<strong>the later executed thread (T2) might override the earlier executed one (T1) because when it read the field's value another thread was just manipulating on it, and after T1 finished writing the new value back to memory, T2 writes back</strong>.</p>
<p>So a simple example is the increament/decrement operation, as I showed above, it is NOT an atomic operation, it requires both read and write, if many thread simultaneously doing increment on one field, it will very possible cause race condition (<strong>the more threads, the more increment operation going to do, the more possibility race condition happen</strong>).</p>
<h3>Atomicity example</h3>
<p>I wrote a Winform application, it do simple work:</p>
<p>Create 10 threads at runtime and simultaneously operates on a private interger, there is a volatile counter with initial value 0, every thread finishes its work will:</p>
<ol>
<li>Print information on UI.</li>
<li>Increment the counter</li>
<li>Check whether the counter reachs 10, if yes, print <code>CalculatingFinished</code> method which will print the final result.</li>
</ol>
<p>And I wish UI won't block during the calculation, otherwise I can simply join every created thread. My code skeleton is showing below:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">private</span> <span style=""color: #8ac6f2;"">const</span> <span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">MaxThraedCount</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">10</span>;<br /> <span style=""color: #8ac6f2;"">private</span> <span style=""color: #f6f3e8;"">Thread</span><span style=""color: #f6f3e8;"">[]</span> <span style=""color: #f6f3e8;"">m_Workers</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #8ac6f2;"">new</span> <span style=""color: #f6f3e8;"">Thread</span><span style=""color: #f6f3e8;"">[</span><span style=""color: #f6f3e8;"">MaxThraedCount</span><span style=""color: #f6f3e8;"">];</span><br /> <span style=""color: #8ac6f2;"">private</span> <span style=""color: #f6f3e8;"">volatile</span> <span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">m_Counter</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>;<br /> <span style=""color: #8ac6f2;"">private</span> <span style=""color: #f6f3e8;"">Int32</span> <span style=""color: #f6f3e8;"">x</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>;<br /> <br /> <span style=""color: #8ac6f2;"">protected</span> <span style=""color: #8ac6f2;"">void</span> <span style=""color: #cae682;"">btn_DoWork_Click</span>(<span style=""color: #cae682;"">object</span> <span style=""color: #f6f3e8;"">sender</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">EventArgs</span> <span style=""color: #f6f3e8;"">e</span>)<br /> <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">ShowStatus</span>(<span style=""color: #95e454; font-style: italic;"">""Starting...""</span>);<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">for</span> (<span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>; <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">&lt;</span> <span style=""color: #f6f3e8;"">MaxThraedCount</span>; <span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">++)</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">m_Workers</span><span style=""color: #f6f3e8;"">[</span><span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">]</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #8ac6f2;"">new</span> <span style=""color: #f6f3e8;"">Thread</span>(<span style=""color: #f6f3e8;"">IncreaseNumber</span>) <span style=""color: #f6f3e8;"">{</span> <span style=""color: #f6f3e8;"">Name</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #95e454; font-style: italic;"">""Thread ""</span> <span style=""color: #f6f3e8;"">+</span> (<span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">+</span> <span style=""color: #e5786d;"">1</span>) <span style=""color: #f6f3e8;"">};</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">m_Workers</span><span style=""color: #f6f3e8;"">[</span><span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">].</span><span style=""color: #f6f3e8;"">Start</span>();<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> <span style=""color: #f6f3e8;"">}</span><br /> <br /> <span style=""color: #8ac6f2;"">void</span> <span style=""color: #cae682;"">IncreaseNumber</span>()<br /> <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">try</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">for</span> (<span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>; <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">&lt;</span> <span style=""color: #e5786d;"">10000</span>; <span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">++)</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""font-style: italic; color: #ff0000; background-color: #333333;"">// Different strategy to increment x</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">ShowStatus</span>(<span style=""color: #f6f3e8;"">String</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Format</span>(<span style=""color: #95e454; font-style: italic;"">""{0} finished at {1}""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">Thread</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">CurrentThread</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Name</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">m_Watcher</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Elapsed</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">TotalMilliseconds</span>));<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #99968b; font-style: italic;"">// Increases Counter and decides whether or not sets the finish signal</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">m_Counter</span><span style=""color: #f6f3e8;"">++;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">if</span> (<span style=""color: #f6f3e8;"">m_Counter</span> <span style=""color: #f6f3e8;"">==</span> <span style=""color: #f6f3e8;"">MaxThraedCount</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #99968b; font-style: italic;"">// Print finish information on UI</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">CalculatingFinished</span>();<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">m_Counter</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">catch</span> (<span style=""color: #f6f3e8;"">Exception</span> <span style=""color: #f6f3e8;"">ex</span>)<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">throw</span>;<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> <span style=""color: #f6f3e8;"">}</span><br /> <br /> <span style=""color: #8ac6f2;"">public</span> <span style=""color: #8ac6f2;"">void</span> <span style=""color: #cae682;"">ShowStatus</span>(<span style=""color: #cae682;"">string</span> <span style=""color: #f6f3e8;"">info</span>)<br /> <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">this</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">InvokeAction</span>(() <span style=""color: #f6f3e8;"">=&gt;</span> <span style=""color: #f6f3e8;"">listInfo</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Items</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Add</span>(<span style=""color: #f6f3e8;"">info</span>));<br /> <span style=""color: #f6f3e8;"">}</span><br /> <br /> <span style=""color: #8ac6f2;"">private</span> <span style=""color: #8ac6f2;"">void</span> <span style=""color: #cae682;"">CalculatingFinished</span>()<br /> <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">ShowStatus</span>(<span style=""color: #95e454; font-style: italic;"">""\r\nAll Done at: ""</span> <span style=""color: #f6f3e8;"">+</span> <span style=""color: #f6f3e8;"">m_Watcher</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Elapsed</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">TotalMilliseconds</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">ShowStatus</span>(<span style=""color: #95e454; font-style: italic;"">""The result: ""</span> <span style=""color: #f6f3e8;"">+</span> <span style=""color: #f6f3e8;"">x</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">ToString</span>());<br /> <span style=""color: #f6f3e8;"">}</span></pre>
<p>I highlighted ""<span style=""color: #ff0000;"">// Different strategy to increment x</span>"", and will try a few number of ways to achieve atomicity using FCL libriries.</p>
<p>Let's first see the non-atomic routine - simple do <code>x++</code> in each thread:&nbsp;</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">for</span> (<span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>; <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">&lt;</span> <span style=""color: #e5786d;"">10000</span>; <span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">++)</span><br /> <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">x</span><span style=""color: #f6f3e8;"">++;</span><br /> <span style=""color: #f6f3e8;"">}</span></pre>
<p>Since <code>x++</code>&nbsp;is NOT atomicity, in additional, I made a large loop - 10 thousand times, in my experience, <strong>I NEVER get the correct result</strong>, the screenshot is below:</p>
<p><img title=""Non-Atomic Operation"" src=""https://byfiles.storage.live.com/y1pQi3Nl0yapalU1nSyhn03OdJGdxqMU7fhvSn8pP2sMKSj2oarw3u0XP2Skce4IVx7ZKEp5t-bBpo/Non-Atomic%20Operation.png?psid=1"" alt=""Non-Atomic Operation"" width=""312"" height=""372"" /></p>
<h3>Analysis and solutions</h3>
<p>To solve the issue and ensure atomicity, by more than 2 weeks brokenly study&nbsp;I found the following feasible ways (in theory, not considering performance):</p>
<ol>
<li><a href=""http://msdn.microsoft.com/en-us/library/dd78zt0c.aspx"" target=""_blank"">Interlocked.Increment</a></li>
<li>Apply exclusive lock (or&nbsp;Moniter.Enter) outside the for loop.</li>
<li>AutoResetEvent to ensure threads doing task one by one.&nbsp;</li>
<li>Create a temp integer in each thread and once finish add temp onto x under an exclusive lock.</li>
<li><a href=""http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx"" target=""_blank"">ReaderWriterLockSlim</a>.</li>
<li>Parallel.For coordinate with Interlocked.Increment.&nbsp;</li>
</ol>
<p>All of above can achieve atomic operation on incresing x's value, and got expected result:</p>
<p><img title=""Atomic operation"" src=""https://byfiles.storage.live.com/y1pm5SIiPilGL46hWb1rtQFqFLnk588wS3FXBQhe8uNCPXB5b3rvWkVXQJinei1KFpOh9BBlwJa238/Atomic%20Operation.png?psid=1"" alt=""Atomic operation"" width=""312"" height=""372"" /></p>
<p>In fact I did try other ways such as using MemoryBarrier, Thread.VolatileRead/VolatileWrite - <a href=""http://stackoverflow.com/questions/7949440/how-to-use-memorybarrier-ways-to-safe-atomicity-operations"" target=""_blank"">StackOverFlow question link</a>, but failed, if dear readers know there is way to use them to achieve the goal please kindly guide me. &nbsp;</p>
<h3>Demonstration code</h3>
<p>In this section I will listed key code for implementing the 5 solutions above.</p>
<h4>Solution #1:&nbsp;Interlocked.Increment</h4>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">for</span> (<span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>; <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">&lt;</span> <span style=""color: #e5786d;"">10000</span>; <span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">++)</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">Interlocked</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Increment</span>(<span style=""color: #8ac6f2;"">ref</span> <span style=""color: #f6f3e8;"">x</span>);</pre>
<h4>Solution #2:&nbsp;Apply exclusive lock (Moniter) outside the for loop.</h4>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">private</span> <span style=""color: #8ac6f2;"">readonly</span> <span style=""color: #cae682;"">string</span> <span style=""color: #f6f3e8;"">m_Locker</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #95e454; font-style: italic;"">""THREAD_LOCKER""</span>;<br /> <br /> <span style=""color: #f6f3e8;"">Monitor</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Enter</span>(<span style=""color: #f6f3e8;"">m_Locker</span>);<br /> <span style=""color: #8ac6f2;"">for</span> (<span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>; <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">&lt;</span> <span style=""color: #e5786d;"">10000</span>; <span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">++)</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">x</span><span style=""color: #f6f3e8;"">++;</span><br /> <span style=""color: #f6f3e8;"">Monitor</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Exit</span>(<span style=""color: #f6f3e8;"">m_Locker</span>);</pre>
<h4>Solution #3:&nbsp;AutoResetEvent to ensure threads doing task one by one.</h4>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">private</span> <span style=""color: #8ac6f2;"">static</span> <span style=""color: #f6f3e8;"">AutoResetEvent</span> <span style=""color: #f6f3e8;"">m_AutoReset</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #8ac6f2;"">new</span> <span style=""color: #f6f3e8;"">AutoResetEvent</span>(<span style=""color: #8ac6f2;"">false</span>);<br /> <br /> <span style=""color: #8ac6f2;"">protected</span> <span style=""color: #8ac6f2;"">void</span> <span style=""color: #cae682;"">btn_DoWork_Click</span>(<span style=""color: #cae682;"">object</span> <span style=""color: #f6f3e8;"">sender</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">EventArgs</span> <span style=""color: #f6f3e8;"">e</span>)<br /> <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">ShowStatus</span>(<span style=""color: #95e454; font-style: italic;"">""Starting...""</span>);<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">for</span> (<span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>; <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">&lt;</span> <span style=""color: #f6f3e8;"">MaxThraedCount</span>; <span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">++)</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">m_Workers</span><span style=""color: #f6f3e8;"">[</span><span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">]</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #8ac6f2;"">new</span> <span style=""color: #f6f3e8;"">Thread</span>(<span style=""color: #f6f3e8;"">IncreaseNumber</span>) <span style=""color: #f6f3e8;"">{</span> <span style=""color: #f6f3e8;"">Name</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #95e454; font-style: italic;"">""Thread ""</span> <span style=""color: #f6f3e8;"">+</span> (<span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">+</span> <span style=""color: #e5786d;"">1</span>) <span style=""color: #f6f3e8;"">};</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">m_Workers</span><span style=""color: #f6f3e8;"">[</span><span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">].</span><span style=""color: #f6f3e8;"">Start</span>();<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> &nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">m_AutoReset</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Set</span>();<br /> <span style=""color: #f6f3e8;"">}</span><br /> <br /> <span style=""color: #8ac6f2;"">void</span> <span style=""color: #cae682;"">IncreaseNumber</span>()<br /> <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">m_AutoReset</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">WaitOne</span>();<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">for</span> (<span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>; <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">&lt;</span> <span style=""color: #e5786d;"">10000</span>; <span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">++)</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">x</span><span style=""color: #f6f3e8;"">++;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">m_AutoReset</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Set</span>();<br /> <span style=""color: #f6f3e8;"">}</span></pre>
<blockquote>
<p>One notable point is in this case (UI non-blocking) it is not easy to use Monitor.Enter/Monitor.Pulse pair to replace AutoResetEvent and implement ""one by one"" logic becasue Monitor.Pulse won't <strong>maitain state</strong>, below is the description in MSDN:</p>
<div class=""alert"">
<table style=""width: 540px;"" border=""1"" cellspacing=""0"" cellpadding=""0"">
<tbody>
<tr>
<td valign=""top"">
<p><strong>Important</strong></p>
</td>
</tr>
<tr>
<td valign=""top"">
<p>The&nbsp;<a href=""http://msdn.microsoft.com/en-us/library/system.threading.monitor.aspx"">Monitor</a>&nbsp;class does not maintain state indicating that the&nbsp;Pulse&nbsp;method has been called. Thus, if you call&nbsp;Pulse&nbsp;when no threads are waiting, the next thread that calls&nbsp;<a href=""http://msdn.microsoft.com/en-us/library/system.threading.monitor.wait.aspx"">Wait</a>&nbsp;blocks as if&nbsp;Pulse&nbsp;had never been called. If two threads are using&nbsp;Pulse&nbsp;and&nbsp;<a href=""http://msdn.microsoft.com/en-us/library/system.threading.monitor.wait.aspx"">Wait</a>&nbsp;to interact, this could result in a deadlock. Contrast this with the behavior of the&nbsp;<a href=""http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx"">AutoResetEvent</a>&nbsp;class: If you signal an&nbsp;<a href=""http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx"">AutoResetEvent</a>&nbsp;by calling its&nbsp;<a href=""http://msdn.microsoft.com/en-us/library/system.threading.eventwaithandle.set.aspx"">Set</a>&nbsp;method, and there are no threads waiting, the&nbsp;<a href=""http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx"">AutoResetEvent</a>&nbsp;remains in a signaled state until a thread calls&nbsp;<a href=""http://msdn.microsoft.com/en-us/library/system.threading.waithandle.waitone.aspx"">WaitOne</a>,&nbsp;<a href=""http://msdn.microsoft.com/en-us/library/system.threading.waithandle.waitany.aspx"">WaitAny</a>, or&nbsp;<a href=""http://msdn.microsoft.com/en-us/library/system.threading.waithandle.waitall.aspx"">WaitAll</a>. The&nbsp;<a href=""http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx"">AutoResetEvent</a>&nbsp;releases that thread and returns to the unsignaled state.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class=""alert""><br />In my Winform application, if I call Monitor.Pulse() in button click event, many threads will not receive the signal (whereas AutoResetEvent will remain signaled state)! I wrote a simple routine to demonstrate this:</div>
<pre class=""source"" style=""width: 580px; font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">private</span> <span style=""color: #8ac6f2;"">static</span> <span style=""color: #8ac6f2;"">readonly</span> <span style=""color: #cae682;"">string</span> <span style=""color: #f6f3e8;"">_locker</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #95e454; font-style: italic;"">""THREAD_LOCKER""</span>;<br /> <span style=""color: #8ac6f2;"">public</span> <span style=""color: #8ac6f2;"">static</span> <span style=""color: #8ac6f2;"">void</span> <span style=""color: #cae682;"">Main</span>()<br /> <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">for</span>(<span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>;<span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">&lt;</span><span style=""color: #e5786d;"">5</span>;<span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">++)</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">Thread</span> <span style=""color: #f6f3e8;"">t</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #8ac6f2;"">new</span> <span style=""color: #f6f3e8;"">Thread</span>(<span style=""color: #f6f3e8;"">DoWork</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">t</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Name</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #95e454; font-style: italic;"">""T""</span> <span style=""color: #f6f3e8;"">+</span> (<span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">+</span> <span style=""color: #e5786d;"">1</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">t</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">IsBackground</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #8ac6f2;"">true</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">t</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Start</span>();<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> &nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #99968b; font-style: italic;"">//Thread.Sleep(500);</span><br /> &nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">Monitor</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Enter</span>(<span style=""color: #f6f3e8;"">_locker</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">Console</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">WriteLine</span>(<span style=""color: #95e454; font-style: italic;"">""Main thread""</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">Monitor</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Pulse</span>(<span style=""color: #f6f3e8;"">_locker</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">Monitor</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Exit</span>(<span style=""color: #f6f3e8;"">_locker</span>);<br /> <span style=""color: #f6f3e8;"">}</span><br /> <br /> <span style=""color: #8ac6f2;"">private</span> <span style=""color: #8ac6f2;"">static</span> <span style=""color: #8ac6f2;"">void</span> <span style=""color: #cae682;"">DoWork</span>()<br /> <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">Monitor</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Enter</span>(<span style=""color: #f6f3e8;"">_locker</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">Monitor</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Wait</span>(<span style=""color: #f6f3e8;"">_locker</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">Monitor</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Pulse</span>(<span style=""color: #f6f3e8;"">_locker</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">Monitor</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Exit</span>(<span style=""color: #f6f3e8;"">_locker</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">Console</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">WriteLine</span>(<span style=""color: #f6f3e8;"">Thread</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">CurrentThread</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Name</span> <span style=""color: #f6f3e8;"">+</span> <span style=""color: #95e454; font-style: italic;"">"" finished and exist""</span>);<br /> <span style=""color: #f6f3e8;"">}</span></pre>
Removing ""<code>Thread.Sleep(500)</code>"" will *<strong>VERY POSSIBLY</strong>* lead less than 5 thread working, because creating 5 threads requires not short time (kenel object, TEB, kenel/user stack), during the period one just created thread (T2) might get the signal or <strong>might not</strong> (<strong>much more possible</strong>), because when the previously created thread (T1) calling ""Monitor.Pulse(_locker)"" T2 had NOT been setup, T2 and the thread created later <strong>will have no chance to get signal</strong>! They will be waiting... So the 0.5 seconds is used to give time to create 5 thread, otherwise main thread will quit immediately and background thread will be collected.</blockquote>
<h4>Solution #4:&nbsp;Create a temp integer in each thread and once finish add temp onto x under a exclusive lock.</h4>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">private</span> <span style=""color: #8ac6f2;"">readonly</span> <span style=""color: #cae682;"">string</span> <span style=""color: #f6f3e8;"">m_Locker</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #95e454; font-style: italic;"">""THREAD_LOCKER""</span>;<br /> <br /> <span style=""color: #8ac6f2;"">void</span> <span style=""color: #cae682;"">IncreaseNumber</span>(<span style=""color: #cae682;"">object</span> <span style=""color: #f6f3e8;"">objThreadName</span>)<br /> <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">tmp</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>;<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">for</span> (<span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>; <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">&lt;</span> <span style=""color: #e5786d;"">10000</span>; <span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">++)</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">tmp</span><span style=""color: #f6f3e8;"">++;</span><br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">lock</span> (<span style=""color: #f6f3e8;"">m_Locker</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">x</span> <span style=""color: #f6f3e8;"">+=</span> <span style=""color: #f6f3e8;"">tmp</span>;<br /> <span style=""color: #f6f3e8;"">}</span></pre>
<h4>Solution #5:&nbsp;ReaderWriterLockSlim.</h4>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">void</span> <span style=""color: #cae682;"">IncreaseNumber</span>(<span style=""color: #cae682;"">object</span> <span style=""color: #f6f3e8;"">objThreadName</span>)<br /> <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #99968b; font-style: italic;"">// Or we can use ReaderWriterLock.AcquireWriterLock(500) but it has more performance overhead and is not recommended</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">m_ReaderWriterLocker</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">EnterWriteLock</span>(); <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">for</span> (<span style=""color: #cae682;"">int</span> <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>; <span style=""color: #f6f3e8;"">i</span> <span style=""color: #f6f3e8;"">&lt;</span> <span style=""color: #e5786d;"">10000</span>; <span style=""color: #f6f3e8;"">i</span><span style=""color: #f6f3e8;"">++)</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">x</span><span style=""color: #f6f3e8;"">++;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">m_ReaderWriterLocker</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">ExitWriteLock</span>();&nbsp; <span style=""color: #99968b; font-style: italic;"">// Or ReaderWriterLock.ReleaseWriterLock();</span><br /> <span style=""color: #f6f3e8;"">}</span></pre>
<blockquote>
<p>Please note that ReaderWriterLock class is not recommended, it ""take about five times longer to execute than a call to Monitor's Enter method."" please refer:&nbsp;<a href=""http://msdn.microsoft.com/zh-cn/magazine/cc163599(en-us).aspx"" target=""_blank"">Reader/Writer Locks and the ResourceLock Library</a> by Jeffery Richter.</p>
</blockquote>
<h4>Solution #6:&nbsp;Parallel.Forcoordinate with Interlocked.Increment.</h4>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #f6f3e8;"">Parallel</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">For</span>(<span style=""color: #e5786d;"">0</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #e5786d;"">100000</span><span style=""color: #f6f3e8;"">,</span> (<span style=""color: #f6f3e8;"">i</span>) <span style=""color: #f6f3e8;"">=&gt;</span> <span style=""color: #f6f3e8;"">Interlocked</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">Increment</span>(<span style=""color: #8ac6f2;"">ref</span> <span style=""color: #f6f3e8;"">x</span>));</pre>
<h3>Conclusion</h3>
<p>In this post I took a simple &amp; straight-forward example: 10 threads simultaneously operating on on field, to experiment atomicity operation in C#.Net, using synchronization technology including exclusive locking, signaling, non-blocking synchronization, I guess this is a very good example to master basic FCL thread libraries/concepts such as <strong>Interlocked</strong>, <strong>Monitor</strong>, <strong>MemoryBarrier</strong>, <strong>volatile</strong>, <strong>AutoResetEvent</strong>, <strong>ReaderWriterLockSlim</strong>, etc.</p>
<p>Multi-threading programming is indeed very complex, during my investigation I happened to saw even Jon Skeet admitted he had &ldquo;his eyes opened to the precise meaning of volatile which isn't ""always read from main memory, always write directly to main memory"" (<a href=""http://stackoverflow.com/questions/2005211/when-to-use-lock-vs-memorybarrier-in-net#2005237"" target=""_blank"">link</a>), so as a&nbsp;rookie in this field I should invest more effort on it:)</p>
<h3>Further Reading</h3>
<p><a href=""http://www.albahari.com/threading/"" target=""_blank"">Threading In C#</a>&nbsp;(Strongly recommended!!!)</p>
<p><a href=""http://en.wikipedia.org/wiki/Atomic_operation"" target=""_blank"">Linearizability</a>&nbsp;Wikipedia</p>
<p><a href=""http://www.bluebytesoftware.com/blog/PermaLink,guid,c4ea3d6d-190a-48f8-a677-44a438d8386b.aspx"" target=""_blank"">Introducing the new ReaderWriterLockSlim in Orcas</a></p>
<p><a href=""http://www.codeproject.com/KB/cs/AsynchronousCodeBlocks.aspx"" target=""_blank"">Asynchronous Code Blocks</a></p>
<p><a href=""http://odetocode.com/blogs/scott/archive/2006/05/17/atomic-operations.aspx"" target=""_blank"">Atomic Operations</a></p>
<p><a href=""http://drdobbs.com/visualstudio/226900048"" target=""_blank"">Boosting Performance with Atomic Operations in .NET 4</a></p>",31492,2011-10-25 00:13:59.557,1,A
132,Wayne,Rooted my HTC Sensation (G14),Rooted-My-HTC-Sensation,4,"<p>Where there is an Android phone, there are reasons to root it.<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" /></p>
<p>Here I took a note how I rootedmy HTC Sensation (A.K.A G14):</p>
<ol>
<li>Find the S/N on battery, and find HBoot version by holding ""Volumn down"" and long press power down.<br /><img title=""SN No"" src=""https://byfiles.storage.live.com/y1p_c7w3QmpQrEBVlgIFLQDVO1GhYk-grAKpibqu4YuS8IumnLEpeFv5OkfSm9k3z2XMqdQfagCfFe99OJRjdbVJA/My-G14.jpg?psid=1"" alt=""SN No"" width=""399"" height=""456"" />&nbsp;</li>
<li>Install modified HTC drive from: <a href=""http://downloads.unrevoked.com/HTCDriver3.0.0.007.exe"" target=""_blank"">http://downloads.unrevoked.com/HTCDriver3.0.0.007.exe<br /></a></li>
<li>Go to http://revolutionary.io/, get the beta key, run it.<br /><img title=""revoluitionary"" src=""https://byfiles.storage.live.com/y1pOxkWcqrbT89VViNM04HFwzECxx-H67Cxci-j_bsMknxAa83rLQyjC1Fj2zQimCoEWp4u5SlI7rTxnpbR0ClFMQ/revolutionary-working.png?psid=1"" alt=""revoluitionary"" width=""677"" height=""442"" /></li>
<li>S-Off OK</li>
<li>Put PG58IMG.zip under the root location of the SD card.</li>
<li>Reboot to bootloader/HBOOT screen</li>
<li>In bootloader it will prompt to update, press ""Volumn Up"" to select update<br /><img title=""HBoot"" src=""https://byfiles.storage.live.com/y1pOxkWcqrbT8-vgz-9_SkhHlLVyvIVWlhrIlsoewSYlbc0NRnfxYACdea27hIOONAgZqMwq-Jfq2w-D6OJ7Jm7ug/HBoot.jpg?psid=1"" alt=""HBoot"" width=""340"" height=""483"" />&nbsp;</li>
</ol>
<p>Refer more detailed information:</p>
<p><a href=""http://www.androidauthority.com/how-to-root-htc-sensation-21697/"" target=""_blank"">How to Root Your HTC Sensation</a></p>
<p><a href=""http://blog.whitesites.com/How-to-root-a-HTC-Sensation-4G__634514535093906250_blog.htm"" target=""_blank"">How to root a HTC Sensation 4G and Best ROM</a></p>",3340,2011-11-07 03:03:21.083,1,A
133,Wayne,Make your HTML5 Video support all browsers,Make-Your-HTML5-Video-Support-ALL-Browsers,23,"<h3>Introduction</h3>
<p>HTML5 video tag gave us the following advantages:</p>
<ol>
<li>No plugin required, directly play.</li>
<li>Visible &amp; controllable for Browser and search engine, not a ""black box"" such as Flash or SilverLight.</li>
<li>Cross-platform, in theory all PC/mobile browsers as well as Ipad/Windows 8/Android tablet PC.&nbsp;</li>
<li>Downward compatibility. Which is very important, but W3C had made it simple and works, we can smoothly fall back to flash if the user agent does not recognize ""<code>&lt;video&gt;</code>"" tag.</li>
</ol>
<p>So it is simple and pretty cool! However, there is still issues within a not short period: the <strong>browser support</strong> - each concrete browser and the company (ies) behind it supports different formant of videos, to be more specific, refer the table below stole from <a href=""http://webdesign.about.com/od/video/a/html5-video-formats.htm"" target=""_blank"">about.com</a>:</p>
<table style=""width: 100%; border-width: 1px;"" border=""1"" cellspacing=""1"" cellpadding=""2"">
<tbody>
<tr><th>&nbsp;</th><th>Android</th><th colspan=""2"">Chrome</th><th colspan=""2"">Firefox</th><th>Internet Explorer</th><th>iOS</th><th colspan=""2"">Opera</th><th colspan=""2"">Safari</th></tr>
<tr><th>Codec</th><th>&nbsp;</th><th>Win</th><th>Mac</th><th>Win</th><th>Mac</th><th>Win</th><th>&nbsp;</th><th>Win</th><th>Mac</th><th>Win</th><th>Mac</th></tr>
<tr><th>MP4 or H.264</th>
<td>3.0</td>
<td>9</td>
<td>7</td>
<td>X</td>
<td>X</td>
<td>9</td>
<td>3</td>
<td>X</td>
<td>X</td>
<td>5</td>
<td>5</td>
</tr>
<tr><th>ogg/Theora</th>
<td>2.3</td>
<td>9</td>
<td>7</td>
<td>3.6</td>
<td>3.6</td>
<td>X</td>
<td>X</td>
<td>10.63</td>
<td>10.63</td>
<td>X</td>
<td>X</td>
</tr>
<tr><th>WebM</th>
<td>2.3</td>
<td>9</td>
<td>7</td>
<td>3.6</td>
<td>3.6</td>
<td>9 (with<a href=""http://tools.google.com/dlpage/webmmf"" target=""_blank"">components</a>)</td>
<td>X</td>
<td>10.63</td>
<td>10.63</td>
<td>X</td>
<td>X</td>
</tr>
</tbody>
</table>
<p>So to support all browsers: IE 6.0+, Firefox, Chrome, Safari, Opera, etc, what should we do?</p>
<h3>Cross All Browser Implementation</h3>
<p>By searching on the google and half a day investigation, I found the solution, sample code pasted below:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">&lt;video</span> <span style=""color: #cae682;"">controls=</span><span style=""color: #95e454; font-style: italic;"">""controls""</span> <span style=""color: #cae682;"">preload=</span><span style=""color: #95e454; font-style: italic;"">""auto""</span> <span style=""color: #cae682;"">poster=</span><span style=""color: #95e454; font-style: italic;"">""napshot.png""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;source</span> <span style=""color: #cae682;"">src=</span><span style=""color: #95e454; font-style: italic;"">""My Video.mp4""</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""video/mp4""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;source</span> <span style=""color: #cae682;"">src=</span><span style=""color: #95e454; font-style: italic;"">""My Video.webm""</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""video/webm""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;source</span> <span style=""color: #cae682;"">src=</span><span style=""color: #95e454; font-style: italic;"">""My Video.ogv""</span> <span style=""color: #cae682;"">type=</span><span style=""color: #95e454; font-style: italic;"">""video/ogg""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #99968b; font-style: italic;"">&lt;!-- </span><br /> <span style=""color: #99968b; font-style: italic;"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Flash</span><br /> <span style=""color: #99968b; font-style: italic;"">&nbsp;&nbsp;&nbsp; --&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/video&gt;</span></pre>
<p>The code above results in IE 9.0+/Safari will load mp4, Chrome/Firefox&nbsp;and Opera&nbsp;will load webm, and IE 6.0 ~ 8.0 will load flash.</p>
<blockquote>
<p>Note: as browsers may change its attitude on the video format support, so my code &amp; comments might not right in the future. &nbsp;</p>
</blockquote>
<h3>Few tips</h3>
$More$
<p>One important thing is make sure your web server supports those video MIME types, taking IIS as an example, we need to config it to support this by doing following:</p>
<ol>
<li>Open IIS Server Manager (Win+R -&gt; <strong>inetmgr</strong>).</li>
<li>Go to your website, double clicks ""<strong>MIME Type</strong>s"".</li>
<li>Add MIME types: video/mp4, video/webm and video/ogg.<br /><img title=""IIS MIME TYpe"" src=""https://byfiles.storage.live.com/y1puPi36EpVAycD0sRZmOt-dv53vj-nzC7PZqBpn3xykgCAei5yh03c8y_LbpjZKvqaCRZ1RrCYo-4/IIS%20Video%20MIME.png?psid=1"" alt=""IIS MIME TYpe"" width=""356"" height=""201"" />&nbsp;</li>
</ol>
<p>An equivalent way to define those MIME types within your ASP.NET web.config:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">&lt;staticContent&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;mimeMap</span> <span style=""color: #cae682;"">fileExtension=</span><span style=""color: #95e454; font-style: italic;"">"".webm""</span> <span style=""color: #cae682;"">mimeType=</span><span style=""color: #95e454; font-style: italic;"">""video/webm""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;mimeMap</span> <span style=""color: #cae682;"">fileExtension=</span><span style=""color: #95e454; font-style: italic;"">"".ogv""</span> <span style=""color: #cae682;"">mimeType=</span><span style=""color: #95e454; font-style: italic;"">""video/ogg""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;mimeMap</span> <span style=""color: #cae682;"">fileExtension=</span><span style=""color: #95e454; font-style: italic;"">"".mp4""</span> <span style=""color: #cae682;"">mimeType=</span><span style=""color: #95e454; font-style: italic;"">""video/mp4""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;clientCache</span> <span style=""color: #cae682;"">cacheControlMode=</span><span style=""color: #95e454; font-style: italic;"">""UseMaxAge""</span> <span style=""color: #cae682;"">cacheControlMaxAge=</span><span style=""color: #95e454; font-style: italic;"">""30.00:00:00""</span> <span style=""color: #8ac6f2;"">/&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/staticContent&gt;</span></pre>
<p>Another important thing is video converting, I would recommended combinations and steps according to my experience on this:</p>
<ol>
<li>Using <a href=""http://www.any-video-converter.com"" target=""_blank"">Any Video Converter</a> to compress/convert original video file to a flv.</li>
<li>Using&nbsp;<a href=""http://www.getmiro.com"" target=""_blank"">Miro</a> conver the compressed flv to ogv, webm and mp4.<br /><img title=""Miro"" src=""https://byfiles.storage.live.com/y1pQN1-nOOraXtuGrDV5M1txu9yeFeeDGAEuh_ZNzUeAwhBk8qgEP3Gn6Rapv31vtv_u1KgvN_8mXI/Miro.png?psid=1"" alt=""Miro"" width=""371"" height=""432"" />&nbsp;</li>
</ol>
<p>They both are free to use, Miro is actually based on the famous open source <a href=""ffmpeg.org"" target=""_blank"">ffmpeg</a> library which I like very much, Miro is also open source.</p>
<p><a href=""http://en.wikipedia.org/wiki/Stevenote"" target=""_blank"">One more thing</a>:), we can customize video UI by CSS, and there are already a few good open source library to help you:&nbsp;<a href=""http://mediaelementjs.com/"" rel=""external"">MediaElement.js</a>&nbsp;and&nbsp;<a href=""http://videojs.com/"" rel=""external"">VideoJS</a>.&nbsp;</p>
<h3>Live Demo</h3>
<p>My lovely son<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" /></p>
<p><video id=""VideoJS"" width=""640"" height=""480"" controls=""controls"" class=""video-js vjs-paused"" preload=""preload"" poster=""http://wayneye.com/Video/Little-Tiger-Play-Potato/Snapshot.jpg""><source src=""http://wayneye.com/Video/Little-Tiger-Play-Potato/Little-Tiger-Play-Potato.mp4"" type=""video/mp4; codecs=mp4a.40.2"" /><source src=""http://wayneye.com/Video/Little-Tiger-Play-Potato/Little-Tiger-Play-Potato.webm"" type=""video/webm"" /><source src=""http://wayneye.com/Video/Little-Tiger-Play-Potato/Little-Tiger-Play-Potato.ogv"" type=""video/ogg"" /><object id=""VideoJS"" width=""640"" height=""480"" data=""tinymce/jscripts/tiny_mce/plugins/media/moxieplayer.swf"" type=""application/x-shockwave-flash""><param name=""src"" value=""tinymce/jscripts/tiny_mce/plugins/media/moxieplayer.swf"" /><param name=""flashvars"" value=""url=http%3A//wayneye.com/Video/Little-Tiger-Play-Potato/Little-Tiger-Play-Potato.mp4&amp;poster=http%3A//wayneye.com/Video/Little-Tiger-Play-Potato/Snapshot.jpg"" /><param name=""allowfullscreen"" value=""true"" /><param name=""allowscriptaccess"" value=""true"" /></object><script src=""http://wayneye.com/Video/flowplayer/flowplayer-3.2.6.min.js""></script><a href=""http://wayneye.com/Video/Little-Tiger-Play-Potato/Little-Tiger-Play-Potato.flv"" style=""display: block; width: 640px; height: 480px"" id=""modern""> <img class=""Snapshot"" src=""http://wayneye.com/Video/Little-Tiger-Play-Potato/Snapshot.jpg"" alt=""Snapshot"" /> </a><script>
        flowplayer(""modern"", ""http://wayneye.com/Video/flowplayer/flowplayer-3.2.7.swf"", {
            // change the default controlbar to modern
            plugins: {
                controls: {
                    url: 'http://wayneye.com/Video/flowplayer/flowplayer.controls-3.2.5.swf'
                }
            },
            clip: {
                autoPlay: true
            }
        });
    </script></video></p>",4665,2011-11-07 08:35:42.177,1,A
134,Wayne,Honored to Win CodeProject HTML5 competition,Honored-To-Win-CodeProject-HTML5-Competition,14,"<p>Three months ago, my article <a href=""http://www.codeproject.com/KB/HTML/Web-Socket-in-Essence.aspx"" target=""_blank"">&lt;HTML5 WebSocket In Essence&gt;</a> was honored to be named first prize in <a href=""http://www.codeproject.com/script/Awards/Winners.aspx?obtid=2&amp;cmpTpId=3&amp;cid=494"" target=""_blank"">CodeProject HTML5 &amp; CSS3 competion</a>, the award was an Ipad2. To be very honest I was expecting to win a T-Shirt or a CP Mug, if I could get either on I would be really excited, so when I received the email congratulating me I was the winner, you can image how excited and happy I was at that time<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" />.</p>
<p>However, the editor from CodeProject told me they were unable to ship the Ipad2 to China, they could give me equivalent money - $499.99, however after a very short consideration I decided to take the Ipad, absolutely!</p>
<p>So eventually, today, thanks to my co-workers in Cupertino, I got it, below are photos taken from my Sentation:</p>
<h2>First look</h2>
<p><img title=""First look"" src=""https://byfiles.storage.live.com/y1p-UWuNdOsHuzLOIFV6xqTklSbt-mVQzFoFnX6mamohHpabzyPYp8IVS_VSjyTn7GyYUDHWobrIFc/IPad2---First-look.jpg?psid=1"" alt=""First look"" width=""600"" height=""442"" /></p>
<h2>The front</h2>
<p><img title=""The front"" src=""https://byfiles.storage.live.com/y1p5Bmf3S364EVkXwWNpLmGltJeFH9L0D2vlp00OYLCMcwIlaMxyivwLlwrYL5yho-qvfaQXz5nNfE/IPad2---Open.jpg?psid=1"" alt=""The front"" width=""600"" height=""682"" /></p>
<h2>The back</h2>
<p><img title=""The Back"" src=""https://byfiles.storage.live.com/y1p-UWuNdOsHux-7Yt97Zr_L_H-bqR-EzIrBSOP3EY2kzczLJHSTlUrxY-zjS68vMIf5c3-jX2FpcQ/IPad2---Back.jpg?psid=1"" alt=""The back"" width=""600"" height=""821"" /></p>
<h2>The memorable words</h2>
<p><img title=""The memorable words"" src=""https://byfiles.storage.live.com/y1pjx84-NXY1wTW-1Qsf79Kvyc0L3Om0JawNKgYkRllAMyeGe94k8cUFeI0-cbw5Wx6cY6xcEpkQt8/IPad2---Reward-Words.jpg?psid=1"" alt=""The memorable words"" width=""600"" height=""324"" /></p>
<p>There is another ""award"" in fact, now if I google with keywords: &ldquo;<strong>html5 websocket</strong>&rdquo;, my article appears second result<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" />.</p>
<p>&nbsp;</p>",3066,2011-11-14 22:28:52.120,1,A
135,Wayne,慈父形象,A-Loving-Father,30,"<p><img title=""Loving Father"" src=""https://public.bay.livefilestore.com/y1p8mjuU2O08JY2GQTKiccXqe_xQ8YKB98CCeEeu1OjrMJYIs_MeygCMrPjpe0f9r38IV3_7dJJprHHvIckkN7ixg/Loving%20Father.jpg?psid=1"" alt=""Loving Father"" width=""440"" height=""565"" /></p>
<p>老爸粉有爱心，儿子粉可爱<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" />.</p>",2482,2011-12-01 00:19:30.930,1,A
136,Wayne,Windows 8 - Far from perfect,Windows-8-Far-From-Perfect,12,"<p>Recently I spent a few days in investigating Metro App (AKA immersive UI) development, I downloaded &amp; installed VS 2011 Ultimate, watched couple of videos talking about <a href=""http://channel9.msdn.com/Events/BUILD/BUILD2011/PLAT-875T"" target=""_blank"">WinRT</a>, <a href=""http://channel9.msdn.com/Events/BUILD/BUILD2011/APP-409T"" target=""_blank"">Metro App life cycle</a>, <a href=""http://channel9.msdn.com/Events/BUILD/BUILD2011/APP-396T"" target=""_blank"">Living tiles &amp; Notifications</a>, etc. So far, I've encountered many many issues... I had to say:&nbsp;<strong>Windows 8 - Long Way to go</strong><img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -171px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" />.</p>
<p>Below are few examples.</p>
<h3>Metro App failed to got suspended</h3>
<p>This happened when Ben Srour&nbsp;was <a href=""http://channel9.msdn.com/Events/BUILD/BUILD2011/APP-409T"" target=""_blank"">doing the demo at Build conference</a>, I encountered, too. His walking arround was killing explorer process and relaunch it manually, I copied that and my app successfully got suspended (applauding...).</p>
<p><img title=""Suspending issue"" src=""https://nrtjsq.bay.livefilestore.com/y1p_9E_Kz1V9fXhZZLZ38n20QpNPN9fbjOSP8hJNPFB3GN0WetAWKNJI6UsCFDOjt7mfYZ0FwR5zhD_YyJTT-EFSAOgizHWn7A7/Suspend.png?psid=1"" alt=""Suspending issue"" width=""481"" height=""361"" /></p>
<p>From a blackbox point of view, I guess this might be a bug: explorer process failed to suspend metro apps that deployed after process.exe itself.</p>
<h3>Obvious library code defect</h3>
<p>Code snippet below is copied from <code>WinJS.IOHelper.existsFar from</code>&nbsp;- <a href=""http://msdn.microsoft.com/en-us/library/windows/apps/br211700.aspx"" target=""_blank"">MSDN link</a>.&nbsp;</p>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #f6f3e8;"">exists</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #8ac6f2;"">function</span> (<span style=""color: #f6f3e8;"">fileName</span>) <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">return</span> <span style=""color: #8ac6f2;"">this</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">folder</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">getFileAsync</span>(<span style=""color: #f6f3e8;"">fileName</span><span style=""color: #f6f3e8;"">).</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">then</span>(<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">function</span> () <span style=""color: #f6f3e8;"">{</span> <span style=""color: #8ac6f2;"">return</span> <span style=""color: #8ac6f2;"">true</span>; <span style=""color: #f6f3e8;"">},</span> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">function</span> () <span style=""color: #f6f3e8;"">{</span> <span style=""color: #8ac6f2;"">return</span> <span style=""color: #8ac6f2;"">false</span>; <span style=""color: #f6f3e8;"">}</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; );<br /> <span style=""color: #f6f3e8;"">},</span></pre>
<p>What happend? When I call <code>var fileExisted = IOHelper.exists(""FileName.extention"");</code> and the given file does not exists, exception will be thrown inside exists method's inside -&gt; <code>getFileAsync</code>, in which essentially grabs a thread from ThreadPool and does an async IO, FileNotFound exception was thrown at that thread and can be caught by VS debugger, however Metro app will not got affected. This drove me crazy and so far I didn't find a walk arround, I think this is a bug in wwaapp.js version 0.5<strong>.</strong></p>
<h3>Inconsistent between code and documentaiton</h3>
<p>In the Dev Center documentation it clearly claims how to specify your own rules inside&nbsp;<code>ApplicationContentUriRules</code> node.</p>
<pre class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #e5786d;"">&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;Package</span> <span style=""color: #cae682;"">xmlns=</span><span style=""color: #95e454; font-style: italic;"">""http://schemas.microsoft.com/appx/2010/manifest""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> <br /> &nbsp; <span style=""color: #99968b; font-style: italic;"">&lt;!-- Code has been omitted. --&gt;</span><br /> <br /> &nbsp; <span style=""color: #8ac6f2;"">&lt;Applications&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;Application</span> <span style=""color: #cae682;"">Id=</span><span style=""color: #95e454; font-style: italic;"">""MyApp""</span> <span style=""color: #cae682;"">StartPage=</span><span style=""color: #95e454; font-style: italic;"">""default.html""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;VisualElements&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;/VisualElements&gt;</span><br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;ApplicationContentUriRules&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;Rule</span> <span style=""color: #cae682;"">Match=</span><span style=""color: #95e454; font-style: italic;"">""http://*.bing.com/*""</span> <span style=""color: #cae682;"">Type=</span><span style=""color: #95e454; font-style: italic;"">""include""</span><span style=""color: #8ac6f2;"">/&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;/ApplicationContentUriRules&gt;</span><br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;/Application&gt;</span><br /> &nbsp; <span style=""color: #8ac6f2;"">&lt;/Applications&gt;</span><br /> <br /> <span style=""color: #8ac6f2;"">&lt;/Package&gt;</span></pre>
<p>Whereas when I tried that I saw below (click to enlarge):<br /><a title=""Click to enlarge"" href=""https://nrtjsq.bay.livefilestore.com/y1pKL_opBrLzG_qbz1Gyn6MB8dTlIrYxfLcjpf-GFqXyKq132MulAlsjSt08DKjZsPCOLrFw2fqLMSr_zoBEq8wOPsALbwQwKYG/ApplicationContentUris.png?psid=1"" target=""_blank""><img title=""Click to enlarge"" src=""https://nrtjsq.bay.livefilestore.com/y1pKL_opBrLzG_qbz1Gyn6MB8dTlIrYxfLcjpf-GFqXyKq132MulAlsjSt08DKjZsPCOLrFw2fqLMSr_zoBEq8wOPsALbwQwKYG/ApplicationContentUris.png?psid=1"" alt=""URIRules"" width=""640"" height=""144"" /></a>&nbsp;</p>
<h3>Living tiles does not got updated</h3>
<p>This happened in <a href=""http://channel9.msdn.com/Events/BUILD/BUILD2011/APP-396T"" target=""_blank"">Kip Olson's demo at build conference</a>, it was&nbsp;embarrassing. for me, I haven't found a way to get it work so far.</p>
<h3>wwahost.exe hang/refused to work</h3>
<p>This happened many times<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -171px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" />... Every time it refused to work, many metro apps cannot runany more.</p>
<h3>To be continued</h3>
<p>I want to say, those are not my complaints, if I don't like it, I won't wast my time on it. The truth is, Windows 8 will be the <strong>most revolutionary OS</strong> from Microsoft after Windows 95, it <a href=""http://www.pcworld.com/businesscenter/article/230984/how_windows_8_could_change_everything.html"" target=""_blank"">will change everything</a>. I hope so and I believe in it! However, again, there is long way to go<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" src=""http://wayneye.com/Images/invis.gif"" alt=""Smile"" />.</p>",3558,2011-12-01 21:20:26.460,1,A
137,Wayne,【新闻】帝都的空气,Air-Pollution-In-Beijing,7,"<p>新闻链接1：<a href=""http://news.163.com/11/1205/02/7KFQ0EOH00014AED.html"" target=""_blank"">北京大雾 空气一度重度污染</a></p>
<p>新闻链接2：<a href=""http://news.163.com/11/1205/08/7KGCTT7M00014AED.html"" target=""_blank"">北京大雾 PM2.5浓度超极值</a></p>
<p><img title=""帝都的空气"" src=""http://ww3.sinaimg.cn/large/76a6d6a2gw1dnrh1yias4j.jpg"" alt=""帝都的空气"" width=""640"" height=""427"" /></p>
<p><img title=""@BeijingAir"" src=""http://ww3.sinaimg.cn/large/76a6d6a2gw1dnri2ew1vpj.jpg"" alt=""@BeijingAir"" width=""525"" height=""471"" /></p>
<p>几个精彩评论：</p>
<ol>
<li>降低标准，务必维持空气质量良好水平。</li>
<li>官员们应有空气特供吧？</li>
<li>现在环保部门该去罚谁呀？ 罚群众啊！！特别是那些骑自行车的严重污染大户....</li>
</ol>
<p>下面是一个老外拍的关于帝都空气的视频，强烈推荐（可能需要翻墙）。</p>
<p><strong><a href=""http://www.gallagher-photo.com/content/popup/airpollution/index.html"" target=""_blank"">AIR POLLUTION IN BEIJING by Sean Gallagher</a></strong></p>",2739,2011-12-04 18:04:57.693,1,A
138,Wayne,Modify proxy settings using Powershell,Modify-Proxy-Settings-Using-Powershell,28,"<p>To use Live Messenger in the office, I always need to firstly disable my proxy settings, after Live Messenger launched, I need turn it back. Thus everytime I need to change that from ""Internet Options -&gt; Connections -&gt; Lan Settings -&gt;"", check/uncheck the checkboxes, well, this task I need to do at least one time a day, I as a developer should achieve this in a more efficient and convenient way.</p>
<p>By overcoming one problem I wrote a snippet of Powershell cmdlet which does the job perfectly, the steps are:</p>
<ol>
<li>Update proxy settings to ""Automatically detect settings"".</li>
<li>Launch Live Messenger.</li>
<li>Update proxy settings to use proxy.</li>
</ol>
<p>&nbsp;The ""one problem"" I encountered and mentioned above is:</p>
<h3>Where are the registry key(s) to store ""<strong>Automatical configuration</strong>"" section in Lan Settings.</h3>
<p>I firstly tried to use Process Monitor by applying filter to only monitor my IE's process PID, while I did see it updated a number of places (see result outputed by procmon below), some of them are easy to be recognized such as ""ProxyEnable"", ""ProxyOverride"", etc, while I didn't see a obvious palce to store ""Automatically detect settings"".</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> 4:54:31.9881707 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections\DefaultConnectionSettings&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_BINARY, Length: 385, Data: 46 00 00 00 3D 00 00 00 09 00 00 00 15 00 00 00<br /> 4:54:31.9883681 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ProxyEnable&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_DWORD, Length: 4, Data: 0<br /> 4:54:31.9884340 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ProxyServer&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_SZ, Length: 44, Data: proxy.aus.hp.com:8080<br /> 4:54:31.9884568 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ProxyOverride&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_SZ, Length: 60, Data: dummyA.com;dummyB.com;&lt;local&gt;<br /> 4:54:31.9886357 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections\SavedLegacySettings&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_BINARY, Length: 385, Data: 46 00 00 00 B5 02 00 00 09 00 00 00 15 00 00 00<br /> 4:54:31.9899406 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ProxyEnable&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_DWORD, Length: 4, Data: 0<br /> 4:54:31.9899612 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ProxyServer&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_SZ, Length: 44, Data: proxy.aus.hp.com:8080<br /> 4:54:31.9899892 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ProxyOverride&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_SZ, Length: 60, Data: dummyA.com;dummyB.com;&lt;local&gt;<br /> 4:54:31.9901306 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections\SavedLegacySettings&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_BINARY, Length: 385, Data: 46 00 00 00 B6 02 00 00 09 00 00 00 15 00 00 00<br /> 4:54:32.0357094 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Wpad\{65249C59-E027-4F0B-83FF-27DBB0B4E19E}_{B9E1413C-BF8C-444E-8FD0-105D9DD10F49}\WpadDecisionReason&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_DWORD, Length: 4, Data: 0<br /> 4:54:32.0358754 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Wpad\{65249C59-E027-4F0B-83FF-27DBB0B4E19E}_{B9E1413C-BF8C-444E-8FD0-105D9DD10F49}\WpadDecisionTime&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_BINARY, Length: 8, Data: 60 20 7E 00 87 B5 CC 01<br /> 4:54:32.0360316 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Wpad\{65249C59-E027-4F0B-83FF-27DBB0B4E19E}_{B9E1413C-BF8C-444E-8FD0-105D9DD10F49}\WpadDecision&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_DWORD, Length: 4, Data: 1<br /> 4:54:32.0362007 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Wpad\{65249C59-E027-4F0B-83FF-27DBB0B4E19E}_{B9E1413C-BF8C-444E-8FD0-105D9DD10F49}\WpadNetworkName&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_SZ, Length: 24, Data: cpqcorp.net<br /> 4:54:32.5961530 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\EnableAutodial&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_DWORD, Length: 4, Data: 0<br /> 4:54:32.5961684 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\NoNetAutodial&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_DWORD, Length: 4, Data: 0<br /> 4:54:32.5969457 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ProxyEnable&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_DWORD, Length: 4, Data: 0<br /> 4:54:32.5969722 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ProxyServer&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_SZ, Length: 44, Data: proxy.aus.hp.com:8080<br /> 4:54:32.5969907 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ProxyOverride&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_SZ, Length: 60, Data: dummyA.com;dummyB.com;&lt;local&gt;<br /> 4:54:32.5971154 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections\SavedLegacySettings&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_BINARY, Length: 385, Data: 46 00 00 00 B7 02 00 00 09 00 00 00 15 00 00 00<br /> 4:54:32.9694553 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections\DefaultConnectionSettings&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_BINARY, Length: 641, Data: 46 00 00 00 3E 00 00 00 09 00 00 00 15 00 00 00<br /> 4:54:32.9696389 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Wpad\WpadLastNetwork&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_SZ, Length: 156, Data: {65249C59-E027-4F0B-83FF-27DBB0B4E19E}_{B9E1413C-BF8C-444E-8FD0-105D9DD10F49}<br /> 4:54:39.7267907 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ProxyEnable&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_DWORD, Length: 4, Data: 0<br /> 4:54:39.7268135 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ProxyServer&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_SZ, Length: 44, Data: proxy.aus.hp.com:8080<br /> 4:54:39.7268366 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\ProxyOverride&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_SZ, Length: 60, Data: dummyA.com;dummyB.com;&lt;local&gt;<br /> 4:54:39.7270232 PM&nbsp;&nbsp;&nbsp; iexplore.exe&nbsp;&nbsp;&nbsp; 2992&nbsp;&nbsp;&nbsp; RegSetValue&nbsp;&nbsp;&nbsp; HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections\SavedLegacySettings&nbsp;&nbsp;&nbsp; SUCCESS&nbsp;&nbsp;&nbsp; Type: REG_BINARY, Length: 641, Data: 46 00 00 00 BE 02 00 00 09 00 00 00 15 00 00 00</pre>
<p>By a short time googling I found the answer on the awesome <a href=""http://stackoverflow.com/questions/1674119/what-key-in-windows-registry-disables-ie-connection-parameter-automatically-det"" target=""_blank"">StackOverFlow</a>, the ""Automatical configuration"" setting is stored in:</p>
<blockquote><span style=""font-size: x-small;""><em>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections\DefaultConnectionSettings</em></span></blockquote>
<p>And the tricky part is, it is a Reg_Binary value, and the 9<sup>th</sup>&nbsp;binary number indicates the value of the two checkboxes, that is:</p>
<blockquote>01 - neither of those 2 auto config boxes are checked <br /><br />05 - just the Use automatic configuration script is checked <br /><br />09 - just the Automatically detect settings is checked <br /><br />0d - both of them are checked</blockquote>
<p>&nbsp;By knowing this I am ready to write my Cmdlet code, I pasted below:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> # <span style=""color: #e5786d;"">1</span>.Modify proxy settings to <span style=""color: #95e454; font-style: italic;"">""Automatically detect settings""</span>. i.e. Disable proxy<br /> <span style=""color: #8ac6f2;"">CD</span> HKCU:\<span style=""color: #95e454; font-style: italic;"">""Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections""</span><br /> <span style=""color: #8ac6f2;"">Set</span>-Itemproperty . DefaultConnectionSettings -Value ([byte[]](<span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">46</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">39</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">09</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">15</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">70</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">72</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>F<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">78</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">79</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">2</span>E<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">61</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">75</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">73</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">2</span>E<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">68</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">70</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">2</span>E<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">63</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>F<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">3</span>A<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">38</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">30</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">38</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">30</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">1</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">64</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">75</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">79</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">41</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">2</span>E<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">63</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>F<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">3</span>B<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">64</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">75</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">79</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">42</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">2</span>E<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">63</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>F<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">3</span>B<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">3</span>C<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>C<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>F<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">63</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">61</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>C<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">3</span>E<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">01</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">17</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">68</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">74</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">74</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">70</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">3</span>A<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">2</span>F<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">2</span>F<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">61</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">75</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">74</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>F<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">63</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">61</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">63</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">68</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">65</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">2</span>E<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">68</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">70</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">2</span>E<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">63</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>F<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>xA<span style=""color: #e5786d;"">0</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">9</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>xC<span style=""color: #e5786d;"">6</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">4</span>C<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>B<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>xB<span style=""color: #e5786d;"">5</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>xCC<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">01</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">02</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">17</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">20</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">02</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">10</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>xBB<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">56</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">80</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">10</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>xBB<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">56</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">80</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">02</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">10</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>xBB<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">56</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">80</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span>))<br /> <br /> <span style=""color: #8ac6f2;"">CD</span> HKCU:\<span style=""color: #95e454; font-style: italic;"">""Software\Microsoft\Windows\CurrentVersion\Internet Settings""</span><br /> <span style=""color: #8ac6f2;"">Set</span>-ItemProperty . ProxyEnable <span style=""color: #e5786d;"">0</span><br /> <br /> # <span style=""color: #e5786d;"">2</span>.Launch Live Messenger<br /> Start-Process <span style=""color: #95e454; font-style: italic;"">""C:\Program Files (x86)\Windows Live\Messenger\msnmsgr.exe""</span><br /> <br /> # <span style=""color: #e5786d;"">3</span>.Sleep <span style=""color: #e5786d;"">10</span> seconds to allow live messenger signed in<br /> Start-Sleep -s <span style=""color: #e5786d;"">10</span><br /> <br /> # <span style=""color: #e5786d;"">4</span>.Restore proxy back<br /> <span style=""color: #8ac6f2;"">CD</span> HKCU:\<span style=""color: #95e454; font-style: italic;"">""Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections""</span><br /> <span style=""color: #8ac6f2;"">Set</span>-Itemproperty . DefaultConnectionSettings -Value ([byte[]](<span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">46</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">39</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">01</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">15</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">70</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">72</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>F<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">78</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">79</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">2</span>E<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">61</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">75</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">73</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">2</span>E<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">68</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">70</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">2</span>E<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">63</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>F<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">3</span>A<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">38</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">30</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">38</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">30</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">1</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">64</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">75</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">79</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">41</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">2</span>E<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">63</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>F<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">3</span>B<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">64</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">75</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">79</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">42</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">2</span>E<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">63</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>F<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>D<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">3</span>B<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">3</span>C<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>C<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>F<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">63</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">61</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">6</span>C<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">3</span>E<span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">01</span><span style=""color: #f6f3e8;"">,</span><span style=""color: #e5786d;"">0</span>x<span style=""color: #e5786d;"">00</span><span style=""color: #",14343,2011-12-08 01:54:41.917,1,A
139,Wayne,Resolving mouseover/mouseout multi-trigger problem,Resolving-mouseover-mouseout-Multi-Trigger-Problem,22,"<h3>Background</h3>
<p>While I was developing my blog's comments function, I hope reader can write down their Gravatar&nbsp;email address, and my preferable UI was an ""hint icon"" dispolayed desides the Email textbox, so that while reader mouse overs it an overlay box will show the reason why Email is required, in additional, I want to add a little bit fancier animation:</p>
<ul>
<li>When user's mouse hovers on the icon, show the div box from small to large, once reaches predefined size, fades in the hint sentente.</li>
<li>When mouse out the icon, fades out the hint sentence and then hides the div from large to small.</li>
</ul>
<p>My requirement seems easy, however, I did spend two whole days in making it perfect, so I write down my investigation path here.&nbsp;</p>
<h3>The problems I faced</h3>
<p>My first thoughts was definitely simple, subscribe the onmouseover/onmouseout event for the hint icon, and setinterval the size animation, once finished, fades in the texts.</p>
<p>That's fine! But I soon encountered one problem which is easy to trigger: mouse keeps on overing/outing the icon quickly (as long as the interval is shorter than the sizing animation), it will cause the two event handlers (mouseover/mouseout) multi-triggered so that a infinite loop could be easily caused.</p>
<blockquote>
<p>The multi-trigger problem I faced is not the one related with DOM event bubbling, which is well described in <a href=""http://api.jquery.com/mouseover/"" target=""_blank"">jQuery mouseover API</a>.</p>
<p>Majority functions on my simple blog didn't use any third party JS library including jQuery, instead, I was trying to be a ""rambo"", just for improving my coding skills - by implementing various kinds of features and resolving various kinds of problems.</p>
</blockquote>
<p>Overcoming this issue cost me one whole day:) I tried strategies listed below:</p>
<ol>
<li>Put global variables indicating the showing/hiding process - isShowing &amp; isHiding.</li>
<li>Clearing oppositeinterval handle as soon as over/out event was triggered.</li>
<li>Inspired by #2, unsubscribing oppotite event handler as soon as mouseover/mouseout was captured.</li>
</ol>
<p>#1 does not solve the problem, I tried while multi-triggered, the interval cannot be cleared (not very sure the reason), #2 absolutely not work because it will stop unfinished animation. Finally I resolved the problem using #3, which I think it is the best one.&nbsp;</p>
<h3>Implementation</h3>
<h4>The HTML</h4>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">&lt;div</span> <span style=""color: #cae682;"">id=</span><span style=""color: #95e454; font-style: italic;"">""hintContainer""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;div</span> <span style=""color: #cae682;"">id=</span><span style=""color: #95e454; font-style: italic;"">""hintIcon""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;img</span> <span style=""color: #cae682;"">src=</span><span style=""color: #95e454; font-style: italic;"">""../Images/Hint.gif""</span> <span style=""color: #cae682;"">alt=</span><span style=""color: #95e454; font-style: italic;"">""Email Hint""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;/div&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;div</span> <span style=""color: #cae682;"">id=</span><span style=""color: #95e454; font-style: italic;"">""CommentHint""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;div</span> <span style=""color: #cae682;"">id=</span><span style=""color: #95e454; font-style: italic;"">""hintText""</span><span style=""color: #8ac6f2;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Required (not shown), used only for displaying <span style=""color: #8ac6f2;"">&lt;strong&gt;</span>Gravatar<span style=""color: #8ac6f2;"">&lt;/strong&gt;</span> and receiving<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; future notification when new comment(s) posted on this blog.<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;/div&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">&lt;/div&gt;</span><br /> <span style=""color: #8ac6f2;"">&lt;/div&gt;</span></pre>
<h4>The CSS</h4>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #f6f3e8;"">&lt;</span><span style=""color: #8ac6f2;"">style</span> <span style=""color: #8ac6f2;"">type</span><span style=""color: #f6f3e8;"">=</span><span style=""color: #95e454; font-style: italic;"">""text/css""</span><span style=""color: #f6f3e8;"">&gt;</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #cae682;"">#hintContainer</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">width</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">184px</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">height</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">80px</span>;<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #cae682;"">#hintIcon</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">width</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">16px</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">height</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">16px</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">float</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #8ac6f2;"">left</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">cursor</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #8ac6f2;"">pointer</span>;<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #cae682;"">#CommentHint</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">position</span><span style=""color: #f6f3e8;"">:</span><span style=""color: #8ac6f2;"">absolute</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">color</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">#fff</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">width</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">0</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">height</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">0</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">background-color</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #f6f3e8;"">black</span>; <span style=""color: #99968b; font-style: italic;"">/*#adc7ed*/</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">border</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">1px</span> <span style=""color: #8ac6f2;"">dotted</span> <span style=""color: #e5786d;"">#666</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">padding</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">2px</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">display</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #8ac6f2;"">none</span>;<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #cae682;"">#hintText</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">opacity</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">0</span>;<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">filter</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #f6f3e8;"">Alpha</span>(<span style=""color: #8ac6f2;"">opacity</span><span style=""color: #f6f3e8;"">=</span><span style=""color: #e5786d;"">0</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> <span style=""color: #f6f3e8;"">&lt;/</span><span style=""color: #8ac6f2;"">style</span><span style=""color: #f6f3e8;"">&gt;</span></pre>
<h4>The JavaScript</h4>
<p>Foundation methods in my ""rambo"" library:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">var</span> <span style=""color: #f6f3e8;"">$id</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #8ac6f2;"">function</span> (<span style=""color: #f6f3e8;"">id</span>) <span style=""color: #f6f3e8;"">{</span> <span style=""color: #8ac6f2;"">return</span> <span style=""color: #f6f3e8;"">document</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">getElementById</span>(<span style=""color: #f6f3e8;"">id</span>); <span style=""color: #f6f3e8;"">}</span><br /> <span style=""color: #8ac6f2;"">function</span> <span style=""color: #f6f3e8;"">bindEvent</span>(<span style=""color: #f6f3e8;"">domObj</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">eventName</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">evtHandler</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">useCapture</span>) <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">if</span> (<span style=""color: #f6f3e8;"">domObj</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">addEventListener</span>) <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">domObj</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">addEventListener</span>(<span style=""color: #f6f3e8;"">eventName</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">evtHandler</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">useCapture</span> <span style=""color: #f6f3e8;"">?</span> <span style=""color: #f6f3e8;"">useCapture</span> <span style=""color: #f6f3e8;"">:</span> <span style=""color: #8ac6f2;"">false</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">else</span> <span style=""color: #8ac6f2;"">if</span> (<span style=""color: #f6f3e8;"">domObj</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">attachEvent</span>) <span style=""color: #f6f3e8;"">{</span> <span style=""color: #99968b; font-style: italic;"">// IE 8 and below</span> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">evtHandler</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">wrapper</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #8ac6f2;"">function</span> () <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">evtHandler</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">call</span>(<span style=""color: #f6f3e8;"">domObj</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">};</span><br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">domObj</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">attachEvent</span>(<span style=""color: #95e454; font-style: italic;"">""on""</span> <span style=""color: #f6f3e8;"">+</span> <span style=""color: #f6f3e8;"">eventName</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">evtHandler</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">wrapper</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> <span style=""color: #f6f3e8;"">}</span><br /> <span style=""color: #8ac6f2;"">function</span> <span style=""color: #f6f3e8;"">setSize</span>(<span style=""color: #f6f3e8;"">ele</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">width</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">height</span>) <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">ele</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">style</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">width</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #f6f3e8;"">width</span> <span style=""color: #f6f3e8;"">+</span> <span style=""color: #95e454; font-style: italic;"">'px'</span>;<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">ele</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">style</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">height</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #f6f3e8;"">height</span> <span style=""color: #f6f3e8;"">+</span> <span style=""color: #95e454; font-style: italic;"">'px'</span>;<br /> <span style=""color: #f6f3e8;"">}</span><br /> <span style=""color: #8ac6f2;"">function</span> <span style=""color: #f6f3e8;"">setPosition</span>(<span style=""color: #f6f3e8;"">ele</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">left</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">top</span>) <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">ele</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">style</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">left</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #f6f3e8;"">left</span> <span style=""color: #f6f3e8;"">+</span> <span style=""color: #95e454; font-style: italic;"">'px'</span>;<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">ele</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">style</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">top</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #f6f3e8;"">top</span> <span style=""color: #f6f3e8;"">+</span> <span style=""color: #95e454; font-style: italic;"">'px'</span>;<br /> <span style=""color: #f6f3e8;"">}</span></pre>
<p>Animation methods:</p>
<pre class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""> <span style=""color: #8ac6f2;"">var</span> <span style=""color: #f6f3e8;"">hintIcon</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #f6f3e8;"">$id</span>(<span style=""color: #95e454; font-style: italic;"">'hintIcon'</span><span style=""color: #f6f3e8;"">),</span> <span style=""color: #f6f3e8;"">commentHint</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #f6f3e8;"">$id</span>(<span style=""color: #95e454; font-style: italic;"">'CommentHint'</span><span style=""color: #f6f3e8;"">),</span> <span style=""color: #f6f3e8;"">hintText</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #f6f3e8;"">$id</span>(<span style=""color: #95e454; font-style: italic;"">'hintText'</span>);<br /> <span style=""color: #f6f3e8;"">bindEvent</span>(<span style=""color: #f6f3e8;"">hintIcon</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #95e454; font-style: italic;"">""mouseover""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">showHint</span>);<br /> <br /> <span style=""color: #8ac6f2;"">var</span> <span style=""color: #f6f3e8;"">totalFrames</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">20</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">curFrame</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>;<br /> <span style=""color: #8ac6f2;"">var</span> <span style=""color: #f6f3e8;"">sliceWidth</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">180</span> <span style=""color: #f6f3e8;"">/</span> <span style=""color: #f6f3e8;"">totalFrames</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">sliceHeight</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">80</span> <span style=""color: #f6f3e8;"">/</span> <span style=""color: #f6f3e8;"">totalFrames</span>;<br /> <span style=""color: #8ac6f2;"">var</span> <span style=""color: #f6f3e8;"">showHinthandler</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #f6f3e8;"">hideHinthandler</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #8ac6f2;"">undefined</span>;<br /> <span style=""color: #8ac6f2;"">var</span> <span style=""color: #f6f3e8;"">offset</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">10</span>;<br /> <br /> <span style=""color: #8ac6f2;"">function</span> <span style=""color: #f6f3e8;"">showHint</span>(<span style=""color: #f6f3e8;"">evt</span>) <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">if</span> (<span style=""color: #f6f3e8;"">!</span><span style=""color: #f6f3e8;"">evt</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">evt</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #f6f3e8;"">window</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">event</span>;<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #99968b; font-style: italic;"">// Unbind mouseover immediately to prevent multi-trigger</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">unbindEvent</span>(<span style=""color: #8ac6f2;"">this</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #95e454; font-style: italic;"">""mouseover""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">showHint</span>);<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">setPosition</span>(<span style=""color: #f6f3e8;"">commentHint</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">evt</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">clientX</span> <span style=""color: #f6f3e8;"">+</span> <span style=""color: #f6f3e8;"">offset</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">evt</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">clientY</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">showElement</span>(<span style=""color: #f6f3e8;"">commentHint</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">showElement</span>(<span style=""color: #f6f3e8;"">hintText</span>);<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">showHinthandler</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #f6f3e8;"">setInterval</span>(<span style=""color: #8ac6f2;"">function</span> () <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #99968b; font-style: italic;"">//console.log(""show: "" + curFrame);</span><br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">if</span> (<span style=""color: #f6f3e8;"">++</span><span style=""color: #f6f3e8;"">curFrame</span> <span style=""color: #f6f3e8;"">&lt;=</span> <span style=""color: #f6f3e8;"">totalFrames</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">setSize</span>(<span style=""color: #f6f3e8;"">commentHint</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">sliceWidth</span> <span style=""color: #f6f3e8;"">*</span> <span style=""color: #f6f3e8;"">curFrame</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">sliceHeight</span> <span style=""color: #f6f3e8;"">*</span> <span style=""color: #f6f3e8;"">curFrame</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">else</span> <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">clearInterval</span>(<span style=""color: #f6f3e8;"">showHinthandler</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">curFrame</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #f6f3e8;"">totalFrames</span>;<br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #99968b; font-style: italic;"">// Fade in hint text</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">divFadeIn</span>(<span style=""color: #f6f3e8;"">hintText</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #e5786d;"">2</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #e5786d;"">10</span>);<br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #99968b; font-style: italic;"">// Bind mouseout event back to the icon UNTIL finished showing</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">bindEvent</span>(<span style=""color: #f6f3e8;"">hintIcon</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #95e454; font-style: italic;"">""mouseout""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">hideHint</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">},</span> <span style=""color: #e5786d;"">10</span>);<br /> <span style=""color: #f6f3e8;"">}</span><br /> <span style=""color: #8ac6f2;"">function</span> <span style=""color: #f6f3e8;"">hideHint</span>(<span style=""color: #f6f3e8;"">evt</span>) <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">if</span> (<span style=""color: #f6f3e8;"">!</span><span style=""color: #f6f3e8;"">evt</span>)<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">evt</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #f6f3e8;"">window</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">event</span>;<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #99968b; font-style: italic;"">// Unbind mouseover immediately to prevent multi-trigger</span><br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">unbindEvent</span>(<span style=""color: #8ac6f2;"">this</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #95e454; font-style: italic;"">""mouseout""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">hideHint</span>);<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">divFadeOut</span>(<span style=""color: #f6f3e8;"">hintText</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #e5786d;"">2</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #e5786d;"">10</span>);<br /> <br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">setTimeout</span>(<span style=""color: #8ac6f2;"">function</span> () <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">hideHinthandler</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #f6f3e8;"">setInterval</span>(<span style=""color: #8ac6f2;"">function</span> () <span style=""color: #f6f3e8;"">{</span><br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">hideElement</span>(<span style=""color: #f6f3e8;"">hintText</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">console</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">log</span>(<span style=""color: #95e454; font-style: italic;"">""hide: ""</span> <span style=""color: #f6f3e8;"">+</span> <span style=""color: #f6f3e8;"">curFrame</span>);<br /> <br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">if</span> (<span style=""color: #f6f3e8;"">--</span><span style=""color: #f6f3e8;"">curFrame</span> <span style=""color: #f6f3e8;"">&gt;=</span> <span style=""color: #e5786d;"">0</span>) <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">setSize</span>(<span style=""color: #f6f3e8;"">commentHint</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">sliceWidth</span> <span style=""color: #f6f3e8;"">*</span> <span style=""color: #f6f3e8;"">curFrame</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">sliceHeight</span> <span style=""color: #f6f3e8;"">*</span> <span style=""color: #f6f3e8;"">curFrame</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #8ac6f2;"">else</span> <span style=""color: #f6f3e8;"">{</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">clearInterval</span>(<span style=""color: #f6f3e8;"">hideHinthandler</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">curFrame</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span>;<br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">hideElement</span>(<span style=""color: #f6f3e8;"">commentHint</span>);<br /> <br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #99968b; font-style: italic;"">// Bind mouseover event back to the icon UNTIL finished hiding</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">bindEvent</span>(<span style=""color: #f6f3e8;"">hintIcon</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #95e454; font-style: italic;"">""mouseover""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">showHint</span>);<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">}</span><br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">},</span> <span style=""color: #e5786d;"">10</span>);<br /> &nbsp;&nbsp;&nbsp; <span style=""color: #f6f3e8;"">},</span> <span style=""color: #e5786d;"">800</span>);<br /> <span style=""color: #f6f3e8;"">}</span></pre>
<h3>Conclusion</h3>
<p>I guess this is a pretty good problem for interview, I am fool so I cannot resolve it in short period, however, I think good fronteers should solve it greatly:)</p>",4607,2011-12-23 01:52:20.610,1,A
140,Wayne,12306，你能再操蛋一点吗？,12306-Can-You-Suck-less,5,"<p>#12306#，在此&ldquo;非常时刻&rdquo;，请你把页面顶端的flash banner去掉，把形式主义的flash&ldquo;站车风采&rdquo;去掉，请你把服务器端人为设置的登录人数和订单数量限制改得&ldquo;合理&rdquo;一些，请多部署几台服务器。毕竟，这关系到千千万万个家庭的幸福，HXSH的基本组成单元！</p>
$More$
<p><img title=""Timeout2"" src=""https://public.bay.livefilestore.com/y1pAJF9uc4H4hVVe2ZSRA8kFVjIk4HqrUMEgV7oqujrGQLBvKDYWDuf-xR11p8v5Cj2PBcJZXVfJb_odr1hsO7Xhw/erbi.png?psid=1"" alt=""Timeout2"" width=""640"" height=""545"" /></p>
<p><img title=""Timeout1"" src=""https://public.bay.livefilestore.com/y1p0IYcHi3GgdTHqaZmKt8ameKTTHXFTNB37BzpG2_Oldn0GuDTMXILhEH_5xo8Pr_bkxaaYTgBqouCtsENJC9CcQ/timeout2.png?psid=1"" alt=""Timeout1"" width=""640"" height=""381"" /></p>
<p><img title=""Timeout3"" src=""https://public.bay.livefilestore.com/y1p8MN0lx5waC6sJT6Lqw_0nhlapE3tnU3kiO9rHRcijiw0ZhWAZ5rU26Xf-tUR20rGgPKRgQGYtpDNlAc68KIZCw/sbsb.png?psid=1"" alt=""Timeout3"" width=""384"" height=""171"" /></p>
<p>&nbsp;</p>
<p>鄙人奋斗1个多小时，终于来到订单成功页面，点击支付---------等待了10秒-----------奇迹发生了，连个网银选择页面也没看到，直接就：</p>
<p><img src=""https://public.bay.livefilestore.com/y1p8MN0lx5waC7Fuhmp1oZkcNIR4eRKZydiK6MRiwIpaUbpVKwz--aRVdRfAiO1r3VBij9hsaKXWHsoBHACufiknA/fucker.png?psid=1"" alt=""Failed to pay"" width=""454"" height=""183"" /></p>
<p>后来终于付款成功，结果从网银返回这垃圾站时，它居然再次弹出上面的“付款失败”，我晕厥了，好在刷新一下又奇迹地变为“恭喜”：</p>
<p><img src=""https://public.bay.livefilestore.com/y1pZploJ3M-odiYO3N9e_Jnm1aKbwMyEq1EZRULhj1ghWl-Df3xd6n2awPOH_r1Fm-3MRiRNbtPSEbCylcQOGYV8A/success.png?psid=1"" /></p>
<p>页脚也雷倒了上了十几年网的鄙人：</p>
<p><img src=""https://public.bay.livefilestore.com/y1pgietPv3rNPaIhNIXhjJ3T8SpMfJLCZ7N69P9gQRWxaxjgsoqjSTYZYETCYHhcFAxRlkVovFK09eAL2JXV2F4xg/copyright.png?psid=1"" alt=""copy"" width=""370"" height=""64"" /></p>
<p>有句成语，贬义的。</p>
<p><span style=""color: #ff0000; font-family: 'arial black', 'avant garde'; font-size: large;""><strong>罄竹难书</strong></span></p>",3293,2012-01-05 21:57:58.970,1,A
141,Wayne,Honored to be CodeProject MVP 2012,Honored-To-Be-CodeProject-MVP-2012,14,"<p><img title=""CodeProject MVP 2012"" src=""https://public.bay.livefilestore.com/y1pzlOHAdhuR_9wGjnvZxrmBF_P8suUR_C3w8cSNppcw8BOtqDclkvMuDiswWR25fgH6P6-FLdNC8sDipK5LLa8dA/CP%20-%20MVP.gif?psid=1"" alt=""CodeProject MVP 2012"" width=""100"" height=""100"" /></p>
<p><span>It is a huge honor for me, I appreciate the recognition from the CodeProject team, and I believe this is not only a recognition but also a kind of&nbsp;encourage,&nbsp;</span>I&nbsp;will&nbsp;definitely try my best to work harder in the coming 2012:)</p>
$More$
<p><img title=""The MVP Certificate"" src=""https://public.bay.livefilestore.com/y1phOrvX0p_TvsTzFLxKH-KuyzNd-YdEejKN0yKHXDG1ROUlx6Q4IiA5vLGBJGPGiJBIHmb0HSA7t8UFc5doOPDhg/_DSC0507.jpg?psid=1"" alt=""The MVP Certificate"" width=""640"" height=""473"" /></p>
<h3><a href=""http://www.codeproject.com/script/Awards/MVPWinners.aspx"" target=""_blank"">CodeProject MVP List 2012</a></h3>
<p><a href=""http://www.codeproject.com/script/Awards/MVPWinners.aspx"" target=""_blank""><br /></a><a href=""https://public.bay.livefilestore.com/y1pURNwjpUl_VqCRpSo18Lyj_iQkcjRS-YGX9h3MSjCsIiuSTsu8AViPZD_NSf-0OYHAIelA3GzUyaps2PNzjmjWg/CP-MVP-2012.png?psid=1"" target=""_blank""><img title=""MVP List 2012"" src=""https://public.bay.livefilestore.com/y1pURNwjpUl_VqCRpSo18Lyj_iQkcjRS-YGX9h3MSjCsIiuSTsu8AViPZD_NSf-0OYHAIelA3GzUyaps2PNzjmjWg/CP-MVP-2012.png?psid=1"" alt=""MVP List 2012"" width=""200"" height=""381"" /></a></p>
<h3><a href=""http://www.codeproject.com/Members/Wayne-Ye"" target=""_blank"">My current profile<br /></a><br /><a title=""My current profile"" href=""https://public.bay.livefilestore.com/y1pZCYOThge5e1iVlJXujtpgmQe-RqMftunoLwVwsyfMgyo3mwkPAzZuPs-5KTZyF1C8-RDge1eFo27at7620sQvg/Wayne%20Ye%20-%20Professional%20Profile.png?psid=1"" target=""_blank""><img title=""My current profile"" src=""https://public.bay.livefilestore.com/y1pZCYOThge5e1iVlJXujtpgmQe-RqMftunoLwVwsyfMgyo3mwkPAzZuPs-5KTZyF1C8-RDge1eFo27at7620sQvg/Wayne%20Ye%20-%20Professional%20Profile.png?psid=1"" alt=""My current profile"" width=""480"" height=""346"" /></a>&nbsp;</h3>
<p>2011 is an inflection point of my life, I <a href=""http://wayneye.com/Blog/Freshman-Father"" target=""_blank"">became a father</a>, forced by the presure, I started working really hard:) Below are few articles I posted on CodeProject, I also summarized my articles in <a href=""http://wayneye.com/Shelf"" target=""_blank"">my shelf</a>.</p>
<ul>
<li><strong><a id=""ctl00_MC_AR_ctl09_CAR_Title"" href=""http://www.codeproject.com/Articles/124981/A-Complete-Impersonation-Demo-in-C-NET"">A Complete Impersonation Demo in C#.NET</a></strong></li>
<li><strong><a id=""ctl00_MC_AR_ctl00_CAR_Title"" href=""http://www.codeproject.com/Articles/230177/JavaScript-Foundation-of-the-Language"">JavaScript - Foundation of the Language</a></strong></li>
<li><strong><a id=""ctl00_MC_AR_ctl05_CAR_Title"" href=""http://www.codeproject.com/Articles/209041/HTML5-Web-Socket-in-Essence"">HTML5 Web Socket in Essence</a></strong></li>
<li><strong><a id=""ctl00_MC_AR_ctl04_CAR_Title"" href=""http://www.codeproject.com/Articles/162783/HTML5-Web-Storage-in-Essence"">HTML5 Web Storage in Essence</a></strong></li>
<li><strong><a id=""ctl00_MC_AR_ctl03_CAR_Title"" href=""http://www.codeproject.com/Articles/248264/HTML5-WebMessaging-Experiment"">HTML5 WebMessaging Experiment</a></strong></li>
</ul>
<h3>Now what?</h3>
<p>I know next time I won't be so lucky... I know who I am: a bastard who spent 10 hours per day in Counter-Strike during University time, an asinine guy who is extremely stupid on the most basic algorithm problems. Hum....&nbsp; I must work harder in the future to hold the luck!</p>
<p>2012 is the year of dragon in Chinese Zodiac, I wish a wonderful and successful 2012 for me and Wendy and our little tiget! And I wish I could be a small but strong dragon in 2012:)</p>
<p><img title=""Year of the dragon"" src=""https://public.bay.livefilestore.com/y1pmp055PL4ZEhFBjrcbRd3ocooeMnOByNEvjwB0ygPW239pE5vz3gC_NyK-UDlvWsnO-Apj1Bd_CUolPcIUcyhIA/Dragon-Year-2012.jpg?psid=1"" alt=""Year of the dragon"" width=""700"" height=""495"" /></p>",3864,2012-01-11 23:24:50.450,1,A
142,Wayne,Geek life in ThoughtWorks,Geek-Life-In-ThoughtWorks,2,"<figure><a href=""https://public.bay.livefilestore.com/y1pyzJ5czDHi0S3GVJrMs9ThqZo6OI5w4VbvE4-FVrQfr21C2a2_1JDyW-IiZS6heCVUGgIyOyrpSfRG7q_LWWZvg/_DSC1584.jpg?psid=1"" target=""_blank""><img alt=""ThoughtWorks card on my MacBook Pro"" src=""https://public.bay.livefilestore.com/y1pyzJ5czDHi0S3GVJrMs9ThqZo6OI5w4VbvE4-FVrQfr21C2a2_1JDyW-IiZS6heCVUGgIyOyrpSfRG7q_LWWZvg/_DSC1584.jpg?psid=1"" height=""640"" /></a> <figcaption>ThoughtWorks card on my MacBook Pro (Click to enlarge)</figcaption></figure>
<h2>One month milestone</h2>
$More$
<p>I just experienced my first month in ThoughtWorks, in fact I decided to record my feelings and thoughts even before I joint this incredible company, I believe it would be a unforgettable period of my life. And right now it's the time for me to do it! To document the different and special places of ThoughtWorks from a developer's/geek's eye.</p>
<h2>Culture in ThoughtWorks</h2>
<figure><a href=""https://public.bay.livefilestore.com/y1plaF2nEmrLCdadf1s8TjE9lwvzbWlKBre4Et9YjmMPBrKTzZuLsudKhKXhUgfzXg1w2XjgufFD0NJmVIL-Jbdeg/_DSC1545.jpg?psid=1"" target=""_blank""><img alt=""ThoughtWorks office"" src=""https://public.bay.livefilestore.com/y1plaF2nEmrLCdadf1s8TjE9lwvzbWlKBre4Et9YjmMPBrKTzZuLsudKhKXhUgfzXg1w2XjgufFD0NJmVIL-Jbdeg/_DSC1545.jpg?psid=1"" width=""640"" /></a> <figcaption>ThoughtWorks office (Click to enlarge)</figcaption></figure>
<h3>Pair programming</h3>
<p>My first time pair experience was the interview taken place in ThoughtWorks Xi'an office, which gave my mind a strong shock and I felt I learnt and improved so much just after half hour's pair programming, in other words: ""<strong>level up</strong>"":) (Actually it drove me to make the final decision to join ThoughtWorks), so I was really expecting the pair opportunities before I joining, because I always believe in ""<i>everyone can be my teacher because he/she has his/her expertized knowledge domain!</i>"" and ""<i>two heads are better than one!</i>"". Now one month passed, I paired with every teammate, and the result absolutely proved my belief!</p>
<h3>Software Excellence</h3>
<p>This is the second one of <a href=""http://martinfowler.com/bliki/ThreePillars.html"">The ThreePillars</a> of ThoughtWorks, and it is the one myself deeply believe in and wish to conform! Actually I immediately realized that people here are really trying the best to achieve this point! We spent significant of time in reviewing, thinking and refactoring our code, even testing code! And our CI process cannot tolerance a method without testing code, the test coverage must be 100%! Wow!</p>
<h3>Pure code, no comments!</h3>
<p>After looking through the project code I was working on, I noticed that I barely saw comments, and one time I was pairing with a co-worker, I just supposed to add some comments, my pair told me people here <strong>opposed to write comments</strong> because <strong>human-readable method name/variables/class names make enough sense</strong>, if sometimes you are considering to add comments, you've probably written not so readable code, or in other word: bad code, you'd better consider improve/refactor. Yes! It is reasonable! I recalled one of my motto, said by Chief Scientist of ThoughtWorks Martin Fowler: <strong>""Any foo can write program that a computer can understand, good programmers write code that human can understand.</strong>.</p>
<h3>Agile, BDD, continues integration/delivery</h3>
<p>ThoutghWorkers deeply believe in agile software development, and I experienced a complete process of BDD/TDD, CI, I really enjoyed the advantages the process provides, in fact, that's one of a lot of reasons I joint ThoughtWorks, during my past three years in HP and SAP, the projects I worked on have UT coverage less than 20% by average (few are 0% actually, what a shame...). In ThoughtWorks, this will NEVER happen, everyone here strictly follows process of BDD or TDD, i.e. <strong>test code first!</strong>, and the CI ensures the test coverage to reach 100% otherwise will fail to complete, in additional, the static code analysis tools such as and JSlint will help to improve the code quality! Yeah, I love and deeply believe in all of those stuff, I am confident with the code I've written thus I can sleep well! And so does other teammate:)</p>
<h3 id=""tech-sharing"">Tech sharing!</h3>
<figure><a href=""https://public.bay.livefilestore.com/y1plaF2nEmrLCcXkLoY2yGxQsG8xvU-X8dBuKK_y3-jDguo51-VKtsMWZ8lE58CIIYKrwwDdKV0PnjixKoxvRjioQ/_DSC1553.jpg?psid=1"" target=""_blank""><img alt=""Functional Programming Session"" src=""https://public.bay.livefilestore.com/y1plaF2nEmrLCcXkLoY2yGxQsG8xvU-X8dBuKK_y3-jDguo51-VKtsMWZ8lE58CIIYKrwwDdKV0PnjixKoxvRjioQ/_DSC1553.jpg?psid=1"" width=""640"" /></a> <figcaption>Functional Programming Session (Click to enlarge)</figcaption></figure>
<p>I joint more than 5 technical/non-technical sessions during the past month, topics including JavaScript, functional programming, UX/design, Ruby on Rails and so on, I also shared a session talking about <a href=""http://wayneye.com/PPT/SEO-Best-Practices/index.html#/start"" target=""_blank"">SEO best practices</a>. Mentionable point is, during my past 6 years career, I never had chance to participate sessions reaching this number within a year! Whereas, <strong>I love both learning and sharing</strong>! And that's another ""why"" I joint ThoughtWorks!</p>
<h3>Smart people!</h3>
<p>Indeed! People here are smart! Even beauty programmers:)! I didn't overstate, many people here are really passionate in developing, coding and innovation! Thinking rapidly, typing fast, elegant/scalable solution, programmer's jokes and flying shark:).</p>
<figure><a href=""https://public.bay.livefilestore.com/y1pRDy1hmFEAQEH3O2R2slJbO72zBZ2j8Zn8rbGEpCn_63HLSmV3iiscwk7Kh-2OYZWigfCJ9LOyehtFW-FSkVG-Q/IMAG0200.jpg?psid=1"" target=""_blank""><img alt=""Flying shark in TW office"" src=""https://public.bay.livefilestore.com/y1pRDy1hmFEAQEH3O2R2slJbO72zBZ2j8Zn8rbGEpCn_63HLSmV3iiscwk7Kh-2OYZWigfCJ9LOyehtFW-FSkVG-Q/IMAG0200.jpg?psid=1"" width=""640"" /></a> <figcaption>Flying shark in TW office (Click to enlarge)</figcaption></figure>
<h2>Xi'an - the capital of 13 Dynasties</h2>
<figure><a href=""https://public.bay.livefilestore.com/y1pOIbLNe702PFRnkzYLNE1QcRjXftuDFGIUnHyjkhUk73e4HuohzCXz-AP_1eEDCdvlvUlcON97rHPP96HtfBXIQ/_DSC1475.jpg?psid=1"" target=""_blank""><img alt=""A sunset view near by Giant Wild Goose Pagoda"" src=""https://public.bay.livefilestore.com/y1pOIbLNe702PFRnkzYLNE1QcRjXftuDFGIUnHyjkhUk73e4HuohzCXz-AP_1eEDCdvlvUlcON97rHPP96HtfBXIQ/_DSC1475.jpg?psid=1"" width=""640"" /></a> <figcaption>A sunset view near by Giant Wild Goose Pagoda (Click to enlarge)</figcaption></figure>
<figure><a href=""https://public.bay.livefilestore.com/y1pA8BZjF4PDMIEvWp8d7aXI8Afn6iC-6_ojLJspXXAtFvuKt1otWIAWTzfcxdzEiP7fc7WOXdCnDwxieQdTi2smQ/_DSC1514.jpg?psid=1"" target=""_blank""><img alt=""Music fountain in the northern square of Giant Wild Goose Pagoda"" src=""https://public.bay.livefilestore.com/y1pA8BZjF4PDMIEvWp8d7aXI8Afn6iC-6_ojLJspXXAtFvuKt1otWIAWTzfcxdzEiP7fc7WOXdCnDwxieQdTi2smQ/_DSC1514.jpg?psid=1"" width=""640"" /></a> <figcaption>Music fountain in the northern square of Giant Wild Goose Pagoda (Click to enlarge)</figcaption></figure>
<figure><a href=""https://public.bay.livefilestore.com/y1pJc5tjjfHC0Yg_VZxcdYn4uh4hSGPtV3l53mXd_47WVBKbwLVFTC-apgLpaWekWYADyVoLO7ohfC6MdXTpb1aog/_DSC1985.jpg?psid=1"" target=""_blank""><img alt=""Music fountain in the northern square of Giant Wild Goose Pagoda"" src=""https://public.bay.livefilestore.com/y1pJc5tjjfHC0Yg_VZxcdYn4uh4hSGPtV3l53mXd_47WVBKbwLVFTC-apgLpaWekWYADyVoLO7ohfC6MdXTpb1aog/_DSC1985.jpg?psid=1"" width=""640"" /></a> <figcaption>A magnificent building in <a href=""http://en.wikipedia.org/wiki/Tang_Paradise"" target=""_blank"">Tang Paradise</a> (Click to enlarge)</figcaption></figure>
<p>Xi'an is an amazing city, so many historical buildings, comfortable climate and delicious food. I visited <a href=""http://en.wikipedia.org/wiki/Terracotta_Army"">Terracotta Army</a>, <a href=""http://en.wikipedia.org/wiki/Tang_Paradise"" target=""_blank"">Tang Paradise</a>, <a href=""http://en.wikipedia.org/wiki/Giant_Wild_Goose_Pagoda"">Giant Wild Goose Pagoda</a>, (I posted few photos above and a whole album was shaed on <a href=""http://sdrv.ms/MsY0ua"" target=""_blank"">my Skydrive</a>), and I definitely will visit more:)</p>
<figure><a href=""https://public.bay.livefilestore.com/y1pBOuubyIpdBif5yIZSy7ZokZUPGXhN09pTVGEzTr8GLQeWCFmH1zgPPZ6Ld7ov0ltoMkmdNt-gjZ7WeLYPjNROg/_DSC1511.jpg?psid=1"" target=""_blank""><img alt=""Shanxi Biang biang noodles"" src=""https://public.bay.livefilestore.com/y1pBOuubyIpdBif5yIZSy7ZokZUPGXhN09pTVGEzTr8GLQeWCFmH1zgPPZ6Ld7ov0ltoMkmdNt-gjZ7WeLYPjNROg/_DSC1511.jpg?psid=1"" width=""640"" /></a> <figcaption><a href=""http://en.wikipedia.org/wiki/Biang_biang_noodles"" target=""_blank"">Shanxi Biang biang noodles</a> (Click to enlarge)</figcaption></figure>
<h2>How and why I work for ThoughtWorks</h2>
<p>In fact I nearly decided to stay with my family in Shanghai and abandoned this opportunity to work for this great company, my ""little tiger"" is only 15 months when I received the offer. But <a href=""http://weibo.com/u/1985287873"" target=""_blank"">@盈盈水天</a> talked with me over the phone for 10 minutes and sent me an convictive and passionate email, after I reading her email I decided to consider more, I thought and investigated for one whole day, I read links listed below:</p>
<ul>
<li><a href=""http://www.reuters.com/article/2012/01/31/idUS250698+31-Jan-2012+PRN20120131"" target=""_blank"">ThoughtWorks Chosen Among Best Companies to Work For in 2011-2012</a></li>
<li><a href=""http://epistemologic.com/2007/02/01/why-work-at-thoughtworks/"" target=""_blank"">Why work at ThoughtWorks</a></li>
<li><a href=""http://www.glassdoor.com/Overview/Working-at-ThoughtWorks-EI_IE38334.11,23.htm"" target=""_blank"">ThoughtWorks Overview</a></li>
<li><a href=""http://news.csdn.net/n/20080325/114620.html"" target=""_blank"">ThoughtWorks专访：一个没有经理室的公司</a></li>
</ul>
<p>And I summarized attractive points of ThoughtWorks for me below:</p>
<ol>
<li>I am eager to learn and improve! I failed to find a satisfied platform for me to learn &amp; improve in SAP and HP. <strong>I believe ThoughtWorks is the great platform!</strong></li>
<li>Real geek culture. I've experienced this during my interview. Pair programming, sharp interviewers, the light with programming APIs integrated with CI!</li>
<li>Many opportunities to travel. I believe ""You can learn more by travelling a thousand miles than by reading a thousand books"".</li>
<li>Pursuit of excellence and social impact. The former is my creed and the later is my goal in my future career!</li>
<li>Happy, just happy! Because of above reasons, I will be happy everyday, I will enjoy working here, nothing is more important than this!</li>
</ol>
<p>So eventually I decided to follow my heart and take the challenge! Now one month pasted, I think this is an absolutely right decision! I would absolutely regret if I missed it!</p>
<h2>Conclusion</h2>
<p>I think I've finally found my ""organization"" in ThoughtWorks, I feel really excited and happy to be a ThoughtWorker! I love to work, learn and improve with colleagues here! I wish I could achieve my dreams here, and I wish I could contribute my effort to ThoughtWorks in the near future!</p>
<p>At last, my special thanks for my dear wife, my decision led she cannot live with our ""little tiger"" and me for 6 months, life for her would become much harder without we two! Whereas she agreed, understood and supported me to follow my heart, I couldn't appreciate more! Honey, to the world you are an ordinary person, but to me you are my world! I promise I will work hard, try my best, and compensate you:)</p>
<figure><a href=""https://public.bay.livefilestore.com/y1pQvmMR1T_pQEJu26D5VZf9abVpgvn4YyDh-1mTEsllWPzQH4SesxjJCLYV6wzdXP9YEUT5PgRFB2MB3o3zgw5Jg/_DSC1827.jpg?psid=1"" target=""_blank""><img alt=""Shanxi Biang biang noodles"" src=""https://public.bay.livefilestore.com/y1pQvmMR1T_pQEJu26D5VZf9abVpgvn4YyDh-1mTEsllWPzQH4SesxjJCLYV6wzdXP9YEUT5PgRFB2MB3o3zgw5Jg/_DSC1827.jpg?psid=1"" width=""640"" /></a> <figcaption>Wendy, our little tiger and me at Terracotta Army (Click to enlarge)</figcaption></figure>
",7992,2012-06-20 09:19:48.000,1,A
143,Wayne,Observation on CDN,Observation-On-CDN,25,"  <h3>Motivation</h3>
  <p>
    Leveraging CDN (<a href=""http://en.wikipedia.org/wiki/Content_Delivery_Network"" target=""_blank"">Content Delivery Network</a>) to speed up static files loading time is one of the most important fact which affects a website's loading time, CDN was emphasized in many articles related with improving website's performance, for example:
    <ul>
      <li><a href=""http://www.nczonline.net/blog/2011/11/29/how-content-delivery-networks-cdns-work/"">Nicholas C. Zakas - How content delivery networks (CDNs) work</a></li>
      <li><a href=""http://www.cloudcomputinglive.com/blog/uncategorized/why-the-cdn-industry-is-so-important"">Why the CDN industry is so important</a></li>
      <li><a href=""http://www.globinch.com/importance-of-using-cdn-to-speed-up-website/"">Importance of Using CDN to Speed Up Website</a></li>
      <li><a href=""http://developer.yahoo.com/performance/rules.html"" target=""_blank"">Best Practices for Speeding Up Your Web Site</a></li>
    </ul>
  </p>
$More$
  <h3>Free JavaScript CDN providers</h3>
  <p>Majority of the largest websites (Facebook, Twitter, Yahoo, Google, etc.) on the planet have their own CDN solution, while for a small website or a web application used by a small number of people, it is not very possible to setup your own CDN, luckily there are free CDN services who can provide famous javaScript/CSS library mirrors all around the world, below are free ones I've used:
    <ul>
      <li>Google CDN - <a href=""https://developers.google.com/speed/libraries/devguide"">https://developers.google.com/speed/libraries/devguide</a></li>
      <li>Microsoft CDN - <a href=""http://www.asp.net/ajaxlibrary/cdn.ashx"">http://www.asp.net/ajaxlibrary/cdn.ashx</a></li>
      <li>CDNJS - <a href=""http://cdnjs.com/"">http://cdnjs.com/</a> </li>
      <li>CDN for twitter bootstrap - <a href=""http://www.bootstrapcdn.com/"">http://www.bootstrapcdn.com/</a></li>
    </ul>
  </p>

  <h3>Which one I should use?</h3>
  <p>
    First of all, <a href=""http://sysadminsjourney.com/content/2011/04/19/selecting-right-cdn-your-website/"">Selecting the Right CDN for YOUR Website</a>! Features like 100% up time, reverse proxy ability, public cache header and gzip text content and very important, but anyway speed is one of the most important ""feature"", generally speaking, different CDN providers might behave different performance in different area, <a href=""http://royal.pingdom.com/2012/07/24/best-cdn-for-jquery-in-2012/"">The best CDN for jQuery in 2012</a> is research comparing speed between Google, Microsoft and Media Template (jQuery official CDN).

    Personally I'd prefer jQuery's official CDN if I use jQuery (when I don't use?), and CDNJS for less-famous JS libraries. 
  </p>

  <h3>Best practices</h3>
  <p>
  IMHO, the following one are the most important points to serve static files efficiently:
  <ul>
    <li>Gzip static text content</li>
    <li><a href=""https://developers.google.com/speed/docs/best-practices/caching"">HTTP cache header</a></li>
    <li><a href=""http://guides.rubyonrails.org/asset_pipeline.html#what-is-fingerprinting-and-why-should-i-care"">Fingerprinting</a></li>
    <li>CDN</li>
  </ul>
  All of above are mentioned in Yahoo's <a href=""http://developer.yahoo.com/performance/rules.html"">Best Practices for Speeding Up Your Web Site</a>, and google also has <a href=""https://developers.google.com/speed/docs/best-practices/caching"">a great article</a> talking about best practice of HTTP caching.
  
  </p>
",3345,2012-10-07 01:39:17.507,1,A
144,Wayne,12 tips to boost RSpect and Cucumber,12-Tips-To-Boost-RSpec-And-Cucumber,2,"<p>In our daily TDD/BDD work, we spent most of our time in test cases, we analyze requirements, write test case, run it and watch it fail, implement code to make the test pass, repeat the process ""until money runs out"". Thus the speed of running those test cases have <strong>significant impact on a team's performance</strong>, ! You can't tolerance writing a test case, waiting 1 minute finish; You can't tolerance CI finishes running all RSpec/Cucumber tests for half an hour! <strong>I can't!</strong> So I motivated to improve this!</p>
<h3>The result</h3>
$More$
<p>In the project I was working on there are 1566 RSpec examples for all models, after I applied most tips appropriate for out project, the result below is a comparison before and after boosting, the command is:</p>
<p><code> <strong>time bundle exec rspec spec/models</strong> </code></p>
<p>Before boost: <img alt=""Before boost"" src=""https://03zsfg.bn1.livefilestore.com/y1pam_er-_HsKcNOv2BK0ojU84jLCZgI14ZKNfWhcpjLFb_yKOxrM9cEuvHCIVNljW9GnJEKytG0UsyQFg1svvx5w4LS5iuZ2yh/RSpec%20-%20Before%20%20boost.png?psid=1"" /> After boost: <img alt=""After boost"" src=""https://03zsfg.bn1.livefilestore.com/y1pshW_P5ROhKQ6dLA3Z8m2JORXrKXzyb7zP45Gc1AT_4QXkzL5Snlbj_oe5iq6hYf_YOAWbyWGsvgmQxz1goVO5ceo0FmWIl0Z/RSpec%20-%20After%20boost.png?psid=1"" /></p>
<p>One minute and 8 seconds are saved after the boost!!! And it is only part of our all RSpect test, we definitely have tests for controllers, views, libs, etc., a <strong>50.3% improvement</strong>!</p>
<p>To be honest from the beginning I admit I don't have too much confident I can make things better, until I saw this presentation: <a href=""http://grease-your-suite.heroku.com"">Grease your suite</a> which surprised, inspired and encouraged me quite a lot! I did two whole days research and summarized 12 super useful tips for speeding up the RSpec/Cucumber tests!</p>
<h3>Use Spork</h3>
<p>Spork has two major advantages:</p>
<ol>
<li>It hosts a <a href=""http://segment7.net/projects/ruby/drb/introduction.html"">DRB server</a> and pre-load Rails environment into the server instance, after that all further running tests can communicate with the DRB server thus no need to reload Rails environment every time! Much faster than common way!</li>
<li>It forks (using <a href=""http://apidock.com/ruby/Kernel/fork"">Kernel.fork</a>) a copy of server each time we run our tests, thus ensure a clean state between each other.</li>
</ol>
<p>My real experience is it is awesome! I wrote a few line of code and I run the test, I can see the result in much shorter time than before! BDD development in daily work becomes more enjoyable, less frustration when waiting for slow tests times and times. Trust me, once you get used to it you'll never wanna fall back to the old slow way!</p>
<p>Spork resources</p>
<ul>
<li><a href=""http://railscasts.com/episodes/285-spork"">Spork on Ruby Forge</a></li>
<li><a href=""http://railscasts.com/episodes/285-spork"">Spork repo@Github</a></li>
<li><a href=""http://railscasts.com/episodes/285-spork"">RailsCast video for Spork</a></li>
</ul>
<h3>GC tuning for Ruby Enterprise Edition</h3>
<p>Before getting into the detailed tuning option I would like to review a few important points:</p>
<ul>
<li>Unlike many famous <a href=""http://en.wikipedia.org/wiki/Garbage_collection_(computer_science)"">GC</a> implementations like JVM, CLR and <a href=""http://en.wikipedia.org/wiki/V8_(JavaScript_engine)"">V8</a>, Ruby's GC it <strong>not generational</strong>, which means it need scan ALL object to verify whether it is reachable.</li>
<li>Every time GC decides to collect (used out pre-allocated memory typically), it will suspend all running thread and claim the resource, after that it resume all thread, this process takes 10% of CPU by average and cost a few hundred milliseconds (sometimes hundreds of)!</li>
<li>Ruby's default GC settings are not optimized for Rails application, the settings can be modified for Ruby Enterprise Edition (REE).</li>
</ul>
<p>By reading <a href=""http://www.rubyenterpriseedition.com/documentation.html#_garbage_collector_and_object_space"">the official documentation</a>, we got the following optimizable options:</p>
<ul>
<li><code>RUBY_HEAP_MIN_SLOTS</code><br /> This specifies the initial number of heap slots. The default is 10000.</li>
<li><code>RUBY_HEAP_SLOTS_INCREMENT</code><br /> The number of additional heap slots to allocate when Ruby needs to allocate new heap slots for the first time. The default is 10000. For example, suppose that the default GC settings are in effect, and 10000 Ruby objects exist on the heap (= 10000 used heap slots). When the program creates another object, Ruby will allocate a new heap with 10000 heap slots in it. There are now 20000 heap slots in total, of which 10001 are used and 9999 are unused.</li>
<li><code>RUBY_HEAP_SLOTS_GROWTH_FACTOR</code><br /> Multiplicator used for calculating the number of new heaps slots to allocate next time Ruby needs new heap slots. The default is 1.8. Take the program in the last example. Suppose that the program creates 10000 more objects. Upon creating the 10000th object, Ruby needs to allocate another heap. This heap will have 10000 * 1.8 = 18000 heap slots. There are now 20000 + 18000 = 38000 heap slots in total, of which 20001 are used and 17999 are unused. The next time Ruby needs to allocate a new heap, that heap will have 18000 * 1.8 = 32400 heap slots.</li>
<li><code>RUBY_GC_MALLOC_LIMIT</code><br /> The amount of C data structures which can be allocated without triggering a garbage collection. If this is set too low, then the garbage collector will be started even if there are empty heap slots available. The default value is 8000000.</li>
<li><code>RUBY_HEAP_FREE_MIN</code><br /> The number of heap slots that should be available after a garbage collector run. If fewer heap slots are available, then Ruby will allocate a new heap according to the RUBY_HEAP_SLOTS_INCREMENT and RUBY_HEAP_SLOTS_GROWTH_FACTOR parameters. The default value is 4096.</li>
</ul>
<p>We can reference Twitter's GC tuning options below used in their production:</p>
<blockquote>RUBY_HEAP_MIN_SLOTS=500000<br /> RUBY_HEAP_SLOTS_INCREMENT=250000<br /> RUBY_HEAP_SLOTS_GROWTH_FACTOR=1<br /> RUBY_GC_MALLOC_LIMIT=50000000</blockquote>
<p>Twitter&rsquo;s settings mean: Start with enough memory to hold the application (Ruby&rsquo;s default is very low, lower than what a Rails application typically needs). Increase it linearly if you need more (Ruby&rsquo;s default is exponential increase). Only garbage-collect every 50 million malloc calls (Ruby&rsquo;s default is 6x smaller). The expert who did <a href=""http://grease-your-suite.heroku.com"">the PPT on Heroku I mentioned above</a>recommended the following options:</p>
<blockquote>export RUBY_HEAP_MIN_SLOTS=1000000<br /> export RUBY_HEAP_SLOTS_INCREMENT=1000000<br /> export RUBY_HEAP_SLOTS_GROWTH_FACTOR=1<br /> export RUBY_GC_MALLOC_LIMIT=1000000000<br /> export RUBY_HEAP_FREE_MIN=500000</blockquote>
<p>How to enable the GC options above? Personally I store those values in my .rvmrc file under project folder, you can export them in other places. And please notice the option values above are for your reference, might not quite appropriate for every concrete project, how to set those options suitable for your real project can be determined by on a simple rule: <strong>better settings makes less times of GC running</strong>. I wrote the following code in spec_helper.rb to display how many times GC runs and how much time it cost in total after running given tests examples.</p>
<div class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #e5786d;"">RSpec</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">configure</span> <span style=""color: #8ac6f2;"">do</span> |<span style=""color: #f6f3e8;"">config</span>|<br /> &nbsp;<span style=""color: #f6f3e8;"">config</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">before</span>(<span style=""color: #95e454; font-style: italic;"">:suite</span>) <span style=""color: #8ac6f2;"">do</span><br /> &nbsp; &nbsp;<span style=""color: #e5786d;"">GC</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">enable_stats</span><br /> &nbsp;<span style=""color: #8ac6f2;"">end</span><br /> &nbsp;<span style=""color: #f6f3e8;"">config</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">after</span>(<span style=""color: #95e454; font-style: italic;"">:suite</span>) <span style=""color: #8ac6f2;"">do</span><br /> &nbsp; &nbsp;<span style=""color: #f6f3e8;"">puts</span> <span style=""color: #95e454; font-style: italic;"">""</span><span style=""color: #95e454; font-style: italic;"">\n</span><span style=""color: #95e454; font-style: italic;"">""</span><br /> &nbsp; &nbsp;<span style=""color: #f6f3e8;"">puts</span> <span style=""color: #95e454; font-style: italic;"">""********GC STATUS SUMMARY AFTER ALL TESTS FINISHED********""</span><br /> &nbsp; &nbsp;<span style=""color: #f6f3e8;"">puts</span> <span style=""color: #95e454; font-style: italic;"">""GC has done </span><span style=""color: #95e454; font-style: italic;"">#{</span><span style=""color: #e5786d;"">GC</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">collections</span><span style=""color: #95e454; font-style: italic;"">}</span><span style=""color: #95e454; font-style: italic;""> times collections!""</span><br /> &nbsp; &nbsp;<span style=""color: #f6f3e8;"">puts</span> <span style=""color: #95e454; font-style: italic;"">""Total time spent in GC collections: </span><span style=""color: #95e454; font-style: italic;"">#{</span><span style=""color: #e5786d;"">GC</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">time</span><span style=""color: #95e454; font-style: italic;"">}</span><span style=""color: #95e454; font-style: italic;"">!""</span><br /> &nbsp; &nbsp;<span style=""color: #e5786d;"">GC</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">disable_stats</span><br /> &nbsp;<span style=""color: #8ac6f2;"">end</span><br /><span style=""color: #8ac6f2;"">end</span></div>
<p>The sample output of GC stats after running 360 examples:<br /> <img alt=""GC stats after spec run"" src=""https://03zsfg.bn1.livefilestore.com/y1p7twr-NJrH2Bh3jlDC45CgWd3RkDh-J_kbfwU13rwePElrwo8sQZR7-Q0fhXv_UJIAdg80PpvjMANjnc8ZHUr5lvLwb65goh4/Display%20GC%20stats.png?psid=1"" /></p>
<p>More resources on Ruby GC tuning:</p>
<ul>
<li><a href=""http://www.rubyenterpriseedition.com/documentation.html#_garbage_collector_and_object_space"">Garbage collector performance tuning - REE official documentation</a></li>
<li><a href=""http://engineering.twitter.com/2011/03/building-faster-ruby-garbage-collector.html"">Twitter blog - Building a Faster Ruby Garbage Collector</a></li>
<li><a href=""https://en.wikibooks.org/wiki/Ruby_Programming/Reference/Objects/GC"">Ruby Programming/Reference/Objects/GC</a></li>
<li><a href=""http://blog.evanweaver.com/2009/04/09/ruby-gc-tuning/"">Ruby GC Tuning</a></li>
<li><a href=""http://snaprails.tumblr.com/post/241746095/rubys-gc-configuration"">Ruby&rsquo;s GC Configuration</a></li>
<li><a href=""http://stackoverflow.com/questions/1011460/what-makes-ruby-slow"">What makes Ruby slow?</a></li>
</ul>
<h3>Deferred GC</h3>
<p>Other than adjusting GC tuning options we can also deffer GC runs! Create a file under spec/support/deferred_garbage_collection.rb and paste code below:</p>
<div class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #8ac6f2;"">class</span> <span style=""color: #f6f3e8;"">DeferredGarbageCollection</span><br /><br /> &nbsp;<span style=""color: #e5786d;"">DEFERRED_GC_THRESHOLD</span> <span style=""color: #f6f3e8;"">=</span> (<span style=""color: #e5786d;"">ENV</span><span style=""color: #f6f3e8;"">[</span><span style=""color: #95e454; font-style: italic;"">'DEFER_GC'</span><span style=""color: #f6f3e8;"">]</span> || <span style=""color: #e5786d;"">15</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #e5786d;"">0</span>)<span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">to_f</span><br /><br /> &nbsp;<span style=""color: #cae682;"">@@last_gc_run</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">Time</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">now</span><br /><br /> &nbsp;<span style=""color: #8ac6f2;"">def</span> <span style=""color: #f6f3e8;"">self</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #cae682;"">start</span><br /> &nbsp; &nbsp;<span style=""color: #e5786d;"">GC</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">disable</span> <span style=""color: #8ac6f2;"">if</span> <span style=""color: #e5786d;"">DEFERRED_GC_THRESHOLD</span> <span style=""color: #f6f3e8;"">&gt;</span> <span style=""color: #e5786d;"">0</span><br /> &nbsp;<span style=""color: #8ac6f2;"">end</span><br /><br /> &nbsp;<span style=""color: #8ac6f2;"">def</span> <span style=""color: #f6f3e8;"">self</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #cae682;"">reconsider</span><br /> &nbsp; &nbsp;<span style=""color: #8ac6f2;"">if</span> <span style=""color: #e5786d;"">DEFERRED_GC_THRESHOLD</span> <span style=""color: #f6f3e8;"">&gt;</span> <span style=""color: #e5786d;"">0</span> <span style=""color: #f6f3e8;"">&amp;&amp;</span> <span style=""color: #e5786d;"">Time</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">now</span> <span style=""color: #f6f3e8;"">-</span> <span style=""color: #cae682;"">@@last_gc_run</span> <span style=""color: #f6f3e8;"">&gt;=</span> <span style=""color: #e5786d;"">DEFERRED_GC_THRESHOLD</span><br /> &nbsp; &nbsp; &nbsp;<span style=""color: #e5786d;"">GC</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">enable</span><br /> &nbsp; &nbsp; &nbsp;<span style=""color: #e5786d;"">GC</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">start</span><br /> &nbsp; &nbsp; &nbsp;<span style=""color: #e5786d;"">GC</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">disable</span><br /> &nbsp; &nbsp; &nbsp;<span style=""color: #cae682;"">@@last_gc_run</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">Time</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">now</span><br /> &nbsp; &nbsp;<span style=""color: #8ac6f2;"">end</span><br /> &nbsp;<span style=""color: #8ac6f2;"">end</span><br /><span style=""color: #8ac6f2;"">end</span></div>
<p>Refer: <a href=""http://ariejan.net/2011/09/24/rspec-speed-up-by-tweaking-ruby-garbage-collection"">RSpec speed-up (24.6%) by tweaking ruby garbage collection</a></p>
<h3>Increase log level to reduce IO</h3>
<p>By default in Rails development/test environment the <a href=""http://guides.rubyonrails.org/debugging_rails_applications.html#log-levels"">logger's level</a> is 0 which means <code>:debug</code>, however, most of the time we don't need verbose information flushed into log file, we can absolutely increase the log level to reduce IO! Setting it to 3 (:error) would be best IMHO, there is no redandunt information but still be able to trace failed tests.</p>
<div class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #e5786d;"">Rails</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">logger</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">level</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">3</span></div>
<h3>Reduce Devise.streches</h3>
<p>Reduce Devise.streches can improve Bcrypt performance, because we don't need strong encryption during testing, the default value is 10, we can set it to 1 in test environment.</p>
<div class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #e5786d;"">Devise</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">stretches</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">1</span></div>
<h3>Mock real HTTP requests</h3>
<p>Real HTTP requests can vastly slower down your tests, unless you explicitly want to ""test"" the request (usually in integration testing), you should mock it to isolate your testing ""target"" and focus on the behavior of your code.</p>
<p><a href=""https://github.com/bblimke/webmock"">WebMock</a> stubs HTTP requests at low Net::HTTP level so there is no need to change any of your tests, by default it disables all real HTTP requests, you can register requests you want to test to cross the wall, or you can put <code>WebMock.allow_net_connect!</code>at your spec_helper.rb for RSpec or env.rb for Cucumber, personally I don't quite suggest allow all requests at a high level, because sometimes unobtrusive HTTP request happens and it is not easy to discover by just reviewing the code, for example:</p>
<ul>
<li>You call a property getter on module A, but the getter method was delegated to module B, and inside the real implementation in module B it submits request to remote.</li>
<li>When you call ActiveRecord::Validations.valid?, all the validation callbacks will be invoked, and some of them probably have relationship with other modules, unfortunately ""other modules"" are retrieved from remote!</li>
</ul>
<p>So if you disable all the real requests in testing (by default when using WebMock), those unobtrusive request can be easily found out.</p>
<h3>Force ActiveRecord to use one shared connection instance</h3>
<p>We are Capybara with JavaScript testing, when Capybara runs, it start two processes, one for hosting the server and another invokes underline web driver to communicate with real browser, this results in config.use_transactional_fixtures = true not robust since in RoR transaction works on one DB connection instance! So this enhancement forces using one shared connection when running Capybara, and this improves performance a little bit as well.</p>
<p>Put the following code in spec_helper.rb and env.rb:</p>
<div class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #8ac6f2;"">class</span> <span style=""color: #f6f3e8;"">ActiveRecord</span><span style=""color: #f6f3e8;"">::</span><span style=""color: #e5786d;"">Base</span><br /> <span style=""color: #f6f3e8;"">mattr_accessor</span> <span style=""color: #95e454; font-style: italic;"">:shared_connection</span><br /> <span style=""color: #cae682;"">@@shared_connection</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #8ac6f2;"">nil</span><br /><br /> <span style=""color: #8ac6f2;"">def</span> <span style=""color: #f6f3e8;"">self</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #cae682;"">connection</span><br /> &nbsp; <span style=""color: #cae682;"">@@shared_connection</span> || <span style=""color: #f6f3e8;"">retrieve_connection</span><br /> <span style=""color: #8ac6f2;"">end</span><br /><span style=""color: #8ac6f2;"">end</span><br /><span style=""color: #e5786d;"">ActiveRecord</span><span style=""color: #f6f3e8;"">::</span><span style=""color: #e5786d;"">Base</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">shared_connection</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">ActiveRecord</span><span style=""color: #f6f3e8;"">::</span><span style=""color: #e5786d;"">Base</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">connection</span></div>
<h3>Parallel testing</h3>
<p>Run tests in multi CPU cores in parallel is extremely powerful, on a four-core Intel i7 processor with hyper-threading enabled, <a href=""https://github.com/grosser/parallel_tests"">parallel_tests</a> can kick-off 8 processes to run test separately on each core, in the idea situation it could reduce time cost down to 50%, and the more case you run in parallel, the more dramatical differences you will get.</p>
<p>However there are couple of things we need aware:</p>
<ol>
<li>It won't reduce the total time comparing to single process if there are hundreds of local DB operations in the test!</li>
<li>Process in OS level is very expansive, using 8 processes to deal with 50 examples might not be wise, time cost during processes' life cycle will neutralize the time saved in parallel manner! Considering use traditional way to save some electricity:)</li>
</ol>
<h3>Force ActiveRecord to use one shared connection instance</h3>
<p>If you are Capybara with JavaScript testing, you should know when Capybara runs, it start two threads, one for hosting the server and another invokes underline web driver to communicate with real browser, this results in <code>use_transactional_fixtures</code> not robust since in RoR transaction works on one DB connection instance! So this enhancement forces using one shared connection when running Capybara, and this improves performance a little bit as well.</p>
<p>Put the following code in spec_helper.rb and env.rb:</p>
<div class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #8ac6f2;"">class</span> <span style=""color: #f6f3e8;"">ActiveRecord</span><span style=""color: #f6f3e8;"">::</span><span style=""color: #e5786d;"">Base</span><br /> &nbsp;<span style=""color: #f6f3e8;"">mattr_accessor</span> <span style=""color: #95e454; font-style: italic;"">:shared_connection</span><br /> &nbsp;<span style=""color: #cae682;"">@@shared_connection</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #8ac6f2;"">nil</span><br /> <br /> &nbsp;<span style=""color: #8ac6f2;"">def</span> <span style=""color: #f6f3e8;"">self</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #cae682;"">connection</span><br /> &nbsp; &nbsp;<span style=""color: #cae682;"">@@shared_connection</span> || <span style=""color: #f6f3e8;"">retrieve_connection</span><br /> &nbsp;<span style=""color: #8ac6f2;"">end</span><br /><span style=""color: #8ac6f2;"">end</span><br /><span style=""color: #e5786d;"">ActiveRecord</span><span style=""color: #f6f3e8;"">::</span><span style=""color: #e5786d;"">Base</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">shared_connection</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">ActiveRecord</span><span style=""color: #f6f3e8;"">::</span><span style=""color: #e5786d;"">Base</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">connection</span></div>
<h3>QuickerClip</h3>
<p>Many Rails application uses the famous image processing library <a href=""https://github.com/thoughtbot/paperclip"">PaperClip</a>, it uses libraries of <a href=""www.imagemagick.org/"">ImageMagick</a>, they are all great libraries, but the problem for us is we don't want to really invoke them during test in most of the time, testing functionalities in those third party library makes no sense for your project, we should isolate it and focus on our own business logics.</p>
<p>Add following line into test.rb, it will avoid invoking real ImageMagick command thus significantly improve tests related with PaperClip.</p>
<div class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #8ac6f2;"">module</span> <span style=""color: #f6f3e8;"">Paperclip</span><br /> &nbsp;<span style=""color: #8ac6f2;"">def</span> <span style=""color: #f6f3e8;"">self</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #cae682;"">run</span> <span style=""color: #f6f3e8;"">cmd</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">params</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #95e454; font-style: italic;"">""""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">expected_outcodes</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">0</span><br /> &nbsp; &nbsp;<span style=""color: #8ac6f2;"">case</span> <span style=""color: #f6f3e8;"">cmd</span><br /> &nbsp; &nbsp;<span style=""color: #8ac6f2;"">when</span> <span style=""color: #95e454; font-style: italic;"">""identify""</span><br /> &nbsp; &nbsp; &nbsp;<span style=""color: #8ac6f2;"">return</span> <span style=""color: #95e454; font-style: italic;"">""100x100""</span><br /> &nbsp; &nbsp;<span style=""color: #8ac6f2;"">when</span> <span style=""color: #95e454; font-style: italic;"">""convert""</span><br /> &nbsp; &nbsp; &nbsp;<span style=""color: #8ac6f2;"">return</span><br /> &nbsp; &nbsp;<span style=""color: #8ac6f2;"">else</span><br /> &nbsp; &nbsp; &nbsp;<span style=""color: #8ac6f2;"">super</span><br /> &nbsp; &nbsp;<span style=""color: #8ac6f2;"">end</span><br /> &nbsp;<span style=""color: #8ac6f2;"">end</span><br /><span style=""color: #8ac6f2;"">end</span><br /><br /><span style=""color: #8ac6f2;"">class</span> <span style=""color: #f6f3e8;"">Paperclip</span><span style=""color: #f6f3e8;"">::</span><span style=""color: #e5786d;"">Attachment</span><br /> &nbsp;<span style=""color: #8ac6f2;"">def</span> <span style=""color: #cae682;"">post_process</span><br /> &nbsp;<span style=""color: #8ac6f2;"">end</span><br /><span style=""color: #8ac6f2;"">end</span></div>
<p>Origin: <a href=""http://pivotallabs.com/users/rolson/blog/articles/1249-stubbing-out-paperclip-imagemagick-in-tests"">Stubbing out Paperclip/ImageMagick in Tests</a></p>
<h3>In-Memory DB or even no DB</h3>
<p>We can use an in-memory DB for testing environment would be sweet, because there is no need to persistent. We do have a lot of choices of in-memory DB for example:</p>
<ul>
<li><a href=""http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html"">MySQL</a></li>
<li><a href=""http://www.sqlite.org/inmemorydb.html"">SQLite</a></li>
<li><a href=""http://rhaas.blogspot.com/2010/06/postgresql-as-in-memory-only-database_24.html"">PostgreSQL</a></li>
<li>And many...</li>
</ul>
<p>More resources on this <br /> <a href=""www.osmonov.com/2011/01/in-memory-sqlite-database-for-testing.html"">In memory SQlite database for testing</a> <a href=""http://stackoverflow.com/questions/5378568/rspec-cucumber-best-speed-database-clean-strategy"">Rspec, Cucumber: best speed database clean strategy</a></p>
<p>Actually in idea situation, we can consider adopting ""<strong>No Database strategy</strong>"" for our tests! Refer <a href=""https://github.com/dan-manges/unit-record"">UnitRecord</a>for reference and see how fast the author did!</p>
<blockquote>Finished in 19.302702 seconds.<br /> 4920 tests, 7878 assertions, 0 failures, 0 errors</blockquote>
<h3>Be Organized</h3>
<p>This is the last tip for testing performance, unlike above tips/techniques: it is non-technical, however it is probably <strong>the most important one</strong>!</p>
<ol>
<li>More unit tests, less integration tests. KISS principle also suitable for tests. Usually integrations test has dependencies on external resources (database, web service, message queue or IO), I'd prefer <strong>running unit tests locally and integration tests cloud CI (usually faster than local)</strong>, keep your local development responsive!</li>
<li>Use tags to identify test's attribute (use RSpec as an example Cucumber is similar), for example:<br />
<div class=""source"" style=""font-family: Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #f6f3e8;"">it</span> <span style=""color: #95e454; font-style: italic;"">""Display login page""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #95e454; font-style: italic;"">:mandatory</span> <span style=""color: #f6f3e8;"">=&gt;</span> <span style=""color: #8ac6f2;"">true</span> <span style=""color: #8ac6f2;"">do</span>; <span style=""color: #8ac6f2;"">end</span><br /><span style=""color: #f6f3e8;"">it</span> <span style=""color: #95e454; font-style: italic;"">""Redirect to homepage""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #95e454; font-style: italic;"">:speed</span> <span style=""color: #f6f3e8;"">=&gt;</span> <span style=""color: #95e454; font-style: italic;"">'fast'</span> <span style=""color: #8ac6f2;"">do</span>; <span style=""color: #8ac6f2;"">end</span><br /><span style=""color: #f6f3e8;"">it</span> <span style=""color: #95e454; font-style: italic;"">""Show user profile page""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #95e454; font-style: italic;"">:require_login</span> <span style=""color: #f6f3e8;"">=&gt;</span> <span style=""color: #8ac6f2;"">true</span> <span style=""color: #8ac6f2;"">do</span>; <span style=""color: #8ac6f2;"">end</span><br /><span style=""color: #f6f3e8;"">it</span> <span style=""color: #95e454; font-style: italic;"">""Retrieve user's twitts through Twitter API using OAuth""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #95e454; font-style: italic;"">:speed</span> <span style=""color: #f6f3e8;"">=&gt;</span> <span style=""color: #95e454; font-style: italic;"">'slow'</span> <span style=""color: #8ac6f2;"">do</span>; <span style=""color: #8ac6f2;"">end</span></div>
<br />So that we can run filtered tests by: <br /> <code>rspec . --tag speed:'fast'</code><br /> <code>rspec . --tag mandatory:true</code></li>
</ol>
<h3>Conclusion</h3>
<p>Daily BDD/TDD with fast, ""responsive"" tests which can give you feedback in short time makes development life more enjoyable and happy, so does CI! The 12 tips above might not all suitable for your real project, but a number of them should do. If you didn't get a good result after boosting, run rspec with --profile/-p, RSpec will then track the top 10 slowest examples, for Cucumber pass ""usage"" as a output format will also reveal slowest step definitions.</p>
<p>Wish the tips help you!</p>",11421,2012-11-09 01:03:41.833,1,A
145,Wayne,Cache Reverse Proxy - Varnish,Cache-Reverse-Proxy-Varnish,11,"<h2>Introduction</h2>
<p>Varnish is an <a href=""http://en.wikipedia.org/wiki/Varnish_%28software%29"">HTTP accelerator</a>, the official page is: <a href=""https://www.varnish-cache.org/"">https://www.varnish-cache.org/</a>.</p>
<p>Varnish stands in front of the web application server to be a cache reverse proxy (also can be a load balancer), it can simply cache all the static resources in memory, and can also be powerfully configed using VCL (Varnish Configuration Language, a DSL for Varnish configuration) to cache dynamic content, in addition, Varnish implements ESI (<a href=""http://en.wikipedia.org/wiki/Edge_Side_Includes"">Edge Side Include</a>) standards to provide ability to cache static parts of the page.</p>
$More$
<p>A web server uses Varnish can easily handle more than <strong>10,000 requests/s</strong> on a single node, as a comparison, an Apache web server can handle about 1000 requests/s, thus it is extremely suitable and strongly recommended for ""content-heavy dynamic websites"" with high concurrency visits.</p>
<figure><img alt=""Varnish landscope"" src=""http://blog.mgm-tp.com/wp-content/uploads/2012/01/Setup-with-Varnish-as-Web-Cache.png"" /> <figcaption>Varnish landscape (Shamelessly stole from <a href=""http://blog.mgm-tp.com/2012/01/varnish-web-cache/"" target=""_blank"">MGM Tech blog)</a></figcaption></figure>
<p>Varnish Software has made a <a href=""http://www.youtube.com/watch?v=x7t2Sp174eI"">vivid video</a> to demonstrate what is Varnish and how it makes the web fly.</p>
<h2>Installation</h2>
<p>There are two ways of installing it, package manager or compiling from the source.</p>
<h4>Install by package manager</h4>
<p>For Linux distributions, follow the guide on <a href=""https://www.varnish-cache.org/releases"">Varnish Official Download page</a>, for Mac, simply run <code>brew install varnish</code>.</p>
<h4>Compiling from source</h4>
<p>Varnish relies on latest version GNU M4, autoconf, automake and libtool, so download them from <a href=""http://mirrors.kernel.org/gnu/"">GNU mirrors</a> and compile/make them one by one:</p>
<p>For each [""M4"", ""autoconf"", ""automake"", ""libtool""] do:</p>
<pre>  <code>
curl -O http://mirrors.kernel.org/gnu/m4/m4-latest.tar.gz
cd m4-1.4.16/
./configure --prefix=/usr/local
make &amp;&amp; sudo make install</code>
</pre>
<p>Then download source from <a href=""https://www.varnish-cache.org/releases"">Varnish Official Download page</a>, and install Varnish:</p>
<pre>    <code>
cd varnish-3.0.3
$ ./autogen.sh$ ./configure
make
sudo make install</code>
  </pre>
<p>For me, I miraculously forgot the existence of Homebrew and spent 1 hour in compiling from source...</p>
<h2>Make it work!</h2>
<p>I have a Rails 3 website running at http://localhost:3000, I can simply run:</p>
<pre>  <code>sudo varnishd -a :80 -b http://localhost:3000 -s file,/tmp,500M -T localhost:6082</code>
</pre>
<p>Arguments explanation (we can always run <code>varnishd --help</code>):</p>
<ul>
<li>-a Binding address</li>
<li>-b Backend server addr</li>
<li>-s Backend storage specification</li>
<li>-T Telnet addr(Management interface), e.g. -T localhost:6082</li>
<li>-F Run in Foreground, see runtime log from the terminal</li>
</ul>
<p>This will cache all GET/HEAD requests for the all the resources, we can simply setup a Varnish in front of our static file server, to benefit huge performance improve.</p>
<p>However, we need deal with two typical scenarios since our website is dynamic:</p>
<ol>
<li>Some resources should be cached, however they could be updated sometime, then the cache needs rebuilt. Simply run varnish in the above way will NOT achieve this!</li>
<li>Most of my website functionalities require user logging in. If I simply run a varnish, then there is no security at all, all the sensitive data was cached by Varnish, this is not acceptable!</li>
</ol>
<p>I've investigated how to config VCL to achieve No.1, for No.2, it can be done by ESI, I will cover that later.</p>
<h2>VCL basics</h2>
<p>When Varnish got installed, it generates a default.vcl under <code>/etc/sysconfig/varnish</code> or <code>/etc/default/varnish</code> for Linux distros and <code>/usr/local/etc/varnish/</code> for Mac, all the content inside all commented out and let you modify.</p>
<p>VCL has a number of functions, each of them is invoked at specified stage of the HTTP transaction, the process is below (shamelessly stole from: <a href=""http://blog.mgm-tp.com/2012/01/varnish-web-cache/"" target=""_blank"">MGM Tech blog</a>:</p>
<figure><img alt=""Varnish Request Processing flow"" src=""http://blog.mgm-tp.com/wp-content/uploads/2012/01/Varnish-Request-Processing-480x310.png"" /> <figcaption>Varnish Request Processing flow</figcaption></figure>
<p>There are several important built-in objects which can be accessed in functions:</p>
<p class=""p1""><strong><em>req</em></strong></p>
<p class=""p2"">The request object. When Varnish has received the request the req object is created and populated. Most of the work you do in vcl_recv you do on or with the req object.</p>
<p class=""p1""><strong><em>beresp</em></strong></p>
<p class=""p2"">The backend respons object. It contains the headers of the object comming from the backend. Most of the work you do in vcl_fetch you do on the beresp object.</p>
<p class=""p1""><strong><em>obj</em></strong></p>
<p class=""p2"">The cached object. Mostly a read only object that resides in memory. obj.ttl is writable, the rest is read only.<span class=""s1"">&nbsp;</span></p>
<p>I have a resource exposed by Rails: <code>http://localhost/doc</code>, I expect it can be cached by Varnish, and can refresh the cache when someone POST to update it; To achieve my goal, I need cache the resource for all GET/HEAD requests, however, when a update request comes in - POST request, Varnish should purge the object which has been cached, this is done by three steps:</p>
<ol>
<li>Set default backend in VCL: <br />
<pre>     
     <code>
backend default {
  .host = ""127.0.0.1"";
  .port = ""3000"";
}</code>
    </pre>
</li>
<li>Tell Varnish to purge cache when this is an HTTP POST request AND server said ""no cache"":
<pre>    <code>
sub vcl_fetch {
  if (req.request == ""POST"" &amp;&amp; beresp.http.Cache-Control == ""no-cache"") {
      ban(""req.url == "" + req.url);
  }
  return (deliver);
} </code>
  </pre>
</li>
<li>Rerun Varnish and tell it to use this VCL configuration.
<pre>      <code>sudo varnishd -a :80 -s file,/tmp,500M -T localhost:6082 -F -f /usr/local/etc/varnish/default.vcl</code>
    </pre>
</li>
</ol>
<blockquote><code>ban</code> is a new action added in Varnish 3.0, there used to be <code>purge</code> and <code>purge_url</code> actions before but how they are replaced by <code>ban</code>, purge now can only be used without arguments.</blockquote>
<p>Finally I update ""<code>edit</code>"" action of the resource controller:</p>
<div class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #f6f3e8;"">response</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">header</span><span style=""color: #f6f3e8;"">[</span><span style=""color: #95e454; font-style: italic;"">""Cache-Control""</span><span style=""color: #f6f3e8;"">]</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #95e454; font-style: italic;"">""no-cache""</span></div>
<p>Now if I update the resource:</p>
<pre>  <code>HTTP/1.1 POST http://localhost/doc </code>
</pre>
<p>Varnish will firstly passby the request to backend, and after it got updated inside Rails, the controller returns ""<code>Cache-Control: no-cache</code>"" header, my VCL will then purge (ban) the requested url, so that next time a GET request comes in, Varnish will reload the resource from backend and <strong>the cached is re-built</strong>!</p>
<p>Below are some VCL examples I collected online:</p>
<h4>Honor the Cache-Control header!</h4>
<pre>  <code>
#Without this block Varnish would attempt to guess whether the response was cacheable and result in unexpected caching
if(obj.http.Pragma ~ ""no-cache"" ||
    obj.http.Cache-Control ~ ""no-cache"" ||
    obj.http.Cache-Control ~ ""private"") {
    return(pass);
} </code>
</pre>
<h4>Force refresh</h4>
<p>Always look up backend if a client fires a ""Force refresh request"", e.g. CMD-Shift-R in Mac or &lt;Ctrl&gt;+F5 in IE.</p>
<pre>  <code>
if (req.http.Cache-Control ~ ""no-cache"" &amp;&amp; client.ip ~ editors) {
    set req.hash_always_miss = true;
} </code>
</pre>
<h4>Remove cookie headers for images</h4>
<pre>  <code>
sub vcl_fetch {
  if (req.url ~ ""\.(png|gif|jpg)$"") {
    unset beresp.http.set-cookie;
    set beresp.ttl = 1h;
  }
}</code>
</pre>
<h4>Pass sensitive data to the backend</h4>
<p>For basic HTTP authentication:</p>
<pre>  <code>
if (req.http.Authorization) {
    # Not cacheable by default #
    return(pass);
} </code>
</pre>
<p>For JavaEE web application:</p>
<pre>  <code>
sub vcl_recv {
    if (req.http.cookie ~ ""JSESSIONID"") {
        std.log(""found jsessionid in request, passing to backend server"");  # import std;

        return (pass);
    }
}</code>
</pre>
<blockquote>Tip for debug VCL: add <code>std</code>module in vcl file:
<pre>    
        <code>import std;</code>
    </pre>
<p>So that we can print some useful log in VCL:</p>
<pre><code>std.syslog(888, ""Purge cache for: "" + req.url);</code></pre>
</blockquote>
<h2>Cache invalidation</h2>
<p>The VCL below will setup a access control list named ""purgers"" and expose an HTTP PURGE interface:</p>
<pre>    <code>
acl purgers { ""127.0.0.1""; }

sub vcl_recv {
    if (req.request == ""PURGE"") {
        if (!client.ip ~ purgers) {
            error 405 ""Method not allowed"";
        }
        return (lookup);
    }
}
sub vcl_fetch {
    std.syslog(888, ""vcl_fetch!!!!!!!!!!!!!!!"");
    if (req.request == ""POST"" &amp;&amp; beresp.http.Cache-Control == ""no-cache"") {
        std.syslog(888, ""Purge cache for: "" + req.url);
        ban(""req.url == "" + req.url);
    }
    return (deliver);
}
sub vcl_hit {
    if (req.request == ""PURGE"") {
        purge;
        error 200 ""Purged"";
    }
}
sub vcl_miss {
    if (req.request == ""PURGE"") { 
        purge;
        error 200 ""Purged"";
    }
}
sub vcl_pass {
    if (req.request == ""PURGE"") {
        error 502 ""PURGE on a passed object"";
    }
} </code>
</pre>
<p>So when an HTTP PURGE request: <code>curl -X PURGE http://localhost/doc</code> is sent from ""purgers"", Varnish will purge the cache.</p>
<h2>References</h2>
<p class=""p1""><span class=""s1""><a href=""https://www.varnish-cache.org/trac/wiki/Introduction"">https://www.varnish-cache.org/trac/wiki/Introduction</a></span></p>
<p class=""p1""><span class=""s1""><a href=""https://www.varnish-cache.org/docs/3.0/tutorial/vcl.html"">https://www.varnish-cache.org/docs/3.0/tutorial/vcl.html</a></span></p>
<p class=""p1""><span class=""s1""><a href=""https://www.varnish-software.com/static/book/VCL_functions.html"">https://www.varnish-software.com/static/book/VCL_functions.html</a></span></p>
<p class=""p1""><a href=""http://blog.mgm-tp.com/2012/01/varnish-web-cache/"">http://blog.mgm-tp.com/2012/01/varnish-web-cache/</a></p>
<p class=""p1""><span class=""s1""><a href=""http://www.anchor.com.au/hosting/dedicated/CreatingHighPerformanceDynamicWebSitesWithTheVarnishHttpAccelerator"">http://www.anchor.com.au/hosting/dedicated/CreatingHighPerformanceDynamicWebSitesWithTheVarnishHttpAccelerator</a></span></p>
<p class=""p1""><span class=""s1""><a href=""https://www.varnish-cache.org/trac/wiki/VCLExampleEnableForceRefresh"">https://www.varnish-cache.org/trac/wiki/VCLExampleEnableForceRefresh</a></span></p>
<p class=""p1""><span class=""s1""><a href=""https://www.varnish-software.com/blog/vac-203-high-performance-cache-invalidation-api-aka-super-fast-purger"">VAC 2.0.3 with high performance cache invalidation API (aka the Super Fast Purger)</a></span></p>
<p class=""p1""><span class=""s1""><a href=""http://en.wikipedia.org/wiki/Edge_Side_Includes"">http://en.wikipedia.org/wiki/Edge_Side_Includes</a></span></p>",8364,2013-01-11 21:50:40.770,1,A
146,Wayne,WTF?IBM Lotus and Domino Server?,WTF-IBM-Lotus-and-Domino-Server,25,"<p>Technical tags: <b>IBM</b>, <b>Domino</b>, <b>AIX</b>, <b>LotusScript</b>, <b>ODBC/JDBC</b>, <b>ADO</b>, <b>OLE DB</b>,</p>
<p>Assume we are now in <b>Jurassic period</b>, the technologies above are in <b>Cambrian period</b>, developers who has less than 4 years experience probably never heard about any of the above terminologies... No choice, I was dealing with them during the passes few weeks, I met ODBC as soon as I graduated while I was development ASP website using VBScript, but it was soon replaced by ADO, and after half a year I started studying .NET so I used ADO.NET, nowadays we usually talk to Entity Framework which abstracts ADO.NET interfaces... Now 8 years passes for me whereas I picked all of them back and started ""exploring""...</p>$More$
<ul>
<li>IDE crash
<p>Yes, it crashes without symptom, especially when I enabled debug, when crash happens, or windows running on the same process - ""notes2.exe"" crashes, it SUCKS!</p>
</li>
<li>Unstable execution environment
<p>I write a subroutine to insert a record into MySQL through ODBC, within half an hour I get error information (made no sense) printed at the bottom of Lotus Notes Designer, then I enabled LotusScript debugger and then it supernaturally passed!! It SUCKS MORE!!</p>
</li>
<li>Poor documentation and little resources online</li>
</ul>
<p>No word, it SUCKS MOST!!!</p>",8364,2013-02-03 21:00:44.283,1,A
147,Wayne,Cache Reverse Proxy - nginx,Cache-Reverse-Proxy-nginx,11,"<h2>Introduction</h2>
<p>On the homepage of <a title=""nginx Wiki"" href=""wiki.nginx.org/Main"" target=""_blank"">nxing wiki</a>, there used to be one sentence which really impressed my very much when I first time to take a look at it and learn it three years ago:</p>
<blockquote>
<p>Apache is like Microsoft Word, it has a million options but you only need six. Nginx does those six things, and it does five of them 50 times faster than Apache. &nbsp;--<a href=""https://chrislea.com/"" target=""_blank"">Chris Lea</a></p>
$More$
</blockquote>
<p>Now it is not there anymore, how you can still search on the web to see it:&nbsp;<a href=""http://www.wikivs.com/wiki/Apache_vs_nginx"" target=""_blank"">example link</a>.</p>
<p>One of the six things nginx can do and c<strong>an do gorgeous</strong> is putting it in front of the web application server as a <a title=""http://en.wikipedia.org/wiki/Reverse_proxy"" href=""http://en.wikipedia.org/wiki/Reverse_proxy""><strong>Cache Reverse Proxy</strong></a>, which does two major tasks:</p>
<ol>
<li><strong>Receive all the requests and dispatch them to the backed server(s)</strong></li>
<li><strong>Cache requests &amp; response to speed up HTTP transaction significantly</strong></li>
<li>Play a role as a load balancer (optional).</li>
</ol>
<p>What are the benefits of doing this? There are many, items below are copied from Wikepedia:</p>
<blockquote>
<ul>
<li>Reverse proxies can hide the existence and characteristics of the origin server(s).</li>
<li><a title=""Application firewall"" href=""http://en.wikipedia.org/wiki/Application_firewall"">Application firewall</a>&nbsp;features can protect against common web-based attacks. Without a reverse proxy, removing malware or initiating takedowns, for example, can become difficult.</li>
<li>In the case of&nbsp;<a class=""mw-redirect"" title=""Secure website"" href=""http://en.wikipedia.org/wiki/Secure_website"">secure websites</a>, the&nbsp;<a class=""mw-redirect"" title=""Secure Sockets Layer"" href=""http://en.wikipedia.org/wiki/Secure_Sockets_Layer"">SSL</a>&nbsp;<a title=""Encryption"" href=""http://en.wikipedia.org/wiki/Encryption"">encryption</a>&nbsp;is sometimes not performed by the web server itself, but is instead offloaded to a reverse proxy that may be equipped with&nbsp;<a title=""SSL acceleration"" href=""http://en.wikipedia.org/wiki/SSL_acceleration"">SSL acceleration</a>hardware. (See&nbsp;<a title=""SSL termination proxy"" href=""http://en.wikipedia.org/wiki/SSL_termination_proxy"">SSL termination proxy</a>)</li>
<li>A reverse proxy can&nbsp;<a class=""mw-redirect"" title=""Load balancer"" href=""http://en.wikipedia.org/wiki/Load_balancer"">distribute the load</a>&nbsp;from incoming requests to several servers, with each server serving its own application area. In the case of reverse proxying in the neighborhood of&nbsp;<a title=""Web server"" href=""http://en.wikipedia.org/wiki/Web_server"">web servers</a>, the reverse proxy may have to rewrite the&nbsp;<a class=""mw-redirect"" title=""URL"" href=""http://en.wikipedia.org/wiki/URL"">URL</a>&nbsp;in each incoming request in order to match the relevant internal location of the requested resource.</li>
<li>A reverse proxy can reduce load on its origin servers by&nbsp;<a title=""Web cache"" href=""http://en.wikipedia.org/wiki/Web_cache"">caching</a>&nbsp;<a title=""Static web page"" href=""http://en.wikipedia.org/wiki/Static_web_page"">static content</a>, as well as&nbsp;<a title=""Dynamic web page"" href=""http://en.wikipedia.org/wiki/Dynamic_web_page"">dynamic content</a>. Proxy caches of this sort can often satisfy a considerable amount of website requests, greatly reducing the load on the origin server(s). Another term for this is&nbsp;<a title=""Web accelerator"" href=""http://en.wikipedia.org/wiki/Web_accelerator"">web accelerator</a>.</li>
<li>A reverse proxy can optimize content by&nbsp;<a title=""Data compression"" href=""http://en.wikipedia.org/wiki/Data_compression"">compressing</a>&nbsp;it in order to speed up loading times.</li>
<li>In a technique known as ""spoon feeding"",<sup id=""cite_ref-spoon-feeding_2-0"" class=""reference""><a href=""http://en.wikipedia.org/wiki/Reverse_proxy#cite_note-spoon-feeding-2"">[2]</a></sup>&nbsp;a dynamically generated page can be produced all at once and served to the reverse-proxy, which can then return it to the client a little bit at a time. The program that generates the page is not forced to remain open and tying up server resources during the possibly extended time the client requires to complete the transfer.</li>
<li>Reverse proxies can be used whenever multiple web servers must be accessible via a single public IP address. The web servers listen on different ports in the same machine, with the same local IP address or, possibly, on different machines and different local IP addresses altogether. The reverse proxy analyzes each incoming call and delivers it to the right server within the local area network.</li>
<li>Reverse proxies can be used to perform&nbsp;<a title=""A/B testing"" href=""http://en.wikipedia.org/wiki/A/B_testing"">A/B testing</a>&nbsp;and&nbsp;<a title=""Multivariate testing"" href=""http://en.wikipedia.org/wiki/Multivariate_testing"">Multivariate testing</a>&nbsp;without placing javascript tags or code into pages.</li>
</ul>
</blockquote>
<p>&nbsp;</p>
<p>This post is focused on No 1 and 2 with dynamica content from backend web server, No 3 is simple enough, nginx provides a <a title=""HttpUpstreamModule"" href=""http://wiki.nginx.org/HttpUpstreamModule"">HTTP UPSTREAM</a> module for doing it.</p>
<h2>The scenario</h2>
<p>Image there is a web resource which <strong>is frequenyly accessed, and is less frequently updated</strong>, but it does cares about</p>
<p class=""p1""><strong>instantaneity</strong>, for example:</p>
<ol>
<li class=""p1"">A relatively static homepage with high concurrent requests.</li>
<li class=""p1"">A wiki page shared within an enterprise.</li>
</ol>
<p class=""p1"">For this kind of scenario, our idea scenario is:</p>
<p>Nginx can cache the resource, and it will <strong>refresh the cache</strong> as soon as the resource got updated, so that all the further requests will <strong>retrieve the latest version</strong>!</p>
<h2>How to do it</h2>
<p>I built up a Rails 3, it expose a resource:&nbsp;<a href=""http://localhost/doc,"">http://localhost:3000/doc,</a>&nbsp;it is very simple, each time a GET request comes in, it read a JSON file stored on hard disk:</p>
<div class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #f6f3e8;"">{</span><br> <span style=""color: #8ac6f2;"">&nbsp; ""Counter""</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">1</span><br><span style=""color: #f6f3e8;"">}</span></div>
<p>And each time a POST request comes in, it update the Counter to plus one.</p>
<p>The routes.rb:</p>

<div class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #f6f3e8;"">get</span> <span style=""color: #95e454; font-style: italic;"">'doc'</span> <span style=""color: #f6f3e8;"">=&gt;</span> <span style=""color: #95e454; font-style: italic;"">'doc#view'</span><br><span style=""color: #f6f3e8;"">post</span> <span style=""color: #95e454; font-style: italic;"">'doc'</span> <span style=""color: #f6f3e8;"">=&gt;</span> <span style=""color: #95e454; font-style: italic;"">'doc#edit'</span></div>
<p>The view and edit actions in controller:</p>
<div class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #f6f3e8;"">before_filter</span> <span style=""color: #8ac6f2;"">do</span> <br>&nbsp; &nbsp;<span style=""color: #cae682;"">@json_path</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">Rails</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">root</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">join</span>(<span style=""color: #95e454; font-style: italic;"">""public""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #95e454; font-style: italic;"">""doc.json""</span>)<br><span style=""color: #8ac6f2;"">end</span><br><br><span style=""color: #8ac6f2;"">def</span> <span style=""color: #cae682;"">view</span><br>&nbsp; &nbsp;<span style=""color: #f6f3e8;"">response</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">header</span><span style=""color: #f6f3e8;"">[</span><span style=""color: #95e454; font-style: italic;"">""Cache-Control""</span><span style=""color: #f6f3e8;"">]</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #95e454; font-style: italic;"">""public""</span><br>&nbsp; &nbsp;<span style=""color: #f6f3e8;"">render</span> <span style=""color: #95e454; font-style: italic;"">:layout</span> <span style=""color: #f6f3e8;"">=&gt;</span> <span style=""color: #8ac6f2;"">false</span><br><span style=""color: #8ac6f2;"">end</span><br><br><span style=""color: #8ac6f2;"">def</span> <span style=""color: #cae682;"">edit</span><br>&nbsp; &nbsp;<span style=""color: #f6f3e8;"">increased_counter</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #f6f3e8;"">increase_counter</span><br>&nbsp; &nbsp;<span style=""color: #f6f3e8;"">response</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">header</span><span style=""color: #f6f3e8;"">[</span><span style=""color: #95e454; font-style: italic;"">""Cache-Control""</span><span style=""color: #f6f3e8;"">]</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #95e454; font-style: italic;"">""no-cache""</span><br>&nbsp; &nbsp;<span style=""color: #f6f3e8;"">response</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">header</span><span style=""color: #f6f3e8;"">[</span><span style=""color: #95e454; font-style: italic;"">""Expires""</span><span style=""color: #f6f3e8;"">]</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #95e454; font-style: italic;"">""-1""</span><br><br>&nbsp; &nbsp;<span style=""color: #f6f3e8;"">render</span> <span style=""color: #95e454; font-style: italic;"">:text</span> <span style=""color: #f6f3e8;"">=&gt;</span> <span style=""color: #95e454; font-style: italic;"">""Successfully Updated! The updated Counter is: </span><span style=""color: #95e454; font-style: italic;"">#{</span><span style=""color: #f6f3e8;"">increased_counter</span><span style=""color: #95e454; font-style: italic;"">}</span><span style=""color: #95e454; font-style: italic;"">""</span><br><span style=""color: #8ac6f2;"">end</span><br><br><span style=""color: #8ac6f2;"">def</span> <span style=""color: #cae682;"">increase_counter</span><br>&nbsp; &nbsp;<span style=""color: #f6f3e8;"">counter</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">JSON</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">load</span>(<span style=""color: #cae682;"">@json_path</span>)<span style=""color: #f6f3e8;"">[</span><span style=""color: #95e454; font-style: italic;"">""Counter""</span><span style=""color: #f6f3e8;"">]</span> <span style=""color: #f6f3e8;"">+</span> <span style=""color: #e5786d;"">1</span><br>&nbsp; &nbsp;<span style=""color: #cae682;"">@json_file</span> <span style=""color: #f6f3e8;"">=</span> <span style=""color: #e5786d;"">File</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">open</span>(<span style=""color: #cae682;"">@json_path</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #95e454; font-style: italic;"">'w'</span>)<br>&nbsp; &nbsp;<span style=""color: #cae682;"">@json_file</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">write</span><span style=""color: #f6f3e8;"">({</span> <span style=""color: #95e454; font-style: italic;"">:Counter</span> <span style=""color: #f6f3e8;"">=&gt;</span> <span style=""color: #f6f3e8;"">counter</span> <span style=""color: #f6f3e8;"">}</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">to_json</span>)<br>&nbsp; &nbsp;<span style=""color: #cae682;"">@json_file</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">close</span><br>&nbsp; &nbsp;<span style=""color: #f6f3e8;"">counter</span><br><span style=""color: #8ac6f2;"">end</span></div>
<br>
<p>The simple view which renders JSON :
</p><div class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #e5786d;"">&lt;%=</span> <span style=""color: #e5786d;"">JSON</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">load</span>(<span style=""color: #cae682;"">@json_path</span>)<span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">to_json</span> <span style=""color: #e5786d;"">%&gt;</span><br><span style=""color: #f6f3e8;"">&lt;form action="""" method=""post"" accept-charset=""utf-8""&gt;</span><br><span style=""color: #f6f3e8;"">&nbsp; &lt;input type=""submit"" name=""Edit"" id="""" value=""Edit"" /&gt;</span><br><span style=""color: #f6f3e8;"">&lt;/form&gt;</span></div>
<p></p>
<br>
<p>The rails server is bound to port 3000, and I am now going to config my nginx, my nginx.config is located at <code>/usr/local/etc/nginx/nginx.conf</code>:
</p><div class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #8ac6f2;"">http</span> <span style=""color: #f6f3e8;"">{</span><br> &nbsp; <span style=""color: #f6f3e8;"">proxy_cache_path</span> &nbsp;<span style=""color: #95e454; font-style: italic;"">/var/www/cache</span> <span style=""color: #95e454; font-style: italic;"">levels=1:2</span> <span style=""color: #95e454; font-style: italic;"">keys_zone=my-cache:8m</span> <span style=""color: #95e454; font-style: italic;"">max_size=1000m</span> <span style=""color: #95e454; font-style: italic;"">inactive=600m</span>;<br> &nbsp; <span style=""color: #f6f3e8;"">proxy_temp_path</span> <span style=""color: #95e454; font-style: italic;"">/var/www/cache/tmp</span>; <br><br> &nbsp; <span style=""color: #f6f3e8;"">server</span> <span style=""color: #f6f3e8;"">{</span><br> &nbsp; &nbsp; &nbsp; <span style=""color: #f6f3e8;"">listen</span> &nbsp; &nbsp; &nbsp; <span style=""color: #e5786d;"">80</span>;<br> &nbsp; &nbsp; &nbsp; <span style=""color: #f6f3e8;"">server_name</span> &nbsp;<span style=""color: #95e454; font-style: italic;"">localhost</span>;<br><br> &nbsp; &nbsp; &nbsp; <span style=""color: #f6f3e8;"">location</span> <span style=""color: #95e454; font-style: italic;"">/</span> <span style=""color: #f6f3e8;"">{</span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=""color: #99968b; font-style: italic;""># Reverse proxy</span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=""color: #f6f3e8;"">proxy_pass</span> &nbsp; &nbsp; &nbsp; &nbsp;<span style=""color: #95e454; font-style: italic;"">http://localhost:3000</span>;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=""color: #f6f3e8;"">proxy_redirect</span> <span style=""color: #e5786d;"">off</span>;<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=""color: #99968b; font-style: italic;""># Cache</span><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=""color: #f6f3e8;"">proxy_cache</span> <span style=""color: #95e454; font-style: italic;"">my-cache</span>;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=""color: #f6f3e8;"">proxy_cache_valid</span> &nbsp;<span style=""color: #e5786d;"">200</span> <span style=""color: #e5786d;"">302</span> &nbsp;<span style=""color: #e5786d;"">60m</span>;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=""color: #f6f3e8;"">proxy_cache_valid</span> &nbsp;<span style=""color: #e5786d;"">404</span> &nbsp; &nbsp; &nbsp;<span style=""color: #e5786d;"">1m</span>;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=""color: #f6f3e8;"">proxy_cache_bypass</span> &nbsp; <span style=""color: #cae682;"">$http_secret_header</span>;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=""color: #f6f3e8;"">add_header</span> <span style=""color: #95e454; font-style: italic;"">X-Cache-Status</span> <span style=""color: #cae682;"">$upstream_cache_status</span>;<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=""color: #f6f3e8;"">proxy_set_header</span> &nbsp;<span style=""color: #95e454; font-style: italic;"">Host</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style=""color: #cae682;"">$host</span>;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=""color: #f6f3e8;"">proxy_set_header</span> &nbsp;<span style=""color: #95e454; font-style: italic;"">X-Real-IP</span> &nbsp; &nbsp; &nbsp; <span style=""color: #cae682;"">$remote_addr</span>;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=""color: #f6f3e8;"">proxy_set_header</span> &nbsp;<span style=""color: #95e454; font-style: italic;"">X-Forwarded-For</span> <span style=""color: #cae682;"">$proxy_add_x_forwarded_for</span>;<br> &nbsp; &nbsp; &nbsp; <span style=""color: #f6f3e8;"">}</span><br> &nbsp; <span style=""color: #f6f3e8;"">}</span><br><span style=""color: #f6f3e8;"">}</span></div>
<p></p>
<p>The explanation is below:</p>
<ul>
<li>proxy_cache_path: path for nginx to store cached files</li>
<li>proxy_temp_path: temp path when nginx is caching files</li>
<li>proxy_pass: the backend web server location (my Rails app in this example)&nbsp;</li>
</ul>
<p>Refer more information about the nginx proxy module config on: <a href=""http://nginx.org/en/docs/http/ngx_http_proxy_module.html"">http://nginx.org/en/docs/http/ngx_http_proxy_module.html</a></p>
<p>Now if I restart my nginx server: sudo nginx -s reload, and visit <a href=""http://localhost/doc,"">http://localhost/doc,</a>&nbsp;I can see the JSON with Counter equals to 1 rendered on the web page:</p>
<p><img title=""JSON Counter"" src=""https://pgkdga.bn1.livefilestore.com/y1pQONS1BmHcJ3Sw2Q8x6bpYJz-jwZAI3J4MUc6EUNuwneB-_IWvitDL2dXfq4L2vbAVfQIygCs1otu8VRLhSHxPihMXl7HCWI5/Screen%20Shot%202013-01-10%20at%203.10.22%20PM%201.png?psid=1"" alt=""JSON Counter"" width=""419"" height=""179""></p>
<p>And if we cd into /var/www/cache, we can see nginx has cached the request:<br><img title=""nginx cache"" src=""https://pgkdga.bn1.livefilestore.com/y1pOo12YN5xCLEX8XqyRB_s_b778TjeKBdwzr4H7Ao72qoHYOx_ySqH0BZbMrDIWw_H-ffAEGEA8yR8phW7cEUxQPhzKP1nA_Hi/Screen%20Shot%202013-01-10%20at%203.13.29%20PM.png?psid=1"" alt=""nginx cache"" width=""463"" height=""338""></p>
<p>Important notice here: nginx will honor HTTP <code>Cache-Control</code> header, i.e. if its value is set to ""no-cache"" or ""private"", nginx will NOT cache the response!</p>
<p>Now I am going to update the Counter:<br>
<img src=""https://pgkdga.bn1.livefilestore.com/y1pM5mkSabyGfdvgdh4nvVwx977xic4mdZVv8G7cnv-IQ_xMP-X5cMJQA58V0kErZeTFPI2hckwbM-BE1UinUxs4dmXF7ujFlX7/Screen%20Shot%202013-01-10%20at%203.40.00%20PM.png?psid=1"" alt=""update counter"">
</p>
<p>And when I visit http://localhost/doc again, no doubt, I will see Counter is ""1"" since I've let nginx to cache it.</p>
<blockquote>Important notice here: after nginx cache the resource inbound with an HTTP verb, any further request with the same HTTP verb on this resource will be responded by nginx, backend server will never got hit! </blockquote>
<p>Now comes to the key point, by default nginx will pass any HTTP POST request to the backend without looking up the cache, so I can ""purge"" the nginx cache for specific resource, so that next time when a new request comes in, nginx will rebuild the cache!</p>
<p>The tool for purging nginx cache is a CLI tool called <a href=""https://github.com/perusio/nginx-cache-purge"" target=""_blank"">nginx-cache-purge</a>.</p>
<p>The usage is: </p>
<pre><code>nginx-cache-purge ""foobar.cs"" /var/www/cache/nginx/baz
</code></pre>
<p>So that I can add a invoking line in my ""<code>edit</code>"" action inside my doc controller:</p>
     <div class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: rgb(246, 243, 232); background-color: rgb(36, 36, 36);""><span style=""color: rgb(246, 243, 232);"">system</span>(<span style=""color: rgb(149, 228, 84); font-style: italic;"">""nginx-cache-purge 'doc' /var/www/cache""</span>)<br></div>
<br>
<p>Now every time we edit the Counter by HTTP POST, the Rails app will invoke CLI to purge the ""/doc"" cache, so that next request will lead nginx to re-cache it, we are all set!</p>
<p><strong>Fantastic</strong>! </p>
<p>Actually nginx provide a standard HTTP API to purge the cache, that is <a href=""http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_bypass"">proxy_cache_bypass</a> module, it allows website administrators to define customized interface to bypass nginx cache look up, in my nginx.conf above there are two lines:
  </p><pre><code>proxy_cache_bypass   $http_secret_header;
add_header X-Cache-Status $upstream_cache_status;
    </code></pre>
<p></p>
<p>So if any client fires a HTTP request that contains header <code>Secret-Header: 1</code>, nginx will bypass the request regardless of whether the requested resource was cached or not.</p>
<img src=""https://pgkdga.bn1.livefilestore.com/y1pt9XpGn0edu-3msOBOWb2rPJObHacsUaWgZqqOs9QCXQxXe__pCDlDv8XYiJXRVHkrQzkUTL1YwPBC5W_G6H2bNrPWfMB0AkN/Screen%20Shot%202013-01-10%20at%204.14.33%20PM.png?psid=1"" alt=""Bypass cache"">

<h2>Conclusion</h2>
<p>nginx is really a powerful and fast web server, and it is easy to use and config as well! Using nginx as a Cache Reverse Proxy can dramatically improve your website's loading speed and concurrency performance, thus improves UX and lower down the server cost. That's why it is <a href=""http://www.nginx.com/company.html#nginx-users"" target=""_blank"">used by so many popular websites</a>.</p>
<h2>References</h2>
<p class=""p1""><span class=""s1""><a href=""https://github.com/FRiCKLE/ngx_cache_purge/"">https://github.com/FRiCKLE/ngx_cache_purge/</a></span><span class=""s2"">&nbsp;A nginx purge model</span></p>
<p class=""p1""><span class=""s1""><a href=""http://serverfault.com/questions/30705/how-to-set-up-nginx-as-a-caching-reverse-proxy"">http://serverfault.com/questions/30705/how-to-set-up-nginx-as-a-caching-reverse-proxy</a></span></p>
<p class=""p1""><span class=""s1""><a href=""http://nginx.org/en/docs/http/ngx_http_proxy_module.html"">http://nginx.org/en/docs/http/ngx_http_proxy_module.html</a></span></p>
<p class=""p1""><span class=""s1""><a href=""http://wiki.nginx.org/HttpProxyModule"">http://wiki.nginx.org/HttpProxyModule</a></span></p>
<p class=""p1""><span class=""s1""><a href=""https://github.com/perusio/nginx-cache-purge"">https://github.com/perusio/nginx-cache-purge</a></span><span class=""s2"">&nbsp;</span></p>
",14278,2013-01-10 08:32:26.773,1,A
148,Wayne,狮城新生活,Brand-New-Life-In-SGP,1,"<h3>新&ldquo;家&rdquo;</h3>
<p>本屌丝租用的是一套位于Pasir Pajang Hill据说是富人区的海景房, 每月开销S$3600，跟Mark兄弟分摊。</p>
<figure><a href=""https://ezlmzw.bn1.livefilestore.com/y2p9IBWbBxWVxeUHo0b7Fq_NvNgiv1lyZoOpdxJHIbuQ0RmYIhKtDNPs-oE6OCAqkEtoJhyrcj7OBR8CJWHL-F6P5mVZ_Jf8j73AUh1JimTTwY/CAM00519.jpg?psid=1"" target=""_blank""><img alt=""Apartment with Bay view"" src=""https://ezlmzw.bn1.livefilestore.com/y2p9IBWbBxWVxeUHo0b7Fq_NvNgiv1lyZoOpdxJHIbuQ0RmYIhKtDNPs-oE6OCAqkEtoJhyrcj7OBR8CJWHL-F6P5mVZ_Jf8j73AUh1JimTTwY/CAM00519.jpg?psid=1"" width=""640"" /></a> <figcaption>海景房 - 每天24小时都有不一样的景色</figcaption></figure>
$More$
<p>鄙人酷爱游泳，之前2个月住在Carabelle时每晚9点回家，50米奥林匹克泳池包场的感觉实在是太爽了，在天朝只有半夜才行吧，而且水质也没法比。目前这个Condo的泳池较小，聊胜于无吧:)每天送儿子回到家，老婆早已准备好各式美味晚餐，让我自己都嫉妒自己:)</p>
<figure><a href=""https://fdjglq.bn1.livefilestore.com/y2puyU8nR6_j4uwsDb_pV2p1CExTQoBNuNkl8sXLMFaE4WjBiZwXZbuVijhw7w2hSh7woqKFkxFgF7kNPlTSUTh98AyDFdyBFsmC4myyzA8H3c/CAM00680.jpg?psid=1"" target=""_blank""><img alt=""Wife's barbecue fish"" src=""https://fdjglq.bn1.livefilestore.com/y2puyU8nR6_j4uwsDb_pV2p1CExTQoBNuNkl8sXLMFaE4WjBiZwXZbuVijhw7w2hSh7woqKFkxFgF7kNPlTSUTh98AyDFdyBFsmC4myyzA8H3c/CAM00680.jpg?psid=1"" width=""640"" /></a> <figcaption>老婆的新拿手菜 - 烤鱼</figcaption></figure>
<h3>儿子开始在Learning Vision上幼儿园</h3>
<p>每天早上开开心心送儿子去我司楼下的幼儿园，既增进父子感情，又不耽误工作。</p>
<figure><a href=""https://fdjglq.bn1.livefilestore.com/y2pJ9938Z7ntz0rcNMsfZo9UbR_mit0v2NZXw5i3UZH_86V4Z1vicfiP2Jrc-LU4Zw09iF2hb42ryflzXEHD2f4eMPoX4Qxu7LCKbbW_XPFNtA/%E5%B9%BC%E5%84%BF%E5%9B%AD%E8%B7%AF%E4%B8%8A.jpg?psid=1"" target=""_blank""> <img alt=""每天上幼儿园的时光"" src=""https://fdjglq.bn1.livefilestore.com/y2pJ9938Z7ntz0rcNMsfZo9UbR_mit0v2NZXw5i3UZH_86V4Z1vicfiP2Jrc-LU4Zw09iF2hb42ryflzXEHD2f4eMPoX4Qxu7LCKbbW_XPFNtA/%E5%B9%BC%E5%84%BF%E5%9B%AD%E8%B7%AF%E4%B8%8A.jpg?psid=1"" /> </a> <figcaption>自行车座椅上的儿子</figcaption></figure>
<figure><a href=""https://fdjglq.bn1.livefilestore.com/y2pvGjeCWWh-Fh305y7qPFTygHDWs6dnfszjvZANXqYNkKnFIwGe_Y9uPBuEpmLzRxlANnIOndDvmcpHQ9hsFk9yBV4pszQKlF6oaZocQRAjWM/CAM00634.jpg?psid=1"" target=""_blank""> <img alt=""自行车座椅上的儿子"" src=""https://fdjglq.bn1.livefilestore.com/y2pvGjeCWWh-Fh305y7qPFTygHDWs6dnfszjvZANXqYNkKnFIwGe_Y9uPBuEpmLzRxlANnIOndDvmcpHQ9hsFk9yBV4pszQKlF6oaZocQRAjWM/CAM00634.jpg?psid=1"" /> </a> <figcaption>自行车座椅上的儿子</figcaption></figure>
<figure><a href=""https://fdjglq.bn1.livefilestore.com/y2pPhk1kZOYZYNlNEwyRdCaFXByggombQluizWraM5561JrWYQYmd9MSN-oXL4a6IKMt50HEjr6U6ekgsxULLb9egQlIfBt2DRrZjKoaVl5pc0/CAM00574.jpg?psid=1"" target=""_blank""> <img alt=""旅行箱里的儿子"" src=""https://fdjglq.bn1.livefilestore.com/y2pPhk1kZOYZYNlNEwyRdCaFXByggombQluizWraM5561JrWYQYmd9MSN-oXL4a6IKMt50HEjr6U6ekgsxULLb9egQlIfBt2DRrZjKoaVl5pc0/CAM00574.jpg?psid=1"" /> </a> <figcaption>旅行箱里的儿子，这样的景象其实发生在周末我们一家人去超级市场时，由于儿童推车必须在Bus上收起来，我们便用旅行箱作为儿子的座驾，他也非常喜欢，只是走在路上回头率实在很高:)</figcaption></figure>
<p>儿子经过1个月的适应，现在已经非常享受幼儿园的环境了。</p>
<figure><a href=""https://fdjglq.bn1.livefilestore.com/y2pRj9fXYJSg_SE2m2Av23sfibJ-ZOPxlLMeFfnzQQ9aPWbR99O2xDboUiryjjHuAA0TzXxYA_ZRZRRLj6jiNKuMyv6S4H5bjE-4ZPd4A6AzK8/%E5%B9%BC%E5%84%BF%E5%9B%AD%E6%96%B0%E7%94%9F%E6%B4%BB.png?psid=1"" target=""_blank""> <img alt=""幼儿园新生活"" src=""https://fdjglq.bn1.livefilestore.com/y2pRj9fXYJSg_SE2m2Av23sfibJ-ZOPxlLMeFfnzQQ9aPWbR99O2xDboUiryjjHuAA0TzXxYA_ZRZRRLj6jiNKuMyv6S4H5bjE-4ZPd4A6AzK8/%E5%B9%BC%E5%84%BF%E5%9B%AD%E6%96%B0%E7%94%9F%E6%B4%BB.png?psid=1"" /> </a> <figcaption>幼儿园新生活</figcaption></figure>
<h3>这里的食物真的很赞</h3>
<p>狮城招牌辣椒螃蟹(Chili Crab)，在Jumbo Seafood吃的，吃后真是&ldquo;三月不知肉味&rdquo;了，整个享受的过程中我就不停地感叹：&ldquo;怎么可以做得这么好吃。。。&rdquo;。</p>
<figure><a href=""https://fdjglq.bn1.livefilestore.com/y2p3fVB1UjJgF1qY80Bb3USr2W5IpSR40gyPZVpDFOR7CwJWmvO4Wh_zIZrBNym9h5IwCgBPQPFaB0vIRqhffrjvIbVaTItN8jnd2oFcz5NHs0/CAM00617.jpg?psid=1"" target=""_blank""> <img alt=""Chili Crab"" src=""https://fdjglq.bn1.livefilestore.com/y2p3fVB1UjJgF1qY80Bb3USr2W5IpSR40gyPZVpDFOR7CwJWmvO4Wh_zIZrBNym9h5IwCgBPQPFaB0vIRqhffrjvIbVaTItN8jnd2oFcz5NHs0/CAM00617.jpg?psid=1"" /> </a> <figcaption>新加坡招牌菜式 - 辣椒螃蟹</figcaption></figure>
<h3>这里的宽带就更赞了</h3>
<p>鄙人刚刚装好了M1的最顶级家庭Fibre，独享200M光纤（S$55/M）:</p>
<figure><a href=""https://fdjglq.bn1.livefilestore.com/y2pE8YDELapci4buUtD8dyyMPZVY4NnFKjesqrRwO1LfOYM0V4it1R7SOVKxOL2fTRp9Osb5HzZfB3D6L2wGmzSo_JiHK1URtoYBqLdAcCuu6A/2013-08-19%2020_25_39-Speedtest.net%20by%20Ookla%20-%20My%20Results.png?psid=1"" target=""_blank""> <img alt=""Speed test"" src=""https://fdjglq.bn1.livefilestore.com/y2pE8YDELapci4buUtD8dyyMPZVY4NnFKjesqrRwO1LfOYM0V4it1R7SOVKxOL2fTRp9Osb5HzZfB3D6L2wGmzSo_JiHK1URtoYBqLdAcCuu6A/2013-08-19%2020_25_39-Speedtest.net%20by%20Ookla%20-%20My%20Results.png?psid=1"" /> </a> <figcaption>www.speedtest.net的网速测试结果</figcaption></figure>
<figure><a href=""https://fdjglq.bn1.livefilestore.com/y2pIjHyGp0gMD9-Fk0IJgn8wTo98-2GUjESGTOSXWm4bpaImW3Q7rQiGAj86PKGkXdFVphU365WK74UbF9ao_VhB9hXYjgjKl7LsKqitC42Vbk/Download-FIFA14.png?psid=1 target=""_blank""> <img alt=""Download Speed"" src=""https://fdjglq.bn1.livefilestore.com/y2pIjHyGp0gMD9-Fk0IJgn8wTo98-2GUjESGTOSXWm4bpaImW3Q7rQiGAj86PKGkXdFVphU365WK74UbF9ao_VhB9hXYjgjKl7LsKqitC42Vbk/Download-FIFA14.png?psid=1"" /> </a> <figcaption>随便下个东东</figcaption></figure>
<p>使尽浑身解数，终于&ldquo;逃离天朝&rdquo;，一个过去多年的夙愿，算是实现了，人各有志，鄙人宁肯站着死，绝不趴着活！肮脏的空气，不能推敲的食物，恶心的教育，挥我们金如土的的officer - Go to the hell!!!</p>",8461,2013-08-13 07:21:20.167,1,A
150,Wayne,MongoDB Schema Design and Common Practices,MongoDB_Schema_Design_And_Common_Practices,13,"<h2 id=""MongoDB-ExtendedProfile-Installation"">Installation</h2>
<p>Exhaustive documentation:&nbsp;<a class=""external-link"" href=""http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/"" rel=""nofollow"">http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/</a></p>
<p>Mongo executables will be installed into&nbsp;<b>/use/bin/</b>, database files will under&nbsp;<b>/data/db/</b></p>
<p>Log file location:&nbsp;<b>/var/log/mongodb/mongodb.log</b></p>
<p>$More$</p>
<h2 id=""MongoDB-ExtendedProfile-Terminology"">Terminology</h2>
<p><b><img class=""confluence-embedded-image"" alt="""" src=""https://ejlfia.bn1.livefilestore.com/y2pyy1aQvaVlhOQRU2m_HhWMirImZPQbroZm6R5D5mHIit6JqQQeO2t0NoYMkfgjsyQhFhVxHQQQHuKI14Fg6DHG8F_8tODx8_3VtGFWDWwVC4/Terminology.png?psid=1"" /><br /></b></p>
<h2 id=""MongoDB-ExtendedProfile-Adminstration"">Adminstration</h2>
<div><b><em>sudo service mongodb start/</em><em>stop/restart</em>&nbsp;</b>or simply issue&nbsp;<b><em>mongod&nbsp;</em></b>to start MongoDB process</div>
<div><b><em>mongo&nbsp;</em></b>to enter MongoDB Console</div>
<div class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;"">&gt; show dbs &nbsp;<span style=""color: #99968b; font-style: italic;"">#Show all databases</span><br />&gt; db &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=""color: #99968b; font-style: italic;"">#Show current db</span><br />&gt; db.help() &nbsp; <span style=""color: #99968b; font-style: italic;"">#View commands related with db</span><br /><br /><span style=""color: #99968b; font-style: italic;""># ""Create"" a new database named foo_db</span><br />&gt; use foo_db &nbsp;<span style=""color: #99968b; font-style: italic;""># Mongo will create this DB virutally, if we save anything into any collections, it will really creates the db.</span><br /><span style=""color: #99968b; font-style: italic;""># Create a new document into a collection (implicitly)</span><br />&gt; db.user_profiles.save<span style=""color: #f6f3e8;"">({</span> first_name: <span style=""color: #95e454; font-style: italic;"">""Wayne""</span>, last_name: <span style=""color: #95e454; font-style: italic;"">""Ye""</span> <span style=""color: #f6f3e8;"">})</span><br /><span style=""color: #99968b; font-style: italic;""># Explicitly create a new collection ()</span><br />db.createCollection(<span style=""color: #95e454; font-style: italic;"">""user_profile""</span>)<br /><span style=""color: #99968b; font-style: italic;""># Query the collection</span><br />&gt; db.user_profiles.find()<br /><span style=""color: #f6f3e8;"">{</span> <span style=""color: #95e454; font-style: italic;"">""_id""</span> : ObjectId(<span style=""color: #95e454; font-style: italic;"">""5216fa545b4a83d66587d397""</span>), <span style=""color: #95e454; font-style: italic;"">""first_name""</span> : <span style=""color: #95e454; font-style: italic;"">""Wayne""</span>, <span style=""color: #95e454; font-style: italic;"">""last_name""</span> : <span style=""color: #95e454; font-style: italic;"">""Ye""</span> <span style=""color: #f6f3e8;"">}</span><br />&gt; db.user_profiles.save<span style=""color: #f6f3e8;"">({</span> first_name: <span style=""color: #95e454; font-style: italic;"">""Wendy""</span>, last_name: <span style=""color: #95e454; font-style: italic;"">""Shen""</span>, gender: <span style=""color: #95e454; font-style: italic;"">""Female""</span> <span style=""color: #f6f3e8;"">})</span><br />&gt; db.user_profiles.find()<br /><span style=""color: #99968b; font-style: italic;""># Update</span><br />&gt; db.collection.update( <span style=""color: #f6f3e8;"">{</span> field: value1 <span style=""color: #f6f3e8;"">}</span>, <span style=""color: #f6f3e8;"">{</span> <span style=""color: #cae682;"">$set</span>: <span style=""color: #f6f3e8;"">{</span> field1: value2 <span style=""color: #f6f3e8;"">}</span> <span style=""color: #f6f3e8;"">}</span> ); <br /><span style=""color: #99968b; font-style: italic;""># View status</span><br />&gt; db.stats()<br />&gt; db.mycol.stats()</div>
<div class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #99968b; font-style: italic;""># Query subdocument using <a title=""Dot Noation"" href=""http://docs.mongodb.org/manual/core/document/#dot-notation"" target=""_blank"">Dot Notation</a></span><br />&gt; db.demo.insert({ ""Items"": [ { ""Name"": ""Milk Powder"", ""Price"": 9.9 }, { ""Name"": ""Toy Car"", ""Price"": 26 } ] })<br />&gt; db.demo.find({ ""Items.Price"": { $gt: 20 } })<br />{ <span style=""color: #95e454; font-style: italic;"">""_id""</span> : ObjectId(<span style=""color: #95e454; font-style: italic;"">""5216fa545b4a83d66587d397""</span>), ""Items"" : [ &nbsp;{ &nbsp;""Name"" : ""Milk Powder"", &nbsp;""Price"" : 9.9 }, &nbsp;{ &nbsp;""Name"" : ""Toy Car"", &nbsp;""Price"" : 26 } ] }</div>
<h6>&nbsp;</h6>
<h6 id=""MongoDB-ExtendedProfile-BatchadministrationfromJavaScripthttp%3A%2F%2Fdocs.mongodb.org%2Fmanual%2Ftutorial%2Fwrite-scripts-for-the-mongo-shell%2Fhttp%3A%2F%2Fdocs.mongodb.org%2Fmanual%2Fcore%2Fserver-side-javascript%2F%23running-js-scripts-in-mongo-on-mon"">Batch administration from JavaScript<br /><a class=""external-link"" href=""http://docs.mongodb.org/manual/tutorial/write-scripts-for-the-mongo-shell/"" rel=""nofollow"">http://docs.mongodb.org/manual/tutorial/write-scripts-for-the-mongo-shell/</a><br /><a class=""external-link"" href=""http://docs.mongodb.org/manual/core/server-side-javascript/#running-js-scripts-in-mongo-on-mongod-host"" rel=""nofollow"">http://docs.mongodb.org/manual/core/server-side-javascript/#running-js-scripts-in-mongo-on-mongod-host<br /></a><a class=""external-link"" href=""http://docs.mongodb.org/manual/tutorial/store-javascript-function-on-server/"" rel=""nofollow"">http://docs.mongodb.org/manual/tutorial/store-javascript-function-on-server/</a><a class=""external-link"" href=""http://docs.mongodb.org/manual/core/server-side-javascript/#running-js-scripts-in-mongo-on-mongod-host"" rel=""nofollow"">&nbsp;<br /></a><a class=""external-link"" href=""http://docs.mongodb.org/manual/reference/method/"" rel=""nofollow"">http://docs.mongodb.org/manual/reference/method/</a><a class=""external-link"" href=""http://docs.mongodb.org/manual/core/server-side-javascript/#running-js-scripts-in-mongo-on-mongod-host"" rel=""nofollow"">&nbsp;</a>&nbsp;(Mongo shell JS references)</h6>
<p><em>mongo&nbsp;<a class=""external-link"" href=""http://localhost:27017/mydb"" rel=""nofollow"">localhost:27017/mydb</a>&nbsp;db_schema.js</em></p>
<p><em>Or</em></p>
<p><em><span>load(""scripts/myjstest.js"") OR&nbsp;load(""/data/db/scripts/myjstest.js"")</span></em></p>
<h2 id=""MongoDB-ExtendedProfile-SchemaDesign""><em>Schema Design</em></h2>
<h6 id=""MongoDB-ExtendedProfile-Embedding%28de-normalizedata%29"">Embedding (de-normalize data)</h6>
<p>Store two related pieces of data in a single document.</p>
<p>When:</p>
<ul>
<li>There is a ""contains"" relationship between entities.</li>
<li>There is a ""one-to-many"" relationship, and the ""many"" objects always appear inline with the ""one"".</li>
</ul>
<h5>Example 1: Blog with comments</h5>
<p><b>Denormalized blog with comments</b></p>
<div class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #f6f3e8;"">db</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">blogs</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">insert</span><span style=""color: #f6f3e8;"">({</span><br /> &nbsp;<span style=""color: #f6f3e8;"">_id</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">1</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">title</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""Investigation on MongoDB""</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">content</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""some investigation contents""</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">post_date</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #f6f3e8;"">Date</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">now</span><span style=""color: #f6f3e8;"">(),</span><br /> &nbsp;<span style=""color: #f6f3e8;"">permalink</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""http://foo.bar/investigation_on_mongodb""</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">comments</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #f6f3e8;"">[</span><br /> &nbsp; &nbsp;<span style=""color: #f6f3e8;"">{</span> <span style=""color: #f6f3e8;"">content</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""Gorgeous post!!!""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">nickname</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""Scott""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">email</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""foo@bar.org""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">timestamp</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""1377742184305""</span> <span style=""color: #f6f3e8;"">},</span><br /> &nbsp; &nbsp;<span style=""color: #f6f3e8;"">{</span> <span style=""color: #f6f3e8;"">content</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""Splendid article!!!""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">nickname</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""Guthrie""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">email</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""foo@bar.org""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">timestamp</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""1377742184305""</span> <span style=""color: #f6f3e8;"">}</span><br /> &nbsp;<span style=""color: #f6f3e8;"">]}</span><br /> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );</div>
<h5>Example 2: Dishes and Cheves</h5>
<p><b>Normalized Dishes and Cheves</b></p>
<div class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #f6f3e8;"">db</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">dishes</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">insert</span><span style=""color: #f6f3e8;"">({</span><br /> &nbsp;<span style=""color: #f6f3e8;"">_id</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">1</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">name</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""Kong Bao Ji Ding""</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">price</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">5.5</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">rate</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">4.5</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">cheves</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #f6f3e8;"">[</span> <span style=""color: #95e454; font-style: italic;"">""Flora Zhang""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #95e454; font-style: italic;"">""Cristina Wang""</span> <span style=""color: #f6f3e8;"">]</span><br /> &nbsp;<span style=""color: #f6f3e8;"">}</span><br />);<br /> &nbsp;<br /><span style=""color: #f6f3e8;"">db</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">cheves</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">insert</span><span style=""color: #f6f3e8;"">({</span><br /> &nbsp;<span style=""color: #f6f3e8;"">_id</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">1</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">name</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""Flora Zhang""</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">age</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">32</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">avatar</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""http://www.gravatar.com/avatar.php?gravatar_id=dc654756c7c""</span><span style=""color: #f6f3e8;"">,</span> <br /> &nbsp;<span style=""color: #f6f3e8;"">dishes</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #f6f3e8;"">[</span> <span style=""color: #95e454; font-style: italic;"">""Kong Bao Ji Ding""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #95e454; font-style: italic;"">""Knight Zhang Beef""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #95e454; font-style: italic;"">""Ma Po Tou Fu""</span> <span style=""color: #f6f3e8;"">]</span><br /> &nbsp;<span style=""color: #f6f3e8;"">}</span><br />);</div>
<p>&nbsp;</p>
<p><b>Benefits</b>:<br />Better performance for read operations<br />Request and retrieve related data in a single database operation.</p>
<h6 id=""MongoDB-ExtendedProfile-Referencing%28Normalize-data%29"">Referencing (Normalize-data)</h6>
<p>store references between two documents to indicate a relationship between the data represented in each document.</p>
<p>When:</p>
<ul>
<li>when embedding would result in duplication of data but would not provide sufficient read performance advantages to outweigh the implications of the duplication.</li>
<li><span>to represent more complex many-to-many relationships.</span></li>
<li><span>to model large hierarchical data sets.</span></li>
</ul>
<p><span><span><b>Benefits</b>:<br /></span></span></p>
<ul>
<li><span><span>Separation of Concerns</span></span></li>
<li><span><span>Data model independent of logic<br /></span></span><span><br /></span></li>
</ul>
<p><span><b>Drawback</b>:<br />Referencing provides more flexibility than embedding; however, to resolve the references, client-side applications must issue follow-up queries. In other words, using references requires more roundtrips to the server.&nbsp;</span></p>
<p>Example 3: Books and publisher</p>
<p><b>Books and publishers</b></p>
<div class=""source"" style=""font-family: '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; color: #f6f3e8; background-color: #242424;""><span style=""color: #f6f3e8;"">db</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">books</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">insert</span><span style=""color: #f6f3e8;"">({</span><br /> &nbsp;<span style=""color: #f6f3e8;"">_id</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">1</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">name</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""MongoDB Applied Design Patterns""</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">price</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">35</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">rate</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">5</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">author</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""Rick Copeland""</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">ISBN</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""1449340040""</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">publisher_id</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">1</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">reviews</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #f6f3e8;"">[</span><br /> &nbsp; &nbsp;<span style=""color: #f6f3e8;"">{</span> <span style=""color: #f6f3e8;"">isUseful</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #8ac6f2;"">true</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">content</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""Cool book!""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">reviewer</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""Dick""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">timestamp</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""1377742184305""</span> <span style=""color: #f6f3e8;"">},</span><br /> &nbsp; &nbsp;<span style=""color: #f6f3e8;"">{</span> <span style=""color: #f6f3e8;"">isUseful</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #8ac6f2;"">true</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">content</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""Cool book!""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">reviewer</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""Xiaoshen""</span><span style=""color: #f6f3e8;"">,</span> <span style=""color: #f6f3e8;"">timestamp</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""1377742184305""</span> <span style=""color: #f6f3e8;"">}</span><br /> &nbsp;<span style=""color: #f6f3e8;"">]</span><br /> &nbsp;<span style=""color: #f6f3e8;"">}</span><br />);<br />&nbsp;&nbsp;<br /><span style=""color: #f6f3e8;"">db</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">publishers</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">insert</span><span style=""color: #f6f3e8;"">({</span><br /> &nbsp;<span style=""color: #f6f3e8;"">_id</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #e5786d;"">1</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">name</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""Packtpub INC""</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">address</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""2nd Floor, Livery Place 35 Livery Street Birmingham""</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">telephone</span><span style=""color: #f6f3e8;"">:</span> <span style=""color: #95e454; font-style: italic;"">""+44 0121 265 6484""</span><span style=""color: #f6f3e8;"">,</span><br /> &nbsp;<span style=""color: #f6f3e8;"">}</span><br />);</div>
<h2>Advanced Features</h2>
<h4>Multikey-Indexes</h4>
<p>Mongo supports indexing subdocument's key, consider the above ""Books and Publishers"" collection, Mongo can index the <i>reviewer</i> key by telling him this:</p>
<div class=""source"" style=""font: 14px/normal '[object HTMLOptionElement]', Consolas, 'Lucida Console', 'Courier New'; text-align: left; color: #f6f3e8; text-transform: none; text-indent: 0px; letter-spacing: normal; word-spacing: 0px; white-space: normal; font-size-adjust: none; font-stretch: normal; background-color: #242424; -webkit-text-stroke-width: 0px;""><span style=""color: #f6f3e8;"">db</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">books</span><span style=""color: #f6f3e8;"">.</span><span style=""color: #f6f3e8;"">ensureIndex</span><span style=""color: #f6f3e8;"">({</span><span class=""Apple-converted-space"">&nbsp;</span><span style=""color: #95e454; font-style: italic;"">""reviews.reviewer""</span><span style=""color: #f6f3e8;"">:</span><span class=""Apple-converted-space"">&nbsp;</span><span style=""color: #e5786d;"">1</span><span class=""Apple-converted-space"">&nbsp;</span><span style=""color: #f6f3e8;"">})</span></div>
<h4>Aggregation framework</h4>
<blockquote>A MongoDB aggregation is a series of special operators applied to a collection. An operator is a JavaScript object with a single property, the operator name, which value is an option object. The core point of aggregation framework is <strong>the aggregation pipeline</strong> which is a framework for data aggregation modeled on the concept of data processing pipelines.</blockquote>
<p>Aggregation was introduced in Mongo version 2.2, below is a table of comparison between Mongo and traditional relational DB from the aspect of aggregation functionalities:</p>
<table style=""font: 12px/normal helvetica, arial, sans-serif; border: 0px currentColor; width: 600px; color: #ffffff; text-transform: none; text-indent: 0px; letter-spacing: normal; margin-top: 1.1em; margin-bottom: 1.1em; word-spacing: 0px; white-space: normal; border-collapse: collapse; font-size-adjust: none; font-stretch: normal; background-color: transparent; -webkit-text-stroke-width: 0px;"" border=""1"">
<thead>
<tr class=""row-odd""><th class=""head"" style=""border-width: 0px 0px 1px; padding: 5px 8px 5px 5px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;""><span style=""font-size: small;"">SQL Terms, Functions, and Concepts</span></th><th class=""head"" style=""border-width: 0px 0px 1px; padding: 5px 8px 5px 5px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;""><span style=""font-size: small;"">MongoDB Aggregation Operators</span></th></tr>
</thead>
<tbody>
<tr class=""row-even"">
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;"">WHERE</td>
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;""><a class=""reference internal"" style=""color: #003594; text-decoration: none;"" title=""$match"" href=""http://docs.mongodb.org/manual/reference/aggregation/match/#pipe._S_match""><span class=""pre"" style=""font-family: 'Courier New', Courier, monospace; font-weight: bold;"">$match</span></a></td>
</tr>
<tr class=""row-odd"">
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;"">GROUP BY</td>
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;""><a class=""reference internal"" style=""color: #003594; text-decoration: none;"" title=""$group"" href=""http://docs.mongodb.org/manual/reference/aggregation/group/#pipe._S_group""><span class=""pre"" style=""font-family: 'Courier New', Courier, monospace; font-weight: bold;"">$group</span></a></td>
</tr>
<tr class=""row-even"">
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;"">HAVING</td>
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;""><a class=""reference internal"" style=""color: #003594; text-decoration: none;"" title=""$match"" href=""http://docs.mongodb.org/manual/reference/aggregation/match/#pipe._S_match""><span class=""pre"" style=""font-family: 'Courier New', Courier, monospace; font-weight: bold;"">$match</span></a></td>
</tr>
<tr class=""row-odd"">
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;"">SELECT</td>
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;""><a class=""reference internal"" style=""color: #003594; text-decoration: none;"" title=""$project"" href=""http://docs.mongodb.org/manual/reference/aggregation/project/#pipe._S_project""><span class=""pre"" style=""font-family: 'Courier New', Courier, monospace; font-weight: bold;"">$project</span></a></td>
</tr>
<tr class=""row-even"">
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;"">ORDER BY</td>
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;""><a class=""reference internal"" style=""color: #003594; text-decoration: none;"" title=""$sort"" href=""http://docs.mongodb.org/manual/reference/aggregation/sort/#pipe._S_sort""><span class=""pre"" style=""font-family: 'Courier New', Courier, monospace; font-weight: bold;"">$sort</span></a></td>
</tr>
<tr class=""row-odd"">
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;"">LIMIT</td>
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;""><a class=""reference internal"" style=""color: #003594; text-decoration: none;"" title=""$limit"" href=""http://docs.mongodb.org/manual/reference/aggregation/limit/#pipe._S_limit""><span class=""pre"" style=""font-family: 'Courier New', Courier, monospace; font-weight: bold;"">$limit</span></a></td>
</tr>
<tr class=""row-even"">
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;"">SUM()</td>
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;""><a class=""reference internal"" style=""color: #003594; text-decoration: none;"" title=""$sum"" href=""http://docs.mongodb.org/manual/reference/aggregation/sum/#grp._S_sum""><span class=""pre"" style=""font-family: 'Courier New', Courier, monospace; font-weight: bold;"">$sum</span></a></td>
</tr>
<tr class=""row-odd"">
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;"">COUNT()</td>
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;""><a class=""reference internal"" style=""color: #003594; text-decoration: none;"" title=""$sum"" href=""http://docs.mongodb.org/manual/reference/aggregation/sum/#grp._S_sum""><span class=""pre"" style=""font-family: 'Courier New', Courier, monospace; font-weight: bold;"">$sum</span></a></td>
</tr>
<tr class=""row-even"">
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;"">join</td>
<td style=""border-width: 0px 0px 1px; padding: 8px; text-align: left; border-bottom-color: #aaaaaa; border-bottom-style: solid;"">No direct corresponding operator;<span class=""Apple-converted-space"">&nbsp;</span><em>however</em>, the<span class=""Apple-converted-space"">&nbsp;</span><a class=""reference internal"" style=""color: #003594; text-decoration: none;"" title=""$unwind"" href=""http://docs.mongodb.org/manual/reference/aggregation/unwind/#pipe._S_unwind""><span class=""pre"" style=""font-family: 'Courier New', Courier, monospace; font-weight: bold;"">$unwind</span></a><span class=""Apple-converted-space"">&nbsp;</span>operator allows for somewhat similar functionality, but with fields embedded within the document.</td>
</tr>
</tbody>
</table>
<p>For example, still using the above ""Books and Publishers"" example, image I want to query ""<strong>a specific reviewer with the book(s) he/she reviewed</strong>"", I can do this:</p>
<p>&gt; &gt; db.books.aggregate({ $unwind: ""$reviews"" }, { $match: { ""reviews.reviewer"": ""Xiaoshen""} })<br />{<br />&nbsp;""result"" : [<br />&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;""_id"" : 1,<br />&nbsp;&nbsp;&nbsp;""name"" : ""MongoDB Applied Design Patterns"",<br />&nbsp;&nbsp;&nbsp;""price"" : 35,<br />&nbsp;&nbsp;&nbsp;""rate"" : 5,<br />&nbsp;&nbsp;&nbsp;""author"" : ""Rick Copeland"",<br />&nbsp;&nbsp;&nbsp;""ISBN"" : ""1449340040"",<br />&nbsp;&nbsp;&nbsp;""publisher_id"" : 1,<br />&nbsp;&nbsp;&nbsp;""reviews"" : {<br />&nbsp;&nbsp;&nbsp;&nbsp;""isUseful"" : true,<br />&nbsp;&nbsp;&nbsp;&nbsp;""content"" : ""Cool book!"",<br />&nbsp;&nbsp;&nbsp;&nbsp;""reviewer"" : ""Xiaoshen"",<br />&nbsp;&nbsp;&nbsp;&nbsp;""timestamp"" : ""1377742184305""<br />&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;}<br />&nbsp;],<br />&nbsp;""ok"" : 1<br />}</p>
<p>Aggregation introduction: <a href=""http://docs.mongodb.org/manual/applications/aggregation/"">http://docs.mongodb.org/manual/applications/aggregation/</a></p>
<p>One caveat: Aggregation is running upon JavaScript VM, which means - V8 after MongoDB version 2.4, although V8 is deadly fast, it cannot compete with native compiled/optimized C/C++ implementation, refer:<br /><a href=""http://stackoverflow.com/questions/2599943/mongodbs-performance-on-aggregation-queries"">http://stackoverflow.com/questions/2599943/mongodbs-performance-on-aggregation-queries</a></p>
<h2 id=""MongoDB-ExtendedProfile-CommonPractices""><em>Common Practices&nbsp;</em></h2>
<ul>
<li><em>Denormalize data when frequently read together (one-to-one, one-to-many)</em></li>
<li><em>Normalize data when where are separated queries happened frequently for both entities; or when there are too many data duplications</em></li>
<li><em>Reduce collection size by always using short field names as a convention. This will help you save memory over time.</em></li>
<li><em>Avoid using DBRef!&nbsp;<a class=""external-link"" href=""http://stackoverflow.com/questions/9412341/mongodb-is-dbref-neccessary"" rel=""nofollow"">Why</a></em></li>
<li><em>Always test queries with .explain() to check that you&rsquo;re hitting the right index.</em></li>
</ul>
<h2 id=""MongoDB-ExtendedProfile-Usefulresources"">Useful resources</h2>
<p>The ultimate manual<br /><a class=""external-link"" href=""http://docs.mongodb.org/manual/"" rel=""nofollow"">http://docs.mongodb.org/manual/</a>&nbsp;</p>
<p>Greate article explains differences between MongoDB and other famous Relational DBs:<br /><a class=""external-link"" href=""http://docs.mongodb.org/manual/reference/sql-comparison/"" rel=""nofollow"">http://docs.mongodb.org/manual/reference/sql-comparison/</a></p>
<p>Data Modeling Considerations for MongoDB Applications<br /><a class=""external-link"" href=""http://docs.mongodb.org/manual/core/data-modeling/"" rel=""nofollow"">http://docs.mongodb.org/manual/core/data-modeling/</a><a href=""http://wiki.autodesk.com/download/attachments/134319149/MongoDB-sharding-guide.pdf?version=1&amp;modificationDate=1377497767000&amp;api=v2"">MongoDB-sharding-guide.pdf</a>&nbsp;</p>
<p>Serialize Documents with the CSharp Driver<br /><a class=""external-link"" href=""http://docs.mongodb.org/ecosystem/tutorial/serialize-documents-with-the-csharp-driver/"" rel=""nofollow"">http://docs.mongodb.org/ecosystem/tutorial/serialize-documents-with-the-csharp-driver/</a>&nbsp;</p>
<p>Schema Design --Indexes!!<br /><a class=""external-link"" href=""http://www.slideshare.net/jrosoff/mongodb-advanced-schema-design-inboxes"" rel=""nofollow"">http://www.slideshare.net/jrosoff/mongodb-advanced-schema-design-inboxes</a>&nbsp;</p>
<p><em>Sharding and Mongo DB<br /><a class=""external-link"" href=""http://docs.mongodb.org/master/MongoDB-sharding-guide.pdf"" rel=""nofollow"">http://docs.mongodb.org/master/MongoDB-sharding-guide.pdf</a></em></p>
<p><em>MongoDB Operations Best Practices<br /><a class=""external-link"" href=""http://info.10gen.com/rs/10gen/images/10gen-MongoDB_Operations_Best_Practices.pdf"" rel=""nofollow"">http://info.10gen.com/rs/10gen/images/10gen-MongoDB_Operations_Best_Practices.pdf</a>&nbsp;</em></p>
<p><em>Sharding and Replica Sets Illustrated<br /><a href=""http://www.kchodorow.com/blog/2010/08/09/sharding-and-replica-sets-illustrated/"">http://www.kchodorow.com/blog/2010/08/09/sharding-and-replica-sets-illustrated/</a><br /></em></p>",9850,2013-08-30 02:21:20.000,1,A
151,Wayne,My New iMac,My-New-iMac,4,"<p><meta http-equiv=""content-type"" content=""text/html; charset=utf-8"" />Hooray! My new development &amp; gaming machine - <strong>the later 2013 iMac</strong>!</p>
<p>I wrote this blog post to record my thoughts and feelings before and after I purchased this baby:)</p>
<h3>My open questions and the answers I got from the Apple customer service</h3>
<ol>
<li>I will choose a dedicated SSD, will it be PCIe based?</li>
<li>Will the 2013 iMac easy to expand memory? Similar with the later 2012?</li>
<li>If I purchase the apple care in Singapore apple website online, will it valid in case in the future I migrated to other country (for example, USA) ?</li>
<li>Will the iMac pre-installed OSX mavericks?</li>
<li>If I buy a external USB 3.0 hard drive, do you think I can install a windows 8 on it?</li>
</ol>
<h3>Upgrade it in a money-saving manner!!</h3>
<h4>Memory</h4>
<p>Basic memory installed on the iMac is 8GB, if I choose to buy 16GB I gonna pay extra S$280 (approximate USD 224), according to my personality and habit of spending money, I will NOT do that! So does many other geeks: <a href=""http://www.macworld.co.uk/mac/masterclass/?articleid=3418897"" target=""_blanl"">How to install extra RAM memory in the new iMac</a>, actually installing extra memory for a 27 Inches iMac is fairly easy (while doing this on a 21.5 Inches iMac seems really scary, refer: <a href=""http://www.youtube.com/watch?v=D8Tuq373wPs"">21.5-inch iMac Late 2012 Memory Installation Video</a>, I am afraid of doing it^_^), so eventually I purchased a pair of Crucial: 8GB * 2, so I totally got 24GB.</p>
<h4>Hard disk</h4>
<p>The built-in 256GB SSD is my choice! I didn't choose the fusion drive (1TB HDD with built-in 128G SSD), because I want best performance<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif"" />; but I do need install Windows for .Net Development and gaming? I admit I am a purist at this point, I don't want Windows slows down my precious SSD, so eventually I purchased a WesternDigital MyBook Pro USB 3.0 external drive, I didn't choose a cool <a href=""http://www.apple.com/thunderbolt/"" target=""_blank"">ThunderBold</a> disk because it is out of a loser's (穷屌 in Mandarin) budget<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif"" />.</p>
<h3>Why iMac instead of an ultimate PC/Workstation?</h3>
<p>There are two aspects: positive and negative<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif"" /></p>
<h4>Things I like for iMac</h4>
<ul>
<li>Gorgeous 27 inch screen</li>
<li>Incredibly fast (hardware) and&nbsp;stable (OSX)</li>
<li>Instant warming up (I can put it there for one week, and can wake it up to work within a second)</li>
<li>Developer friendly, built-in terminal, SSH, ruby, gcc, JavaScript support.</li>
<li>Keyboard is the king! I can achieve 80% of my work mouse less!</li>
<li>Wonderful ecosystem: homebrew, QuickSilver, MacVim, iPhoto, iTunes, etc.</li>
</ul>
<h4>Things I don't like for a Windows PC</h4>
<li>Slow, I wonder most NT developers were developing based on high performance SSD...Win XP &gt; Windows 7 &gt; Windows 8 &gt; Windows 8.1</li>
<li>Unstable: blue screen? A few times. Unresponsive UI? Several times! Slow response when I am typing? All the time...</li>
<li>Much slower after 3 months...Much slower if it was kept running for several days.</li>
<li>There is no way to use it without mouse...</li>
<h3>The final configuration and the invoice</h3>
<p>
  <img src=""https://sumsxa.dm2304.livefilestore.com/y2p-qLbxmL4y9COvsSXfj6I9rnwDmxebfoNo-f0XrndYpyU5t3dH5x9Tnzp31GPbqtzDDyYQPqf77ddXYdugGQNAr7p7NvqF9pmwM8uLOKDc1k/Shipment.png?psid=1"" alt=""iMac-invoice"" />
</p>
<p>Daily tech website describes the 2013 iMac's price is <a href=""http://www.dailytech.com/Apple+Unleashes+Aggressively+Priced+Haswell+iMacs/article33440.htm"">aggressive</a>, IMHO, it worths the price!</p>
<h3>Working with it</h3>
<p>
  <img src=""https://sumsxa.dm2301.livefilestore.com/y2pxxNEQR25gVOxNecz-BQeOh48YOSnuWAeNuf7SLw7nVEJLpme7EKxzadoCi40QDkwiCGqA6Wx_BSKNmEaIgz8CyQVQ_r-cxdW6gfe9jffLi8/iMac.jpg?psid=1"" alt=""working-with-imac"" />
</p>
<h3>Conclusion</h3>
<p>I love it very much! As I expected, it is deadly fast, super stable and reliable, instant warming up; When I am coding on it, I feel I am a genious who can solve problems with easy; When I am gaming on it, I enjoy and splendid image quality and ultimate performance!</p>
<p><strong style=""font-size: 16pt"">It is just awesome!</strong></p>
<p>
---------------------------------------------------
  Updated Nov 28th, I sold the original keyboard/mouse at S$120, because I prefer to use my Cherry mechanical keyboard and gaming mouse<img style=""background-image: url('http://wayneye.com/Images/winLiveEmotions.gif'); background-position: -0px -0px; width: 19px; height: 19px;"" alt=""Smile"" src=""http://wayneye.com/Images/invis.gif"" />.
</p>
",4001,2013-11-28 10:58:20.000,1,A
152,Wayne,My Book &lt;Instant Cucumber BDD How-to&gt;,My-Book-Instant-Cucumber-BDD-How-to,1,"  <h3>The background</h3>
<p>I received an email during November 2012 from <a href=""http://www.packtpub.com/"" target=""_blank"">Packt</a>, in the email they asked me whether or not consider writing a book for them related with BDD using Cucumber based on Rails platform, the book will only contains 50-70 pages, they named this kind of book ""Instant book"", usually it is a quick guide for beginners using some kinds of technologies. Well, my first reaction was: ""Wow, I even never thought about writing a book, if I am going to write one, hum... can I?"", I did suspect myself a little bit, especially, <strong>the book will be written in English</strong>, I admitted I was not confident enough to reply them.</p>
<p>Actually I could imagine how hard this would be for me, a rookie who would write his first book, and at that period I was about to finish my 6 months business trip in Xi'an and would be back to ThoughtWorks Shanghai office soon, additionally, my son was just reaching two years old, too many things... However, I am kind of person who always expects challenges, and always willing to <strong>improve and beyond myself</strong>! I decided to give it a try!</p>
$More$
<h3>The process</h3>
<p>As soon as replied their email, the game kicked off, and I soon felt the pressure, Packt asked me to give them a skeleton of the book within three days, whereas 95% of my daily work was pair programming, and the rest 5% was meeting:) I had no choice but utilizing all my spare time, and I need my family's support, especially my son's support:)</p>
<p>I worked out a skeleton and sent to Packt in time, I decided to write this book with not only easy guidance and tutorials, but also with technical explanation in depth!</p>
<p>
  I decided to use my free <a href=""https://bitbucket.org"" target=""_blank"">Bitbucket</a> git repository to store my book, the drafted skeleton was submitted by me on <i>Dec 07 2012</i>, there had been many changes after the final publish, but this was really the first step!
  <pre>
Writing BDD specifications of what the application should do, and what to think about
Writing the specification you have in the Cucumber/Ruby format
Running the application at this stage, watching it fail and using the results to figure out what needs to be done
Writing the code to make it pass
Running the program again for the tests to pass

Table of Contents
  Recipe 1 The Concept of Behavior Driven Development  Page Count: 3
    What is it?
    Exhaustively describe the basic concept of BDD, its history (how it appears). 
    Borrows the concept of the ubiquitous language from DDD
    Why it matters?
    Explain the benefits of BDD, how it can empower your software development, and thus has positive impact for your business value and MMF (Minimum Marketable Features).
    Iron the gap between developers and business analyst, less misunderstanding.
    YAGNI
    Who use it?
    List the BDD implementation status in many different platforms/languages, and list a number of famous software giants who adopt BDD.
  
  Recipe 2 Cucumber in a nutshell                      Page Count: 2
    Gherkin                                            
    Features/Scenarios/Steps                          
    Programming languages support                    
  Recipe 3 Practice in Action                          Page Count: 5
    Cucumber setup                                  
    Your first feature                             
    The BDD pattern                               
    A concrete example                           
  Recipe 4 Expressive Gherkin                          Page Count: 8
    Define a background for scenarios           
    Outline related attributes in table        
    Using Scenario Outline                    
    Using tags                               
    Doc strings                             
  Recipe 5 How to write good steps                     Page Count: 5
    Use flexible pluralization             
    Step Argument Transforms              
    Use non-capturing groups             
    Define method                       
    Compound steps                     
    Hooks
  Recipe 6 Delve into step implementation              Page Count: 12
    Integration with Rails                           
    DOM manipulation                                
    JavaScript/Ajax                                
    RESTful web services                          
  Recipe 7 Cucumber with 3rd party libraries           Page Count: 10
    RCov                                         
    Pickle                                      
    WebMock                                    
    Capybara                                  
    Chronic                                  
  Recipe 8 Cucumber Best practices                     Page Count: 8                
    Readability                             
        Declarative step over imperative step  
    Maintainable                          
    Don't Repeat Yourself (A.K.A DRY)   
  Recipe 9 A comprehensive example                     Page Count: 15
  Recipe 10 Learning Resources                                  Page Count: 2

  Total pages 60
  </pre>
</p>
<h3>The result</h3>
<p>
  
	<figure><a href=""https://ionmqw.dm2301.livefilestore.com/y2pQY9DbADSYWMaFOXldhO7YqaHV_ZF84Lxf4V5j_Os2EAybnZ3knNztnqaARkqdYoFlqlQCvlCurFXQIfxUYLENIeQuGsgBiMFmgSNk21qogs/my_book_on_amazon.png?psid=1"" target=""_blank""><img alt=""Amazon Kindle page"" src=""https://ionmqw.dm2301.livefilestore.com/y2pQY9DbADSYWMaFOXldhO7YqaHV_ZF84Lxf4V5j_Os2EAybnZ3knNztnqaARkqdYoFlqlQCvlCurFXQIfxUYLENIeQuGsgBiMFmgSNk21qogs/my_book_on_amazon.png?psid=1"" width=""640"" /></a> <figcaption>&lt;Instant Cucumber BDD How-To&gt; was published on <a href=""http://www.packtpub.com/cucumber-behaviour-driven-development/book"" target=""_blank"">Packt web site</a>, as well as on <a href=""http://www.amazon.com/Instant-Cucumber-BDD-How-Wayne-ebook/dp/B00CIT30YE"" target=""_blank"">Amazon Kindle</a></figcaption></figure>
	<figure><a href=""https://genmqw.dm2302.livefilestore.com/y2pwkMaSKjulBr7YApT44ZGsmemf9glKi6vgyRcHO5dB9_l2E14WSZa4bF2iaHH--RQj6wX2dOEi2xKoFzitQk6rko2fLTRAReL4HyhdGyA0r8/amazon_user_review.png?psid=1"" target=""_blank""><img alt=""Instant Cucumber BDD How-To got 6 Four star on Amazon"" src=""https://genmqw.dm2302.livefilestore.com/y2pwkMaSKjulBr7YApT44ZGsmemf9glKi6vgyRcHO5dB9_l2E14WSZa4bF2iaHH--RQj6wX2dOEi2xKoFzitQk6rko2fLTRAReL4HyhdGyA0r8/amazon_user_review.png?psid=1"" width=""640"" /></a> <figcaption>Instant Cucumber BDD How-To got 6 Four star on Amazon</figcaption></figure>
  </p>
<p>
Most recent commits on Bitbucket:)
<figure><a href=""https://ionmqw.dm2301.livefilestore.com/y2p939-2HssZNgh3nKReTrlIGnEZoUNnhjQSLQDTzoGlpCmGsNWGk-zlkLRZkIza2EHOUWAJDrOvlFY2_5i7uQmmPgGAtNIRwVrgUnHdxsT4Mk/Screen%20Shot%202014-02-13%20at%207.39.29%20am.png?psid=1""><img alt=""CBHT Commits history"" src=""https://ionmqw.dm2301.livefilestore.com/y2p939-2HssZNgh3nKReTrlIGnEZoUNnhjQSLQDTzoGlpCmGsNWGk-zlkLRZkIza2EHOUWAJDrOvlFY2_5i7uQmmPgGAtNIRwVrgUnHdxsT4Mk/Screen%20Shot%202014-02-13%20at%207.39.29%20am.png?psid=1"" width=""60%"" /></a> <figcaption>Cucumber BDD How-To (CBHT) Commits history</figcaption></figure>
</p>
",4039,2013-12-17 14:31:03.000,1,A
153,Wayne,Setup MongoDB with sharding infrastructure,Setup_MongoDB_With_Sharding_Infrastructure,13,"<h2 id=""SettingupMongoDBwithshardinginfrastructure-Thelandscape"">The landscape&nbsp;</h2>
<p>Sharding is the strategy that MongoDB uses to horizentally scale the entire data store infrustructure and meet the demands of data,growth, the infrastructure can be demonstrated as image below:</p>
<p><img class=""confluence-embedded-image"" alt=""sharding"" src=""https://ejlfia.dm2301.livefilestore.com/y2p9rDBHBoQyOPgwqzq_r8IFm0VjCKQcXtIBeV1CqrWSCZys2zy3HoAkcRGctX2nuet133GdHvphYKi7tXLqYNYqu3TyHwBYOd65E0_1UIhDoE/ShardReplica.jpg?psid=1"" /></p>
<h2 id=""SettingupMongoDBwithshardinginfrastructure-Preparation"">Preparation</h2>
<p>To simulate a production like environment, a minimum number of <strong>7 physical/virtual servers</strong> are required, the role of them are:</p>
<ul>
<li><strong>3 for Mongo config servers</strong></li>
<li><strong>1 for&nbsp;Mongo shard server (mongos)</strong></li>
<li><strong>3 for a Mongo shard (<strong>Replica set</strong>), 1&nbsp;<strong><a class=""external-link"" href=""http://docs.mongodb.org/manual/reference/glossary/#term-primary"" rel=""nofollow"">primary&nbsp;</a>and 2&nbsp;<a class=""external-link"" href=""http://docs.mongodb.org/manual/reference/glossary/#term-secondary"" rel=""nofollow"">secondary</a>&nbsp;(or 1 secondary and 1 arbiter).</strong></strong></li>
</ul>
<p>Note: all the machines above need have <em>mongod</em> installed, for installation, refer: <a class=""external-link"" href=""http://docs.mongodb.org/manual/installation/"" rel=""nofollow"">Install MongoDB</a>.</p>
$More$
<h2 id=""SettingupMongoDBwithshardinginfrastructure-SetUpSteps"">SetUp Steps</h2>
<p>Concentrated steps of setting up sharded MongoDB are summarized below;&nbsp;a complete tutorial from MongoDB's official website can be found at:&nbsp;<strong><a class=""external-link"" href=""http://docs.mongodb.org/manual/tutorial/deploy-shard-cluster/"" rel=""nofollow"">Deploy a Sharded Cluster</a></strong>.:</p>
<h3 id=""SettingupMongoDBwithshardinginfrastructure-1.SetupConfigserver"">1. Setup Config server</h3>
<p>sudo mkdir -p /data/configdb<br />sudo mongod --configsvr --dbpath /data/configdb --port 27019</p>
<h3 id=""SettingupMongoDBwithshardinginfrastructure-2.SetupMongoShardserver%28mongos%29"">2. Setup Mongo Shard server (mongos)</h3>
<p>mongos --configdb [config_server_ip/host]</p>
<h3 id=""SettingupMongoDBwithshardinginfrastructure-3.SetupShard1~N"">3. Setup Shard 1~N</h3>
<p>In MangoDB production deployment, a ""shard"" should be a replica set, a<span style=""background-color: transparent; line-height: 1.4285715;"">&nbsp;typical ""three member"" replica sets architecture is like below:</span></p>
<p><img class=""confluence-embedded-image confluence-external-resource"" alt="""" src=""http://docs.mongodb.org/master/_images/replica-set-primary-with-two-secondaries.png"" data-image-src=""http://docs.mongodb.org/master/_images/replica-set-primary-with-two-secondaries.png"" /></p>
<p>Or</p>
<p><img class=""confluence-embedded-image confluence-external-resource"" alt="""" src=""http://docs.mongodb.org/master/_images/replica-set-primary-with-secondary-and-arbiter.png"" data-image-src=""http://docs.mongodb.org/master/_images/replica-set-primary-with-secondary-and-arbiter.png"" /></p>
<p>""Three member"" essentially are three <strong><em>mongod</em> </strong>processes with heartbeat and full replication between each other, they can run on one physical machine (for development/test use) or on separate machines (real production), this infrastructure provides ""<strong>additional fault tolerance and high availability</strong>"".&nbsp;</p>
<h4 id=""SettingupMongoDBwithshardinginfrastructure-Setupprimary"">Setup primary</h4>
<ol>
<li>
<p>Modify /etc/mongo.conf and ensure the following value are set correctly:</p>
<div class=""code panel pdl"" style=""border-width: 1px;"">
<div class=""codeContent panelContent pdl"">
<div>
<div id=""highlighter_663228"" class=""syntaxhighlighter nogutter  bash"">
<table border=""0"">
<tbody>
<tr>
<td class=""code"">
<div class=""container"" title=""Hint: double-click to select code"">
<div class=""line number1 index0 alt2""><code class=""bash plain"">port = 27017</code></div>
<div class=""line number2 index1 alt1""><code class=""bash plain"">bind_ip = 0.0.0.0</code></div>
<div class=""line number3 index2 alt2""><code class=""bash plain"">dbpath = </code><code class=""bash plain"">/media/mongo_volume/db/</code></div>
<div class=""line number4 index3 alt1""><code class=""bash plain"">fork = </code><code class=""bash functions"">true</code></div>
<div class=""line number5 index4 alt2""><code class=""bash plain"">replSet = rs0</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</li>
<li>Start the mongod process:<br /><em>mongod --config /etc/mongodb.conf</em></li>
<li>rs.initiate() # or explicitly:&nbsp;rs.initiate({_id: ""rs1"", members: [{_id: 0, host: ""rs1-1""}]})</li>
<li>rs.conf()</li>
<li>rs.add(""{secondary_host}"")</li>
</ol>
<h4 id=""SettingupMongoDBwithshardinginfrastructure-Setupsecondary"">Setup secondary</h4>
<ol>
<li>
<p>Modify /etc/mongo.conf and ensure the following value are set correctly:</p>
<div class=""code panel pdl"" style=""border-width: 1px;"">
<div class=""codeContent panelContent pdl"">
<div>
<div id=""highlighter_193651"" class=""syntaxhighlighter nogutter  bash"">
<table border=""0"">
<tbody>
<tr>
<td class=""code"">
<div class=""container"" title=""Hint: double-click to select code"">
<div class=""line number1 index0 alt2""><code class=""bash plain"">port = 27017</code></div>
<div class=""line number2 index1 alt1""><code class=""bash plain"">bind_ip = 0.0.0.0</code></div>
<div class=""line number3 index2 alt2""><code class=""bash plain"">dbpath = </code><code class=""bash plain"">/media/mongo_volume/db/</code></div>
<div class=""line number4 index3 alt1""><code class=""bash plain"">fork = </code><code class=""bash functions"">true</code></div>
<div class=""line number5 index4 alt2""><code class=""bash plain"">replSet = rs0</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</li>
<li>Start the mongod process:<br /><em>mongod --config /etc/mongodb.conf</em></li>
<li>rs.initiate()</li>
<li>rs.conf()</li>
</ol>
<h4 id=""SettingupMongoDBwithshardinginfrastructure-Setuparbiter"">Setup&nbsp;<a class=""external-link"" href=""http://docs.mongodb.org/manual/core/replica-set-arbiter/"" rel=""nofollow"">arbiter</a></h4>
<p>Arbiter is like a ""guard process"" and consumers no dedicated hardware resource, for out concrete case, I setup arbiter on the mongos server.</p>
<ol>
<li>mkdir /var/lib/mongo/arb/</li>
<li>mongod --port 30000 --dbpath /var/lib/mongo/arb/ --replSet rs0 --smallfiles</li>
<li>Connect to the mongo shell of the primary and run:<br />rs.addArb(""{arbiter_host}<a class=""external-link"" href=""http://net:30000/"" rel=""nofollow"">:30000</a>"")&nbsp;</li>
</ol>
<h4 id=""SettingupMongoDBwithshardinginfrastructure-Verification"">Verification</h4>
<div class=""code panel pdl"" style=""border-width: 1px;"">
<div class=""codeHeader panelHeader pdl"" style=""border-bottom-width: 1px;""><b>rs.conf()</b></div>
<div class=""codeContent panelContent pdl"">
<div>
<div id=""highlighter_41421"" class=""syntaxhighlighter nogutter  bash"">
<table border=""0"">
<tbody>
<tr>
<td class=""code"">
<div class=""container"" title=""Hint: double-click to select code"">
<div class=""line number1 index0 alt2""><code class=""bash plain"">rs0:PRIMARY&gt; rs.conf()</code></div>
<div class=""line number2 index1 alt1""><code class=""bash plain"">{</code></div>
<div class=""line number3 index2 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""_id""</code> <code class=""bash plain"">: </code><code class=""bash string"">""rs0""</code><code class=""bash plain"">,</code></div>
<div class=""line number4 index3 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""version""</code> <code class=""bash plain"">: 3,</code></div>
<div class=""line number5 index4 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""members""</code> <code class=""bash plain"">: [</code></div>
<div class=""line number6 index5 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{</code></div>
<div class=""line number7 index6 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""_id""</code> <code class=""bash plain"">: 0,</code></div>
<div class=""line number8 index7 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""host""</code> <code class=""bash plain"">: </code><code class=""bash string"">""rs1-2""</code></div>
<div class=""line number9 index8 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">},</code></div>
<div class=""line number10 index9 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{</code></div>
<div class=""line number11 index10 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""_id""</code> <code class=""bash plain"">: 1,</code></div>
<div class=""line number12 index11 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""host""</code> <code class=""bash plain"">: </code><code class=""bash string"">""rs1-1""</code></div>
<div class=""line number13 index12 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">},</code></div>
<div class=""line number14 index13 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{</code></div>
<div class=""line number15 index14 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""_id""</code> <code class=""bash plain"">: 2,</code></div>
<div class=""line number16 index15 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""host""</code> <code class=""bash plain"">: </code><code class=""bash string"">""mongos""</code><code class=""bash plain"">,</code></div>
<div class=""line number17 index16 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""arbiterOnly""</code> <code class=""bash plain"">: </code><code class=""bash functions"">true</code></div>
<div class=""line number18 index17 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">}</code></div>
<div class=""line number19 index18 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">]</code></div>
<div class=""line number20 index19 alt1""><code class=""bash plain"">}</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class=""code panel pdl"" style=""border-width: 1px;"">
<div class=""codeHeader panelHeader pdl"" style=""border-bottom-width: 1px;""><b>rs.status()</b></div>
<div class=""codeContent panelContent pdl"">
<div>
<div id=""highlighter_945508"" class=""syntaxhighlighter nogutter  bash"">
<table border=""0"">
<tbody>
<tr>
<td class=""code"">
<div class=""container"" title=""Hint: double-click to select code"">
<div class=""line number1 index0 alt2""><code class=""bash plain"">rs0:PRIMARY&gt; rs.status()</code></div>
<div class=""line number2 index1 alt1""><code class=""bash plain"">{</code></div>
<div class=""line number3 index2 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""set""</code> <code class=""bash plain"">: </code><code class=""bash string"">""rs0""</code><code class=""bash plain"">,</code></div>
<div class=""line number4 index3 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""date""</code> <code class=""bash plain"">: ISODate(</code><code class=""bash string"">""2013-12-17T08:56:41Z""</code><code class=""bash plain"">),</code></div>
<div class=""line number5 index4 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""myState""</code> <code class=""bash plain"">: 1,</code></div>
<div class=""line number6 index5 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""members""</code> <code class=""bash plain"">: [</code></div>
<div class=""line number7 index6 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{</code></div>
<div class=""line number8 index7 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""_id""</code> <code class=""bash plain"">: 0,</code></div>
<div class=""line number9 index8 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""name""</code> <code class=""bash plain"">: </code><code class=""bash string"">""rs1-2""</code><code class=""bash plain"">,</code></div>
<div class=""line number10 index9 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""health""</code> <code class=""bash plain"">: 1,</code></div>
<div class=""line number11 index10 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""state""</code> <code class=""bash plain"">: 2,</code></div>
<div class=""line number12 index11 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""stateStr""</code> <code class=""bash plain"">: </code><code class=""bash string"">""SECONDARY""</code><code class=""bash plain"">,</code></div>
<div class=""line number13 index12 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""uptime""</code> <code class=""bash plain"">: 299,</code></div>
<div class=""line number14 index13 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""optime""</code> <code class=""bash plain"">: Timestamp(1387270069, 1),</code></div>
<div class=""line number15 index14 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""optimeDate""</code> <code class=""bash plain"">: ISODate(</code><code class=""bash string"">""2013-12-17T08:47:49Z""</code><code class=""bash plain"">),</code></div>
<div class=""line number16 index15 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""lastHeartbeat""</code> <code class=""bash plain"">: ISODate(</code><code class=""bash string"">""2013-12-17T08:56:40Z""</code><code class=""bash plain"">),</code></div>
<div class=""line number17 index16 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""lastHeartbeatRecv""</code> <code class=""bash plain"">: ISODate(</code><code class=""bash string"">""2013-12-17T08:56:39Z""</code><code class=""bash plain"">),</code></div>
<div class=""line number18 index17 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""pingMs""</code> <code class=""bash plain"">: 0,</code></div>
<div class=""line number19 index18 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""syncingTo""</code> <code class=""bash plain"">: </code><code class=""bash string"">""rs1-1""</code></div>
<div class=""line number20 index19 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">},</code></div>
<div class=""line number21 index20 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{</code></div>
<div class=""line number22 index21 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""_id""</code> <code class=""bash plain"">: 1,</code></div>
<div class=""line number23 index22 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""name""</code> <code class=""bash plain"">: </code><code class=""bash string"">""rs1-1""</code><code class=""bash plain"">,</code></div>
<div class=""line number24 index23 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""health""</code> <code class=""bash plain"">: 1,</code></div>
<div class=""line number25 index24 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""state""</code> <code class=""bash plain"">: 1,</code></div>
<div class=""line number26 index25 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""stateStr""</code> <code class=""bash plain"">: </code><code class=""bash string"">""PRIMARY""</code><code class=""bash plain"">,</code></div>
<div class=""line number27 index26 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""uptime""</code> <code class=""bash plain"">: 317,</code></div>
<div class=""line number28 index27 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""optime""</code> <code class=""bash plain"">: Timestamp(1387270069, 1),</code></div>
<div class=""line number29 index28 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""optimeDate""</code> <code class=""bash plain"">: ISODate(</code><code class=""bash string"">""2013-12-17T08:47:49Z""</code><code class=""bash plain"">),</code></div>
<div class=""line number30 index29 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""self""</code> <code class=""bash plain"">: </code><code class=""bash functions"">true</code></div>
<div class=""line number31 index30 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">},</code></div>
<div class=""line number32 index31 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{</code></div>
<div class=""line number33 index32 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""_id""</code> <code class=""bash plain"">: 2,</code></div>
<div class=""line number34 index33 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""name""</code> <code class=""bash plain"">: </code><code class=""bash string"">""mongos""</code><code class=""bash plain"">,</code></div>
<div class=""line number35 index34 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""health""</code> <code class=""bash plain"">: 0,</code></div>
<div class=""line number36 index35 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""state""</code> <code class=""bash plain"">: 8,</code></div>
<div class=""line number37 index36 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""stateStr""</code> <code class=""bash plain"">: </code><code class=""bash string"">""(not reachable/healthy)""</code><code class=""bash plain"">,</code></div>
<div class=""line number38 index37 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""uptime""</code> <code class=""bash plain"">: 0,</code></div>
<div class=""line number39 index38 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""lastHeartbeat""</code> <code class=""bash plain"">: ISODate(</code><code class=""bash string"">""2013-12-17T08:56:24Z""</code><code class=""bash plain"">),</code></div>
<div class=""line number40 index39 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""lastHeartbeatRecv""</code> <code class=""bash plain"">: ISODate(</code><code class=""bash string"">""1970-01-01T00:00:00Z""</code><code class=""bash plain"">),</code></div>
<div class=""line number41 index40 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""pingMs""</code> <code class=""bash plain"">: 0</code></div>
<div class=""line number42 index41 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">}</code></div>
<div class=""line number43 index42 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">],</code></div>
<div class=""line number44 index43 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""ok""</code> <code class=""bash plain"">: 1</code></div>
<div class=""line number45 index44 alt2""><code class=""bash plain"">}</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<h4 id=""SettingupMongoDBwithshardinginfrastructure-Troubleshooting"">Trouble shooting</h4>
<p>For experimental made mistakes, we can run the following command on mongo config server to ""reset"" the sharding status:</p>
<p><em>&gt; use config</em><br /><em>&gt; db.shards.drop()&nbsp;</em></p>
<h4 id=""SettingupMongoDBwithshardinginfrastructure-Officialdocumentations"">Official documentations</h4>
<ul>
<li><a class=""external-link"" href=""http://docs.mongodb.org/manual/tutorial/deploy-replica-set/"" rel=""nofollow"">Deploy a replica set</a></li>
<li><a class=""external-link"" href=""http://docs.mongodb.org/manual/tutorial/add-replica-set-arbiter/"" rel=""nofollow"">Add an Arbiter to Replica Set</a>&nbsp;</li>
</ul>
<blockquote><strong>Caveats</strong>: In real production environment, a minimum of&nbsp;<strong>3 replica-sets</strong>&nbsp;is required. With two nodes, it can get replication of data (i.e.: they will copy each other), but it will not get automatic fail-over or high availability, hence we should never run production data with less than 3 nodes!</blockquote>
<p>After replica set are all setup we can add it to mongo sharding server as a ""<strong>shard</strong>"":</p>
<p>First we need make sure the local mongod process is running on each shard, then we can use mongo shell to connect to the mongos server and tell the mongos add each shard respectively:<br /><em>mongo --host [mongos_server_ip/host]</em></p>
<p><em style=""line-height: 1.4285715;"">&gt; <em>sh.addShard(""[<strong>replSetName</strong>: e.g.&nbsp;rs0/[<strong>mongod_ip</strong>/port]"") # e.g. sh.addShard(""rs0/ &nbsp;</em><em>For single mongod in development environment,&nbsp;</em>sh.addShard(""[shard_ip/host]:27017"") #&nbsp;</em></p>
<p><em>&gt; sh.enableSharding(""[database]"") # Sharding a database</em><br /><em>&gt; sh.shardCollection(""[database].[collection]"", shard-key-pattern) # Sharding a collection with a shard key</em></p>
<p>Concrete example of setting up a Mongo shard for ""Collection_Name""<br /><em>mongo --host mongos</em><br /><em>sh.addShard(""rs1-0"")</em><br /><em>sh.enableSharding(""{Database name}"")</em><br /><em>sh.shardCollection(""{Database name}.{Collection name}"", {user_id:1})</em></p>
<p>#&nbsp;Verify the sharding status by running ""<strong><em>sh.status()</em></strong>"" in mongo shell:</p>
<div class=""code panel pdl"" style=""border-width: 1px;"">
<div class=""codeHeader panelHeader pdl"" style=""border-bottom-width: 1px;""><b>sh.status()</b></div>
<div class=""codeContent panelContent pdl"">
<div>
<div id=""highlighter_466316"" class=""syntaxhighlighter nogutter  bash"">
<table border=""0"">
<tbody>
<tr>
<td class=""code"">
<div class=""container"" title=""Hint: double-click to select code"">
<div class=""line number1 index0 alt2""><code class=""bash plain"">mongos&gt; sh.status()</code></div>
<div class=""line number2 index1 alt1""><code class=""bash plain"">--- Sharding Status --- </code></div>
<div class=""line number3 index2 alt2""><code class=""bash spaces"">&nbsp;&nbsp;</code><code class=""bash plain"">sharding version: {</code></div>
<div class=""line number4 index3 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""_id""</code> <code class=""bash plain"">: 1,</code></div>
<div class=""line number5 index4 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""version""</code> <code class=""bash plain"">: 3,</code></div>
<div class=""line number6 index5 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""minCompatibleVersion""</code> <code class=""bash plain"">: 3,</code></div>
<div class=""line number7 index6 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""currentVersion""</code> <code class=""bash plain"">: 4,</code></div>
<div class=""line number8 index7 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash string"">""clusterId""</code> <code class=""bash plain"">: ObjectId(</code><code class=""bash string"">""5264c5c753b45824c363f402""</code><code class=""bash plain"">)</code></div>
<div class=""line number9 index8 alt2""><code class=""bash plain"">}</code></div>
<div class=""line number10 index9 alt1""><code class=""bash spaces"">&nbsp;&nbsp;</code><code class=""bash plain"">shards:</code></div>
<div class=""line number11 index10 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{&nbsp; </code><code class=""bash string"">""_id""</code> <code class=""bash plain"">: </code><code class=""bash string"">""shard0000""</code><code class=""bash plain"">,&nbsp; </code><code class=""bash string"">""host""</code> <code class=""bash plain"">: </code><code class=""bash string"">""shard0""</code> <code class=""bash plain"">}</code></div>
<div class=""line number12 index11 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{&nbsp; </code><code class=""bash string"">""_id""</code> <code class=""bash plain"">: </code><code class=""bash string"">""shard0001""</code><code class=""bash plain"">,&nbsp; </code><code class=""bash string"">""host""</code> <code class=""bash plain"">: </code><code class=""bash string"">""rs1-0""</code> <code class=""bash plain"">}</code></div>
<div class=""line number13 index12 alt2""><code class=""bash spaces"">&nbsp;&nbsp;</code><code class=""bash plain"">databases:</code></div>
<div class=""line number14 index13 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{&nbsp; </code><code class=""bash string"">""_id""</code> <code class=""bash plain"">: </code><code class=""bash string"">""admin""</code><code class=""bash plain"">,&nbsp; </code><code class=""bash string"">""partitioned""</code> <code class=""bash plain"">: </code><code class=""bash functions"">false</code><code class=""bash plain"">,&nbsp; </code><code class=""bash string"">""primary""</code> <code class=""bash plain"">: </code><code class=""bash string"">""config""</code> <code class=""bash plain"">}</code></div>
<div class=""line number15 index14 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{&nbsp; </code><code class=""bash string"">""_id""</code> <code class=""bash plain"">: </code><code class=""bash string"">""test""</code><code class=""bash plain"">,&nbsp; </code><code class=""bash string"">""partitioned""</code> <code class=""bash plain"">: </code><code class=""bash functions"">false</code><code class=""bash plain"">,&nbsp; </code><code class=""bash string"">""primary""</code> <code class=""bash plain"">: </code><code class=""bash string"">""shard0000""</code> <code class=""bash plain"">}</code></div>
<div class=""line number16 index15 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{&nbsp; </code><code class=""bash string"">""_id""</code> <code class=""bash plain"">: </code><code class=""bash string"">""mongo_demo""</code><code class=""bash plain"">,&nbsp; </code><code class=""bash string"">""partitioned""</code> <code class=""bash plain"">: </code><code class=""bash functions"">false</code><code class=""bash plain"">,&nbsp; </code><code class=""bash string"">""primary""</code> <code class=""bash plain"">: </code><code class=""bash string"">""shard0000""</code> <code class=""bash plain"">}</code></div>
<div class=""line number17 index16 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{&nbsp; </code><code class=""bash string"">""_id""</code> <code class=""bash plain"">: </code><code class=""bash string"">""{Database name}""</code><code class=""bash plain"">,&nbsp; </code><code class=""bash string"">""partitioned""</code> <code class=""bash plain"">: </code><code class=""bash functions"">true</code><code class=""bash plain"">,&nbsp; </code><code class=""bash string"">""primary""</code> <code class=""bash plain"">: </code><code class=""bash string"">""shard0000""</code> <code class=""bash plain"">}</code></div>
<div class=""line number18 index17 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{Database name}.EntendedProfiles</code></div>
<div class=""line number19 index18 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">shard key: { </code><code class=""bash string"">""user_id""</code> <code class=""bash plain"">: 1 }</code></div>
<div class=""line number20 index19 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">chunks:</code></div>
<div class=""line number21 index20 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">shard0000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</code></div>
<div class=""line number22 index21 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{ </code><code class=""bash string"">""user_id""</code> <code class=""bash plain"">: { </code><code class=""bash string"">""$minKey""</code> <code class=""bash plain"">: 1 } } --&gt;&gt; { </code><code class=""bash string"">""user_id""</code> <code class=""bash plain"">: { </code><code class=""bash string"">""$maxKey""</code> <code class=""bash plain"">: 1 } } on : shard0000 Timestamp(1, 0) </code></div>
<div class=""line number23 index22 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{Database name}.{Collection name}</code></div>
<div class=""line number24 index23 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">shard key: { </code><code class=""bash string"">""user_id""</code> <code class=""bash plain"">: 1 }</code></div>
<div class=""line number25 index24 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">chunks:</code></div>
<div class=""line number26 index25 alt1""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">shard0000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</code></div>
<div class=""line number27 index26 alt2""><code class=""bash spaces"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=""bash plain"">{ </code><code class=""bash string"">""user_id""</code> <code class=""bash plain"">: { </code><code class=""bash string"">""$minKey""</code> <code class=""bash plain"">: 1 } } --&gt;&gt; { </code><code class=""bash string"">""user_id""</code> <code class=""bash plain"">: { </code><code class=""bash string"">""$maxKey""</code> <code class=""bash plain"">: 1 } } on : shard0000 Timestamp(1, 0)</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<h4 id=""SettingupMongoDBwithshardinginfrastructure-FinalinfrastructureforOxygen%27s{Collection name}""><span style=""font-size: 1.5em;"">Additional notes&nbsp;</span></h4>
<h3 id=""SettingupMongoDBwithshardinginfrastructure-AmazonEBSvolume""><span style=""background-color: transparent; line-height: 1.4285715;"">Amazon EBS volume</span></h3>
<p><span style=""background-color: transparent; line-height: 1.4285715;"">If we are setting up shards on Amazon: we need mount the Amazon </span><strong style=""background-color: transparent; line-height: 1.4285715;"">EBS</strong><span style=""background-color: transparent; line-height: 1.4285715;""> (Elastic Block Storage) and use the EBS to store Mongo logs and DB data, run the following command on a shard instance:</span></p>
<p><em>sudo su</em><br /><em>Fdisk -l &nbsp;#To examine all disk partitions, find the partition we want to mount</em><br /><em>mkfs -t ext4 /dev/xvdf &nbsp;# Format the partition to ext4 file format (/dev/xvdf could be /dev/sdb, /dev/sdh etc) </em><br /><em>mkdir /media/mongo_volume # Make the directory where we supposed to mount the partition and store MongoDB data</em><br /><em>mount /dev/xvdf /media/mongo_volume</em></p>
<p>#Modify /etc/mongo.conf, ensure Mongo used the mounted partision to store logs and DB data<br /><em>logpath=/media/mongo_volume/log/mongod.log</em><br /><em>dbpath=/media/mongo_volume/db</em></p>
<h3 id=""SettingupMongoDBwithshardinginfrastructure-Replicasetrecoverynotes"">Replica set recovery notes</h3>
<p>There are periodically heartbeats between replica sets and mongos server, once a primary/secondary gets down, mongos will try to reconnect.</p>
<div class=""code panel pdl"" style=""border-width: 1px;"">
<div class=""codeContent panelContent pdl"">
<div>
<div id=""highlighter_755250"" class=""syntaxhighlighter nogutter  bash"">
<table border=""0"">
<tbody>
<tr>
<td class=""code"">
<div class=""container"" title=""Hint: double-click to select code"">
<div class=""line number1 index0 alt2""><code class=""bash plain"">Thu Jan&nbsp; 9 02:00:13.308 [ReplicaSetMonitorWatcher] trying reconnect to rs1-2</code></div>
<div class=""line number2 index1 alt1""><code class=""bash plain"">Thu Jan&nbsp; 9 02:00:13.311 [ReplicaSetMonitorWatcher] reconnect rs1-2 failed couldn't connect to server rs1-2</code></div>
<div class=""line number3 index2 alt2""><code class=""bash plain"">Thu Jan&nbsp; 9 02:00:13.315 [Balancer] distributed lock </code><code class=""bash string"">'balancer/ip-10-244-81-61:27017:1389060087:1804289383'</code> <code class=""bash plain"">unlocked.</code></div>
<div class=""line number4 index3 alt1""><code class=""bash plain"">Thu Jan&nbsp; 9 02:00:15.156 [WriteBackListener-rs1-2] WriteBackListener exception : socket exception [CONNECT_ERROR] </code><code class=""bash keyword"">for</code> <code class=""bash plain"">rs1-2</code></div>
<div class=""line number5 index4 alt2""><code class=""bash plain"">...</code></div>
<div class=""line number6 index5 alt1""><code class=""bash plain"">Thu Jan&nbsp; 9 02:00:28.341 [ReplicaSetMonitorWatcher] trying reconnect to rs1-2</code></div>
<div class=""line number7 index6 alt2""><code class=""bash plain"">Thu Jan&nbsp; 9 02:00:28.344 [ReplicaSetMonitorWatcher] reconnect rs1-2 ok</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p>There are heartbeats between each member within a replica set, once a primary gets down, a election will occur automatically and one of them will become primary, the old primary will join back as secondary once recover:</p>
<div class=""code panel pdl"" style=""border-width: 1px;"">
<div class=""codeContent panelContent pdl"">
<div>
<div id=""highlighter_975735"" class=""syntaxhighlighter nogutter  bash"">
<table border=""0"">
<tbody>
<tr>
<td class=""code"">
<div class=""container"" title=""Hint: double-click to select code"">
<div class=""line number1 index0 alt2""><code class=""bash plain"">Thu Jan&nbsp; 9 02:09:34.825 [rsHealthPoll] replset info rs1-0 heartbeat failed, retrying</code></div>
<div class=""line number2 index1 alt1""><code class=""bash plain"">Thu Jan&nbsp; 9 02:09:34.826 [rsHealthPoll] replSet info rs1-0 is down (or slow to respond):</code></div>
<div class=""line number3 index2 alt2""><code class=""bash plain"">Thu Jan&nbsp; 9 02:09:34.826 [rsHealthPoll] replSet member rs1-0 is now </code><code class=""bash keyword"">in</code> <code class=""bash plain"">state DOWN</code></div>
<div class=""line number4 index3 alt1""><code class=""bash plain"">Thu Jan&nbsp; 9 02:09:35.746 [rsMgr] replSet info electSelf 1</code></div>
<div class=""line number5 index4 alt2""><code class=""bash plain"">Thu Jan&nbsp; 9 02:09:36.378 [rsMgr] replSet PRIMARY</code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p>&nbsp;</p>",7393,2013-10-03 06:33:46.000,1,A
154,Wayne,My Love on Vim,My-Love-on-Vim,2,"<h2>My life with Vim</h2>
<p>
  I started learning Vim during Aug, 2011, the original motivation was trying to ""get rid of my mouse while I am coding"", I had no teacher but google, learnt it from the very hard way. From the beginning 2-3 months, honest speaking, I was less productive while using Vim comparing with IDEs, there were so many things I could do in second in IDE, for example: search/replace, formatting, re-factoring, folding, and so on, whereas I had to spent days in learning how to accomplish a simple task in Vim, that was really painful, but <b>I never gave up</b>!
After the first two months of exploration, I was feeling much more comfortable in using Vim, and I believe I am going to <b>use this king of text editor during rest of my life:)</b>.
</p>

<h2>Reasons why loving</h2>
<p>
There are millions of people love Vim during the past decades in the planet, there could be different reasons why people love Vim, I believe the ultimate reasons are:
</p>
<p>
<ul style=""font-size: 16px;"">
  <li><b>Type less, do more!</b></li>
  <li><b>Mouse-less!</b></li>
  <li><b>Ultimate productivity!</b></li>
  <li><b>Unlimited extensibility!</b></li>
</ul>

I just want express my understanding on the last fact: Vim can be extended through Vim script, ruby, python, lua, any language you like, unlimited possibility, as long as you are doing something that many people are doing as well, there would be plugins to help you; there isn't? You create one and benefits other people doing similar thing like you do!
</p>

<h2>Hacking with Vim technical talk</h2>
<p><iframe style=""width: 760px; height: 480px; border: 1px solid #333;"" src=""http://wayneye.com/PPT/Hacking-With-Vim""></iframe></p>
<a href=""http://wayneye.com/PPT/Hacking-With-Vim"" target=""_blank"" style=""font-weight: bold;font-size: 18px;width: 600px;display: block;margin: 0 auto;margin-top: -10px;margin-bottom: 20px;"">Navigate with &lt; and &gt; Or Click to View the presentation in a new Tab</a>
<p>
<img style=""width: 740px"" src=""https://semlfq.dm2301.livefilestore.com/y2pABGQahcojuLRvLUYqOLzy9_K7abiRd0YwXZmr2NR2O47dcB6zBQeIM0YPLO5T6fpatk4xU7dDz2QHqPPqoIU_Rl_gesYAMb52qEijma9bPM/Vim-2.jpg?psid=1"" alt=""Hack-with-Vim-photo"">
</p>
<p>I did a technical talk to share my most favourite Vim tips to colleagues in Autodesk Singapore office, it was a short one, but with many ultimate and useful hacking tips with Vim, my intention was trying to excite people, let them open their mouth: ""Wow! I never realized that Vim can do things like this!!"", or ""I did know Vim is powerful, I never expect it can be that powerful!!"".</p>
<p>As I wish, I got some very positive feedback, and some familiar friends said they re-recognized me:)</p>


<h2>My favourite Vim tips</h2>
<p>
  The content below are the tips I demonstrated in my talk above, all of them are not my invention, but standing upon giant's shoulder! Since I will be using Vim in rest of my life, there is no doubt I about this point, and I wish I will contribute as much as I can to this god like text editor and its eco-system in the future!
</p>
<h3>Ultisnips + vim-snippets</h3>
<p><a href=""https://github.com/SirVer/ultisnips"" target=""_blank"">Ultisnips</a> boosts my coding speed like a rocket! It works with <a href=""https://github.com/honza/vim-snippets"" target=""_blank"">vim-snippets</a> behind the scene to allow you to type very few characters but generates a usually used code snippet for you, with place-holders for you to easily customizing the snippet, this combination supports all mainstream languages as long as there are geeks speak it! See my screenshot below:
</p>
<img src=""https://semlfq.dm2301.livefilestore.com/y2pjM3n-igEDOIhyTZF_ZHcqnFix1kYiS0HKGyoR8Jqc0s3wMtJng7QtbYyiCPNU95EgWfk9VShiJ4K4MQqUvUSVMTu5RTs-WbpTYcPqEXYsdQ/vim-snips.gif?psid=1"" alt=""Vim-snippets""/>

<p>
<ul>
<li>Ultisnips is written in python and is more preferable comparing to the relatively old <a href=""https://github.com/garbas/vim-snipmate"" target=""_blank"">snipmate</a>, see discussion <a href=""https://github.com/honza/vim-snippets/issues/363"" target=""_blank"">here</a>.</li>
<li>If you couldn't find the language you want, for example <a href=""https://developer.apple.com/swift/"" target=""_blank"">Apple swift</a>, dude, it is a good opportunity for you to contribute:)</li>
</ul>
</p>

<h3>Dragging lines</h3>
<p>Dragging line(s) with automatically indentation fixing, this trick is accomplished by adding the following lines into vimrc:</p>
<pre>
  "" Alt+j/k to move current line/selected lines up and down 
  nnoremap  :m+== 
  nnoremap  :m-2==
  inoremap  :m+==gi
  inoremap  :m-2==gi
  vnoremap  :m'&gt;+gv=gv
  vnoremap  :m-2gv=gv
</pre>

<p>It works for single line:<br />
<img src=""https://semlfq.dm2301.livefilestore.com/y2p58ahCjSFl77PgNKlMoRLa5mzmETXy2MTElTByYN0LlrSj5YBvhxZwxOMLb4-qHEppFlKIM4ZXKkwo8VVChPOm7qIYnTD5qreVomrbonr0Qc/vim-drag-1.gif?psid=1"" alt=""Vim-drag-single-line"" style=""width: 720px"" />
</p>
<p>It works for multi lines:<br />
<img src=""https://semlfq.dm2301.livefilestore.com/y2p2mYpyFQZB0Q3alZIxzRC3fgKzNacvrCjM7mCFagR7spzQOWJfuphOWYBMTiDk_1y4koWs89K9rnsIPDl54Oy6DqZMaTaRj6azxWGf2vDN_s/vim-drag-2.gif?psid=1"" alt=""Vim-drag-multi-lines""/>
</p>


<h3>Macros</h3>
<p>The JSON conversion I did during the technical session was accomplished by the following key combinations:</p>
<ol>
  <li>gg #Make sure current cursor is at the buffer beginning.</li>
  <li>qa # Start recording macros ""a""</li>
  <li>i # Insert</li>
  <li>""</li>
  <li>f= #Forward to the char ""=""</li>
  <li>i"" # Insert double quote before ""=""</li>
  <li>ESC #Back to normal mode</li>
  <li>l #Move to ""=""</li>
  <li>r: #Replace ""="" with "":""</li>
  <li>a"" #Append a double quote after "":""</li>
  <li>A"", # Append "" and , at the end of line</li>
  <li>j0 #Move to the beginning of the next line</li>
  <li>28@a #Repeat this operation for 28 times</li>
</ol>
<p>Learn more: <a href=""http://vim.wikia.com/wiki/Macros"" target=""_blank"">Macros - Vim Tips Wiki</a></p>
<h3>Execute script inside Vim</h3>
<p>
  Every vimer knows we can execute script (shell, perl, python, ruby, js, just everything) right inside Vim without switching to terminal, although many people are tmux funs, I still prefer do it in Vim's way, by having the following lines in my vimrc, I can instantly run the current script and view the result with nearly no latency:)
</p>
<pre>
  autocmd FileType sh map <buffer> <C-S-e> :w<CR>:!/bin/sh % <CR>
  autocmd FileType ruby map <buffer> <C-S-e> :w<CR>:!/usr/bin/env ruby % <CR>
  autocmd FileType python map <buffer> <C-S-e> :w<CR>:!/usr/bin/env python % <CR>
  autocmd FileType javascript map <buffer> <C-S-e> :w<CR>:!/usr/bin/env node % <CR>
</pre>


<h3>Match &amp; Until</h3>
<p><code>cst</code> # <b>Change surround tag</b>, pretty useful when editing HTML</p>
<p><code>vit</code> # View in current tag</p>
<p><code>dit</code> # Delete content in current tag</p>
<p>f$ # Forward to the first occurrence of $ within current line</p>
<p>F$ # Backward to the first occurrence of $ within current line</p>
<p>dt$ # Delete content until matching the first occurrence of $ within current line</p>
<p>vt$ # View (Select) content until matching the first occurrence of $ within current line</p>
<h3>Search &amp; Replace</h3>
<p>Vim is extremely powerful in dealing with searching and replacing, the trick I've done in the session is just tip of the iceberg, I typed <b>:g/#/d</b> to remove all comments in a Ruby file.</p>
<h3>Vimium</h3>
<p>
  This is a awesome Chrome extension, the home page is: <a href=""https://chrome.google.com/webstore/detail/vimium/dbepggeogbaibhgnhhndojpepiihcmeb?hl=en"" target=""_blank"">https://chrome.google.com/webstore/detail/vimium/dbepggeogbaibhgnhhndojpepiihcmeb?hl=en</a>, suffering the internet without mouse is absolutely feasible!
</p>

<h3>My vimrc</h3>
<p><a href=""http://WayneYe.com/vimrc"" target=""_blank"">http://WayneYe.com/vimrc</a></p>

<h2>My future on Vim</h2>
<p>
  I have been using Vim everyday during the past 3 years, I never stopped learning it, and with no doubt, I will do so in rest of my life, really, <b>I just can't breath without it</b>! 
</p>
<p>
  There are absolutely a lot of improvement space for me, apart from continuously improve productivity, I have intention to do more things in vim: Email, highly customized snippets (refer: <a href=""http://www.sirver.net/blog/2012/03/31/fourth-episode-of-ultisnips-screencast/"" target=_blank"">Ultisnips Screencast Episode 4</a>, presentation, and more important, I want to contribute to Vim ecosystem!
</p>
",4076,2014-06-22 13:50:23.000,1,A
155,Wayne,PacktPub 10 years celebration,Packy-10-Years-Celebration,2,"<h3>PacktPub 10 years celebration</h3>
<p>
  PacktPub 10 years celebration! All eBooks and Videos at just $10 each until July 5th, my book &lt;<a href=""http://www.packtpub.com/cucumber-behaviour-driven-development/book"" target=""_blank"">Instant Cucumber BDD How-To</a>&gt; will also be promoted on the celebration page, hooray! <a href=""http://goo.gl/nkUb7o"" target=""_blank"">http://goo.gl/nkUb7o</a> <a href=""http://goo.gl/nkUb7o"" target=""_blank"">#Packt10Dollar</a>
</p>
$More$
<p>
<img style=""width:95%"" src=""https://remlfq.dm2301.livefilestore.com/y2pbEs8Q9tMf0V6JpmozOyYDd3u7P8rIAIxIgdTmahrlNDpo58uRyYPgUAPEHDUFY6gF03HU_QuI3jioZSPOM0TeXiJ4wWwGCseru-nEb5qH50/packt-10-years.png?psid=1"" alt=""packt-10-years"" />
</p>
",3552,2014-07-01 08:56:59.000,1,A
156,Wayne,New Life Begins In BayArea,New-Life-Begins-In-BayArea,1,"  <p>
    多年的梦想实现，展望崭新的人生目标!始终自勉，热诚而稳重，谦逊但专注；不卑不亢，以德服人；严于律己，宽以待人；永远斗志高昂，笑对挫折；不断修善自身，追求一颗强大的内心，永不言败！
  </p>
  <p>
    Long time's dream comes true, looking forward to brand new target now, self-encourage, be zealous and steady, modest but focused; be neither overbearing nor servile, win people by virtue; always be passionate, laughs in the face of setback; continuously upgrade myself, pursue a strong heart, never talking about failure!
  </p>
  <p><img src=""https://nkbfug-dm2306.files.1drv.com/y3m6gx0aoLm-gd5gtuiSfxqzRnmkW55QFRIVumysdFQ7TmWxHYa12D9X64Z2_hfACmcxynGNcQC1zTyEWc3rp8AgBaf2kF7Oo2mBZgHMldb4WuHYTDYV1RB7s8dKbBvu-HzP_wBHongeFY1ZV_Vt4uzUWrl5Cuw8tTHpTHn3xRczXw?width=495&height=660&cropmode=none"" /></p>
  <p>
    <img src=""https://muabdg-dm2306.files.1drv.com/y2mVBXBNh2ReXQKgqPR9RPYaatMzF6vDn4gxPcVeVHIN2IvPvRlIE4u9jZs7Q6KGsp_E9wsCxSxRbmxzt9y65rPqn6-PPO5wat3m6IkblVwUlixzzBmsT9oIYBOfrwI6wXFXb44FIyODbc8fPwGKtRwZPJ5G39Oi9Ix4TpMzSiINpo/10920118_10152629643515885_6042541732602070749_o%201.jpg?psid=1"" alt=""sun-rise-at-bayarea"">
  </p>
  <p>
    <img src=""https://neabdg-dm2306.files.1drv.com/y2mJjqRnQ_Ek2MQUW817HkyQIWka3f3__ldr3ZZHnyyAFj5_SwZAlheWMwTizPsSeHB17t8bbEDJw1zMCLkc0cd7XhdvxCshGXF2ZuEKbeB19VcG0SnIonHHJJ63Ym99XYRxZOaXGUteldd-rfL2Dlltb37EiBuSzKKTRpGetBrr08/10854875_10152629643520885_4383981454879173605_o%201.jpg?psid=1"" />
  </p>

    <img src=""https://luabdg-dm2306.files.1drv.com/y2pHo4F9l5HT9Ch_puq7tIXYN0vKQVTbvbjR4iKngh4fGFQpy-wnZuX-5oTSVujLmXuJ5qtc1VRfQKqPXA8zkI7rIQfHLDsnTLHNOPTQpokMR8T14eeGlb1To3_65Fvog__5OGGtDNwum737A9BBgtmyg/10402927_10152708432740885_3179119850773801401_n.jpg?psid=1"" />

<p>
   This is NOT the end of my dream, this is a brand new and important start point of pursuing new dreams!  Forza!
<p/>
",3120,2015-01-14 05:35:26.000,1,A
157,Wayne,FC Barcelona Miracle Comeback!,FC-Barcelona-Miracle-Comeback,1,"
            <h2>0:4到6:1 - 史诗般的逆转</h2>
            <h2>From 0:4 to 6:1 - Epic comeback</h2>
            <p>2017年3月8日，巴塞罗那诺坎普球场，加泰罗尼亚足球巨人巴塞罗那队坐镇主场迎战巴黎圣日耳曼队，带着首回合0:4的比分，开始了几乎所有人都认为的荣誉之战，绝大多数人（包括我在内），都认为巴萨可能会赢，但绝不可能翻盘，自有欧洲冠军杯以来，没有任何球队在落后4球的情况下能搬回来，迄今为止最惊天动地的翻盘出现在13年前，AC米兰主场4:1战胜拉科鲁尼亚，回到拉科主场，由马凯，潘迪亚尼、贝莱隆等人领衔实现4:0的疯狂逆转。此次虽说巴萨有世上无双的MSN三叉戟，巴黎账面上也绝对比当年的AC米兰差了点点，但是毕竟巴萨可是可怜得连个客场进球都没有，而大巴黎状态正佳，进1球就几乎可以宣告巴萨死刑，因为在此情况下他们需要进6球，面对由当世顶尖中卫蒂亚戈席尔瓦领衔的大巴黎防线，这种期望值是否太。。。然而，足球就是足球，理性分析与实际结果的差距经常巨大！就在此时，就在此地，巴塞罗那队实现了欧冠历史上绝无仅有的超级大逆转，全世界所有足球迷，即使不是巴萨的粉丝，都被此神迹彻底燃爆！</p>
            <p>Mar 8th 2017, Camp Nou stadium at Barcelona, the Catalan giant faced Paris Saint Germain, with a 0:4 loss taken from 1st leg, started a ""honor bound"" from majority people's point of view, most people (including me), would guess Barca can win, but they won't be able to comeback, from the very beginning history of European Champions League, there was no even one club could comeback after 4 goals behind, so far the greatest comeback was 13 years ago, at the first leg AC Milan beat Deportivo de La Coruña at 4:1, then AC Milan was crushed by 4:0 with the crazy performance from Makaay, Pandiani and Valeron. Although Barca has unequaled MSN trident, and the squad of PSG might be slightly weaker than AC Milan, but after all Barca even doesn't have an away goal, PSG is so in form, and even if they score just 1 goal and sentence Barca to death, because Barca has to score 6 at this situation, facing the PSG defense line led by one of the best CBs in the world: Thiago SIlva, the expectation would be..... However, football is futball, the difference between rational analytics and actual result is always huge!  Right here, right now, Barcelona achieved the greatest comeback in the entire UCL history, all the football funs in the world, even not Barca funs, were all very excited by this!</p>
            <p><img src=""https://n0bycw-dm2306.files.1drv.com/y3m1Cf4die44v2SZBPs1PQJtHwLJE62tF-jhQoZwA-Wyvg31OSmMrQp3NYVi2lkr16tFUsDvjqJ-xLWAxB2z0czr7EP5XzmE-Iw_0iKypRfLJwvblMRLLgF51Bu76jP0337qw78uCBUv9aDfgI5Htqv2CFO-Is3c3L4MSl5irHNhHg/17190536_10154486175715885_4088018240925086714_n.jpg?psid=1"" /></p>
            <p><img src=""https://oebycw-dm2306.files.1drv.com/y3mVJVpH6XYGXxWaokJIcD6IjF8s5dWWXuhgqbKS4B9Uc7Z9FVyCVYsiSK-RjrShplF47afM0o5yIoRbuZKmmVSPnFXKdRCBOGeQUT0yeMUIgMrf5DaJidHLbTCDAt0XsRZH51WvqqgB1MGtSGnoOnK3qTISr2sTCjLIwgP0gWjLUc/17098719_10154486190285885_7784151707603959815_n.jpg?psid=1""/></p>
            <p><img src=""https://nebycw-dm2306.files.1drv.com/y3mR4d8fxx5f0uesjkcrrlY89xcVjh-gyO3AAr-cDtHj_B_j-E-Q9GJfzg5ic_O7t7POIamxgvAP60N5ohbU5dorGJJ8WyWUkDykF80WQh6nffng6hQICJRoN-adWH78DY6i7T0Tt6PMPsTJMyMWKARUvRc2BfmRnhyGJ5lkDNBIgY/17190846_10154486188160885_1108782006892523299_n.jpg?psid=1"" /></p>
            <p><img src=""https://lkbycw-dm2306.files.1drv.com/y3mz1Ea_w98OIMJf8wIZiGf3Q6Cd8Jwyk6UBnFi3KODu0TZ0tMQgnYCaBTpGL0gapfvqVL5GF4mAMlMMWOBPOVJuTtALnXun1FrbUmwaAg4dGNLGdSBNdnW3vAiVbEv6VfsXussZxX4-sdlmJuAljJ5N2GrwXX8WzFpm1ZImaWHik4/gettyimages-649682672.jpg?psid=1"" /></p>
            <p><img src=""https://lubycw-dm2306.files.1drv.com/y3mhTLF9Lct7BDQoNqgHagmiww5oQ62v0npqcaF7UUwT4cUxyGIwN0wMe8o0Z0kfMvXY4YxBBe_lmjFavwfTlaSvbTr3MZocr-SJa4Y0yoQYwHjg_qIXvXZLDfCEa3gEWSGyfThGiWxlbjhQmpj_AZE30gqADLLUsnQQCdTgJ5ZAB0/skysports-psg-barcelona-barca-luis-suarez-champions-league-victory-celeb_3905948.jpg?psid=1"" /></p>
            <p><img src=""https://mkbycw-dm2306.files.1drv.com/y3mSGRvjAv6_dqQW_hjNV_BgNZhKtpkY4boGIV5jgebZH5l1dR17YFnlmmDbggZSWWmJQf2zYIYYYzbtHHEcmKggSgLJXoROHHQiAjkir2C97ZMGXSzr83bcn3O3TVbmsNd5LMBFa_LyCCiUFz4TX6T3TiAHcV2Um6q_SlBXKov60I/17190545_10154486184565885_632884942784472297_n.jpg?psid=1"" /></p>
            <p><img src=""https://mubycw-dm2306.files.1drv.com/y3mXxRpfrhwrnreHqaylQLSyuIQnKsc5LY9AvW5TU8F-I8riV1mWu71r4WNmDrnBA0HNKEa1jjCTR3mQWMRLoaB3W9BRonnFEej8-g3YfnPPkxbPftaFui5rNnPaG9lqvtxbEs2Ph7Otnx60tEzpaHsPNxlK0myGvgNmCMu8QsRB4U/17191039_10154486193445885_2898191572842903328_n.jpg?psid=1"" /></p>
            
            <p>本球痴从里瓦尔多时代就是巴萨的铁杆粉丝，昨天赛前开始看新闻，恩里克说巴黎进我们4个，我们可以进6个（我心里想他真敢说。。。），在网上看这场球时，从开场觉得有1%的希望，到半场结束觉得有10%的希望，然后下半场从卡瓦尼进球到80分钟时我觉得几乎没戏了，但巴萨将士们没有放弃！以内少为首的小伙子们没有再考虑任何的战术打法，也许他们只有一个信念：“对得起全场买票看球的10万明球迷和全球的粉丝们”，发起最后的反击号角，不到最后一刻绝不放弃！10分钟内连进三球！！！最后5分钟门将特尔施特根全在对方半场和禁区，此战彻底燃爆了所有球迷，无论用什么赞扬的辞藻送给巴萨队员和教练都不为过！</p>

    <p>有些人简单地批评巴黎太保守，他们忽视了老马哥和小野兽乌姆蒂蒂是多么变态，布教授老白也是巅峰状态，梅老板也是从一而终的大将风度，苏神则全场跟大巴黎后卫死磕，鬼魅的跑位赢得一个进球和一个点球，最值得大书特书的是内少：全场无数次被踢倒爬起，不抱怨，不打嘴炮，始终目光坚毅，发起一波又一波冲击，当之无愧全场最佳，最后10分钟（从85到95），内马尔以一己之力将只剩一只手扒在悬崖边的加泰罗尼亚巨人神奇般的拉回！展现了平时不长为人所知的顽强与坚韧，一战封神！绝对的未来巴萨领袖！</p>

    <p>权威网站whoscored赛后数据统计和评分截图如下，巴萨这边，内少10分满分，全场最佳当值无愧！反观PSG，触球最多的球员居然是门将Trapp：50次，实在可怜</p>
    <p><img src=""https://dmcj3a-dm2306.files.1drv.com/y3mQV709k__VJ_TFR7ENmSp5xnnfvOHXbzihHSCe1KY57r8xVo2RG0WSUNRdeypu1lZI6FXldBUpESpWCXoGvj7iMCtCdi8iu4VR2oN_1SRmLF-boJCgL31zG9_FnTMKRB7GYGNGeNgGbtnLK8pgNLiDjAbvFk8HoPDF-HaDQUZ-II/barca-rating.png?psid=1"" /></p>
    <p><img src=""https://cwcj3a-dm2306.files.1drv.com/y3m-DKYrqHcilnJYO3eAdDYhbTdFUNdHgcNXb_1ykDtSSiNUI9zN0yu_fslXYStXJUSa-MvLmLOjx4KWB_Q9FBN3AELjkZbiNqqnaWzswY75kb9Z5PJuxs7QrqeUMtJwQ_PHHpic9azEupVp9dSeJGOIHmgPhwrSqefbOhqPUWG43A/psg-rating.png?psid=1"" /></p>
  <p><img src=""https://nubycw-dm2306.files.1drv.com/y3mInaUHB053FluiqvVAAica_ve0F1sznZou9g9FDhUBmDgMa72chdsLLDMIdjwcOAFmVlQZeiCx6MCa45EavcFE_n8F3KYunGdF8KTVcbr-kn05OUz9i9sGb-OYXA2oCMdJ_voXCJ7s_nrkGiqvcZJPzz0ijoFbOk40aovRsITyNQ/17103238_10154485165180885_5623622492119778186_n.jpg?psid=1"" /></p>

        <p><b style=""font-size:4em"">Força Barça! More than a Club</b></p>",1934,2017-03-10 00:51:32.000,1,A
158,Wayne,Storage+Media home server for less than $300,Storage-Media-Home-Server-Less-Than-300,1,"
      <h3>Background</h3>
     <p>I have been researched and watched many NAS options to setup a home storage+media server during the past year, and so far there was no perfect answer, either lacking features/performance, or way too expensive... An Intel Celeron CPU + 1GB mem with a customized Linux (in other words: closed source )running Plex or something else, and the cost is like $400 (terrible hardware performance), or $800+/$1000+, way too expensive, examples:</p>
            <p><ul>
             <li><a href=""https://www.amazon.com/Synology-DS216J-NAS-DiskStation-DS216j/dp/B01BNPT1EG/ref=sr_1_4?ie=UTF8&qid=1490657211&sr=8-4&keywords=network+attached+storage"" target=""_blank"">Synology DS216J NAS DiskStation (DS216j)</a></li>
<li><a href=""https://www.amazon.com/EX4100-Diskless-Network-Attached-Storage/dp/B00TB8XMR0/ref=sr_1_13?ie=UTF8&qid=1490657211&sr=8-13&keywords=network+attached+storage"" target=""_blank"">WD My Cloud EX4100 Diskless Expert Series 4-Bay NAS</a></li>
<li><a href=""https://www.amazon.com/NETGEAR-ReadyNAS-Performance-Attached-RN524X00-100NES/dp/B01M7X2FP2/ref=sr_1_2?s=electronics&ie=UTF8&qid=1490657698&sr=1-2&keywords=network+attached+storage+DS916"" target=""_blank"">NETGEAR ReadyNAS 524X High Performance 10GbE 4-bay Network Attached Storage Diskless</a></li>
            </ul></p>           

<p>I didn't miss awesome <a href=""http://www.freenas.org/"" target=""_blank"">Free NAS</a>, but the <a href=""https://www.amazon.com/FreeNAS-Mini-Network-Attached-Diskless/dp/B00EQJ1BTU/ref=sr_1_2?ie=UTF8&qid=1490657211&sr=8-2-spons&keywords=network+attached+storage&psc=1"" target=""_blank"">hardware</a> to run it costs $999,
 OMG...</p>
            
            <h3>The $2XX solution</h3>
            <p>I bought this just right Dell Poweredge T20 for $267, it has 
 an Intel Pentium G3220 3.0GHz CPU, 4GB memory and 1TB hard drive, much more powerful than 90% NAS machines, and with 1TB drive built-in, which saves approximate another $50, i installed Ubuntu 14.04 LTS on it,
 so that it has tons of customizing ways and I can do all sorts of crazy things on it :) By installing the awesome <a href=""https://emby.media/"" target=""_blank"">Emby Media Server</a>, my home thearter finished with last piece, all my movies/videos/photos got stored inside it, I configured it to be auto wake/sleep by adding the following line into crontab:</p>
<p><code>0 22 * * * rtcwake -m disk -s 39600</code></p>
 <img src=""https://images10.newegg.com/productimage/59-155-115-04.jpg"" alt=""Dell Poweredge T20"" />
            <p>&nbsp;</p>
        ",1898,2017-03-27 21:34:33.000,1,A
159,Wayne,Passing AWS Certified Solutions Architect,Passing-AWS-Certified-Solutions-Architect,2,"<p><img style=""display: block; margin-left: auto; margin-right: auto;"" src=""https://image.ibb.co/jsUja5/AWS_CSA_Associate.png"" alt="""" width=""60%"" /></p>
<p>3 years of AWS hands on experience, two months of preparation, 30 hours of course learning, 300+ exam practices, this was the work I've done to pass the&nbsp;<strong>AWS Certified Solutions Architect - Associate</strong>, my exam result is below:</p>
<blockquote>Overall Score: 81%<br /><br />Topic Level Scoring:<br />1.0 Designing highly available, cost efficient, fault tolerant, scalable systems: 81%<br />2.0 Implementation/Deployment: 83%<br />3.0 Security: 72%<br />4.0 Troubleshooting: 100%</blockquote>
<div>&nbsp;</div>
<div>Frankly speaking, it was below my own expectation (&gt; 90%), I wish I can do better two years later ^_^.</div>
<div>My tips and experience are summarized below:</div>
<div>
<ol>
<li>*Solid* understanding on these fundamental pillar services: IAM, EC2, S3,&nbsp;RDS&nbsp;and&nbsp;VPC, I feel these covered more than 60% of the quiz (just a rough number IMHO, correct me if&nbsp;i&nbsp;am wrong).</li>
<li>Good overall understanding on CloudTrail, CloudWatch, Route53, SQS, SWF, Storage Gateway, CloudFront, doing practice exam and reading their FAQs would be sufficient.</li>
<li>#1 + #2 above should've secure 80%+, spend 80% of your exam preparation on them should be a right strategy to pass the final exam. However, please do not assume you can smash every single question which belongs to #1+#2, questions *can* be really tricky (even Ryan couldn't make it 100% ^_^)</li>
<li>For some numbers/limits that may come up in the exam, but they are not easy to remember and very easy to got messed up, you can list them on a small paper, read them 5 minutes before getting into the final exam, I posted mine below FYI:)&nbsp;</li>
</ol>
<div>Note: &nbsp;I wouldn't bother referring any detailed knowledge points for #1/#2 above or other services like Kinesis, SNS, Server Migration service, etc because Ryan had done an outstanding job in his course, thank you, Ryan! Hat off to you!</div>
<div>&nbsp;</div>
<div>I shared my learning notes and small paper for ""last-5-minutes quick catching"" before starting, hope it can help you a little bit:</div>
<div>&nbsp;</div>
<div><strong>Complete learning notes</strong>:&nbsp;<a style=""color: #1155cc;"" href=""https://www.evernote.com/l/AAGRf3_SHGdA068R-d-YzKpsmHAodYtV-kk"" target=""_blank"" rel=""noopener"" data-saferedirecturl=""https://www.google.com/url?hl=en&amp;q=https://www.evernote.com/l/AAGRf3_SHGdA068R-d-YzKpsmHAodYtV-kk&amp;source=gmail&amp;ust=1498092223534000&amp;usg=AFQjCNE9IRbqP93rb-5eCOBeFYhD2Nk71g"">https://www.evernote.com/l/<wbr />AAGRf3_SHGdA068R-d-<wbr />YzKpsmHAodYtV-kk</a></div>
<div><strong>last-5-minutes small paper</strong>:&nbsp;<a style=""color: #1155cc;"" href=""https://www.evernote.com/l/AAEEv-F5bLhEgpL9Chi90FDu3XLnVSmCpZU"" target=""_blank"" rel=""noopener"" data-saferedirecturl=""https://www.google.com/url?hl=en&amp;q=https://www.evernote.com/l/AAEEv-F5bLhEgpL9Chi90FDu3XLnVSmCpZU&amp;source=gmail&amp;ust=1498092223534000&amp;usg=AFQjCNGTtapxj1pFmgwUkByLw8ZfK1KYdA"">https://www.evernote.<wbr />com/l/AAEEv-<wbr />F5bLhEgpL9Chi90FDu3XLnVSmCpZU</a></div>
<div>&nbsp;</div>
<div>&nbsp;</div>
<p>&nbsp;</p>
</div>",2068,2017-06-21 04:05:38.867,1,A
