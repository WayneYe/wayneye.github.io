<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.3 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Utilize gzip compression in IIS - Wayne’s Geek Life</title>
<meta name="description" content="GZIP format is developed by GNU Project and standardized&nbsp;by IETF in RFC 1952, which MUST be considered by web developers to improve their websites&#39; performance, there are several&nbsp;Quintessential articles documented using gzip compression, they are:10 Tips for Writing High-Performance Web Applications Best Practices for Speeding Up Your Web Site How To Optimize Your Site With GZIP Compression IIS 7 Compression. Good? Bad? How much?A gzip compressed HTTP package&nbsp;can significantly save bandwidth thus speed up browser rendering after use hitting enter, so that user experience got improved finally, nowadays most of the popular browsers such as IE, Firefox, Chrome, Opera&nbsp;support gzip encoded content (please refer:&nbsp;http://en.wikipedia.org/wiki/HTTP_compression).PS:&nbsp;the other compression encoding is&nbsp;deflate, &quot;but it&#39;s less effective and less popular&quot; (refer:&nbsp;http://developer.yahoo.com/performance/rules.html). Yahoo uses gzip compression and suggest developers do that:&nbsp;Compression in IISFor ASP.NET developer who host website">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Wayne's Geek Life">
<meta property="og:title" content="Utilize gzip compression in IIS">
<meta property="og:url" content="https://wayneye.com/IIS-Gzip-Compression">


  <meta property="og:description" content="GZIP format is developed by GNU Project and standardized&nbsp;by IETF in RFC 1952, which MUST be considered by web developers to improve their websites&#39; performance, there are several&nbsp;Quintessential articles documented using gzip compression, they are:10 Tips for Writing High-Performance Web Applications Best Practices for Speeding Up Your Web Site How To Optimize Your Site With GZIP Compression IIS 7 Compression. Good? Bad? How much?A gzip compressed HTTP package&nbsp;can significantly save bandwidth thus speed up browser rendering after use hitting enter, so that user experience got improved finally, nowadays most of the popular browsers such as IE, Firefox, Chrome, Opera&nbsp;support gzip encoded content (please refer:&nbsp;http://en.wikipedia.org/wiki/HTTP_compression).PS:&nbsp;the other compression encoding is&nbsp;deflate, &quot;but it&#39;s less effective and less popular&quot; (refer:&nbsp;http://developer.yahoo.com/performance/rules.html). Yahoo uses gzip compression and suggest developers do that:&nbsp;Compression in IISFor ASP.NET developer who host website">





  <meta name="twitter:site" content="@wayneye">
  <meta name="twitter:title" content="Utilize gzip compression in IIS">
  <meta name="twitter:description" content="GZIP format is developed by GNU Project and standardized&nbsp;by IETF in RFC 1952, which MUST be considered by web developers to improve their websites&#39; performance, there are several&nbsp;Quintessential articles documented using gzip compression, they are:10 Tips for Writing High-Performance Web Applications Best Practices for Speeding Up Your Web Site How To Optimize Your Site With GZIP Compression IIS 7 Compression. Good? Bad? How much?A gzip compressed HTTP package&nbsp;can significantly save bandwidth thus speed up browser rendering after use hitting enter, so that user experience got improved finally, nowadays most of the popular browsers such as IE, Firefox, Chrome, Opera&nbsp;support gzip encoded content (please refer:&nbsp;http://en.wikipedia.org/wiki/HTTP_compression).PS:&nbsp;the other compression encoding is&nbsp;deflate, &quot;but it&#39;s less effective and less popular&quot; (refer:&nbsp;http://developer.yahoo.com/performance/rules.html). Yahoo uses gzip compression and suggest developers do that:&nbsp;Compression in IISFor ASP.NET developer who host website">
  <meta name="twitter:url" content="https://wayneye.com/IIS-Gzip-Compression">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2010-12-10T00:00:00-08:00">





  

  
    <meta property="fb:app_id" content="374223339969060">
  


<link rel="canonical" href="https://wayneye.com/IIS-Gzip-Compression">













<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Wayne's Geek Life Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/images/favicon/site.webmanifest">
<link rel="mask-icon" href="/assets/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">Wayne's Geek Life</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/categories/" >Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/" >Tags</a>
            </li><li class="masthead__menu-item">
              <a href="/search/" >Search</a>
            </li><li class="masthead__menu-item">
              <a href="/gallery/" >Gallery</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/me.jpg" alt="Wayne Ye" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Wayne Ye</h3>
    
    
      <p class="author__bio" itemprop="description">
        Whatever is worth doing is worth doing well!
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">San Francisco</span>
        </li>
      

      
        
          
            <li><a href="mailto:me@wayneye.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
          
        
          
            <li><a href="https://wayneye.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Website</a></li>
          
        
          
            <li><a href="https://twitter.com/wayneye" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
          
        
          
            <li><a href="https://facebook.com/WayneYeDotCom" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
          
        
          
            <li><a href="https://github.com/WayneYe/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Utilize gzip compression in IIS">
    <meta itemprop="description" content="GZIP format is developed by GNU Project and standardized&nbsp;by IETF in RFC 1952, which MUST be considered by web developers to improve their websites&#39; performance, there are several&nbsp;Quintessential articles documented using gzip compression, they are:10 Tips for Writing High-Performance Web Applications Best Practices for Speeding Up Your Web Site How To Optimize Your Site With GZIP Compression IIS 7 Compression. Good? Bad? How much?A gzip compressed HTTP package&nbsp;can significantly save bandwidth thus speed up browser rendering after use hitting enter, so that user experience got improved finally, nowadays most of the popular browsers such as IE, Firefox, Chrome, Opera&nbsp;support gzip encoded content (please refer:&nbsp;http://en.wikipedia.org/wiki/HTTP_compression).PS:&nbsp;the other compression encoding is&nbsp;deflate, &quot;but it&#39;s less effective and less popular&quot; (refer:&nbsp;http://developer.yahoo.com/performance/rules.html). Yahoo uses gzip compression and suggest developers do that:&nbsp;Compression in IISFor ASP.NET developer who host website">
    <meta itemprop="datePublished" content="December 10, 2010">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Utilize gzip compression in IIS
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-cog"></i> On this page</h4></header>
              <ul class="toc__menu">
  <li><a href="#">Compression in IIS</a></li>
  <li><a href="#">Programmatically compression using C#</a></li>
  <li><a href="#">Conclusion &amp; Hints</a></li>
</ul>
            </nav>
          </aside>
        
        <p><strong>GZIP format </strong>is developed by <a title="GNU Project" href="http://www.gnu.org/software/gzip/" target="_blank">GNU Project</a> and standardized&nbsp;by IETF in <a href="http://www.ietf.org/rfc/rfc1952.txt" target="_blank">RFC 1952</a>, which <strong>MUST </strong>be considered by web developers to improve their websites' performance, there are several&nbsp;Quintessential articles documented using gzip compression, they are:</p>

<br /><a title="10 Tips for Writing High-Performance Web Applications" href="http://msdn.microsoft.com/en-us/magazine/cc163854.aspx#S10" target="_blank"><strong>10 Tips for Writing High-Performance Web Applications</strong></a> <br />
<a title="Best Practices for Speeding Up Your Web Site" href="http://developer.yahoo.com/performance/rules.html" target="_blank"><strong>Best Practices for Speeding Up Your Web Site</strong></a> <br />

<a title="How To Optimize Your Site With GZIP Compression" href="http://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/" target="_blank"><strong>How To Optimize Your Site With GZIP Compression</strong></a> <br />

<a title="IIS 7 Compression. Good? Bad? How much?" href="http://http//weblogs.asp.net/owscott/archive/2009/02/22/iis-7-compression-good-bad-how-much.aspx" target="_blank"><strong>IIS 7 Compression. Good? Bad? How much?</strong></a><br />
<p>A gzip compressed HTTP package&nbsp;can significantly save <strong>bandwidth </strong>thus <strong>speed up browser rendering</strong> after use hitting enter, so that user experience got improved finally, nowadays most of the popular browsers such as IE, Firefox, Chrome, Opera&nbsp;support gzip encoded content (please refer:&nbsp;<a href="http://en.wikipedia.org/wiki/HTTP_compression">http://en.wikipedia.org/wiki/HTTP_compression</a>).</p>
<p>PS:&nbsp;the other compression encoding is&nbsp;<strong>deflate</strong>, "but it's less effective and less popular" (refer:&nbsp;<a href="http://developer.yahoo.com/performance/rules.html">http://developer.yahoo.com/performance/rules.html</a>). Yahoo uses gzip compression and suggest developers do that:</p>
<p><img src="http://ns5gpg.bay.livefilestore.com/y1ptFw9IXPvECzOSEjQyhOcKfHg9ILzEiWFjOSTf6L70RU_b4UrjfQ7CF5sURKB4QroFMacY_QDA2zjT5FiwOeb2a4f_0nciLOM/fiddlerobserve.png?psid=1" alt="" /></p>
<p>&nbsp;</p>
<h2>Compression in IIS</h2>
<p>For ASP.NET developer who host website<!--more--> on IIS like me, to achieve this is fairly easy, open IIS manager and select your website, then go to <strong>Compression </strong>Module. (Apache admins refer <a href="http://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/" target="_blank">here</a>)</p>
<p><img src="http://ns5gpg.bay.livefilestore.com/y1pjisdljbocK_S6GXSzuV2vEe2FqJqUZP-zKD8ULDDpZtWzlCWHDdsvZTBI_C7fjbGz0cVZopytmd3Dp8WzB7Q2Xc6vSiw1SiV/iiscompression.png?psid=1" alt="" /></p>
<p>Double click and you will see:</p>
<p><img src="http://ns5gpg.bay.livefilestore.com/y1paUldSocWDZADijYGvClrVnrMTk0GcdGsN7JLdKKFgaxdvHN1LLy4Btmq7GpYZ_v4K96jbczWK2SkVyjy9eHOwdkGWIfZXhfs/iiscompressionmodule.png?psid=1" alt="" /></p>
<p>IIS supports two kinds of compression:</p>
<ul>
<li><strong></strong><strong>Static </strong> Compression IIS compress a specific file at first time and only the first time,&nbsp;afterward&nbsp;every time IIS receive request on this file it will return the compressed data. &nbsp;This is usually used on the files not frequently changing such as a static html file, an rarely changed XML, a Word document or any file&nbsp;doesn't&nbsp;change frequently.</li>
<li><strong></strong><strong>Dynamic </strong>Compress IIS will do compression EVERY time a client's request on one specific file, this usually used on some content that often changes, for example, there is a large CSV file generating engine located on the server back end, and suppose to transfer to the client side, we can use dynamica compress.</li>
</ul>
<!--more-->
<p>Scott Forsyth's pointed out:"<strong>Compression is a trade-off of CPU for Bandwidth</strong>.",&nbsp;one of the new feature in IIS 7 is web masters can <strong>customize IIS compression strategy</strong> based on the actual need, you can modify the&nbsp;<strong>applicationHost.config </strong>under "%windir%\System32\inetsrv\config", below is my sample:</p>
<pre style="color: #000020; background: #f6f8ff;"><span style="color: #0057a6;">&lt;</span><span style="color: #333385;">httpCompression</span> <span style="color: #474796;">staticCompressionEnableCpuUsage</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">80</span><span style="color: #1060b6;">"</span> <span style="color: #474796;">dynamicCompressionDisableCpuUsage</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">80</span><span style="color: #1060b6;">"</span> <span style="color: #474796;">directory</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files</span><span style="color: #1060b6;">"</span><span style="color: #0057a6;">&gt;</span>
    <span style="color: #0057a6;">&lt;</span><span style="color: #333385;">scheme</span> <span style="color: #474796;">name</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">gzip</span><span style="color: #1060b6;">"</span> <span style="color: #474796;">dll</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">%Windir%\system32\inetsrv\gzip.dll</span><span style="color: #1060b6;">"</span> <span style="color: #0057a6;">/&gt;</span>
    <span style="color: #0057a6;">&lt;</span><span style="color: #333385;">staticTypes</span><span style="color: #0057a6;">&gt;</span>
        <span style="color: #0057a6;">&lt;</span><span style="color: #333385;">add</span> <span style="color: #474796;">mimeType</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">text/*</span><span style="color: #1060b6;">"</span> <span style="color: #474796;">enabled</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">true</span><span style="color: #1060b6;">"</span> <span style="color: #0057a6;">/&gt;</span>
        <span style="color: #0057a6;">&lt;</span><span style="color: #333385;">add</span> <span style="color: #474796;">mimeType</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">message/*</span><span style="color: #1060b6;">"</span> <span style="color: #474796;">enabled</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">true</span><span style="color: #1060b6;">"</span> <span style="color: #0057a6;">/&gt;</span>
        <span style="color: #0057a6;">&lt;</span><span style="color: #333385;">add</span> <span style="color: #474796;">mimeType</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">application/x-javascript</span><span style="color: #1060b6;">"</span> <span style="color: #474796;">enabled</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">true</span><span style="color: #1060b6;">"</span> <span style="color: #0057a6;">/&gt;</span>
        <span style="color: #0057a6;">&lt;</span><span style="color: #333385;">add</span> <span style="color: #474796;">mimeType</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">application/atom+xml</span><span style="color: #1060b6;">"</span> <span style="color: #474796;">enabled</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">true</span><span style="color: #1060b6;">"</span> <span style="color: #0057a6;">/&gt;</span>
        <span style="color: #0057a6;">&lt;</span><span style="color: #333385;">add</span> <span style="color: #474796;">mimeType</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">application/xaml+xml</span><span style="color: #1060b6;">"</span> <span style="color: #474796;">enabled</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">true</span><span style="color: #1060b6;">"</span> <span style="color: #0057a6;">/&gt;</span>
        <span style="color: #0057a6;">&lt;</span><span style="color: #333385;">add</span> <span style="color: #474796;">mimeType</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">*/*</span><span style="color: #1060b6;">"</span> <span style="color: #474796;">enabled</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">false</span><span style="color: #1060b6;">"</span> <span style="color: #0057a6;">/&gt;</span>
    <span style="color: #0057a6;">&lt;/</span><span style="color: #333385;">staticTypes</span><span style="color: #0057a6;">&gt;</span>
    <span style="color: #0057a6;">&lt;</span><span style="color: #333385;">dynamicTypes</span><span style="color: #0057a6;">&gt;</span>
        <span style="color: #0057a6;">&lt;</span><span style="color: #333385;">add</span> <span style="color: #474796;">mimeType</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">text/*</span><span style="color: #1060b6;">"</span> <span style="color: #474796;">enabled</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">true</span><span style="color: #1060b6;">"</span> <span style="color: #0057a6;">/&gt;</span>
        <span style="color: #0057a6;">&lt;</span><span style="color: #333385;">add</span> <span style="color: #474796;">mimeType</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">message/*</span><span style="color: #1060b6;">"</span> <span style="color: #474796;">enabled</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">true</span><span style="color: #1060b6;">"</span> <span style="color: #0057a6;">/&gt;</span>
        <span style="color: #0057a6;">&lt;</span><span style="color: #333385;">add</span> <span style="color: #474796;">mimeType</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">application/x-javascript</span><span style="color: #1060b6;">"</span> <span style="color: #474796;">enabled</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">true</span><span style="color: #1060b6;">"</span> <span style="color: #0057a6;">/&gt;</span>
        <span style="color: #0057a6;">&lt;</span><span style="color: #333385;">add</span> <span style="color: #474796;">mimeType</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">*/*</span><span style="color: #1060b6;">"</span> <span style="color: #474796;">enabled</span><span style="color: #308080;">=</span><span style="color: #1060b6;">"</span><span style="color: #1060b6;">false</span><span style="color: #1060b6;">"</span> <span style="color: #0057a6;">/&gt;</span>
    <span style="color: #0057a6;">&lt;/</span><span style="color: #333385;">dynamicTypes</span><span style="color: #0057a6;">&gt;</span>
<span style="color: #0057a6;">&lt;/</span><span style="color: #333385;">httpCompression</span><span style="color: #0057a6;">&gt;</span>
</pre>
<p>More detailed is described here:&nbsp;<a href="http://www.iis.net/ConfigReference/system.webServer/httpCompression">http://www.iis.net/ConfigReference/system.webServer/httpCompression</a>PS, Dynamic Compress is not installed by default, we need install it by turning on Windows Features:</p>
<p><img src="http://ns5gpg.bay.livefilestore.com/y1pjisdljbocK-qNY6e9ZSj8QC_dToXc0Dnor1jqqMAWycVUFQDCcU3kMC9_gUzxJPU1ltzRKvtj2ggCUe0gx_eZH62DHXDvyIU/dynamiccompression.png?psid=1" alt="" /></p>
<p>My server host provider uses IIS 6.0 and does NOT enabling compression, I checked compression status for<a href="http://wayneye.com" target="_blank"> http://wayneye.com</a> by using the free tool provided by <a href="http://www.port80software.com/products/zipenable/" target="_blank">port80software </a>and the result is:</p>
<p><img src="http://ns5gpg.bay.livefilestore.com/y1pzajHQoK-MaLdyX4PY2Y5wcXfbsS7lJdn0tdg53QxTuF__VTymhzmuL61QPf_Df-TOgAmkardVRxn64NQViT1pGWrKsW6HaWd/wayneyedotcomcompressionstatus.png?psid=1" alt="" /></p>
<p>WOW, I must convince them to enable gzip compression!!</p>
<p>&nbsp;</p>
<h2>Programmatically compression using C#</h2>
<p>We can also programmatically compress the ASP.NET http response, for example I want to transfer a large CSVfile to the client, since csv file is in pure plaint text, it usually has high compression rate, sample code below:</p>
<pre style="color: #000020; background: #f6f8ff;"><span style="color: #200080; font-weight: bold;">protected</span> <span style="color: #200080; font-weight: bold;">void</span> Page_Load<span style="color: #308080;">(</span><span style="color: #200080; font-weight: bold;">object</span> sender<span style="color: #308080;">,</span> EventArgs e<span style="color: #308080;">)</span>
<span style="color: #406080;">{</span>
    Response<span style="color: #308080;">.</span>Filter <span style="color: #308080;">=</span> <span style="color: #200080; font-weight: bold;">new</span> System<span style="color: #308080;">.</span>IO<span style="color: #308080;">.</span>Compression<span style="color: #308080;">.</span>GZipStream<span style="color: #308080;">(</span>Response<span style="color: #308080;">.</span>Filter<span style="color: #308080;">,</span>
                            System<span style="color: #308080;">.</span>IO<span style="color: #308080;">.</span>Compression<span style="color: #308080;">.</span>CompressionMode<span style="color: #308080;">.</span>Compress<span style="color: #308080;">)</span><span style="color: #406080;">;</span>
    Response<span style="color: #308080;">.</span>Headers<span style="color: #308080;">.</span>Remove<span style="color: #308080;">(</span><span style="color: #800000;">"</span><span style="color: #1060b6;">Content-Encoding</span><span style="color: #800000;">"</span><span style="color: #308080;">)</span><span style="color: #406080;">;</span>
    <span style="background-color: #ffff00;">Response<span style="color: #308080;">.</span>AddHeader<span style="color: #308080;">(</span><span style="color: #800000;">"</span><span style="color: #1060b6;">Content-Encoding</span><span style="color: #800000;">"</span><span style="color: #308080;">,</span> <span style="color: #800000;">"</span><span style="color: #1060b6;">gzip</span><span style="color: #800000;">"</span><span style="color: #308080;">)</span><span style="color: #406080;">;</span></span>
    Response<span style="color: #308080;">.</span>ContentType <span style="color: #308080;">=</span> <span style="color: #800000;">"</span><span style="color: #1060b6;">text/csv</span><span style="color: #800000;">"</span><span style="color: #406080;">;</span>
    Response<span style="color: #308080;">.</span>TransmitFile<span style="color: #308080;">(</span><span style="color: #800000;">"</span><span style="color: #1060b6;">D:\\IamLarge.csv</span><span style="color: #800000;">"</span><span style="color: #308080;">)</span><span style="color: #406080;">;</span>
    Response<span style="color: #308080;">.</span>End<span style="color: #308080;">(</span><span style="color: #308080;">)</span><span style="color: #406080;">;</span>
<span style="color: #406080;">}</span>
</pre>
<p>If the request was submitted by a client browser, browser will automatically <strong>decompress </strong>the Http response, &nbsp;but in the Windows client application or Windows Service, we developers can also adopt gzip compression to save bandwidth, once received gzip Http package from the server, we can programmatically decompressing, I wrote a client console application to submit the Http request and receive/decompress the Http response package.</p>
<pre style="color: #000020; background: #f6f8ff;"><span style="color: #595979;">/* Submit Http request to server with Accept-Encoding: gzip */</span>
WebClient client <span style="color: #308080;">=</span> <span style="color: #200080; font-weight: bold;">new</span> WebClient<span style="color: #308080;">(</span><span style="color: #308080;">)</span><span style="color: #406080;">;</span>
<span style="color: #595979;">// It is mandatory by the client, if this header information is not specified, server will return the original content type, in my case, it is: text/csv</span>
<span style="color: #000000; background-color: #ffff00;">client.Headers.Add("Accept-Encoding", "gzip");</span>

<span style="color: #200080; font-weight: bold;">using</span><span style="color: #308080;">(</span>Stream gzipData <span style="color: #308080;">=</span> client<span style="color: #308080;">.</span>OpenRead<span style="color: #308080;">(</span><span style="color: #800000;">"</span><span style="color: #1060b6;">http://localhost/StudyASPNET/gzipHttp/ReturnGzipPackage.aspx</span><span style="color: #800000;">"</span><span style="color: #308080;">)</span><span style="color: #308080;">)</span>
<span style="color: #406080;">{</span>
    WebHeaderCollection responseHeaders <span style="color: #308080;">=</span> client<span style="color: #308080;">.</span>ResponseHeaders<span style="color: #406080;">;</span>

    <span style="color: #200080; font-weight: bold;">using</span><span style="color: #308080;">(</span>GZipStream gzip <span style="color: #308080;">=</span> <span style="color: #200080; font-weight: bold;">new</span> GZipStream<span style="color: #308080;">(</span>gzipData<span style="color: #308080;">,</span> CompressionMode<span style="color: #308080;">.</span>Decompress<span style="color: #308080;">)</span><span style="color: #308080;">)</span>
    <span style="color: #406080;">{</span>
        <span style="color: #200080; font-weight: bold;">using</span><span style="color: #308080;">(</span>StreamReader reader<span style="color: #308080;">=</span> <span style="color: #200080; font-weight: bold;">new</span> StreamReader<span style="color: #308080;">(</span>gzip<span style="color: #308080;">)</span><span style="color: #308080;">)</span>
        <span style="color: #406080;">{</span>
            String content <span style="color: #308080;">=</span> reader<span style="color: #308080;">.</span>ReadToEnd<span style="color: #308080;">(</span><span style="color: #308080;">)</span><span style="color: #406080;">;</span>
            File<span style="color: #308080;">.</span>WriteAllText<span style="color: #308080;">(</span><span style="color: #800000;">"</span><span style="color: #1060b6;">D:\\Downloaded.csv</span><span style="color: #800000;">"</span><span style="color: #308080;">,</span> content<span style="color: #308080;">)</span><span style="color: #406080;">;</span>
        <span style="color: #406080;">}</span>
    <span style="color: #406080;">}</span>
<span style="color: #406080;">}</span>
</pre>
<p>Please be aware of one thing: "<strong>Accept-Encoding: gzip</strong>" is supported by all browsers <strong>by default</strong>, i.e. browser will automatically decompresses compressed Http package, so in the code we MUST <strong>explicitly </strong>specify "<strong>Accept-Encoding: gzip</strong>", below is what I investigated: First time, I explicitly set "Accept-Encoding: gzip", the Http response header contains "<strong>Content-Encoding: gzip</strong>", and the depression/file saving operations complete without any issues.</p>
<p><img src="http://ns5gpg.bay.livefilestore.com/y1pzajHQoK-MaLof_PHBuaGl4-F0Q8nxi2_lnxxeWc4fFqy5fPO14Ty34QGoyge1i-xlCHeystf1qUVV4qAOO_QeNd4NkVEHq2X/acceptgzipheader.png?psid=1" alt="" /></p>
<p>Second time, I commented out the code, the result is, received Http headers does NOT contain content encoding information, since the server <strong>deemed you doesn't accept gzip encoded content</strong>, it won't return you compressed file, instead, <strong>it returned the original file</strong>, in my case, the csv file itself.</p>
<p><img src="http://ns5gpg.bay.livefilestore.com/y1pXQ-_NIiU84bGiZaFJvc4vCw80dOWpGOAN3WW9R1M3lqcMhmtJ2hCbY6ydJRSPF7LwaWTNt_vVEQczkv4mgDiVu8myTTL-u7u/withoutsettingacceptgzip.png?psid=1" alt="" /></p>
<h2>Conclusion &amp; Hints</h2>
<p>Using Http Compression is one of the best practice to speed up the web sites, usually consider compress files like below:</p>
<ol>
<li><strong>Doesn't change frequently.</strong></li>
<li><strong>Has a significant compress-rate such as Html, XML, CSV, etc.</strong></li>
<li><strong>Dynamically generated and the server CPU has availability.</strong></li>
</ol>
<p>Please be aware that do NOT compress <strong>JPG, PNG, FLV, XAP </strong>and those kind of image/media files, since they are <strong>already </strong>compressed, compress them will waste CPU resources and you got a compressed copy with few KBs reduced:)</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#hack" class="page__taxonomy-item" rel="tag">Hack</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#hack" class="page__taxonomy-item" rel="tag">Hack</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2010-12-10T00:00:00-08:00">December 10, 2010</time></p>
        
      </footer>

      <section class="page__share">
  <!---->
    <!--<h4 class="page__share-title">Share on</h4>-->
  <!---->

  <!--<a href="https://twitter.com/intent/tweet?via=wayneye&text=Utilize+gzip+compression+in+IIS%20https%3A%2F%2Fwayneye.com%2FIIS-Gzip-Compression" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>-->

  <!--<a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwayneye.com%2FIIS-Gzip-Compression" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>-->

  <!--<a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fwayneye.com%2FIIS-Gzip-Compression" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>-->

  
  <figure style="margin-top: 10px; width: 380px;">
      <a href="/assets/images/dashang.jpg"><img src="/assets/images/dashang.jpg" alt="微信打赏"></a>
  </figure>
</section>


      
  <nav class="pagination">
    
      <a href="/Bought-Nikon-D7000" class="pagination--pager" title="败了Nikon D7000
">Previous</a>
    
    
      <a href="/IPAddress-To-Geolocation" class="pagination--pager" title="IP Address to Geolocation
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Leave a comment</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/Ireland-Trip-2019" rel="permalink">Ireland Trip 2019
</a>
      
    </h2>
    
    <p class="archive__item-excerpt" itemprop="description">
  WHEN YOU ARE OLD



  When you are old and grey and full of sleep, 
And nodding by the fire, take down this book, 
And slowly read, and dream of the soft look 
Your eyes had once, and of their shadows deep; 
How many loved your moments of glad grace, 
And loved your beauty with love false or true, 
But one man loved the pilgrim soul in you, 
And loved the sorrows of your changing face; 
And bending down beside the glowing bars, 
Murmur, a little sadly, how Love fled 
And paced upon the mountains overhead 
And hid his face amid a crowd of stars. 
– By William Butler Yeats



  当你年老时 
　　 　...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/Apply-UK-Visit-VISA" rel="permalink">Apply UK Visit VISA
</a>
      
    </h2>
    
    <p class="archive__item-excerpt" itemprop="description">Background

I was planning to attend #adskfootball2019 in Dublin, Ireland from Jun 14th to Jun 16th, 2019:

    
    Autodesk Football Tournament 2019


In order to attend, I needed applying Ireland VISA, and since I was planning to fly back to Shanghai later in June, so I thought I could just fly from SF to Dublin, then Dublin to Shanghai, and soon I realized that there is no direct flight from DUB to PVG, so a practical (and also very fun and economic) option is to fly from Dublin to London, and then London to Shanghai, bingo ^_^

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/Master-AWS-Development-Video-Published" rel="permalink">Master AWS Development Video Published
</a>
      
    </h2>
    
    <p class="archive__item-excerpt" itemprop="description">Course overview video



Publishing information

After 8 months of continuously hard working, this &lt;Master AWS Development&gt; video course is now live at: Packt Website, I described this course as below:


  Amazon Web Services (AWS) is the gold standard of the cloud. If you are web and cloud computing developer, your life becomes much easier by diving deeper into AWS.



  This course shows you how to use AWS services such as IAM, S3, EC2, and RDS/Dynamo to make your applications reliable and have a consistent performance. You’ll build modern serverless applications on the cloud, and u...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/self-improvement/passing-aws-certified-solutions-architect/" rel="permalink">Passing AWS Certified Solutions Architect
</a>
      
    </h2>
    
    <p class="archive__item-excerpt" itemprop="description">

3 years of AWS hands on experience, two months of preparation, 30 hours of course learning, 300+ exam practices, this was the work I’ve done to pass the AWS Certified Solutions Architect - Associate, my exam result is below:

</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4ea2897777c94202"></script>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="mailto:admin@wayneye.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
        
      
        
          <li><a href="https://wayneye.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Website</a></li>
        
      
        
          <li><a href="https://twitter.com/wayneye" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://facebook.com/WayneYeDotCom" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
        
      
        
          <li><a href="https://github.com/WayneYe/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 Wayne Ye. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js" integrity="sha384-g5uSoOSBd7KkhAMlnQILrecXvzst9TdC09/VM+pjDTCM+1il8RHz5fKANTFFb+gQ" crossorigin="anonymous"></script>







    
  <script>
    var disqus_config = function () {
      this.page.url = "https://wayneye.com/IIS-Gzip-Compression";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "/Utilize-gzip-compression-in-IIS"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://wayneye.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





  </body>
</html>
